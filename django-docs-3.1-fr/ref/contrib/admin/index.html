
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Le site d’administration de Django &#8212; Documentation Django 3.1.3.dev</title>
    <link rel="stylesheet" href="../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../../_static/translations.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Recherche" href="../../../search.html" />
    <link rel="next" title="Actions d’administration" href="actions.html" />
    <link rel="prev" title="Paquets contrib" href="../index.html" />



 
<script src="../../../templatebuiltins.js"></script>
<script>
(function($) {
    if (!django_template_builtins) {
       // templatebuiltins.js missing, do nothing.
       return;
    }
    $(document).ready(function() {
        // Hyperlink Django template tags and filters
        var base = "../../templates/builtins.html";
        if (base == "#") {
            // Special case for builtins.html itself
            base = "";
        }
        // Tags are keywords, class '.k'
        $("div.highlight\\-html\\+django span.k").each(function(i, elem) {
             var tagname = $(elem).text();
             if ($.inArray(tagname, django_template_builtins.ttags) != -1) {
                 var fragment = tagname.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + tagname + "</a>");
             }
        });
        // Filters are functions, class '.nf'
        $("div.highlight\\-html\\+django span.nf").each(function(i, elem) {
             var filtername = $(elem).text();
             if ($.inArray(filtername, django_template_builtins.tfilters) != -1) {
                 var fragment = filtername.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + filtername + "</a>");
             }
        });
    });
})(jQuery);</script>

  </head><body>

    <div class="document">
  <div id="custom-doc" class="yui-t6">
    <div id="hd">
      <h1><a href="../../../index.html">Documentation Django 3.1.3.dev</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../../../index.html">Home</a>  |
        <a title="Table of contents" href="../../../contents.html">Table of contents</a>  |
        <a title="Global index" href="../../../genindex.html">Index</a>  |
        <a title="Module index" href="../../../py-modindex.html">Modules</a>
      </div>
      <div class="nav">
    &laquo; <a href="../index.html" title="Paquets &lt;code class=&#34;docutils literal notranslate&#34;&gt;&lt;span class=&#34;pre&#34;&gt;contrib&lt;/span&gt;&lt;/code&gt;">previous</a>
     |
    <a href="../../index.html" title="Référence de l’API" accesskey="U">up</a>
   |
    <a href="actions.html" title="Actions d’administration">next</a> &raquo;</div>
    </div>

    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="ref-contrib-admin-index">
            
  <div class="section" id="s-module-django.contrib.admin">
<span id="s-the-django-admin-site"></span><span id="module-django.contrib.admin"></span><span id="the-django-admin-site"></span><h1>Le site d’administration de Django<a class="headerlink" href="#module-django.contrib.admin" title="Lien permanent vers ce titre">¶</a></h1>
<p>Une des parties les plus puissantes de Django est l’interface d’administration automatique. Elle lit les métadonnées de vos modèles pour fournir une interface rapide et centrée sur les modèles où les utilisateurs de confiance peuvent gérer le contenu du site. L’utilisation recommandée du site d’administration est limitée à un outil de gestion interne d’un organisme. Il n’est pas conçu pour servir de base à la construction d’une interface publique complète.</p>
<p>Le site d’administration présente de nombreux points d’entrée visant la personnalisation, mais ne vous bornez pas à utiliser exclusivement ces points d’entrée. Si vous avez besoin de fournir une interface plus centrée sur les processus et qui fait abstraction des détails d’implémentation autour des tables et champs de bases de données, c’est qu’il est vraisemblablement le moment d’écrire vos propres vues.</p>
<p>Dans ce document, nous présentons la manière d’activer, d’utiliser et de personnaliser l’interface d’administration de Django.</p>
<div class="section" id="s-overview">
<span id="overview"></span><h2>Aperçu<a class="headerlink" href="#overview" title="Lien permanent vers ce titre">¶</a></h2>
<p>L’administration est activée dans le modèle de projet par défaut utilisé par <a class="reference internal" href="../../django-admin.html#django-admin-startproject"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">startproject</span></code></a>.</p>
<p>Si vous n’utilisez pas le gabarit de projet par défaut, voici les exigences :</p>
<ol class="arabic">
<li><p class="first">Ajoutez <code class="docutils literal notranslate"><span class="pre">'django.contrib.admin'</span></code> et ses dépendances - :<a class="reference internal" href="../../../topics/auth/index.html#module-django.contrib.auth" title="django.contrib.auth: Django's authentication framework."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.auth</span></code></a>, <a class="reference internal" href="../contenttypes.html#module-django.contrib.contenttypes" title="django.contrib.contenttypes: Provides generic interface to installed models."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.contenttypes</span></code></a>, <a class="reference internal" href="../messages.html#module-django.contrib.messages" title="django.contrib.messages: Provides cookie- and session-based temporary message storage."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.messages</span></code></a> et <a class="reference internal" href="../../../topics/http/sessions.html#module-django.contrib.sessions" title="django.contrib.sessions: Provides session management for Django projects."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.sessions</span></code></a> - à votre réglage <a class="reference internal" href="../../settings.html#std:setting-INSTALLED_APPS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">INSTALLED_APPS</span></code></a>.</p>
</li>
<li><p class="first">Configurez un moteur de gabarit <a class="reference internal" href="../../../topics/templates.html#django.template.backends.django.DjangoTemplates" title="django.template.backends.django.DjangoTemplates"><code class="xref py py-class docutils literal notranslate"><span class="pre">DjangoTemplates</span></code></a> dans votre réglage <a class="reference internal" href="../../settings.html#std:setting-TEMPLATES"><code class="xref std std-setting docutils literal notranslate"><span class="pre">TEMPLATES</span></code></a> avec <code class="docutils literal notranslate"><span class="pre">django.template.context_processors.request</span></code>, <code class="docutils literal notranslate"><span class="pre">django.contrib.auth.context_processors.auth</span></code> et <code class="docutils literal notranslate"><span class="pre">django.contrib.messages.context_processors.messages</span></code> dans l’option <code class="docutils literal notranslate"><span class="pre">'context_processors'</span></code> de <a class="reference internal" href="../../settings.html#std:setting-TEMPLATES-OPTIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">OPTIONS</span></code></a>.</p>
<div class="versionchanged">
<span class="title">Changed in Django 3.1:</span> <p><code class="docutils literal notranslate"><span class="pre">django.template.context_processors.request</span></code> a été ajouté comme exigence dans l’option <code class="docutils literal notranslate"><span class="pre">'context_processors'</span></code> afin de prendre en charge la nouvelle barre latérale <a class="reference internal" href="#django.contrib.admin.AdminSite.enable_nav_sidebar" title="django.contrib.admin.AdminSite.enable_nav_sidebar"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AdminSite.enable_nav_sidebar</span></code></a>.</p>
</div>
</li>
<li><p class="first">Si vous avez personnalisé le réglage <a class="reference internal" href="../../settings.html#std:setting-MIDDLEWARE"><code class="xref std std-setting docutils literal notranslate"><span class="pre">MIDDLEWARE</span></code></a>, <a class="reference internal" href="../../middleware.html#django.contrib.auth.middleware.AuthenticationMiddleware" title="django.contrib.auth.middleware.AuthenticationMiddleware"><code class="xref py py-class docutils literal notranslate"><span class="pre">django.contrib.auth.middleware.AuthenticationMiddleware</span></code></a> et <a class="reference internal" href="../../middleware.html#django.contrib.messages.middleware.MessageMiddleware" title="django.contrib.messages.middleware.MessageMiddleware"><code class="xref py py-class docutils literal notranslate"><span class="pre">django.contrib.messages.middleware.MessageMiddleware</span></code></a> doivent s’y trouver.</p>
</li>
<li><p class="first"><a class="reference internal" href="#hooking-adminsite-to-urlconf"><span class="std std-ref">Insérez les URL d’administration dans votre configuration d’URL</span></a>.</p>
</li>
</ol>
<p>Après avoir suivi ces étapes, vous serez en mesure d’utiliser le site d’administration en visitant l’URL à laquelle vous l’avez rattaché (<code class="docutils literal notranslate"><span class="pre">/admin/</span></code>, par défaut).</p>
<p>Si vous avez besoin de créer un utilisateur avec lequel vous connecter, utilisez la commande <a class="reference internal" href="../../django-admin.html#django-admin-createsuperuser"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">createsuperuser</span></code></a>. Par défaut, la connexion au site d’administration requiert qu’un des attributs <a class="reference internal" href="../auth.html#django.contrib.auth.models.User.is_superuser" title="django.contrib.auth.models.User.is_superuser"><code class="xref py py-attr docutils literal notranslate"><span class="pre">is_superuser</span></code></a> ou <a class="reference internal" href="../auth.html#django.contrib.auth.models.User.is_staff" title="django.contrib.auth.models.User.is_staff"><code class="xref py py-attr docutils literal notranslate"><span class="pre">is_staff</span></code></a> soit coché (<code class="docutils literal notranslate"><span class="pre">True</span></code>).</p>
<p>Finalement, déterminez quels modèles de votre application doivent être modifiables dans l’interface d’administration. Pour chacun de ces modèles, inscrivez-les dans l’administration tel qu’indiqué dans <a class="reference internal" href="#django.contrib.admin.ModelAdmin" title="django.contrib.admin.ModelAdmin"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelAdmin</span></code></a>.</p>
<div class="section" id="s-other-topics">
<span id="other-topics"></span><h3>Autres sujets<a class="headerlink" href="#other-topics" title="Lien permanent vers ce titre">¶</a></h3>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="actions.html">Actions d’administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="admindocs.html">Le générateur de documentation de l’administration de Django</a></li>
<li class="toctree-l1"><a class="reference internal" href="javascript.html">Personnalisations de JavaScript dans l’interface d’administration</a></li>
</ul>
</div>
<div class="admonition seealso">
<p class="first admonition-title">Voir aussi</p>
<p>Pour plus d’informations à propos de la manière de servir les fichiers statiques (images, JavaScript et CSS) associés au site d’administration en production, voir <a class="reference internal" href="../../../howto/deployment/wsgi/modwsgi.html#serving-files"><span class="std std-ref">Service de fichiers</span></a>.</p>
<p class="last">Des problèmes&nbsp;? Essayez <a class="reference internal" href="../../../faq/admin.html"><span class="doc">FAQ&nbsp;: l’interface d’administration</span></a>.</p>
</div>
</div>
</div>
<div class="section" id="s-modeladmin-objects">
<span id="modeladmin-objects"></span><h2>Objets <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code><a class="headerlink" href="#modeladmin-objects" title="Lien permanent vers ce titre">¶</a></h2>
<dl class="class">
<dt id="django.contrib.admin.ModelAdmin">
<em class="property">class </em><code class="descname">ModelAdmin</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La classe <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code> est la représentation d’un modèle dans l’interface d’administration. Normalement, ces classes sont stockées dans un fichier nommé <code class="docutils literal notranslate"><span class="pre">admin.py</span></code> dans votre application. Jetons un œil à un exemple de <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="k">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">myproject.myapp.models</span> <span class="k">import</span> <span class="n">Author</span>

<span class="k">class</span> <span class="nc">AuthorAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">pass</span>
<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Author</span><span class="p">,</span> <span class="n">AuthorAdmin</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition-do-you-need-a-modeladmin-object-at-all admonition">
<p class="first admonition-title">Avez-vous vraiment besoin d’un objet <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code>?</p>
<p>Dans l’exemple précédent, la classe <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code> ne définit pas (encore) de valeurs personnalisées. En conséquence, l’interface d’administration par défaut sera fournie. Si celle-ci vous satisfait, vous n’avez pas du tout besoin de définir un objet <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code> – vous pouvez inscrire la classe du modèle sans fournir de description de type  <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code>. L’exemple précédent pourrait être simplifié en&nbsp;:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="k">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">myproject.myapp.models</span> <span class="k">import</span> <span class="n">Author</span>

<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Author</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>

<div class="section" id="s-the-register-decorator">
<span id="the-register-decorator"></span><h3>Le décorateur <code class="docutils literal notranslate"><span class="pre">register</span></code><a class="headerlink" href="#the-register-decorator" title="Lien permanent vers ce titre">¶</a></h3>
<dl class="function">
<dt id="django.contrib.admin.register">
<code class="descname">register</code>(<em>*models</em>, <em>site=django.contrib.admin.sites.site</em>)<a class="headerlink" href="#django.contrib.admin.register" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Il existe aussi un décorateur pour l’enregistrement des classes <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="k">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="k">import</span> <span class="n">Author</span>

<span class="nd">@admin</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Author</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">AuthorAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>Il reçoit une ou plusieurs classes de modèles à inscrire à <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code>. Si vous utilisez une classe <a class="reference internal" href="#django.contrib.admin.AdminSite" title="django.contrib.admin.AdminSite"><code class="xref py py-class docutils literal notranslate"><span class="pre">AdminSite</span></code></a> personnalisée, transmettez-la en utilisant le paramètre nommé <code class="docutils literal notranslate"><span class="pre">site</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="k">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="k">import</span> <span class="n">Author</span><span class="p">,</span> <span class="n">Editor</span><span class="p">,</span> <span class="n">Reader</span>
<span class="kn">from</span> <span class="nn">myproject.admin_site</span> <span class="k">import</span> <span class="n">custom_admin_site</span>

<span class="nd">@admin</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Author</span><span class="p">,</span> <span class="n">Reader</span><span class="p">,</span> <span class="n">Editor</span><span class="p">,</span> <span class="n">site</span><span class="o">=</span><span class="n">custom_admin_site</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>Vous ne pouvez pas utiliser ce décorateur si devez faire référence à la classe d’administration de modèle dans la méthode <code class="docutils literal notranslate"><span class="pre">__init__()</span></code>, par ex. <code class="docutils literal notranslate"><span class="pre">super(PersonAdmin,</span> <span class="pre">self).__init__(*args,</span> <span class="pre">**kwargs)</span></code>. Vous pouvez utiliser <code class="docutils literal notranslate"><span class="pre">super().__init__(*args,</span> <span class="pre">**kwargs)</span></code> .</p>
</dd></dl>

</div>
<div class="section" id="s-discovery-of-admin-files">
<span id="discovery-of-admin-files"></span><h3>Découvert des fichiers d’administration<a class="headerlink" href="#discovery-of-admin-files" title="Lien permanent vers ce titre">¶</a></h3>
<p>Lorsque vous placez <code class="docutils literal notranslate"><span class="pre">'django.contrib.admin'</span></code> dans votre réglage <a class="reference internal" href="../../settings.html#std:setting-INSTALLED_APPS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">INSTALLED_APPS</span></code></a>, Django recherche automatiquement un module <code class="docutils literal notranslate"><span class="pre">admin</span></code> dans chaque application et l’importe.</p>
<dl class="class">
<dt id="django.contrib.admin.apps.AdminConfig">
<em class="property">class </em><code class="descclassname">apps.</code><code class="descname">AdminConfig</code><a class="headerlink" href="#django.contrib.admin.apps.AdminConfig" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Il s’agit de la classe <a class="reference internal" href="../../applications.html#django.apps.AppConfig" title="django.apps.AppConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">AppConfig</span></code></a> par défaut pour l’administration. Elle appelle <a class="reference internal" href="#django.contrib.admin.autodiscover" title="django.contrib.admin.autodiscover"><code class="xref py py-func docutils literal notranslate"><span class="pre">autodiscover()</span></code></a> au démarrage de Django.</p>
</dd></dl>

<dl class="class">
<dt id="django.contrib.admin.apps.SimpleAdminConfig">
<em class="property">class </em><code class="descclassname">apps.</code><code class="descname">SimpleAdminConfig</code><a class="headerlink" href="#django.contrib.admin.apps.SimpleAdminConfig" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Cette classe fonctionne comme <a class="reference internal" href="#django.contrib.admin.apps.AdminConfig" title="django.contrib.admin.apps.AdminConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">AdminConfig</span></code></a>, sauf qu’elle n’appelle pas <a class="reference internal" href="#django.contrib.admin.autodiscover" title="django.contrib.admin.autodiscover"><code class="xref py py-func docutils literal notranslate"><span class="pre">autodiscover()</span></code></a>.</p>
<dl class="attribute">
<dt id="django.contrib.admin.apps.SimpleAdminConfig.default_site">
<code class="descname">default_site</code><a class="headerlink" href="#django.contrib.admin.apps.SimpleAdminConfig.default_site" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Un chemin d’importation à syntaxe pointée vers la classe de site d’administration par défaut ou vers un objet exécutable renvoyant une instance de site. La valeur par défaut est <code class="docutils literal notranslate"><span class="pre">'django.contrib.admin.sites.AdminSite'</span></code>. Voir <a class="reference internal" href="#overriding-default-admin-site"><span class="std std-ref">Surcharge du site d’administration par défaut</span></a> pour les instructions d’utilisation.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="django.contrib.admin.autodiscover">
<code class="descname">autodiscover</code>()<a class="headerlink" href="#django.contrib.admin.autodiscover" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Cette fonction tente d’importer un module <code class="docutils literal notranslate"><span class="pre">admin</span></code> dans chaque application installée. Ces modules sont supposés inscrire des modèles à l’application d’administration.</p>
<p>Typiquement, il n’est pas nécessaire d’appeler cette fonction directement car <a class="reference internal" href="#django.contrib.admin.apps.AdminConfig" title="django.contrib.admin.apps.AdminConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">AdminConfig</span></code></a> l’appelle au démarrage de Django.</p>
</dd></dl>

<p>Si vous utilisez un <code class="docutils literal notranslate"><span class="pre">AdminSite</span></code> personnalisé, il est courant d’importer toutes les sous-classes de <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code> dans son code et de les inscrire auprès du site <code class="docutils literal notranslate"><span class="pre">AdminSite</span></code> personnalisé. Dans ce cas et dans l’optique de désactiver la découverte automatique, il s’agit de remplacer <code class="docutils literal notranslate"><span class="pre">'django.contrib.admin'</span></code> par <code class="docutils literal notranslate"><span class="pre">'django.contrib.admin.apps.SimpleAdminConfig'</span></code> dans le réglage <a class="reference internal" href="../../settings.html#std:setting-INSTALLED_APPS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">INSTALLED_APPS</span></code></a>.</p>
</div>
<div class="section" id="s-modeladmin-options">
<span id="modeladmin-options"></span><h3>Options de <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code><a class="headerlink" href="#modeladmin-options" title="Lien permanent vers ce titre">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code> est une classe très flexible. Elle dispose de plusieurs options pour pouvoir personnaliser l’interface. Toutes les options sont définies sur la sous-classe <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="k">import</span> <span class="n">admin</span>

<span class="k">class</span> <span class="nc">AuthorAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">date_hierarchy</span> <span class="o">=</span> <span class="s1">&#39;pub_date&#39;</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.actions">
<code class="descclassname">ModelAdmin.</code><code class="descname">actions</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.actions" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Une liste d’actions disponibles sur la page de liste pour modification. Voir <a class="reference internal" href="actions.html"><span class="doc">Actions d’administration</span></a> pour plus de détails.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.actions_on_top">
<code class="descclassname">ModelAdmin.</code><code class="descname">actions_on_top</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.actions_on_top" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.actions_on_bottom">
<code class="descclassname">ModelAdmin.</code><code class="descname">actions_on_bottom</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.actions_on_bottom" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Contrôle où s’affiche la barre d’actions sur la page. Par défaut, la page de liste pour modification de l’administration affiche les actions en haut de la page (<code class="docutils literal notranslate"><span class="pre">actions_on_top</span> <span class="pre">=</span> <span class="pre">True;</span> <span class="pre">actions_on_bottom</span> <span class="pre">=</span> <span class="pre">False</span></code>).</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.actions_selection_counter">
<code class="descclassname">ModelAdmin.</code><code class="descname">actions_selection_counter</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.actions_selection_counter" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Contrôle si un compteur de sélection est affiché à côté de la liste déroulante d’actions. Par défaut, la page de liste pour modification de l’administration l’affichera (<code class="docutils literal notranslate"><span class="pre">actions_selection_counter</span> <span class="pre">=</span> <span class="pre">True</span></code>).</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.date_hierarchy">
<code class="descclassname">ModelAdmin.</code><code class="descname">date_hierarchy</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.date_hierarchy" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Attribuez à <code class="docutils literal notranslate"><span class="pre">date_hierarchy</span></code> le nom d’un champ <code class="docutils literal notranslate"><span class="pre">DateField</span></code> ou <code class="docutils literal notranslate"><span class="pre">DateTimeField</span></code> de votre modèle, et la page de liste pour modification inclura une navigation par filtres sélectifs basés sur les dates en fonction de ce champ.</p>
<p>Exemple&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">date_hierarchy</span> <span class="o">=</span> <span class="s1">&#39;pub_date&#39;</span>
</pre></div>
</div>
<p>Il est aussi possible d’indiquer un champ d’un modèle lié en utilisant la syntaxe d’accès <code class="docutils literal notranslate"><span class="pre">__</span></code>, par exemple&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">date_hierarchy</span> <span class="o">=</span> <span class="s1">&#39;author__pub_date&#39;</span>
</pre></div>
</div>
<p>Le contenu de cette navigation est formé intelligemment d’après les données disponibles. Par exemple, si toutes les dates sont dans un seul mois, elle contiendra uniquement les filtres par jour.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">date_hierarchy</span></code> utilise <a class="reference internal" href="../../models/querysets.html#django.db.models.query.QuerySet.datetimes" title="django.db.models.query.QuerySet.datetimes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.datetimes()</span></code></a> en interne. Veuillez vous référer vous à sa documentation pour certaines mises en garde lorsque la prise en charge des fuseaux horaires est activée (<a class="reference internal" href="../../settings.html#std:setting-USE_TZ"><code class="xref std std-setting docutils literal notranslate"><span class="pre">USE_TZ</span> <span class="pre">=</span> <span class="pre">True</span></code></a>).</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.empty_value_display">
<code class="descclassname">ModelAdmin.</code><code class="descname">empty_value_display</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.empty_value_display" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Cet attribut surcharge la valeur d’affichage par défaut pour les champs de l’enregistrement qui sont vides (<code class="docutils literal notranslate"><span class="pre">None</span></code>, chaîne vide, etc.). La valeur par défaut est <code class="docutils literal notranslate"><span class="pre">-</span></code> (un tiret). Par exemple&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="k">import</span> <span class="n">admin</span>

<span class="k">class</span> <span class="nc">AuthorAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">empty_value_display</span> <span class="o">=</span> <span class="s1">&#39;-empty-&#39;</span>
</pre></div>
</div>
<p>Vous pouvez aussi surcharger <code class="docutils literal notranslate"><span class="pre">empty_value_display</span></code> pour toutes les pages d’administration avec <a class="reference internal" href="#django.contrib.admin.AdminSite.empty_value_display" title="django.contrib.admin.AdminSite.empty_value_display"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AdminSite.empty_value_display</span></code></a>, ou pour des champs spécifiques comme ceci&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="k">import</span> <span class="n">admin</span>

<span class="k">class</span> <span class="nc">AuthorAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;view_birth_date&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">view_birth_date</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">birth_date</span>

    <span class="n">view_birth_date</span><span class="o">.</span><span class="n">empty_value_display</span> <span class="o">=</span> <span class="s1">&#39;???&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.exclude">
<code class="descclassname">ModelAdmin.</code><code class="descname">exclude</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.exclude" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Cet attribut, si fourni, doit être une liste de noms de champs à exclure du formulaire.</p>
<p>Par exemple, considérons le modèle suivant&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="k">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Author</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">birth_date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Si vous souhaitez un formulaire pour le modèle <code class="docutils literal notranslate"><span class="pre">Author</span></code> qui ne comprenne que les champs <code class="docutils literal notranslate"><span class="pre">name</span></code> et <code class="docutils literal notranslate"><span class="pre">title</span></code>, voici comment vous devez spécifier <code class="docutils literal notranslate"><span class="pre">fields</span></code> ou <code class="docutils literal notranslate"><span class="pre">exclude</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="k">import</span> <span class="n">admin</span>

<span class="k">class</span> <span class="nc">AuthorAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">AuthorAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">exclude</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;birth_date&#39;</span><span class="p">,)</span>
</pre></div>
</div>
<p>Comme le modèle <code class="docutils literal notranslate"><span class="pre">Author</span></code> a seulement trois champs, <code class="docutils literal notranslate"><span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">title</span></code> et <code class="docutils literal notranslate"><span class="pre">birth_date</span></code>, les formulaires obtenus par les déclarations ci-dessus contiendront exactement les mêmes champs.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.fields">
<code class="descclassname">ModelAdmin.</code><code class="descname">fields</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.fields" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Utilisez l’option <code class="docutils literal notranslate"><span class="pre">fields</span></code> si vous avez besoin de réaliser de simples changements dans la disposition des formulaires des pages «&nbsp;ajouter&nbsp;» et «&nbsp;modifier&nbsp;», comme afficher uniquement un sous-ensemble des champs disponibles, modifier leur ordre ou les regrouper en lignes. Par exemple, vous pouvez définir une version simplifiée du formulaire d’administration pour le modèle <a class="reference internal" href="../flatpages.html#django.contrib.flatpages.models.FlatPage" title="django.contrib.flatpages.models.FlatPage"><code class="xref py py-class docutils literal notranslate"><span class="pre">django.contrib.flatpages.models.FlatPage</span></code></a> comme suit&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">FlatPageAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;url&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;content&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Dans l’exemple ci-dessus, seuls les champs <code class="docutils literal notranslate"><span class="pre">url</span></code>, <code class="docutils literal notranslate"><span class="pre">title</span></code> et <code class="docutils literal notranslate"><span class="pre">content</span></code> seront affichés dans le formulaire, de manière séquentielle. <code class="docutils literal notranslate"><span class="pre">fields</span></code> peut contenir des valeurs définies dans <a class="reference internal" href="#django.contrib.admin.ModelAdmin.readonly_fields" title="django.contrib.admin.ModelAdmin.readonly_fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ModelAdmin.readonly_fields</span></code></a> pour être affichées en lecture seule.</p>
<p>Pour des besoins de mise en page plus complexes, voir l’option <a class="reference internal" href="#django.contrib.admin.ModelAdmin.fieldsets" title="django.contrib.admin.ModelAdmin.fieldsets"><code class="xref py py-attr docutils literal notranslate"><span class="pre">fieldsets</span></code></a>.</p>
<p>L’option <code class="docutils literal notranslate"><span class="pre">fields</span></code> accepte les mêmes types de valeurs que <a class="reference internal" href="#django.contrib.admin.ModelAdmin.list_display" title="django.contrib.admin.ModelAdmin.list_display"><code class="xref py py-attr docutils literal notranslate"><span class="pre">list_display</span></code></a>, sauf que les objets exécutables ne sont pas admis. Les noms de méthodes de modèles ou de modèles d’administration ne sont utilisés que s’ils apparaissent dans <a class="reference internal" href="#django.contrib.admin.ModelAdmin.readonly_fields" title="django.contrib.admin.ModelAdmin.readonly_fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">readonly_fields</span></code></a>.</p>
<p>Pour afficher plusieurs champs sur la même ligne, insérez ces champs dans leur propre tuple. Dans cet exemple, les champs <code class="docutils literal notranslate"><span class="pre">url</span></code> et <code class="docutils literal notranslate"><span class="pre">title</span></code> s’affichent sur la même ligne et le champ <code class="docutils literal notranslate"><span class="pre">content</span></code> sera affiché en dessous d’eux sur sa propre ligne&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">FlatPageAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">((</span><span class="s1">&#39;url&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">),</span> <span class="s1">&#39;content&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition-note admonition">
<p class="first admonition-title">Note</p>
<p class="last">Cette option <code class="docutils literal notranslate"><span class="pre">fields</span></code> ne doit pas être confondue avec la clé de dictionnaire <code class="docutils literal notranslate"><span class="pre">fields</span></code> présente dans l’option <a class="reference internal" href="#django.contrib.admin.ModelAdmin.fieldsets" title="django.contrib.admin.ModelAdmin.fieldsets"><code class="xref py py-attr docutils literal notranslate"><span class="pre">fieldsets</span></code></a>, telle que décrite dans la section suivante.</p>
</div>
<p>Si ni l’option <code class="docutils literal notranslate"><span class="pre">fields</span></code>, ni l’option <a class="reference internal" href="#django.contrib.admin.ModelAdmin.fieldsets" title="django.contrib.admin.ModelAdmin.fieldsets"><code class="xref py py-attr docutils literal notranslate"><span class="pre">fieldsets</span></code></a> ne sont présentes, Django affiche par défaut chaque champ qui n’est pas un <code class="docutils literal notranslate"><span class="pre">AutoField</span></code> et qui a <code class="docutils literal notranslate"><span class="pre">editable=True</span></code> dans un groupe de champs unique et dans le même ordre de définition des champs que dans le modèle.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.fieldsets">
<code class="descclassname">ModelAdmin.</code><code class="descname">fieldsets</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.fieldsets" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Définissez <code class="docutils literal notranslate"><span class="pre">fieldsets</span></code> pour contrôler la mise en page des pages d’administration «&nbsp;ajouter&nbsp;» et «&nbsp;modifier&nbsp;».</p>
<p><code class="docutils literal notranslate"><span class="pre">fieldsets</span></code> est une liste de tuples binaires, où chaque tuple représente une balise <code class="docutils literal notranslate"><span class="pre">&lt;fieldset&gt;</span></code> dans la page du formulaire d’administration (<code class="docutils literal notranslate"><span class="pre">&lt;fieldset&gt;</span></code> est une «&nbsp;section&nbsp;» d’un formulaire).</p>
<p>Les tuples binaires sont au format <code class="docutils literal notranslate"><span class="pre">(nom,</span> <span class="pre">options_champs)</span></code>, où <code class="docutils literal notranslate"><span class="pre">nom</span></code> est une chaîne représentant le titre du groupe de champs et <code class="docutils literal notranslate"><span class="pre">options_champs</span></code> est un dictionnaire d’informations sur le groupe de champs, y compris une liste des champs à afficher à l’intérieur.</p>
<p>Un exemple complet, tiré du modèle <a class="reference internal" href="../flatpages.html#django.contrib.flatpages.models.FlatPage" title="django.contrib.flatpages.models.FlatPage"><code class="xref py py-class docutils literal notranslate"><span class="pre">django.contrib.flatpages.models.FlatPage</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="k">import</span> <span class="n">admin</span>

<span class="k">class</span> <span class="nc">FlatPageAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">fieldsets</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="p">{</span>
            <span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;url&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;content&#39;</span><span class="p">,</span> <span class="s1">&#39;sites&#39;</span><span class="p">)</span>
        <span class="p">}),</span>
        <span class="p">(</span><span class="s1">&#39;Advanced options&#39;</span><span class="p">,</span> <span class="p">{</span>
            <span class="s1">&#39;classes&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;collapse&#39;</span><span class="p">,),</span>
            <span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;registration_required&#39;</span><span class="p">,</span> <span class="s1">&#39;template_name&#39;</span><span class="p">),</span>
        <span class="p">}),</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>Il en résulte une page d’administration qui ressemble à&nbsp;:</p>
<img alt="../../../_images/fieldsets.png" src="../../../_images/fieldsets.png" />
<p>Si ni l’option <code class="docutils literal notranslate"><span class="pre">fieldsets</span></code>, ni l’option <a class="reference internal" href="#django.contrib.admin.ModelAdmin.fields" title="django.contrib.admin.ModelAdmin.fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">fields</span></code></a> ne sont présentes, Django affiche par défaut chaque champ qui n’est pas un <code class="docutils literal notranslate"><span class="pre">AutoField</span></code> et qui a <code class="docutils literal notranslate"><span class="pre">editable=True</span></code> dans un groupe de champs unique et dans le même ordre de définition des champs que dans le modèle.</p>
<p>Le dictionnaire <code class="docutils literal notranslate"><span class="pre">field_options</span></code> peut contenir les clés suivantes&nbsp;:</p>
<ul>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">fields</span></code></dt>
<dd><p class="first">Un tuple de noms de champs à afficher dans ce groupe de champs. Cette clé est obligatoire.</p>
<p>Exemple&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;first_name&#39;</span><span class="p">,</span> <span class="s1">&#39;last_name&#39;</span><span class="p">,</span> <span class="s1">&#39;address&#39;</span><span class="p">,</span> <span class="s1">&#39;city&#39;</span><span class="p">,</span> <span class="s1">&#39;state&#39;</span><span class="p">),</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Comme pour l’option <a class="reference internal" href="#django.contrib.admin.ModelAdmin.fields" title="django.contrib.admin.ModelAdmin.fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">fields</span></code></a>, on peut afficher plusieurs champs sur la même ligne en les incluant dans un tuple. Dans cet exemple, les champs <code class="docutils literal notranslate"><span class="pre">first_name</span></code> et <code class="docutils literal notranslate"><span class="pre">last_name</span></code> s’affichent sur la même ligne&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">((</span><span class="s1">&#39;first_name&#39;</span><span class="p">,</span> <span class="s1">&#39;last_name&#39;</span><span class="p">),</span> <span class="s1">&#39;address&#39;</span><span class="p">,</span> <span class="s1">&#39;city&#39;</span><span class="p">,</span> <span class="s1">&#39;state&#39;</span><span class="p">),</span>
<span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">fields</span></code> peut contenir des valeurs définies dans <a class="reference internal" href="#django.contrib.admin.ModelAdmin.readonly_fields" title="django.contrib.admin.ModelAdmin.readonly_fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">readonly_fields</span></code></a> pour être affichées en lecture seule.</p>
<p class="last">Si vous placez le nom d’un objet exécutable dans <code class="docutils literal notranslate"><span class="pre">fields</span></code>, c’est la même règle qu’avec l’option <a class="reference internal" href="#django.contrib.admin.ModelAdmin.fields" title="django.contrib.admin.ModelAdmin.fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">fields</span></code></a> qui s’applique&nbsp;: l’objet exécutable doit figurer dans <a class="reference internal" href="#django.contrib.admin.ModelAdmin.readonly_fields" title="django.contrib.admin.ModelAdmin.readonly_fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">readonly_fields</span></code></a>.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">classes</span></code></dt>
<dd><p class="first">Une liste ou un tuple contenant des classes CSS supplémentaires à appliquer sur le groupe de champs.</p>
<p>Exemple&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="s1">&#39;classes&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;wide&#39;</span><span class="p">,</span> <span class="s1">&#39;extrapretty&#39;</span><span class="p">),</span>
<span class="p">}</span>
</pre></div>
</div>
<p class="last">Deux classes utiles définies par la feuille de style par défaut du site d’administration sont <code class="docutils literal notranslate"><span class="pre">collapse</span></code> et <code class="docutils literal notranslate"><span class="pre">wide</span></code>. Les groupes de champs avec le style <code class="docutils literal notranslate"><span class="pre">collapse</span></code> seront initialement repliés dans l’administration et remplacés par un petit lien «&nbsp;cliquer pour agrandir&nbsp;». Les groupes de champs avec le style <code class="docutils literal notranslate"><span class="pre">wide</span></code> disposeront d’un espace horizontal supplémentaire.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">description</span></code></dt>
<dd><p class="first">Une chaîne de texte supplémentaire facultative affichée au sommet de chaque groupe de champs, sous l’en-tête du groupe. Cette chaîne n’est pas affichée pour <a class="reference internal" href="#django.contrib.admin.TabularInline" title="django.contrib.admin.TabularInline"><code class="xref py py-class docutils literal notranslate"><span class="pre">TabularInline</span></code></a> en raison de sa mise en page.</p>
<p class="last">Notez que cette valeur ne passe <em>pas</em> par le filtre d’échappement HTML quand elle est affichée dans l’interface d’administration. Cela vous permet d’inclure du code HTML si vous le désirez. Sinon, vous pouvez utiliser du texte brut avec la fonction <a class="reference internal" href="../../utils.html#django.utils.html.escape" title="django.utils.html.escape"><code class="xref py py-func docutils literal notranslate"><span class="pre">django.utils.html.escape()</span></code></a> pour échapper les caractères spéciaux HTML.</p>
</dd>
</dl>
</li>
</ul>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.filter_horizontal">
<code class="descclassname">ModelAdmin.</code><code class="descname">filter_horizontal</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.filter_horizontal" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Par défaut, un champ <a class="reference internal" href="../../models/fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManyToManyField</span></code></a> est affiché dans le site d’administration avec un <code class="docutils literal notranslate"><span class="pre">&lt;select</span> <span class="pre">multiple&gt;</span></code>. Cependant, les boîtes à sélection multiple peuvent être difficiles à utiliser lors de la sélection de nombreux éléments. En ajoutant un champ <a class="reference internal" href="../../models/fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManyToManyField</span></code></a> à cette liste, cette boîte sera remplacée par une discrète et astucieuse interface de «&nbsp;filtre&nbsp;» JavaScript permettant de rechercher dans les options. Les options non sélectionnés et sélectionnés apparaissent dans deux boîtes côte à côte. Voir <a class="reference internal" href="#django.contrib.admin.ModelAdmin.filter_vertical" title="django.contrib.admin.ModelAdmin.filter_vertical"><code class="xref py py-attr docutils literal notranslate"><span class="pre">filter_vertical</span></code></a> pour utiliser une interface verticale.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.filter_vertical">
<code class="descclassname">ModelAdmin.</code><code class="descname">filter_vertical</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.filter_vertical" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Identique à <a class="reference internal" href="#django.contrib.admin.ModelAdmin.filter_horizontal" title="django.contrib.admin.ModelAdmin.filter_horizontal"><code class="xref py py-attr docutils literal notranslate"><span class="pre">filter_horizontal</span></code></a>, mais utilise un affichage vertical de l’interface de filtre avec la boîte d’options non sélectionnées apparaissant au-dessus de la boîte d’options sélectionnées.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.form">
<code class="descclassname">ModelAdmin.</code><code class="descname">form</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.form" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Par défaut, un formulaire <code class="docutils literal notranslate"><span class="pre">ModelForm</span></code> est créé dynamiquement pour les modèles. Il est utilisé pour créer le formulaire présenté sur les pages d’ajout/édition. Vous pouvez facilement fournir votre propre <code class="docutils literal notranslate"><span class="pre">ModelForm</span></code> pour surcharger toute forme de comportement par défaut sur les pages d’ajout/édition. Alternativement, vous pouvez personnaliser le formulaire par défaut plutôt que d’en définir un entièrement nouveau en utilisant la méthode <a class="reference internal" href="#django.contrib.admin.ModelAdmin.get_form" title="django.contrib.admin.ModelAdmin.get_form"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ModelAdmin.get_form()</span></code></a>.</p>
<p>Pour un exemple, voir la section <a class="reference internal" href="#admin-custom-validation"><span class="std std-ref">Ajout de validation personnalisée à l’administration</span></a>.</p>
<div class="admonition-note admonition">
<p class="first admonition-title">Note</p>
<p>Si vous définissez un attribut <code class="docutils literal notranslate"><span class="pre">Meta.model</span></code> dans un <a class="reference internal" href="../../../topics/forms/modelforms.html#django.forms.ModelForm" title="django.forms.ModelForm"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelForm</span></code></a>, vous devez également définir l’attribut <code class="docutils literal notranslate"><span class="pre">Meta.fields</span></code> (ou l’attribut <code class="docutils literal notranslate"><span class="pre">Meta.exclude</span></code>). Cependant, étant donné que l’administration a sa propre façon de définir des champs, l’attribut <code class="docutils literal notranslate"><span class="pre">Meta.fields</span></code> sera ignoré.</p>
<p class="last">Si le <code class="docutils literal notranslate"><span class="pre">ModelForm</span></code> est uniquement destiné à l’administration, la solution la plus simple consiste à omettre l’attribut <code class="docutils literal notranslate"><span class="pre">Meta.model</span></code>, puisque <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code> fournira le bon modèle à utiliser. Il est aussi possible de définir <code class="docutils literal notranslate"><span class="pre">fields</span> <span class="pre">=</span> <span class="pre">[]</span></code> dans la classe <code class="docutils literal notranslate"><span class="pre">Meta</span></code> afin de satisfaire la validation du <code class="docutils literal notranslate"><span class="pre">ModelForm</span></code>.</p>
</div>
<div class="admonition-note admonition">
<p class="first admonition-title">Note</p>
<p>Si les classes <code class="docutils literal notranslate"><span class="pre">ModelForm</span></code> et <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code> définissent toutes deux une option <code class="docutils literal notranslate"><span class="pre">exclude</span></code>, alors <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code> prévaut&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django</span> <span class="k">import</span> <span class="n">forms</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="k">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">myapp.models</span> <span class="k">import</span> <span class="n">Person</span>

<span class="k">class</span> <span class="nc">PersonForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">ModelForm</span><span class="p">):</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Person</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>

<span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">exclude</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">]</span>
    <span class="n">form</span> <span class="o">=</span> <span class="n">PersonForm</span>
</pre></div>
</div>
<p class="last">Dans l’exemple ci-dessus, le champ «&nbsp;age&nbsp;» sera exclu mais le champ «&nbsp;name&nbsp;» sera inclus dans le formulaire généré.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.formfield_overrides">
<code class="descclassname">ModelAdmin.</code><code class="descname">formfield_overrides</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.formfield_overrides" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Cet attribut fournit une solution «&nbsp;à la va-vite&nbsp;» pour surcharger une partie des options <a class="reference internal" href="../../forms/fields.html#django.forms.Field" title="django.forms.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> utilisées dans l’interface d’administration. <code class="docutils literal notranslate"><span class="pre">formfield_overrides</span></code> est un dictionnaire associant une classe de champ à un dictionnaire de paramètres à passer audit champ au moment de sa construction.</p>
<p>Comme c’est un peu abstrait, examinons un exemple concret. L’utilisation la plus courante de <code class="docutils literal notranslate"><span class="pre">formfield_overrides</span></code> est d’ajouter un composant personnalisé pour un certain type de champ. Ainsi, imaginons que nous avons écrit un composant <code class="docutils literal notranslate"><span class="pre">RichTextEditorWidget</span></code> que nous aimerions utiliser pour les champs de texte étendus en lieu et place du <code class="docutils literal notranslate"><span class="pre">&lt;textarea&gt;</span></code> par défaut . Voici comment nous pourrions le faire&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="k">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">django.db</span> <span class="k">import</span> <span class="n">models</span>

<span class="c1"># Import our custom widget and our model from where they&#39;re defined</span>
<span class="kn">from</span> <span class="nn">myapp.models</span> <span class="k">import</span> <span class="n">MyModel</span>
<span class="kn">from</span> <span class="nn">myapp.widgets</span> <span class="k">import</span> <span class="n">RichTextEditorWidget</span>

<span class="k">class</span> <span class="nc">MyModelAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">formfield_overrides</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;widget&#39;</span><span class="p">:</span> <span class="n">RichTextEditorWidget</span><span class="p">},</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>Notez que la clé dans le dictionnaire est la véritable classe du champ, et <em>non pas</em> une chaîne. La valeur est un autre dictionnaire&nbsp;; ces paramètres seront passés à la méthode <code class="docutils literal notranslate"><span class="pre">__init__()</span></code> du champ de formulaire. Voir <a class="reference internal" href="../../forms/api.html"><span class="doc">L’API des formulaires</span></a> pour plus de détails.</p>
<div class="admonition warning">
<p class="first admonition-title">Avertissement</p>
<p>Si vous souhaitez utiliser un composant personnalisé avec un champ de relation (par ex. <a class="reference internal" href="../../models/fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> ou <a class="reference internal" href="../../models/fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManyToManyField</span></code></a>), assurez-vous que vous n’avez pas inclus le nom de ce champ dans <code class="docutils literal notranslate"><span class="pre">raw_id_fields</span></code>, <code class="docutils literal notranslate"><span class="pre">radio_fields</span></code> ou <code class="docutils literal notranslate"><span class="pre">autocomplete_fields</span></code>.</p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">formfield_overrides</span></code> ne vous laissera pas modifier le composant sur les champs de relations contenus dans <code class="docutils literal notranslate"><span class="pre">raw_id_fields</span></code>, <code class="docutils literal notranslate"><span class="pre">radio_fields</span></code> ou <code class="docutils literal notranslate"><span class="pre">autocomplete_fields</span></code>. C’est parce que <code class="docutils literal notranslate"><span class="pre">raw_id_fields</span></code>, <code class="docutils literal notranslate"><span class="pre">radio_fields</span></code> et <code class="docutils literal notranslate"><span class="pre">autocomplete_fields</span></code> impliquent déjà l’utilisation de composants personnalisés.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.inlines">
<code class="descclassname">ModelAdmin.</code><code class="descname">inlines</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.inlines" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Voir les objets <a class="reference internal" href="#django.contrib.admin.InlineModelAdmin" title="django.contrib.admin.InlineModelAdmin"><code class="xref py py-class docutils literal notranslate"><span class="pre">InlineModelAdmin</span></code></a> ci-dessous ainsi que <a class="reference internal" href="#django.contrib.admin.ModelAdmin.get_formsets_with_inlines" title="django.contrib.admin.ModelAdmin.get_formsets_with_inlines"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ModelAdmin.get_formsets_with_inlines()</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.list_display">
<code class="descclassname">ModelAdmin.</code><code class="descname">list_display</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.list_display" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Définissez <code class="docutils literal notranslate"><span class="pre">list_display</span></code> pour contrôler quels champs sont affichés sur la page de liste pour modification de l’interface d’administration.</p>
<p>Exemple&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;first_name&#39;</span><span class="p">,</span> <span class="s1">&#39;last_name&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Si <code class="docutils literal notranslate"><span class="pre">list_display</span></code> n’est pas défini, le site d’administration affichera une seule colonne avec la représentation <code class="docutils literal notranslate"><span class="pre">__str__()</span></code> de chaque objet.</p>
<p><code class="docutils literal notranslate"><span class="pre">list_display</span></code> peut contenir quatre types différents de valeurs&nbsp;:</p>
<ul>
<li><p class="first">Le nom d’un champ de modèle. Par exemple&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;first_name&#39;</span><span class="p">,</span> <span class="s1">&#39;last_name&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Un objet exécutable qui accepte un paramètre, l’instance de modèle. Par exemple&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">upper_case_name</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">first_name</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">last_name</span><span class="p">))</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
<span class="n">upper_case_name</span><span class="o">.</span><span class="n">short_description</span> <span class="o">=</span> <span class="s1">&#39;Name&#39;</span>

<span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="n">upper_case_name</span><span class="p">,)</span>
</pre></div>
</div>
</li>
<li><p class="first">Une chaîne représentant une méthode de <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code> acceptant un paramètre, l’instance de modèle. Par exemple&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;upper_case_name&#39;</span><span class="p">,)</span>

    <span class="k">def</span> <span class="nf">upper_case_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">first_name</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">last_name</span><span class="p">))</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
    <span class="n">upper_case_name</span><span class="o">.</span><span class="n">short_description</span> <span class="o">=</span> <span class="s1">&#39;Name&#39;</span>
</pre></div>
</div>
</li>
<li><p class="first">Une chaîne représentant un attribut ou une méthode de modèle (sans paramètre obligatoire). Par exemple&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="k">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">django.db</span> <span class="k">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
    <span class="n">birthday</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">decade_born_in</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">birthday</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y&#39;</span><span class="p">)[:</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;0&#39;s&quot;</span>
    <span class="n">decade_born_in</span><span class="o">.</span><span class="n">short_description</span> <span class="o">=</span> <span class="s1">&#39;Birth decade&#39;</span>

<span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;decade_born_in&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<p>Quelques cas particuliers à signaler à propos de <code class="docutils literal notranslate"><span class="pre">list_display</span></code>:</p>
<ul>
<li><p class="first">Si ce champ est une clé <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code>, Django affichera le <code class="docutils literal notranslate"><span class="pre">__str__()</span></code> de l’objet correspondant.</p>
</li>
<li><p class="first">Les champs <code class="docutils literal notranslate"><span class="pre">ManyToManyField</span></code> ne sont pas pris en charge, parce que cela impliquerait l’exécution d’une instruction SQL pour chaque ligne de la table. Si vous voulez néanmoins le faire, donnez à votre modèle une méthode personnalisée, et ajouter le nom de cette méthode à <code class="docutils literal notranslate"><span class="pre">list_display</span></code>. (Voir ci-dessous pour en savoir plus sur les méthodes personnalisées dans <code class="docutils literal notranslate"><span class="pre">list_display</span></code>.)</p>
</li>
<li><p class="first">Si le champ est un <code class="docutils literal notranslate"><span class="pre">BooleanField</span></code>, Django affiche une jolie icône actif/inactif au lieu des valeurs <code class="docutils literal notranslate"><span class="pre">True</span></code> ou <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</li>
<li><p class="first">Si la chaîne donnée est une méthode du modèle, un <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code> ou un objet exécutable, Django échappe par défaut le résultat HTML obtenu. Pour échapper les données fournies par l’utilisateur et autoriser vos propres balises non échappées, utilisez <a class="reference internal" href="../../utils.html#django.utils.html.format_html" title="django.utils.html.format_html"><code class="xref py py-func docutils literal notranslate"><span class="pre">format_html()</span></code></a>.</p>
<p>Voici un exemple complet de modèle&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="k">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">django.db</span> <span class="k">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">django.utils.html</span> <span class="k">import</span> <span class="n">format_html</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">first_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
    <span class="n">last_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
    <span class="n">color_code</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">colored_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">format_html</span><span class="p">(</span>
            <span class="s1">&#39;&lt;span style=&quot;color: #</span><span class="si">{}</span><span class="s1">;&quot;&gt;</span><span class="si">{}</span><span class="s1"> </span><span class="si">{}</span><span class="s1">&lt;/span&gt;&#39;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">color_code</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">first_name</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">last_name</span><span class="p">,</span>
        <span class="p">)</span>

<span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;first_name&#39;</span><span class="p">,</span> <span class="s1">&#39;last_name&#39;</span><span class="p">,</span> <span class="s1">&#39;colored_name&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Comme certains exemples l’ont déjà montré, lorsqu’on fait référence à un objet exécutable, une méthode de modèle ou de <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code>, il est possible de personnaliser le titre de la colonne en ajoutant un attribut <code class="docutils literal notranslate"><span class="pre">short_description</span></code> à l’objet en question.</p>
</li>
<li><p class="first">Si la valeur d’un champ est <code class="docutils literal notranslate"><span class="pre">None</span></code>, une chaîne vide ou une itération vide, Django affichera <code class="docutils literal notranslate"><span class="pre">-</span></code> (un tiret). Vous pouvez surcharger cela avec <a class="reference internal" href="#django.contrib.admin.AdminSite.empty_value_display" title="django.contrib.admin.AdminSite.empty_value_display"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AdminSite.empty_value_display</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="k">import</span> <span class="n">admin</span>

<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">empty_value_display</span> <span class="o">=</span> <span class="s1">&#39;(None)&#39;</span>
</pre></div>
</div>
<p>Vous pouvez aussi utiliser <a class="reference internal" href="#django.contrib.admin.ModelAdmin.empty_value_display" title="django.contrib.admin.ModelAdmin.empty_value_display"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ModelAdmin.empty_value_display</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">empty_value_display</span> <span class="o">=</span> <span class="s1">&#39;unknown&#39;</span>
</pre></div>
</div>
<p>Ou au niveau d’un champ&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;birth_date_view&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">birth_date_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
         <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">birth_date</span>

    <span class="n">birth_date_view</span><span class="o">.</span><span class="n">empty_value_display</span> <span class="o">=</span> <span class="s1">&#39;unknown&#39;</span>
</pre></div>
</div>
</li>
<li><p class="first">Si la chaîne donnée est une méthode du modèle, un <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code> ou un objet exécutable qui renvoie <code class="docutils literal notranslate"><span class="pre">True</span></code> ou <code class="docutils literal notranslate"><span class="pre">False</span></code>, Django affiche une jolie icône actif/inactif si vous donnez à la méthode un attribut <code class="docutils literal notranslate"><span class="pre">boolean</span></code> avec la valeur <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>Voici un exemple complet de modèle&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="k">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">django.db</span> <span class="k">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">first_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
    <span class="n">birthday</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">born_in_fifties</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">birthday</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y&#39;</span><span class="p">)[:</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;195&#39;</span>
    <span class="n">born_in_fifties</span><span class="o">.</span><span class="n">boolean</span> <span class="o">=</span> <span class="kc">True</span>

<span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;born_in_fifties&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">La méthode <code class="docutils literal notranslate"><span class="pre">__str__()</span></code> est tout aussi valable pour <code class="docutils literal notranslate"><span class="pre">list_display</span></code> que pour toute autre méthode de modèle, il est donc tout à fait correct d’écrire&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;__str__&#39;</span><span class="p">,</span> <span class="s1">&#39;some_other_field&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Habituellement, les éléments de <code class="docutils literal notranslate"><span class="pre">list_display</span></code> qui ne sont pas de véritables champs de base de données ne peuvent pas être utilisés dans le tri (parce que Django réalise tout le tri au niveau de la base de données).</p>
<p>Cependant, si un élément de <code class="docutils literal notranslate"><span class="pre">list_display</span></code> représente un certain champ de base de données, vous pouvez indiquer ce fait en définissant l’attribut <code class="docutils literal notranslate"><span class="pre">admin_order_field</span></code> de l’élément.</p>
<p>Par exemple&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="k">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">django.db</span> <span class="k">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">django.utils.html</span> <span class="k">import</span> <span class="n">format_html</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">first_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
    <span class="n">color_code</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">colored_first_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">format_html</span><span class="p">(</span>
            <span class="s1">&#39;&lt;span style=&quot;color: #</span><span class="si">{}</span><span class="s1">;&quot;&gt;</span><span class="si">{}</span><span class="s1">&lt;/span&gt;&#39;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">color_code</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">first_name</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="n">colored_first_name</span><span class="o">.</span><span class="n">admin_order_field</span> <span class="o">=</span> <span class="s1">&#39;first_name&#39;</span>

<span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;first_name&#39;</span><span class="p">,</span> <span class="s1">&#39;colored_first_name&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Ce qui précède indique à Django de trier selon le champ <code class="docutils literal notranslate"><span class="pre">first_name</span></code> lorsqu’on essaye de trier par <code class="docutils literal notranslate"><span class="pre">colored_first_name</span></code> dans l’administration.</p>
<p>Pour indiquer un ordre décroissant avec <code class="docutils literal notranslate"><span class="pre">admin_order_field</span></code>, vous pouvez préfixer le nom de champ par un tiret. En utilisant l’exemple ci-dessus, cela ressemblerait à&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">colored_first_name</span><span class="o">.</span><span class="n">admin_order_field</span> <span class="o">=</span> <span class="s1">&#39;-first_name&#39;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">admin_order_field</span></code> sait gérer les requêtes triées par valeurs de modèles liés. Cet exemple inclut une colonne «&nbsp;author first name&nbsp;» dans l’affichage en liste et permet de le trier en fonction du prénom (first name)&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Blog</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
    <span class="n">author</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">BlogAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;author&#39;</span><span class="p">,</span> <span class="s1">&#39;author_first_name&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">author_first_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">author</span><span class="o">.</span><span class="n">first_name</span>

    <span class="n">author_first_name</span><span class="o">.</span><span class="n">admin_order_field</span> <span class="o">=</span> <span class="s1">&#39;author__first_name&#39;</span>
</pre></div>
</div>
<p>Les <a class="reference internal" href="../../models/expressions.html"><span class="doc">expressions de requête</span></a> peuvent être utilisés dans <code class="docutils literal notranslate"><span class="pre">admin_order_field</span></code>. Par exemple</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db.models</span> <span class="k">import</span> <span class="n">Value</span>
<span class="kn">from</span> <span class="nn">django.db.models.functions</span> <span class="k">import</span> <span class="n">Concat</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">first_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
    <span class="n">last_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">full_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">first_name</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_name</span>
    <span class="n">full_name</span><span class="o">.</span><span class="n">admin_order_field</span> <span class="o">=</span> <span class="n">Concat</span><span class="p">(</span><span class="s1">&#39;first_name&#39;</span><span class="p">,</span> <span class="n">Value</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">),</span> <span class="s1">&#39;last_name&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Les éléments de <code class="docutils literal notranslate"><span class="pre">list_display</span></code> peuvent également être des propriétés. Notez toutefois qu’en raison de la façon dont fonctionnent les propriétés en Python, définir <code class="docutils literal notranslate"><span class="pre">short_description</span></code> ou <code class="docutils literal notranslate"><span class="pre">admin_order_field</span></code> sur une propriété n’est possible que lors de l’utilisation de la fonction <code class="docutils literal notranslate"><span class="pre">property()</span></code> et non <strong>pas</strong> avec le décorateur <code class="docutils literal notranslate"><span class="pre">&#64;property</span></code>.</p>
<p>Par exemple&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">first_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
    <span class="n">last_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">my_property</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">first_name</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_name</span>
    <span class="n">my_property</span><span class="o">.</span><span class="n">short_description</span> <span class="o">=</span> <span class="s2">&quot;Full name of the person&quot;</span>
    <span class="n">my_property</span><span class="o">.</span><span class="n">admin_order_field</span> <span class="o">=</span> <span class="s1">&#39;last_name&#39;</span>

    <span class="n">full_name</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">my_property</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;full_name&#39;</span><span class="p">,)</span>
</pre></div>
</div>
</li>
<li><p class="first">Les noms de champs dans <code class="docutils literal notranslate"><span class="pre">list_display</span></code> apparaissent également comme des classes CSS dans le résultat HTML, sous la forme <code class="docutils literal notranslate"><span class="pre">colonne-&lt;nom_de_champ&gt;</span></code> sur chaque élément <code class="docutils literal notranslate"><span class="pre">&lt;th&gt;</span></code>. Cela peut être utilisé par exemple pour définir la largeur des colonnes dans un fichier CSS.</p>
</li>
<li><p class="first">Django essaie d’interpréter chaque élément de <code class="docutils literal notranslate"><span class="pre">list_display</span></code> dans cet ordre&nbsp;:</p>
<ul class="simple">
<li>Un champ de modèle.</li>
<li>Un objet exécutable.</li>
<li>Une chaîne représentant un attribut <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code>.</li>
<li>Une chaîne représentant un attribut de modèle.</li>
</ul>
<p>Par exemple, si <code class="docutils literal notranslate"><span class="pre">first_name</span></code> est à la fois un champ de modèle et un attribut <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code>, c’est le champ de modèle qui sera utilisé.</p>
</li>
</ul>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.list_display_links">
<code class="descclassname">ModelAdmin.</code><code class="descname">list_display_links</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.list_display_links" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Utilisez <code class="docutils literal notranslate"><span class="pre">list_display_links</span></code> pour contrôler le cas échéant quels champs de <a class="reference internal" href="#django.contrib.admin.ModelAdmin.list_display" title="django.contrib.admin.ModelAdmin.list_display"><code class="xref py py-attr docutils literal notranslate"><span class="pre">list_display</span></code></a> doivent faire le lien vers la page de modification d’un objet.</p>
<p>Par défaut, la page de liste pour modification lie la première colonne – le premier champ figurant dans <code class="docutils literal notranslate"><span class="pre">list_display</span></code> – à la page de modification de chaque élément. Mais <code class="docutils literal notranslate"><span class="pre">list_display_links</span></code> permet de modifier cela&nbsp;:</p>
<ul>
<li><p class="first">Définissez-le à <code class="docutils literal notranslate"><span class="pre">None</span></code> pour qu’aucun lien n’apparaisse.</p>
</li>
<li><p class="first">Définissez-le à une liste ou un tuple de champs (dans le même format que <code class="docutils literal notranslate"><span class="pre">list_display</span></code>) dont les colonnes doivent être converties en liens.</p>
<p>Vous pouvez indiquer un ou plusieurs champs. Tant que les champs apparaissent dans <code class="docutils literal notranslate"><span class="pre">list_display</span></code>, Django ne se soucie pas de combien (ou comment) les champs sont liés. La seule exigence est&nbsp;que si vous souhaitez utiliser <code class="docutils literal notranslate"><span class="pre">list_display_links</span></code> de cette façon, vous devez définir <code class="docutils literal notranslate"><span class="pre">list_display</span></code>.</p>
</li>
</ul>
<p>Dans cet exemple, les champs <code class="docutils literal notranslate"><span class="pre">first_name</span></code> et <code class="docutils literal notranslate"><span class="pre">last_name</span></code> feront toutes deux office de lien sur la page de liste pour modification&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;first_name&#39;</span><span class="p">,</span> <span class="s1">&#39;last_name&#39;</span><span class="p">,</span> <span class="s1">&#39;birthday&#39;</span><span class="p">)</span>
    <span class="n">list_display_links</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;first_name&#39;</span><span class="p">,</span> <span class="s1">&#39;last_name&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Dans cet exemple, la page de liste pour modification ne contient aucun lien&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AuditEntryAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;timestamp&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">)</span>
    <span class="n">list_display_links</span> <span class="o">=</span> <span class="kc">None</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="admin-list-editable"></span><dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.list_editable">
<code class="descclassname">ModelAdmin.</code><code class="descname">list_editable</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.list_editable" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Définissez <code class="docutils literal notranslate"><span class="pre">list_editable</span></code> à une liste de noms de champs de modèle afin de permettre l’édition de ces champs sur la page de liste pour modification. C’est-à-dire que les champs répertoriés dans <code class="docutils literal notranslate"><span class="pre">list_editable</span></code> seront affichés sous forme de composants de formulaire sur la page de liste pour modification, permettant aux utilisateurs de modifier et d’enregistrer plusieurs lignes à la fois.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">list_editable</span></code> interagit avec un certain nombre d’autres options de façon bien particulière&nbsp;; vous devez respecter les règles suivantes&nbsp;:</p>
<ul class="simple">
<li>Tout champ dans <code class="docutils literal notranslate"><span class="pre">list_editable</span></code> doit également figurer dans <code class="docutils literal notranslate"><span class="pre">list_display</span></code>. Vous ne pouvez pas modifier un champ qui n’est pas affiché&nbsp;!</li>
<li>Un même champ ne peut pas être défini à la fois dans <code class="docutils literal notranslate"><span class="pre">list_editable</span></code> et dans  <code class="docutils literal notranslate"><span class="pre">list_display_links</span></code> – un champ ne peut pas être à la fois un formulaire et un lien.</li>
</ul>
<p class="last">Vous obtiendrez une erreur de validation si l’une de ces règles est enfreinte.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.list_filter">
<code class="descclassname">ModelAdmin.</code><code class="descname">list_filter</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.list_filter" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Définissez <code class="docutils literal notranslate"><span class="pre">list_filter</span></code> pour activer des filtres dans la barre de droite de la page de liste pour modification de l’administration, comme illustré dans la capture d’écran suivante&nbsp;:</p>
<img alt="../../../_images/list_filter.png" src="../../../_images/list_filter.png" />
<p><code class="docutils literal notranslate"><span class="pre">list_filter</span></code> doit être une liste ou un tuple d’éléments, où chaque élément doit être l’un des types suivants&nbsp;:</p>
<ul>
<li><p class="first">un nom de champ, où le champ doit être soit un <code class="docutils literal notranslate"><span class="pre">BooleanField</span></code>, <code class="docutils literal notranslate"><span class="pre">CharField</span></code>, <code class="docutils literal notranslate"><span class="pre">DateField</span></code>, <code class="docutils literal notranslate"><span class="pre">DateTimeField</span></code>, <code class="docutils literal notranslate"><span class="pre">IntegerField</span></code>, <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code> ou un <code class="docutils literal notranslate"><span class="pre">ManyToManyField</span></code>; par exemple&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_filter</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;is_staff&#39;</span><span class="p">,</span> <span class="s1">&#39;company&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Les noms de champ dans <code class="docutils literal notranslate"><span class="pre">list_filter</span></code> peuvent également s’étendre aux relations à l’aide de la syntaxe de recherche <code class="docutils literal notranslate"><span class="pre">__</span></code>, par exemple&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">UserAdmin</span><span class="p">):</span>
    <span class="n">list_filter</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;company__name&#39;</span><span class="p">,)</span>
</pre></div>
</div>
</li>
<li><p class="first">une classe héritant de <code class="docutils literal notranslate"><span class="pre">django.contrib.admin.SimpleListFilter</span></code>, qui doit contenir les attributs <code class="docutils literal notranslate"><span class="pre">title</span></code> et <code class="docutils literal notranslate"><span class="pre">parameter_name</span></code> ainsi que surcharger les méthodes <code class="docutils literal notranslate"><span class="pre">lookups</span></code> et <code class="docutils literal notranslate"><span class="pre">queryset</span></code>, par ex.&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="k">import</span> <span class="n">date</span>

<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="k">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">django.utils.translation</span> <span class="k">import</span> <span class="n">gettext_lazy</span> <span class="k">as</span> <span class="n">_</span>

<span class="k">class</span> <span class="nc">DecadeBornListFilter</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">SimpleListFilter</span><span class="p">):</span>
    <span class="c1"># Human-readable title which will be displayed in the</span>
    <span class="c1"># right admin sidebar just above the filter options.</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s1">&#39;decade born&#39;</span><span class="p">)</span>

    <span class="c1"># Parameter for the filter that will be used in the URL query.</span>
    <span class="n">parameter_name</span> <span class="o">=</span> <span class="s1">&#39;decade&#39;</span>

    <span class="k">def</span> <span class="nf">lookups</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">model_admin</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a list of tuples. The first element in each</span>
<span class="sd">        tuple is the coded value for the option that will</span>
<span class="sd">        appear in the URL query. The second element is the</span>
<span class="sd">        human-readable name for the option that will appear</span>
<span class="sd">        in the right sidebar.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="p">(</span><span class="s1">&#39;80s&#39;</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s1">&#39;in the eighties&#39;</span><span class="p">)),</span>
            <span class="p">(</span><span class="s1">&#39;90s&#39;</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s1">&#39;in the nineties&#39;</span><span class="p">)),</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">queryset</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the filtered queryset based on the value</span>
<span class="sd">        provided in the query string and retrievable via</span>
<span class="sd">        `self.value()`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Compare the requested value (either &#39;80s&#39; or &#39;90s&#39;)</span>
        <span class="c1"># to decide how to filter the queryset.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;80s&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">queryset</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">birthday__gte</span><span class="o">=</span><span class="n">date</span><span class="p">(</span><span class="mi">1980</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                                    <span class="n">birthday__lte</span><span class="o">=</span><span class="n">date</span><span class="p">(</span><span class="mi">1989</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;90s&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">queryset</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">birthday__gte</span><span class="o">=</span><span class="n">date</span><span class="p">(</span><span class="mi">1990</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                                    <span class="n">birthday__lte</span><span class="o">=</span><span class="n">date</span><span class="p">(</span><span class="mi">1999</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">))</span>

<span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_filter</span> <span class="o">=</span> <span class="p">(</span><span class="n">DecadeBornListFilter</span><span class="p">,)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Par commodité, l’objet <code class="docutils literal notranslate"><span class="pre">HttpRequest</span></code> est transmis aux méthodes <code class="docutils literal notranslate"><span class="pre">lookups</span></code> et <code class="docutils literal notranslate"><span class="pre">queryset</span></code>, par exemple&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AuthDecadeBornListFilter</span><span class="p">(</span><span class="n">DecadeBornListFilter</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">lookups</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">model_admin</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">lookups</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">model_admin</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">queryset</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">queryset</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">queryset</span><span class="p">)</span>
</pre></div>
</div>
<p>Aussi par commodité, l’objet <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code> est transmis à la méthode <code class="docutils literal notranslate"><span class="pre">lookups</span></code>, par exemple si vous souhaitez établir les filtres à partir des données disponibles&nbsp;:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AdvancedDecadeBornListFilter</span><span class="p">(</span><span class="n">DecadeBornListFilter</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">lookups</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">model_admin</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Only show the lookups if there actually is</span>
<span class="sd">        anyone born in the corresponding decades.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">qs</span> <span class="o">=</span> <span class="n">model_admin</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">qs</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">birthday__gte</span><span class="o">=</span><span class="n">date</span><span class="p">(</span><span class="mi">1980</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                      <span class="n">birthday__lte</span><span class="o">=</span><span class="n">date</span><span class="p">(</span><span class="mi">1989</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">))</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="k">yield</span> <span class="p">(</span><span class="s1">&#39;80s&#39;</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s1">&#39;in the eighties&#39;</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">qs</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">birthday__gte</span><span class="o">=</span><span class="n">date</span><span class="p">(</span><span class="mi">1990</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                      <span class="n">birthday__lte</span><span class="o">=</span><span class="n">date</span><span class="p">(</span><span class="mi">1999</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">))</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="k">yield</span> <span class="p">(</span><span class="s1">&#39;90s&#39;</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s1">&#39;in the nineties&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</li>
<li><p class="first">un tuple, où le premier élément est un nom de champ et le second élément est une classe héritant de <code class="docutils literal notranslate"><span class="pre">django.contrib.admin.FieldListFilter</span></code>, par exemple&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_filter</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="s1">&#39;is_staff&#39;</span><span class="p">,</span> <span class="n">admin</span><span class="o">.</span><span class="n">BooleanFieldListFilter</span><span class="p">),</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>Vous pouvez limiter les choix d’un modèle lié aux objets concernés par la relation en utilisant <code class="docutils literal notranslate"><span class="pre">RelatedOnlyFieldListFilter</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">BookAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_filter</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="s1">&#39;author&#39;</span><span class="p">,</span> <span class="n">admin</span><span class="o">.</span><span class="n">RelatedOnlyFieldListFilter</span><span class="p">),</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>En supposant que <code class="docutils literal notranslate"><span class="pre">author</span></code> est une clé <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code> vers un modèle <code class="docutils literal notranslate"><span class="pre">User</span></code>, cela va limiter les choix de <code class="docutils literal notranslate"><span class="pre">list_filter</span></code> aux utilisateurs qui ont écrit un livre au lieu d’énumérer tous les utilisateurs.</p>
<p>Vous pouvez filtrer les valeurs vides avec <code class="docutils literal notranslate"><span class="pre">EmptyFieldListFilter</span></code>, qui est capable de filtrer à la fois les chaînes vides et les valeurs nulles, en fonction de ce que le champ permet de stocker</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">BookAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_filter</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="n">admin</span><span class="o">.</span><span class="n">EmptyFieldListFilter</span><span class="p">),</span>
    <span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">L’API <code class="docutils literal notranslate"><span class="pre">FieldListFilter</span></code> est considérée comme interne et pourrait changer.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Le champ <a class="reference internal" href="../contenttypes.html#django.contrib.contenttypes.fields.GenericForeignKey" title="django.contrib.contenttypes.fields.GenericForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">GenericForeignKey</span></code></a> n’est pas pris en charge.</p>
</div>
<div class="versionadded">
<span class="title">New in Django 3.1:</span> <p>La classe <code class="docutils literal notranslate"><span class="pre">EmptyFieldListFilter</span></code> a été ajoutée.</p>
</div>
</li>
</ul>
<p>Les filtres de listes n’apparaissent que lorsque le filtre présente plus d’un choix. La méthode <code class="docutils literal notranslate"><span class="pre">has_output()</span></code> du filtre vérifie cette condition.</p>
<p>Il est possible de spécifier un gabarit personnalisé pour le rendu d’un filtre de liste&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">FilterWithCustomTemplate</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">SimpleListFilter</span><span class="p">):</span>
    <span class="n">template</span> <span class="o">=</span> <span class="s2">&quot;custom_template.html&quot;</span>
</pre></div>
</div>
<p>Voir le gabarit par défaut fourni par Django (<code class="docutils literal notranslate"><span class="pre">admin/filter.html</span></code>) pour un exemple concret.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.list_max_show_all">
<code class="descclassname">ModelAdmin.</code><code class="descname">list_max_show_all</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.list_max_show_all" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Définissez <code class="docutils literal notranslate"><span class="pre">list_max_show_all</span></code> pour contrôler le nombre d’éléments pouvant figurer sur la page de liste pour modification «&nbsp;Tout afficher&nbsp;» de l’administration. L’administration affiche un lien «&nbsp;Tout afficher&nbsp;» sur la liste pour modification seulement si le nombre total de résultats est inférieur ou égal à la valeur de cet attribut. Par défaut, cette option est définie à <code class="docutils literal notranslate"><span class="pre">200</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.list_per_page">
<code class="descclassname">ModelAdmin.</code><code class="descname">list_per_page</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.list_per_page" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Définissez <code class="docutils literal notranslate"><span class="pre">list_per_page</span></code> pour contrôler le nombre d’éléments paginés apparaissant sur chaque page de la liste pour modification de l’administration. Par défaut, cette option est définie à <code class="docutils literal notranslate"><span class="pre">100</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.list_select_related">
<code class="descclassname">ModelAdmin.</code><code class="descname">list_select_related</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.list_select_related" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Définissez <code class="docutils literal notranslate"><span class="pre">list_select_related</span></code> pour indiquer à Django d’utiliser <a class="reference internal" href="../../models/querysets.html#django.db.models.query.QuerySet.select_related" title="django.db.models.query.QuerySet.select_related"><code class="xref py py-meth docutils literal notranslate"><span class="pre">select_related()</span></code></a> lors de la récupération de la liste des objets sur la page de liste pour modification de l’administration. Cela peut vous épargner un bon nombre de requêtes en base de données.</p>
<p>La valeur peut être soit une valeur booléenne, soit une liste ou un tuple. La valeur par défaut est <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<p>Lorsque la valeur est <code class="docutils literal notranslate"><span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">select_related()</span></code> sera toujours appelée. Lorsque la valeur est réglée sur <code class="docutils literal notranslate"><span class="pre">False</span></code>, Django examine <code class="docutils literal notranslate"><span class="pre">list_display</span></code> et n’appelle <code class="docutils literal notranslate"><span class="pre">select_related()</span></code> que si une clé <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code> est présente.</p>
<p>Si vous avez besoin d’un contrôle plus fin, utilisez un tuple (ou une liste) comme valeur de <code class="docutils literal notranslate"><span class="pre">list_select_related</span></code>. Un tuple vide empêchera Django d’appeler <code class="docutils literal notranslate"><span class="pre">select_related</span></code> dans tous les cas. Tout autre tuple sera directement transmis à <code class="docutils literal notranslate"><span class="pre">select_related</span></code> comme paramètres. Par exemple&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ArticleAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_select_related</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;author&#39;</span><span class="p">,</span> <span class="s1">&#39;category&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>appellera <code class="docutils literal notranslate"><span class="pre">select_related('author',</span> <span class="pre">'category')</span></code>.</p>
<p>Si vous avez besoin de définir une valeur dynamique en fonction de la requête, vous pouvez implémenter une méthode <a class="reference internal" href="#django.contrib.admin.ModelAdmin.get_list_select_related" title="django.contrib.admin.ModelAdmin.get_list_select_related"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_list_select_related()</span></code></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code> ignore cet attribut lorsque <a class="reference internal" href="../../models/querysets.html#django.db.models.query.QuerySet.select_related" title="django.db.models.query.QuerySet.select_related"><code class="xref py py-meth docutils literal notranslate"><span class="pre">select_related()</span></code></a> a déjà été appelée pour la requête <code class="docutils literal notranslate"><span class="pre">QuerySet</span></code> de la liste pour modification.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.ordering">
<code class="descclassname">ModelAdmin.</code><code class="descname">ordering</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.ordering" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Définissez <code class="docutils literal notranslate"><span class="pre">ordering</span></code> pour préciser comment les listes d’objets doivent être ordonnées dans les vues d’administration de Django. La valeur doit être une liste ou un tuple dans le même format que le paramètre de modèle <a class="reference internal" href="../../models/options.html#django.db.models.Options.ordering" title="django.db.models.Options.ordering"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ordering</span></code></a>.</p>
<p>Si ce paramètre n’est pas renseigné, l’administration de Django utilise l’ordre de tri par défaut du modèle.</p>
<p>Si vous avez besoin de définir un ordre dynamique (par exemple en fonction de l’utilisateur ou de la langue), vous pouvez implémenter une méthode <a class="reference internal" href="#django.contrib.admin.ModelAdmin.get_ordering" title="django.contrib.admin.ModelAdmin.get_ordering"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_ordering()</span></code></a>.</p>
<div class="admonition-performance-considerations-with-ordering-and-sorting admonition">
<p class="first admonition-title">Considérations de performance pour les tris</p>
<p>Pour garantir un ordre de résultats déterministe, la liste pour modification ajoute <code class="docutils literal notranslate"><span class="pre">pk</span></code> aux critères de tri si elle ne trouve pas un champ ou un ensemble de champs garantissant un tri univoque.</p>
<p class="last">Par exemple, si le tri par défaut se fait sur un champ <code class="docutils literal notranslate"><span class="pre">nom</span></code> non unique, la liste pour modification sera triée par <code class="docutils literal notranslate"><span class="pre">nom</span></code> et <code class="docutils literal notranslate"><span class="pre">pk</span></code>. Cela pourrait dégrader les performances s’il y a beaucoup de résultats et qu’il n’y a pas d’index sur``nom`` et <code class="docutils literal notranslate"><span class="pre">pk</span></code>.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.paginator">
<code class="descclassname">ModelAdmin.</code><code class="descname">paginator</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.paginator" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La classe de pagination à utiliser pour la pagination. Par défaut, <a class="reference internal" href="../../paginator.html#django.core.paginator.Paginator" title="django.core.paginator.Paginator"><code class="xref py py-class docutils literal notranslate"><span class="pre">django.core.paginator.Paginator</span></code></a> est utilisée. Si la classe de pagination personnalisée n’a pas la même interface de constructeur que <a class="reference internal" href="../../paginator.html#django.core.paginator.Paginator" title="django.core.paginator.Paginator"><code class="xref py py-class docutils literal notranslate"><span class="pre">django.core.paginator.Paginator</span></code></a>, vous devez également fournir une implémentation pour <a class="reference internal" href="#django.contrib.admin.ModelAdmin.get_paginator" title="django.contrib.admin.ModelAdmin.get_paginator"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ModelAdmin.get_paginator()</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.prepopulated_fields">
<code class="descclassname">ModelAdmin.</code><code class="descname">prepopulated_fields</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.prepopulated_fields" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Définissez <code class="docutils literal notranslate"><span class="pre">prepopulated_fields</span></code> à un dictionnaire associant des noms de champs aux champs à partir desquels ils doivent être pré-remplis&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ArticleAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">prepopulated_fields</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;slug&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">,)}</span>
</pre></div>
</div>
<p>Lorsque cet attribut est défini, lesdits champs utiliseront un peu de JavaScript pour se pré-remplir à partir des champs désignés. L’utilisation principale de cette fonctionnalité est de générer automatiquement la valeur des champs <code class="docutils literal notranslate"><span class="pre">SlugField</span></code> à partir d’un ou plusieurs autres champs. La valeur générée est produite par la concaténation des valeurs des champs source, puis par transformation de ce résultat en une étiquette courte et valide, le «&nbsp;slug&nbsp;» (par ex. le remplacement des espaces par des tirets, la mise en minuscules des lettres ASCII ou la suppression de certains mots vides anglais comme « a », « an », « as »).</p>
<p>Les champs préremplis ne sont pas modifiés par JavaScript après qu’une valeur a été enregistrée. Il n’est généralement pas souhaitable que les « slugs » changent (ce qui provoquerait le changement de l’URL de l’objet si le slug en fait partie).</p>
<p><code class="docutils literal notranslate"><span class="pre">prepopulated_fields</span></code> n’accepte pas les champs <code class="docutils literal notranslate"><span class="pre">DateTimeField</span></code>, <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code>, <code class="docutils literal notranslate"><span class="pre">OneToOneField</span></code> ou <code class="docutils literal notranslate"><span class="pre">ManyToManyField</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.preserve_filters">
<code class="descclassname">ModelAdmin.</code><code class="descname">preserve_filters</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.preserve_filters" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Par défaut, les filtres appliqués sur la vue de liste après la création, l’édition ou la suppression d’un objet sont préservés. Vous pouvez forcer la réinitialisation des filtres en définissant cet attribut à <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.radio_fields">
<code class="descclassname">ModelAdmin.</code><code class="descname">radio_fields</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.radio_fields" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Par défaut, l’interface d’administration de Django utilise une interface de boîte de sélection (&lt;select&gt;) pour les champs <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code> ou ceux qui ont un attribut <code class="docutils literal notranslate"><span class="pre">choices</span></code> défini. Si un champ est présent dans <code class="docutils literal notranslate"><span class="pre">radio_fields</span></code>, Django utilise plutôt une interface de type boutons-radio. En supposant que <code class="docutils literal notranslate"><span class="pre">group</span></code> est une clé <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code> sur le modèle <code class="docutils literal notranslate"><span class="pre">Person</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">radio_fields</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;group&quot;</span><span class="p">:</span> <span class="n">admin</span><span class="o">.</span><span class="n">VERTICAL</span><span class="p">}</span>
</pre></div>
</div>
<p>Vous avez le choix d’utiliser <code class="docutils literal notranslate"><span class="pre">HORIZONTAL</span></code> ou <code class="docutils literal notranslate"><span class="pre">VERTICAL</span></code> du module <code class="docutils literal notranslate"><span class="pre">django.contrib.admin</span></code>.</p>
<p>N’incluez un champ dans <code class="docutils literal notranslate"><span class="pre">radio_fields</span></code> que s’il s’agit d’un champ <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code> ou que son attribut <code class="docutils literal notranslate"><span class="pre">choices</span></code> est défini.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.autocomplete_fields">
<code class="descclassname">ModelAdmin.</code><code class="descname">autocomplete_fields</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.autocomplete_fields" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">autocomplete_fields</span></code> est une liste de champs <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code> et/ou <code class="docutils literal notranslate"><span class="pre">ManyToManyField</span></code> que vous souhaitez transformer en composants auto-complétés <a class="reference external" href="https://select2.org/">Select2</a>.</p>
<p>Par défaut, l’interface d’administration utilise une interface de boîte de sélection (<code class="docutils literal notranslate"><span class="pre">&lt;select&gt;</span></code>) pour ces champs. Parfois, vous ne voulez pas subir la lenteur engendrée par la sélection de toutes les instances liées pour l’affichage dans la liste déroulante.</p>
<p>Le composant Select2 ressemble à la liste déroulante par défaut mais apporte une fonction de recherche qui charge les options de manière asynchrone. C’est plus rapide et plus intuitif dans les cas où le modèle lié possède de nombreuses instances.</p>
<p>Vous devez définir <a class="reference internal" href="#django.contrib.admin.ModelAdmin.search_fields" title="django.contrib.admin.ModelAdmin.search_fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">search_fields</span></code></a> dans la classe <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code> de l’objet lié dans la mesure où la recherche d’auto-complétion l’utilise.</p>
<p>Pour empêcher la divulgation non autorisée de données, les utilisateurs doivent posséder la permission d’affichage ou de modification sur l’objet lié pour pouvoir utiliser l’autocomplétion.</p>
<p>Le tri et la pagination des résultats sont contrôlés par les méthodes <a class="reference internal" href="#django.contrib.admin.ModelAdmin.get_ordering" title="django.contrib.admin.ModelAdmin.get_ordering"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_ordering()</span></code></a> et <a class="reference internal" href="#django.contrib.admin.ModelAdmin.get_paginator" title="django.contrib.admin.ModelAdmin.get_paginator"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_paginator()</span></code></a> du <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code> lié correspondant.</p>
<p>Dans l’exemple suivant, <code class="docutils literal notranslate"><span class="pre">ChoiceAdmin</span></code> possède un champ auto-complété pour la clé <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code> vers <code class="docutils literal notranslate"><span class="pre">Question</span></code>. Les résultats sont filtrés par le champ <code class="docutils literal notranslate"><span class="pre">question_text</span></code> et triés par le champ <code class="docutils literal notranslate"><span class="pre">date_created</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">QuestionAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;date_created&#39;</span><span class="p">]</span>
    <span class="n">search_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;question_text&#39;</span><span class="p">]</span>

<span class="k">class</span> <span class="nc">ChoiceAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">autocomplete_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;question&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="admonition-performance-considerations-for-large-datasets admonition">
<p class="first admonition-title">Considérations de performance pour les gros jeux de données</p>
<p>Le tri selon <a class="reference internal" href="#django.contrib.admin.ModelAdmin.ordering" title="django.contrib.admin.ModelAdmin.ordering"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ModelAdmin.ordering</span></code></a> peut provoquer des problèmes de performance car le tri sur de gros volumes de données est lent.</p>
<p>De même, si vos champs de recherche comprennent des champs qui ne sont pas indexés dans la base de données, les performances peuvent en souffrir pour des tables vraiment très grandes.</p>
<p>Dans ces cas, il peut être judicieux d’écrire votre propre implémentation de <a class="reference internal" href="#django.contrib.admin.ModelAdmin.get_search_results" title="django.contrib.admin.ModelAdmin.get_search_results"><code class="xref py py-func docutils literal notranslate"><span class="pre">ModelAdmin.get_search_results()</span></code></a> en utilisant une recherche plein texte indexée.</p>
<p class="last">Il peut aussi valoir la peine de modifier le <code class="docutils literal notranslate"><span class="pre">Paginator</span></code> pour les très grandes tables car le paginateur par défaut effectue toujours une requête <code class="docutils literal notranslate"><span class="pre">count()</span></code>. Par exemple, vous pourriez surcharger l’implémentation par défaut de la propriété <code class="docutils literal notranslate"><span class="pre">Paginator.count</span></code>.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.raw_id_fields">
<code class="descclassname">ModelAdmin.</code><code class="descname">raw_id_fields</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.raw_id_fields" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Par défaut, l’interface d’administration de Django utilise une interface de boîte de sélection (&lt;select&gt;) pour les champs <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code>. Parfois, vous ne voulez pas subir la lenteur engendrée par la sélection de toutes les instances liées pour l’affichage dans la liste déroulante.</p>
<p><code class="docutils literal notranslate"><span class="pre">raw_id_fields</span></code> est une liste de champs que vous souhaitez modifier par un simple composant <code class="docutils literal notranslate"><span class="pre">Input</span></code>, que ce soit un champ <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code> ou <code class="docutils literal notranslate"><span class="pre">ManyToManyField</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ArticleAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">raw_id_fields</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;newspaper&quot;</span><span class="p">,)</span>
</pre></div>
</div>
<p>Le composant <code class="docutils literal notranslate"><span class="pre">Input</span></code> de <code class="docutils literal notranslate"><span class="pre">raw_id_fields</span></code> doit contenir une clé primaire si le champ est une clé <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code> ou une liste de valeurs séparées par des virgules si le champ est un <code class="docutils literal notranslate"><span class="pre">ManyToManyField</span></code>. Le composant <code class="docutils literal notranslate"><span class="pre">raw_id_fields</span></code> présente un bouton en forme de loupe à côté du champ permettant aux utilisateurs de rechercher et de sélectionner une valeur&nbsp;:</p>
<img alt="../../../_images/raw_id_fields.png" src="../../../_images/raw_id_fields.png" />
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.readonly_fields">
<code class="descclassname">ModelAdmin.</code><code class="descname">readonly_fields</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.readonly_fields" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Par défaut, l’interface d’administration affiche tous les champs de manière éditable. Tous les champs présents dans cette option (qui doit être une liste ou un tuple) afficheront leurs données en l’état et seront non modifiables&nbsp;; ils seront également exclus du formulaire <a class="reference internal" href="../../../topics/forms/modelforms.html#django.forms.ModelForm" title="django.forms.ModelForm"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelForm</span></code></a> utilisé pour la création et l’édition. Notez que lorsque vous renseignez <a class="reference internal" href="#django.contrib.admin.ModelAdmin.fields" title="django.contrib.admin.ModelAdmin.fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ModelAdmin.fields</span></code></a> ou <a class="reference internal" href="#django.contrib.admin.ModelAdmin.fieldsets" title="django.contrib.admin.ModelAdmin.fieldsets"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ModelAdmin.fieldsets</span></code></a>, les champs en lecture seule doivent être présents si vous voulez qu’ils apparaissent (sinon, ils sont ignorés).</p>
<p>Si <code class="docutils literal notranslate"><span class="pre">readonly_fields</span></code> est utilisé sans ordre explicite défini par <a class="reference internal" href="#django.contrib.admin.ModelAdmin.fields" title="django.contrib.admin.ModelAdmin.fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ModelAdmin.fields</span></code></a> ou <a class="reference internal" href="#django.contrib.admin.ModelAdmin.fieldsets" title="django.contrib.admin.ModelAdmin.fieldsets"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ModelAdmin.fieldsets</span></code></a>, ils seront ajoutés en dernier après tous les champs modifiables.</p>
<p>Un champ en lecture seule n’est pas limité à l’affichage des données d’un champ de modèle, il peut également afficher le résultat d’une méthode de modèle ou d’une méthode de la classe <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code>. C’est très similaire à la façon dont <a class="reference internal" href="#django.contrib.admin.ModelAdmin.list_display" title="django.contrib.admin.ModelAdmin.list_display"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ModelAdmin.list_display</span></code></a> fonctionne. Cela fournit un moyen pour faire présenter à l’interface d’administration des informations sur l’état des objets en cours d’édition, par exemple&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="k">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">django.utils.html</span> <span class="k">import</span> <span class="n">format_html_join</span>
<span class="kn">from</span> <span class="nn">django.utils.safestring</span> <span class="k">import</span> <span class="n">mark_safe</span>

<span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">readonly_fields</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;address_report&#39;</span><span class="p">,)</span>

    <span class="k">def</span> <span class="nf">address_report</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">):</span>
        <span class="c1"># assuming get_full_address() returns a list of strings</span>
        <span class="c1"># for each line of the address and you want to separate each</span>
        <span class="c1"># line by a linebreak</span>
        <span class="k">return</span> <span class="n">format_html_join</span><span class="p">(</span>
            <span class="n">mark_safe</span><span class="p">(</span><span class="s1">&#39;&lt;br&gt;&#39;</span><span class="p">),</span>
            <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="p">((</span><span class="n">line</span><span class="p">,)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">instance</span><span class="o">.</span><span class="n">get_full_address</span><span class="p">()),</span>
        <span class="p">)</span> <span class="ow">or</span> <span class="n">mark_safe</span><span class="p">(</span><span class="s2">&quot;&lt;span class=&#39;errors&#39;&gt;I can&#39;t determine this address.&lt;/span&gt;&quot;</span><span class="p">)</span>

    <span class="c1"># short_description functions like a model field&#39;s verbose_name</span>
    <span class="n">address_report</span><span class="o">.</span><span class="n">short_description</span> <span class="o">=</span> <span class="s2">&quot;Address&quot;</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.save_as">
<code class="descclassname">ModelAdmin.</code><code class="descname">save_as</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.save_as" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Définissez <code class="docutils literal notranslate"><span class="pre">save_as</span></code> pour activer la fonctionnalité «&nbsp;enregistrer comme nouveau&nbsp;» des formulaires d’édition de l’administration.</p>
<p>Normalement, les objets ont trois options d’enregistrement&nbsp;: «&nbsp;Enregistrer&nbsp;», «&nbsp;Enregistrer et continuer les modifications&nbsp;» et «&nbsp;Enregistrer et ajouter un nouveau&nbsp;». Si <code class="docutils literal notranslate"><span class="pre">save_as</span></code> vaut <code class="docutils literal notranslate"><span class="pre">True</span></code>, «&nbsp;Enregistrer et ajouter un nouveau&nbsp;» est remplacé par un bouton «&nbsp;Enregistrer comme nouveau&nbsp;» qui crée un nouvel objet (avec un nouvel identifiant) plutôt que de mettre à jour l’objet existant.</p>
<p>Par défaut, <code class="docutils literal notranslate"><span class="pre">save_as</span></code> est défini à <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.save_as_continue">
<code class="descclassname">ModelAdmin.</code><code class="descname">save_as_continue</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.save_as_continue" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Lorsque <a class="reference internal" href="#django.contrib.admin.ModelAdmin.save_as" title="django.contrib.admin.ModelAdmin.save_as"><code class="xref py py-attr docutils literal notranslate"><span class="pre">save_as=True</span></code></a>, la redirection par défaut après l’enregistrement du nouvel objet se fait vers la vue pour modification de cet objet. Si vous définissez <code class="docutils literal notranslate"><span class="pre">save_as_continue=False</span></code>, la redirection se fera vers la vue de liste pour modification.</p>
<p>Par défaut, <code class="docutils literal notranslate"><span class="pre">save_as_continue</span></code> est défini à <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.save_on_top">
<code class="descclassname">ModelAdmin.</code><code class="descname">save_on_top</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.save_on_top" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Définissez <code class="docutils literal notranslate"><span class="pre">save_on_top</span></code> pour ajouter les boutons d’enregistrement au sommet des formulaires d’édition de l’administration.</p>
<p>Normalement, les boutons d’enregistrement apparaissent uniquement au bas des formulaires. Si vous définissez <code class="docutils literal notranslate"><span class="pre">save_on_top</span></code>, les boutons apparaîtront à la fois en haut et en bas.</p>
<p>Par défaut, <code class="docutils literal notranslate"><span class="pre">save_on_top</span></code> est défini à <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.search_fields">
<code class="descclassname">ModelAdmin.</code><code class="descname">search_fields</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.search_fields" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Définissez <code class="docutils literal notranslate"><span class="pre">search_fields</span></code> pour activer une boîte de recherche sur la page de liste pour édition de l’administration. Cet attribut doit contenir une liste de noms de champs qui seront recherchés chaque fois que quelqu’un soumet une requête de recherche dans cette zone de texte.</p>
<p>Ces champs doivent être de type texte, tel que <code class="docutils literal notranslate"><span class="pre">CharField</span></code> ou <code class="docutils literal notranslate"><span class="pre">TextField</span></code>. Vous pouvez également effectuer une recherche connexe sur une clé <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code> ou un champ <code class="docutils literal notranslate"><span class="pre">ManyToManyField</span></code> avec la notation «&nbsp;relationnelle&nbsp;» de l’API de recherche&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">search_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;foreign_key__related_fieldname&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Par exemple, si une entrée de blog contient un auteur, la définition suivante permettrait de rechercher les entrées du blog selon l’adresse électronique de l’auteur&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">search_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;user__email&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Lorsque quelqu’un effectue une recherche via la boîte de recherche de l’administration, Django divise la requête de recherche en mots et renvoie tous les objets qui contiennent tous les mots, insensibles à la casse (en utilisant la recherche <a class="reference internal" href="../../models/querysets.html#std:fieldlookup-icontains"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">icontains</span></code></a>), où chaque mot doit être dans au moins un des champs <code class="docutils literal notranslate"><span class="pre">search_fields</span></code>. Par exemple, si <code class="docutils literal notranslate"><span class="pre">search_fields</span></code> est défini à <code class="docutils literal notranslate"><span class="pre">['first_name',</span> <span class="pre">'last_name']</span></code> et qu’un utilisateur recherche <code class="docutils literal notranslate"><span class="pre">john</span> <span class="pre">lennon</span></code>, Django exécutera l’équivalent de cette clause SQL <code class="docutils literal notranslate"><span class="pre">WHERE</span></code>:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">WHERE</span> <span class="p">(</span><span class="n">first_name</span> <span class="k">ILIKE</span> <span class="s1">&#39;%john%&#39;</span> <span class="k">OR</span> <span class="n">last_name</span> <span class="k">ILIKE</span> <span class="s1">&#39;%john%&#39;</span><span class="p">)</span>
<span class="k">AND</span> <span class="p">(</span><span class="n">first_name</span> <span class="k">ILIKE</span> <span class="s1">&#39;%lennon%&#39;</span> <span class="k">OR</span> <span class="n">last_name</span> <span class="k">ILIKE</span> <span class="s1">&#39;%lennon%&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Si vous ne souhaitez pas utiliser la recherche <code class="docutils literal notranslate"><span class="pre">icontains</span></code>, vous pouvez forcer une autre recherche en l’ajoutant à la suite du champ. Par exemple, il est possible d’utiliser <a class="reference internal" href="../../models/querysets.html#std:fieldlookup-exact"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">exact</span></code></a> en définissant <code class="docutils literal notranslate"><span class="pre">search_fields</span></code> à <code class="docutils literal notranslate"><span class="pre">['first_name__exact']</span></code>.</p>
<p>Soyez conscient qu’en raison de la coupure des termes de recherche qui sont ensuite combinés avec <code class="docutils literal notranslate"><span class="pre">AND</span></code> comme expliqué précédemment, la recherche avec  <a class="reference internal" href="../../models/querysets.html#std:fieldlookup-exact"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">exact</span></code></a> ne fonctionne qu’avec un seul mot de recherche puisque deux ou plusieurs mots ne peuvent pas tous être des correspondances exactes (sauf si tous les mots sont les mêmes).</p>
<p>Certains (anciens) raccourcis pour l’indication de recherche de champ sont aussi disponibles. Vous pouvez préfixer un champ de <code class="docutils literal notranslate"><span class="pre">search_fields</span></code> par les caractères suivants qui sont équivalents à l’ajout de <code class="docutils literal notranslate"><span class="pre">__&lt;recherche&gt;</span></code> à la suite du champ :</p>
<table class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Préfixe</th>
<th class="head">Requête</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>^</td>
<td><a class="reference internal" href="../../models/querysets.html#std:fieldlookup-startswith"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">startswith</span></code></a></td>
</tr>
<tr class="row-odd"><td>=</td>
<td><a class="reference internal" href="../../models/querysets.html#std:fieldlookup-iexact"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">iexact</span></code></a></td>
</tr>
<tr class="row-even"><td>&#64;</td>
<td><a class="reference internal" href="../postgres/search.html#std:fieldlookup-search"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">search</span></code></a></td>
</tr>
<tr class="row-odd"><td>Aucun(e)</td>
<td><a class="reference internal" href="../../models/querysets.html#std:fieldlookup-icontains"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">icontains</span></code></a></td>
</tr>
</tbody>
</table>
<p>Si vous avez besoin de personnaliser la recherche, vous pouvez utiliser <a class="reference internal" href="#django.contrib.admin.ModelAdmin.get_search_results" title="django.contrib.admin.ModelAdmin.get_search_results"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ModelAdmin.get_search_results()</span></code></a> pour fournir un comportement de recherche supplémentaire ou différent.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.show_full_result_count">
<code class="descclassname">ModelAdmin.</code><code class="descname">show_full_result_count</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.show_full_result_count" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Définissez <code class="docutils literal notranslate"><span class="pre">show_full_result_count</span></code> pour définir si le nombre total d’objets doit être affiché sur une page d’administration filtrée (par exemple <code class="docutils literal notranslate"><span class="pre">99</span> <span class="pre">résultats</span> <span class="pre">(103</span> <span class="pre">au</span> <span class="pre">total)</span></code>). Si cette option est définie à <code class="docutils literal notranslate"><span class="pre">False</span></code>, un texte du style <code class="docutils literal notranslate"><span class="pre">99</span> <span class="pre">résultats</span> <span class="pre">(tout</span> <span class="pre">afficher)</span></code> s’affiche à la place.</p>
<p>La valeur par défaut <code class="docutils literal notranslate"><span class="pre">show_full_result_count=True</span></code> génère une requête pour connaître le nombre total d’objets de la table, ce qui peut être coûteux si la table contient un grand nombre de lignes.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.sortable_by">
<code class="descclassname">ModelAdmin.</code><code class="descname">sortable_by</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.sortable_by" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Par défaut, la page de liste pour modification autorise le tris selon tous les champs de modèles (et les objets exécutables ayant la propriété <code class="docutils literal notranslate"><span class="pre">admin_order_field</span></code>) indiqués dans <a class="reference internal" href="#django.contrib.admin.ModelAdmin.list_display" title="django.contrib.admin.ModelAdmin.list_display"><code class="xref py py-attr docutils literal notranslate"><span class="pre">list_display</span></code></a>.</p>
<p>Si vous souhaitez désactiver le tri pour certaines colonnes, définissez <code class="docutils literal notranslate"><span class="pre">sortable_by</span></code> à une collection (par ex. <code class="docutils literal notranslate"><span class="pre">list</span></code>, <code class="docutils literal notranslate"><span class="pre">tuple</span></code> ou <code class="docutils literal notranslate"><span class="pre">set</span></code>) sous-ensemble de  <a class="reference internal" href="#django.contrib.admin.ModelAdmin.list_display" title="django.contrib.admin.ModelAdmin.list_display"><code class="xref py py-attr docutils literal notranslate"><span class="pre">list_display</span></code></a> qui sont susceptibles d’être triés. Une collection vide désactive le tri pour toutes les colonnes.</p>
<p>Si vous avez besoin de définir cette liste dynamiquement, vous pouvez implémenter une méthode <a class="reference internal" href="#django.contrib.admin.ModelAdmin.get_sortable_by" title="django.contrib.admin.ModelAdmin.get_sortable_by"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_sortable_by()</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.view_on_site">
<code class="descclassname">ModelAdmin.</code><code class="descname">view_on_site</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.view_on_site" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Définissez <code class="docutils literal notranslate"><span class="pre">view_on_site</span></code> pour contrôler l’affichage du lien «&nbsp;Voir sur le site&nbsp;». Ce lien est censé diriger vers une URL où l’objet enregistré peut être affiché.</p>
<p>Cet attribut peut soit être une valeur booléenne, soit un objet exécutable. Quand il vaut <code class="docutils literal notranslate"><span class="pre">True</span></code> (par défaut), la méthode <a class="reference internal" href="../../models/instances.html#django.db.models.Model.get_absolute_url" title="django.db.models.Model.get_absolute_url"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_absolute_url()</span></code></a> de l’objet est utilisée pour générer l’URL.</p>
<p>Si un modèle possède une méthode <a class="reference internal" href="../../models/instances.html#django.db.models.Model.get_absolute_url" title="django.db.models.Model.get_absolute_url"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_absolute_url()</span></code></a> mais que vous ne souhaitez pas faire apparaître le bouton «&nbsp;Voir sur le site&nbsp;», il suffit de définir <code class="docutils literal notranslate"><span class="pre">view_on_site</span></code> à <code class="docutils literal notranslate"><span class="pre">False</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="k">import</span> <span class="n">admin</span>

<span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">view_on_site</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
<p>Dans le cas où il s’agit d’un objet exécutable, celui-ci accepte une instance de modèle en paramètre. Par exemple&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="k">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">django.urls</span> <span class="k">import</span> <span class="n">reverse</span>

<span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">view_on_site</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;person-detail&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;slug&#39;</span><span class="p">:</span> <span class="n">obj</span><span class="o">.</span><span class="n">slug</span><span class="p">})</span>
        <span class="k">return</span> <span class="s1">&#39;https://example.com&#39;</span> <span class="o">+</span> <span class="n">url</span>
</pre></div>
</div>
</dd></dl>

<div class="section" id="s-custom-template-options">
<span id="custom-template-options"></span><h4>Options de gabarit personnalisées<a class="headerlink" href="#custom-template-options" title="Lien permanent vers ce titre">¶</a></h4>
<p>La section <a class="reference internal" href="#admin-overriding-templates"><span class="std std-ref">Redéfinition des gabarits d’administration</span></a> décrit comment surcharger ou étendre les gabarits d’administration par défaut. Utilisez les options suivantes pour remplacer les gabarits par défaut utilisés par les vues <a class="reference internal" href="#django.contrib.admin.ModelAdmin" title="django.contrib.admin.ModelAdmin"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelAdmin</span></code></a>:</p>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.add_form_template">
<code class="descclassname">ModelAdmin.</code><code class="descname">add_form_template</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.add_form_template" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Chemin d’accès vers un gabarit personnalisé, utilisé par <a class="reference internal" href="#django.contrib.admin.ModelAdmin.add_view" title="django.contrib.admin.ModelAdmin.add_view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_view()</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.change_form_template">
<code class="descclassname">ModelAdmin.</code><code class="descname">change_form_template</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.change_form_template" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Chemin d’accès vers un gabarit personnalisé, utilisé par <a class="reference internal" href="#django.contrib.admin.ModelAdmin.change_view" title="django.contrib.admin.ModelAdmin.change_view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">change_view()</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.change_list_template">
<code class="descclassname">ModelAdmin.</code><code class="descname">change_list_template</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.change_list_template" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Chemin d’accès vers un gabarit personnalisé, utilisé par <a class="reference internal" href="#django.contrib.admin.ModelAdmin.changelist_view" title="django.contrib.admin.ModelAdmin.changelist_view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">changelist_view()</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.delete_confirmation_template">
<code class="descclassname">ModelAdmin.</code><code class="descname">delete_confirmation_template</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.delete_confirmation_template" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Chemin d’accès vers un gabarit personnalisé, utilisé par <a class="reference internal" href="#django.contrib.admin.ModelAdmin.delete_view" title="django.contrib.admin.ModelAdmin.delete_view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">delete_view()</span></code></a> pour l’affichage d’une page de confirmation lors de la suppression d’un ou plusieurs objets.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.delete_selected_confirmation_template">
<code class="descclassname">ModelAdmin.</code><code class="descname">delete_selected_confirmation_template</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.delete_selected_confirmation_template" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Chemin d’accès vers un gabarit personnalisé, utilisé par la méthode d’action <code class="docutils literal notranslate"><span class="pre">delete_selected</span></code> pour l’affichage d’une page de confirmation lors de la suppression d’un ou plusieurs objets. Voir la <a class="reference internal" href="actions.html"><span class="doc">documentation des actions</span></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.object_history_template">
<code class="descclassname">ModelAdmin.</code><code class="descname">object_history_template</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.object_history_template" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Chemin d’accès vers un gabarit personnalisé, utilisé par <a class="reference internal" href="#django.contrib.admin.ModelAdmin.history_view" title="django.contrib.admin.ModelAdmin.history_view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">history_view()</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.popup_response_template">
<code class="descclassname">ModelAdmin.</code><code class="descname">popup_response_template</code><a class="headerlink" href="#django.contrib.admin.ModelAdmin.popup_response_template" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Chemin d’accès vers un gabarit personnalisé, utilisé par <a class="reference internal" href="#django.contrib.admin.ModelAdmin.response_add" title="django.contrib.admin.ModelAdmin.response_add"><code class="xref py py-meth docutils literal notranslate"><span class="pre">response_add()</span></code></a>, <a class="reference internal" href="#django.contrib.admin.ModelAdmin.response_change" title="django.contrib.admin.ModelAdmin.response_change"><code class="xref py py-meth docutils literal notranslate"><span class="pre">response_change()</span></code></a> et <a class="reference internal" href="#django.contrib.admin.ModelAdmin.response_delete" title="django.contrib.admin.ModelAdmin.response_delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">response_delete()</span></code></a>.</p>
</dd></dl>

</div>
</div>
<div class="section" id="s-modeladmin-methods">
<span id="s-model-admin-methods"></span><span id="modeladmin-methods"></span><span id="model-admin-methods"></span><h3>Méthodes de <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code><a class="headerlink" href="#modeladmin-methods" title="Lien permanent vers ce titre">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Avertissement</p>
<p class="last">Lorsque vous surchargez les méthodes <a class="reference internal" href="#django.contrib.admin.ModelAdmin.save_model" title="django.contrib.admin.ModelAdmin.save_model"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ModelAdmin.save_model()</span></code></a> et <a class="reference internal" href="#django.contrib.admin.ModelAdmin.delete_model" title="django.contrib.admin.ModelAdmin.delete_model"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ModelAdmin.delete_model()</span></code></a>, votre code doit enregistrer, respectivement supprimer l’objet. Elles ne sont pas conçues à des fins de veto, mais plutôt pour vous permettre d’effectuer des opérations supplémentaires.</p>
</div>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.save_model">
<code class="descclassname">ModelAdmin.</code><code class="descname">save_model</code>(<em>request</em>, <em>obj</em>, <em>form</em>, <em>change</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.save_model" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La méthode <code class="docutils literal notranslate"><span class="pre">save_model</span></code> reçoit la requête <code class="docutils literal notranslate"><span class="pre">HttpRequest</span></code>, une instance de modèle, une instance de <code class="docutils literal notranslate"><span class="pre">ModelForm</span></code> et une valeur booléenne indiquant si elle ajoute ou modifie l’objet. La surcharge de cette méthode permet d’effectuer des opérations d’avant ou d’après enregistrement. Appelez <code class="docutils literal notranslate"><span class="pre">super().save_model()</span></code> pour enregistrer l’objet avec <a class="reference internal" href="../../models/instances.html#django.db.models.Model.save" title="django.db.models.Model.save"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Model.save()</span></code></a>.</p>
<p>Par exemple, pour lier l’utilisateur <code class="docutils literal notranslate"><span class="pre">request.user</span></code> à l’objet avant d’enregistrer&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="k">import</span> <span class="n">admin</span>

<span class="k">class</span> <span class="nc">ArticleAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">save_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">form</span><span class="p">,</span> <span class="n">change</span><span class="p">):</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">user</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">save_model</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">form</span><span class="p">,</span> <span class="n">change</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.delete_model">
<code class="descclassname">ModelAdmin.</code><code class="descname">delete_model</code>(<em>request</em>, <em>obj</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.delete_model" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La méthode <code class="docutils literal notranslate"><span class="pre">delete_model</span></code> reçoit la requête <code class="docutils literal notranslate"><span class="pre">HttpRequest</span></code> et une instance de modèle. La surcharge de cette méthode permet d’effectuer des opérations d’avant ou d’après suppression. Appelez <code class="docutils literal notranslate"><span class="pre">super().delete_model()</span></code> pour supprimer l’objet avec <a class="reference internal" href="../../models/instances.html#django.db.models.Model.delete" title="django.db.models.Model.delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Model.delete()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.delete_queryset">
<code class="descclassname">ModelAdmin.</code><code class="descname">delete_queryset</code>(<em>request</em>, <em>queryset</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.delete_queryset" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La méthode <code class="docutils literal notranslate"><span class="pre">delete_queryset()</span></code> reçoit une requête <code class="docutils literal notranslate"><span class="pre">HttpRequest</span></code> et un jeu <code class="docutils literal notranslate"><span class="pre">QuerySet</span></code> d’objets à supprimer. Surchargez cette méthode pour personnaliser le processus de suppression de l”<a class="reference internal" href="actions.html"><span class="doc">action</span></a> « Supprimer les objets sélectionnés ».</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.save_formset">
<code class="descclassname">ModelAdmin.</code><code class="descname">save_formset</code>(<em>request</em>, <em>form</em>, <em>formset</em>, <em>change</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.save_formset" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La méthode <code class="docutils literal notranslate"><span class="pre">save_formset</span></code> reçoit la requête <code class="docutils literal notranslate"><span class="pre">HttpRequest</span></code>, l’instance parente <code class="docutils literal notranslate"><span class="pre">ModelForm</span></code> et une valeur booléenne indiquant si elle ajoute ou modifie l’objet parent.</p>
<p>Par exemple, pour lier l’utilisateur <code class="docutils literal notranslate"><span class="pre">request.user</span></code> à chaque instance de modèle modifiée dans le formulaire groupé&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ArticleAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">save_formset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">form</span><span class="p">,</span> <span class="n">formset</span><span class="p">,</span> <span class="n">change</span><span class="p">):</span>
        <span class="n">instances</span> <span class="o">=</span> <span class="n">formset</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">commit</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">formset</span><span class="o">.</span><span class="n">deleted_objects</span><span class="p">:</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">instance</span> <span class="ow">in</span> <span class="n">instances</span><span class="p">:</span>
            <span class="n">instance</span><span class="o">.</span><span class="n">user</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span>
            <span class="n">instance</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="n">formset</span><span class="o">.</span><span class="n">save_m2m</span><span class="p">()</span>
</pre></div>
</div>
<p>Voir aussi <a class="reference internal" href="../../../topics/forms/modelforms.html#saving-objects-in-the-formset"><span class="std std-ref">Enregistrement des objets des formulaires groupés</span></a>.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_ordering">
<code class="descclassname">ModelAdmin.</code><code class="descname">get_ordering</code>(<em>request</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.get_ordering" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La méthode <code class="docutils literal notranslate"><span class="pre">get_ordering</span></code> reçoit un paramètre <code class="docutils literal notranslate"><span class="pre">request</span></code> et doit renvoyer un objet <code class="docutils literal notranslate"><span class="pre">list</span></code> ou <code class="docutils literal notranslate"><span class="pre">tuple</span></code> déterminant l’ordre de tri de manière similaire à l’attribut <a class="reference internal" href="#django.contrib.admin.ModelAdmin.ordering" title="django.contrib.admin.ModelAdmin.ordering"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ordering</span></code></a>. Par exemple&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">get_ordering</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;rank&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_search_results">
<code class="descclassname">ModelAdmin.</code><code class="descname">get_search_results</code>(<em>request</em>, <em>queryset</em>, <em>search_term</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.get_search_results" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La méthode <code class="docutils literal notranslate"><span class="pre">get_search_results</span></code> modifie la liste des objets affichés en fonction de ceux qui correspondent au terme de recherche fourni. Elle accepte la requête HTTP, un jeu de requête qui applique les filtres courants et le terme de recherche fourni par l’utilisateur. Elle renvoie un tuple contenant un jeu de requête modifié pour appliquer la recherche, ainsi qu’une valeur booléenne indiquant si les résultats peuvent contenir des doublons.</p>
<p>L’implémentation par défaut recherche dans les champs figurant dans <a class="reference internal" href="#django.contrib.admin.ModelAdmin.search_fields" title="django.contrib.admin.ModelAdmin.search_fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ModelAdmin.search_fields</span></code></a>.</p>
<p>Cette méthode peut être redéfinie par votre propre méthode de recherche personnalisée. Par exemple, il peut être intéressant de rechercher via un champ nombre entier, ou d’utiliser un outil externe comme Solr ou Haystack. Vous devez déterminer si les changements de jeu de requête mis en œuvre par votre méthode de recherche peuvent présenter des doublons dans les résultats, et le cas échéant, renvoyer <code class="docutils literal notranslate"><span class="pre">True</span></code> dans le second élément du tuple renvoyé.</p>
<p>Par exemple, pour rechercher par <code class="docutils literal notranslate"><span class="pre">name</span></code> et <code class="docutils literal notranslate"><span class="pre">age</span></code>, vous pourriez écrire&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">)</span>
    <span class="n">search_fields</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,)</span>

    <span class="k">def</span> <span class="nf">get_search_results</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">queryset</span><span class="p">,</span> <span class="n">search_term</span><span class="p">):</span>
        <span class="n">queryset</span><span class="p">,</span> <span class="n">use_distinct</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_search_results</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">queryset</span><span class="p">,</span> <span class="n">search_term</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">search_term_as_int</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">search_term</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">queryset</span> <span class="o">|=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">age</span><span class="o">=</span><span class="n">search_term_as_int</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">queryset</span><span class="p">,</span> <span class="n">use_distinct</span>
</pre></div>
</div>
<p>Cette implémentation est plus efficace que <code class="docutils literal notranslate"><span class="pre">search_fields</span> <span class="pre">=</span> <span class="pre">('name',</span> <span class="pre">'=age')</span></code> qui résulterait dans une comparaison de chaînes pour le champ numérique, par exemple <code class="docutils literal notranslate"><span class="pre">...</span> <span class="pre">OR</span> <span class="pre">UPPER(&quot;polls_choice&quot;.&quot;votes&quot;::text)</span> <span class="pre">=</span> <span class="pre">UPPER('4')</span></code> avec PostgreSQL.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.save_related">
<code class="descclassname">ModelAdmin.</code><code class="descname">save_related</code>(<em>request</em>, <em>form</em>, <em>formsets</em>, <em>change</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.save_related" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La méthode <code class="docutils literal notranslate"><span class="pre">save_related</span></code> reçoit la requête <code class="docutils literal notranslate"><span class="pre">HttpRequest</span></code>, l’instance parente du <code class="docutils literal notranslate"><span class="pre">ModelForm</span></code>, la liste des formulaires groupés en ligne et une valeur booléenne indiquant si le parent est ajouté ou modifié. C’est l’endroit pour procéder à des opérations d’avant ou d’après enregistrement sur les objets liés au parent. Notez qu’à ce stade, l’objet parent et son formulaire ont déjà été enregistrés.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_autocomplete_fields">
<code class="descclassname">ModelAdmin.</code><code class="descname">get_autocomplete_fields</code>(<em>request</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.get_autocomplete_fields" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La méthode <code class="docutils literal notranslate"><span class="pre">get_autocomplete_fields()</span></code> reçoit la requête <code class="docutils literal notranslate"><span class="pre">HttpRequest</span></code> et est censée renvoyer une <code class="docutils literal notranslate"><span class="pre">list</span></code> ou <code class="docutils literal notranslate"><span class="pre">tuple</span></code> de noms de champs qui seront affichés avec un composant d’auto-complétion, comme décrit ci-dessus dans la section <a class="reference internal" href="#django.contrib.admin.ModelAdmin.autocomplete_fields" title="django.contrib.admin.ModelAdmin.autocomplete_fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ModelAdmin.autocomplete_fields</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_readonly_fields">
<code class="descclassname">ModelAdmin.</code><code class="descname">get_readonly_fields</code>(<em>request</em>, <em>obj=None</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.get_readonly_fields" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La méthode <code class="docutils literal notranslate"><span class="pre">get_readonly_fields</span></code> reçoit la requête <code class="docutils literal notranslate"><span class="pre">HttpRequest</span></code> et l’objet <code class="docutils literal notranslate"><span class="pre">obj</span></code> en cours d’édition (ou <code class="docutils literal notranslate"><span class="pre">None</span></code> sur un formulaire d’ajout)&nbsp;; elle est censée renvoyer un objet <code class="docutils literal notranslate"><span class="pre">list</span></code> ou <code class="docutils literal notranslate"><span class="pre">tuple</span></code> de noms de champs qui seront affichés en lecture seule, tel que décrit ci-dessus dans la section <a class="reference internal" href="#django.contrib.admin.ModelAdmin.readonly_fields" title="django.contrib.admin.ModelAdmin.readonly_fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ModelAdmin.readonly_fields</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_prepopulated_fields">
<code class="descclassname">ModelAdmin.</code><code class="descname">get_prepopulated_fields</code>(<em>request</em>, <em>obj=None</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.get_prepopulated_fields" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La méthode <code class="docutils literal notranslate"><span class="pre">get_prepopulated_fields</span></code> reçoit la requête <code class="docutils literal notranslate"><span class="pre">HttpRequest</span></code> et l’objet <code class="docutils literal notranslate"><span class="pre">obj</span></code> en cours d’édition (ou <code class="docutils literal notranslate"><span class="pre">None</span></code> sur un formulaire d’ajout)&nbsp;; elle est censée renvoyer un dictionnaire, tel que décrit ci-dessus dans la section <a class="reference internal" href="#django.contrib.admin.ModelAdmin.prepopulated_fields" title="django.contrib.admin.ModelAdmin.prepopulated_fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ModelAdmin.prepopulated_fields</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_list_display">
<code class="descclassname">ModelAdmin.</code><code class="descname">get_list_display</code>(<em>request</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.get_list_display" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La méthode <code class="docutils literal notranslate"><span class="pre">get_list_display</span></code> reçoit la requête <code class="docutils literal notranslate"><span class="pre">HttpRequest</span></code> et est censée renvoyer une <code class="docutils literal notranslate"><span class="pre">list</span></code> ou <code class="docutils literal notranslate"><span class="pre">tuple</span></code> de noms de champs qui seront affichés sur la vue de liste pour modification, comme décrit ci-dessus dans la section <a class="reference internal" href="#django.contrib.admin.ModelAdmin.list_display" title="django.contrib.admin.ModelAdmin.list_display"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ModelAdmin.list_display</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_list_display_links">
<code class="descclassname">ModelAdmin.</code><code class="descname">get_list_display_links</code>(<em>request</em>, <em>list_display</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.get_list_display_links" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La méthode <code class="docutils literal notranslate"><span class="pre">get_list_display_links</span></code> reçoit la requête <code class="docutils literal notranslate"><span class="pre">HttpRequest</span></code> et la <code class="docutils literal notranslate"><span class="pre">list</span></code> ou le <code class="docutils literal notranslate"><span class="pre">tuple</span></code> renvoyé par <a class="reference internal" href="#django.contrib.admin.ModelAdmin.get_list_display" title="django.contrib.admin.ModelAdmin.get_list_display"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ModelAdmin.get_list_display()</span></code></a>. Elle est censée renvoyer <code class="docutils literal notranslate"><span class="pre">None</span></code> ou une <code class="docutils literal notranslate"><span class="pre">list</span></code> ou un <code class="docutils literal notranslate"><span class="pre">tuple</span></code> de noms de champs apparaissant dans la page de liste pour modification qui seront liés à la vue d’édition, comme décrit dans la section <a class="reference internal" href="#django.contrib.admin.ModelAdmin.list_display_links" title="django.contrib.admin.ModelAdmin.list_display_links"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ModelAdmin.list_display_links</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_exclude">
<code class="descclassname">ModelAdmin.</code><code class="descname">get_exclude</code>(<em>request</em>, <em>obj=None</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.get_exclude" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La méthode <code class="docutils literal notranslate"><span class="pre">get_exclude</span></code> reçoit la requête <code class="docutils literal notranslate"><span class="pre">HttpRequest</span></code> et l’objet <code class="docutils literal notranslate"><span class="pre">obj</span></code> en cours d’édition (ou <code class="docutils literal notranslate"><span class="pre">None</span></code> pour un formulaire d’ajout) et est censée renvoyer une liste de champs, comme décrit dans <a class="reference internal" href="#django.contrib.admin.ModelAdmin.exclude" title="django.contrib.admin.ModelAdmin.exclude"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ModelAdmin.exclude</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_fields">
<code class="descclassname">ModelAdmin.</code><code class="descname">get_fields</code>(<em>request</em>, <em>obj=None</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.get_fields" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La méthode <code class="docutils literal notranslate"><span class="pre">get_fields</span></code> reçoit la requête <code class="docutils literal notranslate"><span class="pre">HttpRequest</span></code> et l’objet <code class="docutils literal notranslate"><span class="pre">obj</span></code> en cours d’édition (ou <code class="docutils literal notranslate"><span class="pre">None</span></code> pour un formulaire d’ajout) et est censée renvoyer une liste de champs, comme décrit ci-dessus dans la section <a class="reference internal" href="#django.contrib.admin.ModelAdmin.fields" title="django.contrib.admin.ModelAdmin.fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ModelAdmin.fields</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_fieldsets">
<code class="descclassname">ModelAdmin.</code><code class="descname">get_fieldsets</code>(<em>request</em>, <em>obj=None</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.get_fieldsets" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La méthode <code class="docutils literal notranslate"><span class="pre">get_fieldsets</span></code> reçoit la requête <code class="docutils literal notranslate"><span class="pre">HttpRequest</span></code> et l’objet <code class="docutils literal notranslate"><span class="pre">obj</span></code> en cours d’édition (ou <code class="docutils literal notranslate"><span class="pre">None</span></code> sur un formulaire d’ajout) et est censée renvoyer une liste de tuples binaires, où chaque tuple représente une section <code class="docutils literal notranslate"><span class="pre">&lt;fieldset&gt;</span></code> sur la page du formulaire d’administration, tel que décrit ci-dessus dans la section <a class="reference internal" href="#django.contrib.admin.ModelAdmin.fieldsets" title="django.contrib.admin.ModelAdmin.fieldsets"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ModelAdmin.fieldsets</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_list_filter">
<code class="descclassname">ModelAdmin.</code><code class="descname">get_list_filter</code>(<em>request</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.get_list_filter" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La méthode <code class="docutils literal notranslate"><span class="pre">get_list_filter</span></code> reçoit la requête <code class="docutils literal notranslate"><span class="pre">HttpRequest</span></code> et est censée renvoyer le même genre de séquence que pour l’attribut <a class="reference internal" href="#django.contrib.admin.ModelAdmin.list_filter" title="django.contrib.admin.ModelAdmin.list_filter"><code class="xref py py-attr docutils literal notranslate"><span class="pre">list_filter</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_list_select_related">
<code class="descclassname">ModelAdmin.</code><code class="descname">get_list_select_related</code>(<em>request</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.get_list_select_related" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La méthode <code class="docutils literal notranslate"><span class="pre">get_list_select_related</span></code> reçoit la requête <code class="docutils literal notranslate"><span class="pre">HttpRequest</span></code> et est censée renvoyer une valeur booléenne ou une liste comme le fait  <a class="reference internal" href="#django.contrib.admin.ModelAdmin.list_select_related" title="django.contrib.admin.ModelAdmin.list_select_related"><code class="xref py py-attr docutils literal notranslate"><span class="pre">list_select_related</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_search_fields">
<code class="descclassname">ModelAdmin.</code><code class="descname">get_search_fields</code>(<em>request</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.get_search_fields" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La méthode <code class="docutils literal notranslate"><span class="pre">get_search_fields</span></code> reçoit la requête <code class="docutils literal notranslate"><span class="pre">HttpRequest</span></code> et est censée renvoyer le même genre de type de séquence que pour l’attribut <a class="reference internal" href="#django.contrib.admin.ModelAdmin.search_fields" title="django.contrib.admin.ModelAdmin.search_fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">search_fields</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_sortable_by">
<code class="descclassname">ModelAdmin.</code><code class="descname">get_sortable_by</code>(<em>request</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.get_sortable_by" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La méthode <code class="docutils literal notranslate"><span class="pre">get_sortable_by()</span></code> reçoit la requête <code class="docutils literal notranslate"><span class="pre">HttpRequest</span></code> et est censée renvoyer une collection (<code class="docutils literal notranslate"><span class="pre">list</span></code>, <code class="docutils literal notranslate"><span class="pre">tuple</span></code> ou <code class="docutils literal notranslate"><span class="pre">set</span></code>) de noms de champs qui pourront être triés sur la page de liste pour modification.</p>
<p>Son implémentation par défaut renvoie <a class="reference internal" href="#django.contrib.admin.ModelAdmin.sortable_by" title="django.contrib.admin.ModelAdmin.sortable_by"><code class="xref py py-attr docutils literal notranslate"><span class="pre">sortable_by</span></code></a> si celui-ci est défini, sinon il fait appel à <a class="reference internal" href="#django.contrib.admin.ModelAdmin.get_list_display" title="django.contrib.admin.ModelAdmin.get_list_display"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_list_display()</span></code></a>.</p>
<p>Par exemple, pour empêcher le tri d’une ou de plusieurs colonnes</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">get_sortable_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">get_list_display</span><span class="p">(</span><span class="n">request</span><span class="p">)}</span> <span class="o">-</span> <span class="p">{</span><span class="s1">&#39;rank&#39;</span><span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_inline_instances">
<code class="descclassname">ModelAdmin.</code><code class="descname">get_inline_instances</code>(<em>request</em>, <em>obj=None</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.get_inline_instances" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La méthode <code class="docutils literal notranslate"><span class="pre">get_inline_instances</span></code> reçoit la requête <code class="docutils literal notranslate"><span class="pre">HttpRequest</span></code> et l’objet <code class="docutils literal notranslate"><span class="pre">obj</span></code> en cours d’édition (ou <code class="docutils literal notranslate"><span class="pre">None</span></code> sur un formulaire d’ajout) et est censée renvoyer un objet <code class="docutils literal notranslate"><span class="pre">list</span></code> ou <code class="docutils literal notranslate"><span class="pre">tuple</span></code> formé d’objets <a class="reference internal" href="#django.contrib.admin.InlineModelAdmin" title="django.contrib.admin.InlineModelAdmin"><code class="xref py py-class docutils literal notranslate"><span class="pre">InlineModelAdmin</span></code></a>, comme décrit ci-dessous dans la section <a class="reference internal" href="#django.contrib.admin.InlineModelAdmin" title="django.contrib.admin.InlineModelAdmin"><code class="xref py py-class docutils literal notranslate"><span class="pre">InlineModelAdmin</span></code></a>. Par exemple, l’exemple suivant renvoie des sous-formulaires sans le filtrage par défaut basé sur les permissions d’ajout, de modification, de suppression et d’affichage&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyModelAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">inlines</span> <span class="o">=</span> <span class="p">(</span><span class="n">MyInline</span><span class="p">,)</span>

    <span class="k">def</span> <span class="nf">get_inline_instances</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">inline</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">admin_site</span><span class="p">)</span> <span class="k">for</span> <span class="n">inline</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inlines</span><span class="p">]</span>
</pre></div>
</div>
<p>Si vous surchargez cette méthode, assurez-vous que les sous-formulaires renvoyés sont des instances de classes définies dans <a class="reference internal" href="#django.contrib.admin.ModelAdmin.inlines" title="django.contrib.admin.ModelAdmin.inlines"><code class="xref py py-attr docutils literal notranslate"><span class="pre">inlines</span></code></a>, sinon vous pouvez vous attendre à recevoir des erreurs «&nbsp;Bad Request&nbsp;» lors de l’ajout d’objets liés.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_inlines">
<code class="descclassname">ModelAdmin.</code><code class="descname">get_inlines</code>(<em>request</em>, <em>obj</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.get_inlines" title="Lien permanent vers cette définition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 3.0.</span> </div>
<p>La méthode <code class="docutils literal notranslate"><span class="pre">get_inlines</span></code> reçoit la requête <code class="docutils literal notranslate"><span class="pre">HttpRequest</span></code> et l’objet <code class="docutils literal notranslate"><span class="pre">obj</span></code> en cours d’édition (ou <code class="docutils literal notranslate"><span class="pre">None</span></code> pour un formulaire d’ajout) et est censée renvoyer un objet itérable de  sous-formulaires. Vous pouvez surcharger cette méthode pour ajouter dynamiquement des sous-formulaires en fonction de la requête ou de l’instance de modèle au lieu de les définir dans <a class="reference internal" href="#django.contrib.admin.ModelAdmin.inlines" title="django.contrib.admin.ModelAdmin.inlines"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ModelAdmin.inlines</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_urls">
<code class="descclassname">ModelAdmin.</code><code class="descname">get_urls</code>()<a class="headerlink" href="#django.contrib.admin.ModelAdmin.get_urls" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La méthode <code class="docutils literal notranslate"><span class="pre">get_urls</span></code> sur un <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code> renvoie les URL à utiliser pour ce <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code> de la même manière qu’une configuration d’URL. Par conséquent, vous pouvez les enrichir comme documenté dans <a class="reference internal" href="../../../topics/http/urls.html"><span class="doc">Distribution des URL</span></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="k">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">django.template.response</span> <span class="k">import</span> <span class="n">TemplateResponse</span>
<span class="kn">from</span> <span class="nn">django.urls</span> <span class="k">import</span> <span class="n">path</span>

<span class="k">class</span> <span class="nc">MyModelAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">urls</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_urls</span><span class="p">()</span>
        <span class="n">my_urls</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">path</span><span class="p">(</span><span class="s1">&#39;my_view/&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">my_view</span><span class="p">),</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="n">my_urls</span> <span class="o">+</span> <span class="n">urls</span>

    <span class="k">def</span> <span class="nf">my_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="c1"># ...</span>
        <span class="n">context</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
           <span class="c1"># Include common variables for rendering the admin template.</span>
           <span class="bp">self</span><span class="o">.</span><span class="n">admin_site</span><span class="o">.</span><span class="n">each_context</span><span class="p">(</span><span class="n">request</span><span class="p">),</span>
           <span class="c1"># Anything else you want in the context...</span>
           <span class="n">key</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">TemplateResponse</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;sometemplate.html&quot;</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
</pre></div>
</div>
<p>Si vous souhaitez utiliser la disposition d’administration, basez-vous sur <code class="docutils literal notranslate"><span class="pre">admin/base_site.html</span></code>:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&quot;admin/base_site.html&quot;</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
...
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Notez que les motifs personnalisés sont inclus <em>avant</em> les URL d’administration habituelles&nbsp;: les motifs d’URL de l’administration sont très permissifs et correspondent à peu près à tout, c’est pourquoi les URL personnalisées précèdent les motifs intégrés.</p>
<p class="last">Dans cet exemple, <code class="docutils literal notranslate"><span class="pre">my_view</span></code> sera accessible à <code class="docutils literal notranslate"><span class="pre">/admin/myapp/mymodel/my_view/</span></code> (en supposant que les URL d’administration sont incluses sous <code class="docutils literal notranslate"><span class="pre">/admin/</span></code>).</p>
</div>
<p>Cependant, la fonction <code class="docutils literal notranslate"><span class="pre">self.my_view</span></code> enregistrée ci-dessus souffre de deux problèmes :</p>
<ul class="simple">
<li>Elle n’effectue <em>pas</em> de contrôles d’autorisation, de sorte qu’elle sera accessible au grand public.</li>
<li>Elle ne fournit <em>pas</em> de détails d’en-tête pour empêcher la mise en cache. Cela signifie que si la page récupère des données de la base de données, et que l’intergiciel de cache est actif, la page pourrait afficher des informations périmées.</li>
</ul>
<p>Comme ce n’est généralement pas ce qui est souhaité, Django fournit un adaptateur pratique pour vérifier les autorisations et marquer la vue afin d’éviter sa mise en cache. Cet adaptateur est <code class="docutils literal notranslate"><span class="pre">AdminSite.admin_view()</span></code> (c’est-à-dire <code class="docutils literal notranslate"><span class="pre">self.admin_site.admin_view</span></code> à l’intérieur d’une instance de <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code>)&nbsp;; utilisez-le comme suit&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyModelAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">urls</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_urls</span><span class="p">()</span>
        <span class="n">my_urls</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">path</span><span class="p">(</span><span class="s1">&#39;my_view/&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">admin_site</span><span class="o">.</span><span class="n">admin_view</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">my_view</span><span class="p">))</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="n">my_urls</span> <span class="o">+</span> <span class="n">urls</span>
</pre></div>
</div>
<p>Notez la vue adaptée dans la cinquième ligne ci-dessus</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">path</span><span class="p">(</span><span class="s1">&#39;my_view/&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">admin_site</span><span class="o">.</span><span class="n">admin_view</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">my_view</span><span class="p">))</span>
</pre></div>
</div>
<p>Cette adaptation protège <code class="docutils literal notranslate"><span class="pre">self.my_view</span></code> des accès non autorisés et applique le décorateur <a class="reference internal" href="../../../topics/http/decorators.html#django.views.decorators.cache.never_cache" title="django.views.decorators.cache.never_cache"><code class="xref py py-func docutils literal notranslate"><span class="pre">django.views.decorators.cache.never_cache()</span></code></a> pour s’assurer qu’elle n’est pas mise en cache dans le cas où l’intergiciel de cache est actif.</p>
<p>Si la page peut être mise en cache, mais que vous voulez quand même effectuer le contrôle d’autorisation, vous pouvez passer un paramètre <code class="docutils literal notranslate"><span class="pre">cacheable=True</span></code> à <code class="docutils literal notranslate"><span class="pre">AdminSite.admin_view()</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">path</span><span class="p">(</span><span class="s1">&#39;my_view/&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">admin_site</span><span class="o">.</span><span class="n">admin_view</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">my_view</span><span class="p">,</span> <span class="n">cacheable</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</pre></div>
</div>
<p>Les vues <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code> ont des attributs <code class="docutils literal notranslate"><span class="pre">model_admin</span></code>. Les autres vues <code class="docutils literal notranslate"><span class="pre">AdminSite</span></code> ont des attributs <code class="docutils literal notranslate"><span class="pre">admin_site</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_form">
<code class="descclassname">ModelAdmin.</code><code class="descname">get_form</code>(<em>request</em>, <em>obj=None</em>, <em>**kwargs</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.get_form" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Renvoie une classe <a class="reference internal" href="../../../topics/forms/modelforms.html#django.forms.ModelForm" title="django.forms.ModelForm"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelForm</span></code></a> utilisée dans les vues d’ajout et d’édition de l’administration, voir <a class="reference internal" href="#django.contrib.admin.ModelAdmin.add_view" title="django.contrib.admin.ModelAdmin.add_view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_view()</span></code></a> et <a class="reference internal" href="#django.contrib.admin.ModelAdmin.change_view" title="django.contrib.admin.ModelAdmin.change_view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">change_view()</span></code></a>.</p>
<p>L’implémentation de base utilise <a class="reference internal" href="../../forms/models.html#django.forms.models.modelform_factory" title="django.forms.models.modelform_factory"><code class="xref py py-func docutils literal notranslate"><span class="pre">modelform_factory()</span></code></a> comme sous-classe de <a class="reference internal" href="#django.contrib.admin.ModelAdmin.form" title="django.contrib.admin.ModelAdmin.form"><code class="xref py py-attr docutils literal notranslate"><span class="pre">form</span></code></a>, modifié par des attributs tels que <a class="reference internal" href="#django.contrib.admin.ModelAdmin.fields" title="django.contrib.admin.ModelAdmin.fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">fields</span></code></a> et <a class="reference internal" href="#django.contrib.admin.ModelAdmin.exclude" title="django.contrib.admin.ModelAdmin.exclude"><code class="xref py py-attr docutils literal notranslate"><span class="pre">exclude</span></code></a>. Donc par exemple, si vous vouliez ajouter des champs supplémentaires pour les superutilisateurs, il serait possible d’insérer un formulaire de base différent comme ceci&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyModelAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_form</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;form&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">MySuperuserForm</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_form</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<p>Il est aussi possible de renvoyer directement une classe <a class="reference internal" href="../../../topics/forms/modelforms.html#django.forms.ModelForm" title="django.forms.ModelForm"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelForm</span></code></a> personnalisée.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_formsets_with_inlines">
<code class="descclassname">ModelAdmin.</code><code class="descname">get_formsets_with_inlines</code>(<em>request</em>, <em>obj=None</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.get_formsets_with_inlines" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Génère des paires (<code class="docutils literal notranslate"><span class="pre">FormSet</span></code>, <a class="reference internal" href="#django.contrib.admin.InlineModelAdmin" title="django.contrib.admin.InlineModelAdmin"><code class="xref py py-class docutils literal notranslate"><span class="pre">InlineModelAdmin</span></code></a>) utilisées dans les vues d’ajout et d’édition de l’administration.</p>
<p>Par exemple, si vous souhaitez afficher un sous-formulaire particulier et uniquement dans la vue d’édition, vous pouvez redéfinir <code class="docutils literal notranslate"><span class="pre">get_formsets_with_inlines</span></code> comme suit</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyModelAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">inlines</span> <span class="o">=</span> <span class="p">[</span><span class="n">MyInline</span><span class="p">,</span> <span class="n">SomeOtherInline</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_formsets_with_inlines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">inline</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_inline_instances</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
            <span class="c1"># hide MyInline in the add view</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">inline</span><span class="p">,</span> <span class="n">MyInline</span><span class="p">)</span> <span class="ow">or</span> <span class="n">obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">inline</span><span class="o">.</span><span class="n">get_formset</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">obj</span><span class="p">),</span> <span class="n">inline</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.formfield_for_foreignkey">
<code class="descclassname">ModelAdmin.</code><code class="descname">formfield_for_foreignkey</code>(<em>db_field</em>, <em>request</em>, <em>**kwargs</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.formfield_for_foreignkey" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La méthode <code class="docutils literal notranslate"><span class="pre">formfield_for_foreignkey</span></code> d’un <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code> permet de surcharger le champ de formulaire par défaut pour un champ de clé étrangère. Par exemple, pour renvoyer un sous-ensemble d’objets de ce champ de clé étrangère en fonction de l’utilisateur&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyModelAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">formfield_for_foreignkey</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">db_field</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">db_field</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;car&quot;</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;queryset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Car</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">owner</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">formfield_for_foreignkey</span><span class="p">(</span><span class="n">db_field</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<p>Cet exemple utilise l’instance <code class="docutils literal notranslate"><span class="pre">HttpRequest</span></code> pour filtrer le champ de clé étrangère <code class="docutils literal notranslate"><span class="pre">Car</span></code> afin de n’afficher que les voitures appartenant à l’instance <code class="docutils literal notranslate"><span class="pre">User</span></code>.</p>
<p>Pour des filtres plus complexes, vous pouvez utiliser la méthode <code class="docutils literal notranslate"><span class="pre">ModelForm.__init__()</span></code> pour filtrer en fonction d’une <code class="docutils literal notranslate"><span class="pre">instance</span></code> du modèle (voir <a class="reference internal" href="../../forms/fields.html#fields-which-handle-relationships"><span class="std std-ref">Champs dédiés aux relations</span></a>). Par exemple</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">CountryAdminForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">ModelForm</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;capital&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">queryset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance</span><span class="o">.</span><span class="n">cities</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">CountryAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">form</span> <span class="o">=</span> <span class="n">CountryAdminForm</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.formfield_for_manytomany">
<code class="descclassname">ModelAdmin.</code><code class="descname">formfield_for_manytomany</code>(<em>db_field</em>, <em>request</em>, <em>**kwargs</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.formfield_for_manytomany" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Tout comme la méthode <code class="docutils literal notranslate"><span class="pre">formfield_for_foreignkey</span></code>, la méthode <code class="docutils literal notranslate"><span class="pre">formfield_for_manytomany</span></code> peut être redéfinie pour modifier le champ de formulaire par défaut d’un champ plusieurs-à-plusieurs. Par exemple, si un propriétaire peut posséder plusieurs voitures et que les voitures peuvent appartenir à plusieurs propriétaires – une relation plusieurs-à-plusieurs – vous pouvez filtrer le champ de clé étrangère <code class="docutils literal notranslate"><span class="pre">Car</span></code> pour n’afficher que les voitures appartenant à l’utilisateur <code class="docutils literal notranslate"><span class="pre">User</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyModelAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">formfield_for_manytomany</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">db_field</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">db_field</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;cars&quot;</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;queryset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Car</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">owner</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">formfield_for_manytomany</span><span class="p">(</span><span class="n">db_field</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.formfield_for_choice_field">
<code class="descclassname">ModelAdmin.</code><code class="descname">formfield_for_choice_field</code>(<em>db_field</em>, <em>request</em>, <em>**kwargs</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.formfield_for_choice_field" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Tout comme les méthodes <code class="docutils literal notranslate"><span class="pre">formfield_for_foreignkey</span></code> et <code class="docutils literal notranslate"><span class="pre">formfield_for_manytomany</span></code>, la méthode <code class="docutils literal notranslate"><span class="pre">formfield_for_choice_field</span></code> peut être redéfinie pour modifier le champ de formulaire par défaut pour un champ avec des choix définis. Par exemple, si les choix qui s’offrent à un super-utilisateur doivent être différents de ceux disponibles pour les utilisateurs réguliers, vous pouvez procéder comme suit&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyModelAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">formfield_for_choice_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">db_field</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">db_field</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;status&quot;</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;choices&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                <span class="p">(</span><span class="s1">&#39;accepted&#39;</span><span class="p">,</span> <span class="s1">&#39;Accepted&#39;</span><span class="p">),</span>
                <span class="p">(</span><span class="s1">&#39;denied&#39;</span><span class="p">,</span> <span class="s1">&#39;Denied&#39;</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;choices&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="p">((</span><span class="s1">&#39;ready&#39;</span><span class="p">,</span> <span class="s1">&#39;Ready for deployment&#39;</span><span class="p">),)</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">formfield_for_choice_field</span><span class="p">(</span><span class="n">db_field</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition-note admonition">
<p class="first admonition-title">Note</p>
<p class="last">Tout attribut <code class="docutils literal notranslate"><span class="pre">choices</span></code> défini sur le champ de formulaire n’agit que sur le champ de formulaire. Si le champ correspondant du modèle comporte aussi des choix, les choix attribués au formulaire doivent être un sous-ensemble valable de ces choix, sinon l’envoi du formulaire échouera avec une exception <a class="reference internal" href="../../exceptions.html#django.core.exceptions.ValidationError" title="django.core.exceptions.ValidationError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValidationError</span></code></a> lorsque le modèle lui-même sera validé avant l’enregistrement.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_changelist">
<code class="descclassname">ModelAdmin.</code><code class="descname">get_changelist</code>(<em>request</em>, <em>**kwargs</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.get_changelist" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Renvoie la classe <code class="docutils literal notranslate"><span class="pre">Changelist</span></code> à utiliser pour la liste d’édition. Par défaut, il s’agit de la classe <code class="docutils literal notranslate"><span class="pre">django.contrib.admin.views.main.ChangeList</span></code>. En héritant de cette classe, vous pouvez modifier le comportement de la liste d’édition.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_changelist_form">
<code class="descclassname">ModelAdmin.</code><code class="descname">get_changelist_form</code>(<em>request</em>, <em>**kwargs</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.get_changelist_form" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Renvoie une classe <a class="reference internal" href="../../../topics/forms/modelforms.html#django.forms.ModelForm" title="django.forms.ModelForm"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelForm</span></code></a> utilisée dans le jeu de formulaires sur la page de liste pour modification. Pour utiliser un formulaire personnalisé, par exemple&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django</span> <span class="k">import</span> <span class="n">forms</span>

<span class="k">class</span> <span class="nc">MyForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">ModelForm</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">MyModelAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_changelist_form</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">MyForm</span>
</pre></div>
</div>
<div class="admonition-note admonition">
<p class="first admonition-title">Note</p>
<p class="last">Si vous définissez l’attribut <code class="docutils literal notranslate"><span class="pre">Meta.model</span></code> d’un formulaire <a class="reference internal" href="../../../topics/forms/modelforms.html#django.forms.ModelForm" title="django.forms.ModelForm"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelForm</span></code></a>, vous devez également définir l’attribut <code class="docutils literal notranslate"><span class="pre">Meta.fields</span></code> (ou l’attribut <code class="docutils literal notranslate"><span class="pre">Meta.exclude</span></code>). Cependant, <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code> ignore cette valeur, la redéfinissant avec l’attribut <a class="reference internal" href="#django.contrib.admin.ModelAdmin.list_editable" title="django.contrib.admin.ModelAdmin.list_editable"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ModelAdmin.list_editable</span></code></a>. La solution la plus simple consiste à omettre l’attribut <code class="docutils literal notranslate"><span class="pre">Meta.model</span></code>, puisque <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code> fournira le bon modèle à utiliser.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_changelist_formset">
<code class="descclassname">ModelAdmin.</code><code class="descname">get_changelist_formset</code>(<em>request</em>, <em>**kwargs</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.get_changelist_formset" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Renvoie une classe <a class="reference internal" href="../../../topics/forms/modelforms.html#model-formsets"><span class="std std-ref">ModelFormSet</span></a> utilisée sur la page de liste pour modification quand <a class="reference internal" href="#django.contrib.admin.ModelAdmin.list_editable" title="django.contrib.admin.ModelAdmin.list_editable"><code class="xref py py-attr docutils literal notranslate"><span class="pre">list_editable</span></code></a> est utilisé. Pour utiliser un jeu de formulaires personnalisé, par exemple&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.forms</span> <span class="k">import</span> <span class="n">BaseModelFormSet</span>

<span class="k">class</span> <span class="nc">MyAdminFormSet</span><span class="p">(</span><span class="n">BaseModelFormSet</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">MyModelAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_changelist_formset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;formset&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">MyAdminFormSet</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_changelist_formset</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.lookup_allowed">
<code class="descclassname">ModelAdmin.</code><code class="descname">lookup_allowed</code>(<em>lookup</em>, <em>value</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.lookup_allowed" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Les objets dans la page de liste pour modification de l’interface d’administration peuvent être filtrés par des expressions de recherche depuis la chaîne de requête GET de l’URL. C’est par exemple de cette manière que fonctionne <a class="reference internal" href="#django.contrib.admin.ModelAdmin.list_filter" title="django.contrib.admin.ModelAdmin.list_filter"><code class="xref py py-attr docutils literal notranslate"><span class="pre">list_filter</span></code></a>. Les expressions de recherche sont similaires à ce qui est utilisé avec <a class="reference internal" href="../../models/querysets.html#django.db.models.query.QuerySet.filter" title="django.db.models.query.QuerySet.filter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.filter()</span></code></a> (ex. : <code class="docutils literal notranslate"><span class="pre">user__email=user&#64;example.com</span></code>).  Comme les expressions de recherche peuvent être manipulées par l’utilisateur, elles doivent être nettoyées pour éviter l’exposition non autorisée de données.</p>
<p>La méthode <code class="docutils literal notranslate"><span class="pre">lookup_allowed()</span></code> reçoit un chemin de recherche à partir de la chaîne de requête (p. ex. <code class="docutils literal notranslate"><span class="pre">'user__email'`</span></code>) et la valeur correspondante (p. ex. <code class="docutils literal notranslate"><span class="pre">'user&#64;example.com'</span></code>) et renvoie un booléen indiquant si le filtrage du <code class="docutils literal notranslate"><span class="pre">QuerySet</span></code> de la page de modification utilisant les paramètres est autorisé. Si <code class="docutils literal notranslate"><span class="pre">lookup_allowed()</span></code> renvoie <code class="docutils literal notranslate"><span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">DisallowedModelAdminLookup</span></code> (sous-classe de <a class="reference internal" href="../../exceptions.html#django.core.exceptions.SuspiciousOperation" title="django.core.exceptions.SuspiciousOperation"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SuspiciousOperation</span></code></a>) est générée.</p>
<p>Par défaut, <code class="docutils literal notranslate"><span class="pre">lookup_allowed()</span></code> permet d’accéder aux champs locaux d’un modèle, aux chemins des champs utilisés dans <a class="reference internal" href="#django.contrib.admin.ModelAdmin.list_filter" title="django.contrib.admin.ModelAdmin.list_filter"><code class="xref py py-attr docutils literal notranslate"><span class="pre">list_filter</span></code></a> (mais pas les chemins de <a class="reference internal" href="#django.contrib.admin.ModelAdmin.get_list_filter" title="django.contrib.admin.ModelAdmin.get_list_filter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_list_filter()</span></code></a>) et aux expressions de recherches nécessaires pour que <a class="reference internal" href="../../models/fields.html#django.db.models.ForeignKey.limit_choices_to" title="django.db.models.ForeignKey.limit_choices_to"><code class="xref py py-attr docutils literal notranslate"><span class="pre">limit_choices_to</span></code></a> fonctionne correctement dans <a class="reference internal" href="#django.contrib.admin.ModelAdmin.raw_id_fields" title="django.contrib.admin.ModelAdmin.raw_id_fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">raw_id_fields</span></code></a>.</p>
<p>Surchargez cette méthode pour personnaliser les expressions de recherches autorisées pour votre sous-classe de <a class="reference internal" href="#django.contrib.admin.ModelAdmin" title="django.contrib.admin.ModelAdmin"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelAdmin</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.has_view_permission">
<code class="descclassname">ModelAdmin.</code><code class="descname">has_view_permission</code>(<em>request</em>, <em>obj=None</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.has_view_permission" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Doit renvoyer <code class="docutils literal notranslate"><span class="pre">True</span></code> si l’affichage de <code class="docutils literal notranslate"><span class="pre">obj</span></code> est autorisé, <code class="docutils literal notranslate"><span class="pre">False</span></code> sinon. Si <code class="docutils literal notranslate"><span class="pre">obj</span></code> vaut <code class="docutils literal notranslate"><span class="pre">None</span></code>, la valeur <code class="docutils literal notranslate"><span class="pre">True</span></code> ou <code class="docutils literal notranslate"><span class="pre">False</span></code> renvoyée doit indiquer si l’affichage d’objets de ce type est autorisé en général (par ex. le renvoi de la valeur <code class="docutils literal notranslate"><span class="pre">False</span></code> signifie que l’utilisateur actuel n’est pas autorisé à afficher un objet de ce type).</p>
<p>L’implémentation par défaut renvoie <code class="docutils literal notranslate"><span class="pre">True</span></code> si l’utilisateur possède la permission de modification ou d’affichage.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.has_add_permission">
<code class="descclassname">ModelAdmin.</code><code class="descname">has_add_permission</code>(<em>request</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.has_add_permission" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Doit renvoyer <code class="docutils literal notranslate"><span class="pre">True</span></code> si l’ajout d’un objet est autorisé, <code class="docutils literal notranslate"><span class="pre">False</span></code> sinon.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.has_change_permission">
<code class="descclassname">ModelAdmin.</code><code class="descname">has_change_permission</code>(<em>request</em>, <em>obj=None</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.has_change_permission" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Doit renvoyer <code class="docutils literal notranslate"><span class="pre">True</span></code> si l’édition de <code class="docutils literal notranslate"><span class="pre">obj</span></code> est autorisée, <code class="docutils literal notranslate"><span class="pre">False</span></code> sinon. Si <code class="docutils literal notranslate"><span class="pre">obj</span></code> vaut <code class="docutils literal notranslate"><span class="pre">None</span></code>, la valeur <code class="docutils literal notranslate"><span class="pre">True</span></code> ou <code class="docutils literal notranslate"><span class="pre">False</span></code> renvoyée doit indiquer si la modification d’objets de ce type est autorisée en général (par ex. le renvoi de la valeur <code class="docutils literal notranslate"><span class="pre">False</span></code> signifie que l’utilisateur actuel n’est pas autorisé à modifier un objet de ce type).</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.has_delete_permission">
<code class="descclassname">ModelAdmin.</code><code class="descname">has_delete_permission</code>(<em>request</em>, <em>obj=None</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.has_delete_permission" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Doit renvoyer <code class="docutils literal notranslate"><span class="pre">True</span></code> si la suppression de <code class="docutils literal notranslate"><span class="pre">obj</span></code> est autorisée, <code class="docutils literal notranslate"><span class="pre">False</span></code> sinon. Si <code class="docutils literal notranslate"><span class="pre">obj</span></code> vaut <code class="docutils literal notranslate"><span class="pre">None</span></code>, la valeur <code class="docutils literal notranslate"><span class="pre">True</span></code> ou <code class="docutils literal notranslate"><span class="pre">False</span></code> renvoyée doit indiquer si la suppression des objets de ce type est autorisée en général (par ex. le renvoi de la valeur <code class="docutils literal notranslate"><span class="pre">False</span></code> signifie que l’utilisateur actuel n’est pas autorisé à supprimer un objet de ce type).</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.has_module_permission">
<code class="descclassname">ModelAdmin.</code><code class="descname">has_module_permission</code>(<em>request</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.has_module_permission" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Devrait renvoyer <code class="docutils literal notranslate"><span class="pre">True</span></code> si le module est affiché sur la page d’accueil de l’administration et que l’accès à la page d’accueil du module est autorisé, ou <code class="docutils literal notranslate"><span class="pre">False</span></code> dans le cas contraire. Utilise par défaut <a class="reference internal" href="../auth.html#django.contrib.auth.models.User.has_module_perms" title="django.contrib.auth.models.User.has_module_perms"><code class="xref py py-meth docutils literal notranslate"><span class="pre">User.has_module_perms()</span></code></a>. En surchargeant cette méthode, vous ne limitez pas l’accès aux vues d’affichage, d’ajout, d’édition ou de suppression&nbsp;; pour cela, utilisez <a class="reference internal" href="#django.contrib.admin.ModelAdmin.has_view_permission" title="django.contrib.admin.ModelAdmin.has_view_permission"><code class="xref py py-meth docutils literal notranslate"><span class="pre">has_view_permission()</span></code></a>, <a class="reference internal" href="#django.contrib.admin.ModelAdmin.has_add_permission" title="django.contrib.admin.ModelAdmin.has_add_permission"><code class="xref py py-meth docutils literal notranslate"><span class="pre">has_add_permission()</span></code></a>, <a class="reference internal" href="#django.contrib.admin.ModelAdmin.has_change_permission" title="django.contrib.admin.ModelAdmin.has_change_permission"><code class="xref py py-meth docutils literal notranslate"><span class="pre">has_change_permission()</span></code></a> et <a class="reference internal" href="#django.contrib.admin.ModelAdmin.has_delete_permission" title="django.contrib.admin.ModelAdmin.has_delete_permission"><code class="xref py py-meth docutils literal notranslate"><span class="pre">has_delete_permission()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_queryset">
<code class="descclassname">ModelAdmin.</code><code class="descname">get_queryset</code>(<em>request</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.get_queryset" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La méthode <code class="docutils literal notranslate"><span class="pre">get_queryset</span></code> d’un <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code> renvoie un objet <a class="reference internal" href="../../models/querysets.html#django.db.models.query.QuerySet" title="django.db.models.query.QuerySet"><code class="xref py py-class docutils literal notranslate"><span class="pre">QuerySet</span></code></a> de toutes les instances de modèle qui peuvent être modifiées par le site d’administration. Un cas d’utilisation de la redéfinition de cette méthode est celui de l’affichage des objets appartenant à l’utilisateur connecté&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyModelAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="n">qs</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">qs</span>
        <span class="k">return</span> <span class="n">qs</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">author</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.message_user">
<code class="descclassname">ModelAdmin.</code><code class="descname">message_user</code>(<em>request</em>, <em>message</em>, <em>level=messages.INFO</em>, <em>extra_tags=''</em>, <em>fail_silently=False</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.message_user" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Envoie un message à l’utilisateur en utilisant le moteur <a class="reference internal" href="../messages.html#module-django.contrib.messages" title="django.contrib.messages: Provides cookie- and session-based temporary message storage."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.messages</span></code></a>. Voir <a class="reference internal" href="actions.html#custom-admin-action"><span class="std std-ref">l’exemple de ModelAdmin personnalisé</span></a>.</p>
<p>Les paramètres nommés permettent de modifier le niveau de message, d’ajouter des balises CSS supplémentaires ou d’échouer silencieusement si le moteur <code class="docutils literal notranslate"><span class="pre">contrib.messages</span></code> n’est pas installé. Ces paramètres nommés correspondent à ceux de <a class="reference internal" href="../messages.html#django.contrib.messages.add_message" title="django.contrib.messages.add_message"><code class="xref py py-func docutils literal notranslate"><span class="pre">django.contrib.messages.add_message()</span></code></a>, voir la documentation de cette fonction pour plus de détails. Une des différences est que le niveau peut être passé comme une chaîne de caractères en plus d’un entier ou d’une constante.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_paginator">
<code class="descclassname">ModelAdmin.</code><code class="descname">get_paginator</code>(<em>request</em>, <em>queryset</em>, <em>per_page</em>, <em>orphans=0</em>, <em>allow_empty_first_page=True</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.get_paginator" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Renvoie une instance de la pagination à utiliser pour cette vue. Par défaut, c’est une instance de <a class="reference internal" href="#django.contrib.admin.ModelAdmin.paginator" title="django.contrib.admin.ModelAdmin.paginator"><code class="xref py py-attr docutils literal notranslate"><span class="pre">paginator</span></code></a> qui est créée.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.response_add">
<code class="descclassname">ModelAdmin.</code><code class="descname">response_add</code>(<em>request</em>, <em>obj</em>, <em>post_url_continue=None</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.response_add" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Détermine la réponse <a class="reference internal" href="../../request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">HttpResponse</span></code></a> de l’étape <a class="reference internal" href="#django.contrib.admin.ModelAdmin.add_view" title="django.contrib.admin.ModelAdmin.add_view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_view()</span></code></a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">response_add</span></code> est appelée après l’envoi du formulaire d’administration et juste après que l’objet et ses instances liées ont été créés et enregistrés. Vous pouvez la surcharger pour modifier le comportement par défaut à la suite de la création de l’objet.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.response_change">
<code class="descclassname">ModelAdmin.</code><code class="descname">response_change</code>(<em>request</em>, <em>obj</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.response_change" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Détermine la réponse <a class="reference internal" href="../../request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">HttpResponse</span></code></a> de l’étape <a class="reference internal" href="#django.contrib.admin.ModelAdmin.change_view" title="django.contrib.admin.ModelAdmin.change_view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">change_view()</span></code></a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">response_change</span></code> est appelée après l’envoi du formulaire d’administration et juste après que l’objet et ses instances liées ont été enregistrés. Vous pouvez la surcharger pour modifier le comportement par défaut à la suite de la modification de l’objet.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.response_delete">
<code class="descclassname">ModelAdmin.</code><code class="descname">response_delete</code>(<em>request</em>, <em>obj_display</em>, <em>obj_id</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.response_delete" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Détermine la réponse <a class="reference internal" href="../../request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">HttpResponse</span></code></a> de l’étape <a class="reference internal" href="#django.contrib.admin.ModelAdmin.delete_view" title="django.contrib.admin.ModelAdmin.delete_view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">delete_view()</span></code></a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">response_delete</span></code> est appelée après la suppression de l’objet. Vous pouvez la surcharger pour modifier le comportement par défaut à la suite de la suppression de l’objet.</p>
<p><code class="docutils literal notranslate"><span class="pre">obj_display</span></code> est une chaîne contenant le nom de l’objet supprimé.</p>
<p><code class="docutils literal notranslate"><span class="pre">obj_id</span></code> est l’identifiant sérialisé utiliser pour récupérer l’objet à supprimer.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_changeform_initial_data">
<code class="descclassname">ModelAdmin.</code><code class="descname">get_changeform_initial_data</code>(<em>request</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.get_changeform_initial_data" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Un point d’extension pour les données initiales pour les formulaires de modification dans l’administration. Par défaut, les champs reçoivent des valeurs initiales à partir des paramètres <code class="docutils literal notranslate"><span class="pre">GET</span></code>. Par exemple, <code class="docutils literal notranslate"><span class="pre">?name=initial_value</span></code> définit la valeur initiale du champ <code class="docutils literal notranslate"><span class="pre">name</span></code> à <code class="docutils literal notranslate"><span class="pre">initial_value</span></code>.</p>
<p>Cette méthode doit renvoyer un dictionnaire sous la forme <code class="docutils literal notranslate"><span class="pre">{'nom_de_champ':</span> <span class="pre">'valeur_de_champ'}</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_changeform_initial_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;custom_initial_value&#39;</span><span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_deleted_objects">
<code class="descclassname">ModelAdmin.</code><code class="descname">get_deleted_objects</code>(<em>objs</em>, <em>request</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.get_deleted_objects" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Un point d’entrée pour personnaliser le processus de suppression de la vue <a class="reference internal" href="#django.contrib.admin.ModelAdmin.delete_view" title="django.contrib.admin.ModelAdmin.delete_view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">delete_view()</span></code></a> et de l”<a class="reference internal" href="actions.html"><span class="doc">action</span></a> « suppression des éléments sélectionnés ».</p>
<p>Le paramètre <code class="docutils literal notranslate"><span class="pre">objs</span></code> est une suite d’objets homogènes (un <code class="docutils literal notranslate"><span class="pre">QuerySet</span></code> ou une liste d’instances de modèles) à supprimer, et <code class="docutils literal notranslate"><span class="pre">request</span></code> est la requête <a class="reference internal" href="../../request-response.html#django.http.HttpRequest" title="django.http.HttpRequest"><code class="xref py py-class docutils literal notranslate"><span class="pre">HttpRequest</span></code></a>.</p>
<p>Cette méthode doit renvoyer un tuple à 4 de <code class="docutils literal notranslate"><span class="pre">(objets_supprimés,</span> <span class="pre">nombre_de_modèles,</span> <span class="pre">permissions_nécessaires,</span> <span class="pre">protégés)</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">objets_supprimés</span></code> est une liste de chaînes représentant tous les objets qui seront supprimés. S’il y a des objets liés à supprimer, la liste est imbriquée et contient ces objets liés. La liste est mise en forme dans le gabarit en utilisant le filtre <a class="reference internal" href="../../templates/builtins.html#std:templatefilter-unordered_list"><code class="xref std std-tfilter docutils literal notranslate"><span class="pre">unordered_list</span></code></a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">nombre_de_modèles</span></code> est un dictionnaire de correspondance entre l’attribut <a class="reference internal" href="../../models/options.html#django.db.models.Options.verbose_name_plural" title="django.db.models.Options.verbose_name_plural"><code class="xref py py-attr docutils literal notranslate"><span class="pre">verbose_name_plural</span></code></a> de chaque modèle et le nombre d’objets à supprimer de ce modèle.</p>
<p><code class="docutils literal notranslate"><span class="pre">permissions_nécessaires</span></code> est un ensemble de noms <a class="reference internal" href="../../models/options.html#django.db.models.Options.verbose_name" title="django.db.models.Options.verbose_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">verbose_name</span></code></a> des modèles pour lesquels l’utilisateur n’a pas le droit de suppression.</p>
<p><code class="docutils literal notranslate"><span class="pre">protégés</span></code> est une liste de chaînes représentant tous les objets liés protégés qui ne peuvent pas être supprimés. La liste est affichée dans le gabarit.</p>
</dd></dl>

<div class="section" id="s-other-methods">
<span id="other-methods"></span><h4>Autres méthodes<a class="headerlink" href="#other-methods" title="Lien permanent vers ce titre">¶</a></h4>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.add_view">
<code class="descclassname">ModelAdmin.</code><code class="descname">add_view</code>(<em>request</em>, <em>form_url=''</em>, <em>extra_context=None</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.add_view" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La vue Django pour la page d’ajout d’une instance de modèle. Voir la note ci-dessous.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.change_view">
<code class="descclassname">ModelAdmin.</code><code class="descname">change_view</code>(<em>request</em>, <em>object_id</em>, <em>form_url=''</em>, <em>extra_context=None</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.change_view" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La vue Django pour la page d’édition d’une instance de modèle. Voir la note ci-dessous.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.changelist_view">
<code class="descclassname">ModelAdmin.</code><code class="descname">changelist_view</code>(<em>request</em>, <em>extra_context=None</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.changelist_view" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La vue Django pour les pages de liste pour modification et d’actions sur les instances de modèle. Voir la note ci-dessous.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.delete_view">
<code class="descclassname">ModelAdmin.</code><code class="descname">delete_view</code>(<em>request</em>, <em>object_id</em>, <em>extra_context=None</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.delete_view" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La vue Django pour la page de confirmation de suppression d’instance de modèle. Voir la note ci-dessous.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.history_view">
<code class="descclassname">ModelAdmin.</code><code class="descname">history_view</code>(<em>request</em>, <em>object_id</em>, <em>extra_context=None</em>)<a class="headerlink" href="#django.contrib.admin.ModelAdmin.history_view" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La vue Django pour la page affichant l’historique de modification d’une instance de modèle donnée.</p>
</dd></dl>

<p>Contrairement aux méthodes de type «&nbsp;point d’entrée&nbsp;» utilisées pour l’extension de <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code> décrites dans la section précédente, ces cinq méthodes sont en réalité destinées à être invoquées comme des vues Django par le gestionnaire de distribution d’URL de l’application d’administration afin de produire les pages qui gèrent les opérations CRUD sur les instances de modèle. En conséquence, la redéfinition complète de ces méthodes modifierait notablement le comportement de l’application d’administration.</p>
<p>Une cause fréquente de la redéfinition de ces méthodes consiste à enrichir les données de contexte qui sont fournies au gabarit qui rend la vue. Dans l’exemple suivant, la vue d’édition est redéfinie de sorte que des données associatives supplémentaires sont fournies au gabarit de production de page&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyModelAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>

    <span class="c1"># A template for a very customized change view:</span>
    <span class="n">change_form_template</span> <span class="o">=</span> <span class="s1">&#39;admin/myapp/extras/openstreetmap_change_form.html&#39;</span>

    <span class="k">def</span> <span class="nf">get_osm_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># ...</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">change_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">object_id</span><span class="p">,</span> <span class="n">form_url</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">extra_context</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">extra_context</span> <span class="o">=</span> <span class="n">extra_context</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="n">extra_context</span><span class="p">[</span><span class="s1">&#39;osm_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_osm_info</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">change_view</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="n">object_id</span><span class="p">,</span> <span class="n">form_url</span><span class="p">,</span> <span class="n">extra_context</span><span class="o">=</span><span class="n">extra_context</span><span class="p">,</span>
        <span class="p">)</span>
</pre></div>
</div>
<p>Ces vues renvoient des instances <a class="reference internal" href="../../template-response.html#django.template.response.TemplateResponse" title="django.template.response.TemplateResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">TemplateResponse</span></code></a> permettant de personnaliser facilement les données de réponse avant le processus de rendu. Pour plus de détails, consultez la <a class="reference internal" href="../../template-response.html"><span class="doc">documentation de TemplateResponse</span></a>.</p>
</div>
</div>
<div class="section" id="s-modeladmin-asset-definitions">
<span id="s-id1"></span><span id="modeladmin-asset-definitions"></span><span id="id1"></span><h3>Définitions des fichiers annexes de <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code><a class="headerlink" href="#modeladmin-asset-definitions" title="Lien permanent vers ce titre">¶</a></h3>
<p>Il peut arriver que du contenu CSS ou JavaScript puisse être utile dans les vues d’ajout ou d’édition. Ceci peut se faire en utilisant une classe <code class="docutils literal notranslate"><span class="pre">Media</span></code> interne à la classe <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ArticleAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Media</span><span class="p">:</span>
        <span class="n">css</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;all&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;my_styles.css&quot;</span><span class="p">,)</span>
        <span class="p">}</span>
        <span class="n">js</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;my_code.js&quot;</span><span class="p">,)</span>
</pre></div>
</div>
<p>L’application <a class="reference internal" href="../staticfiles.html"><span class="doc">staticfiles</span></a> préfixe tous les chemins des fichiers statiques par <a class="reference internal" href="../../settings.html#std:setting-STATIC_URL"><code class="xref std std-setting docutils literal notranslate"><span class="pre">STATIC_URL</span></code></a> (ou <a class="reference internal" href="../../settings.html#std:setting-MEDIA_URL"><code class="xref std std-setting docutils literal notranslate"><span class="pre">MEDIA_URL</span></code></a> si <a class="reference internal" href="../../settings.html#std:setting-STATIC_URL"><code class="xref std std-setting docutils literal notranslate"><span class="pre">STATIC_URL</span></code></a> vaut <code class="docutils literal notranslate"><span class="pre">None</span></code>). Les mêmes règles s’appliquent que pour la <a class="reference internal" href="../../../topics/forms/media.html#form-asset-paths"><span class="std std-ref">définition de fichiers annexes sur les formulaires</span></a>.</p>
<div class="section" id="s-jquery">
<span id="s-contrib-admin-jquery"></span><span id="jquery"></span><span id="contrib-admin-jquery"></span><h4>jQuery<a class="headerlink" href="#jquery" title="Lien permanent vers ce titre">¶</a></h4>
<p>Le code JavaScript de l’administration de Django utilise la bibliothèque <a class="reference external" href="https://jquery.com">jQuery</a>.</p>
<p>Pour éviter des conflits avec des scripts ou des bibliothèques fournies par l’utilisateur, la version Django de jQuery (version 3.5.1) est définie dans l’espace de nom <code class="docutils literal notranslate"><span class="pre">django.jQuery</span></code>. Si vous souhaitez utiliser jQuery dans votre propre code JavaScript d’administration sans inclure une deuxième copie, vous pouvez utiliser l’objet <code class="docutils literal notranslate"><span class="pre">django.jQuery</span></code> dans les vues de liste pour modification ou d’ajout/modification.</p>
<div class="versionchanged">
<span class="title">Changed in Django 3.0:</span> <p>La version intégrée de jQuery a été mise à jour de 3.3.1 vers 3.4.1.</p>
</div>
<div class="versionchanged">
<span class="title">Changed in Django 3.1:</span> <p>La version intégrée de jQuery a été mise à jour de 3.4.1 vers 3.5.1.</p>
</div>
<p>La classe <a class="reference internal" href="#django.contrib.admin.ModelAdmin" title="django.contrib.admin.ModelAdmin"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelAdmin</span></code></a> requiert jQuery par défaut, il n’y a donc pas besoin d’ajouter jQuery à la liste des ressources <code class="docutils literal notranslate"><span class="pre">media</span></code> des classes <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code> sauf besoin particulier. Par exemple, si vous avez besoin que la bibliothèque jQuery soit placée dans l’espace de nom global (par exemple pour utiliser des greffons jQuery externes) ou que vous avez besoin d’une version plus récente de jQuery, il est alors utile d’inclure votre propre copie de cette bibliothèque.</p>
<p>Django fournit à la fois des versions non compressée et «&nbsp;minimisée&nbsp;» de jQuery, en tant que <code class="docutils literal notranslate"><span class="pre">jquery.js</span></code> et <code class="docutils literal notranslate"><span class="pre">jquery.min.js</span></code> respectivement.</p>
<p>Les classes <a class="reference internal" href="#django.contrib.admin.ModelAdmin" title="django.contrib.admin.ModelAdmin"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelAdmin</span></code></a> et <a class="reference internal" href="#django.contrib.admin.InlineModelAdmin" title="django.contrib.admin.InlineModelAdmin"><code class="xref py py-class docutils literal notranslate"><span class="pre">InlineModelAdmin</span></code></a> ont une propriété <code class="docutils literal notranslate"><span class="pre">media</span></code> qui renvoie une liste d’objets <code class="docutils literal notranslate"><span class="pre">Media</span></code> qui stockent des chemins d’accès aux fichiers JavaScript pour les formulaires et les formulaires groupés. Quand <a class="reference internal" href="../../settings.html#std:setting-DEBUG"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DEBUG</span></code></a> vaut <code class="docutils literal notranslate"><span class="pre">True</span></code>, les versions non compressées des différents fichiers JavaScript sont renvoyées, y compris pour <code class="docutils literal notranslate"><span class="pre">jquery.js</span></code>; sinon, ce sont les versions «&nbsp;minimisées&nbsp;» qui sont renvoyées.</p>
</div>
</div>
<div class="section" id="s-adding-custom-validation-to-the-admin">
<span id="s-admin-custom-validation"></span><span id="adding-custom-validation-to-the-admin"></span><span id="admin-custom-validation"></span><h3>Ajout de validation personnalisée à l’administration<a class="headerlink" href="#adding-custom-validation-to-the-admin" title="Lien permanent vers ce titre">¶</a></h3>
<p>Vous pouvez aussi ajouter de la validation personnalisée des données dans l’administration. L’interface d’administration automatique réutilise <a class="reference internal" href="../../forms/api.html#module-django.forms" title="django.forms"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.forms</span></code></a>, et la classe <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code> vous donne la possibilité de définir votre propre formulaire&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ArticleAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">form</span> <span class="o">=</span> <span class="n">MyArticleAdminForm</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">MyArticleAdminForm</span></code> peut être défini n’importe où tant que vous l’importez là où vous l’utilisez. Ensuite, à l’intérieur de votre formulaire, vous pouvez ajouter votre propre validation personnalisée pour n’importe quel champ&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyArticleAdminForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">ModelForm</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">clean_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># do something that validates your data</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>Il est important d’utiliser un <code class="docutils literal notranslate"><span class="pre">ModelForm</span></code> ici, sinon les choses peuvent mal se passer. Voir la documentation des <a class="reference internal" href="../../forms/index.html"><span class="doc">formulaires</span></a> sur la <a class="reference internal" href="../../forms/validation.html"><span class="doc">validation personnalisée</span></a> et plus particulièrement, les <a class="reference internal" href="../../../topics/forms/modelforms.html#overriding-modelform-clean-method"><span class="std std-ref">notes sur la validation des formulaires de modèle</span></a> pour plus d’informations.</p>
</div>
</div>
<div class="section" id="s-inlinemodeladmin-objects">
<span id="s-admin-inlines"></span><span id="inlinemodeladmin-objects"></span><span id="admin-inlines"></span><h2>Objets <code class="docutils literal notranslate"><span class="pre">InlineModelAdmin</span></code><a class="headerlink" href="#inlinemodeladmin-objects" title="Lien permanent vers ce titre">¶</a></h2>
<dl class="class">
<dt id="django.contrib.admin.InlineModelAdmin">
<em class="property">class </em><code class="descname">InlineModelAdmin</code><a class="headerlink" href="#django.contrib.admin.InlineModelAdmin" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="django.contrib.admin.TabularInline">
<em class="property">class </em><code class="descname">TabularInline</code><a class="headerlink" href="#django.contrib.admin.TabularInline" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="django.contrib.admin.StackedInline">
<em class="property">class </em><code class="descname">StackedInline</code><a class="headerlink" href="#django.contrib.admin.StackedInline" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>L’interface d’administration a la possibilité de modifier les modèles sur la même page qu’un modèle parent. Ceux-ci sont appelés «&nbsp;inlines&nbsp;» ou sous-formulaires. Supposons que vous ayez ces deux modèles&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="k">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Author</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
   <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
   <span class="n">author</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Author</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
   <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
<p>Vous pouvez modifier les livres écrits par un auteur sur la page de l’auteur. Vous ajoutez des sous-formulaires à un modèle en les spécifiant dans <code class="docutils literal notranslate"><span class="pre">ModelAdmin.inlines</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="k">import</span> <span class="n">admin</span>

<span class="k">class</span> <span class="nc">BookInline</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">TabularInline</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Book</span>

<span class="k">class</span> <span class="nc">AuthorAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">inlines</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">BookInline</span><span class="p">,</span>
    <span class="p">]</span>
</pre></div>
</div>
<p>Django fournit deux sous-classes de <code class="docutils literal notranslate"><span class="pre">InlineModelAdmin</span></code> qui sont&nbsp;:</p>
<ul class="simple">
<li><a class="reference internal" href="#django.contrib.admin.TabularInline" title="django.contrib.admin.TabularInline"><code class="xref py py-class docutils literal notranslate"><span class="pre">TabularInline</span></code></a></li>
<li><a class="reference internal" href="#django.contrib.admin.StackedInline" title="django.contrib.admin.StackedInline"><code class="xref py py-class docutils literal notranslate"><span class="pre">StackedInline</span></code></a></li>
</ul>
<p>La différence entre les deux est simplement le gabarit utilisé pour les produire.</p>
</dd></dl>

<div class="section" id="s-inlinemodeladmin-options">
<span id="inlinemodeladmin-options"></span><h3>Options de <code class="docutils literal notranslate"><span class="pre">InlineModelAdmin</span></code><a class="headerlink" href="#inlinemodeladmin-options" title="Lien permanent vers ce titre">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">InlineModelAdmin</span></code> partage plusieurs caractéristiques semblables à <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code>, et en ajoute quelques autres de son cru (les caractéristiques communes sont en fait définies dans la classe mère <code class="docutils literal notranslate"><span class="pre">BaseModelAdmin</span></code>). Les caractéristiques communes sont&nbsp;:</p>
<ul class="simple">
<li><a class="reference internal" href="#django.contrib.admin.InlineModelAdmin.form" title="django.contrib.admin.InlineModelAdmin.form"><code class="xref py py-attr docutils literal notranslate"><span class="pre">form</span></code></a></li>
<li><a class="reference internal" href="#django.contrib.admin.ModelAdmin.fieldsets" title="django.contrib.admin.ModelAdmin.fieldsets"><code class="xref py py-attr docutils literal notranslate"><span class="pre">fieldsets</span></code></a></li>
<li><a class="reference internal" href="#django.contrib.admin.ModelAdmin.fields" title="django.contrib.admin.ModelAdmin.fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">fields</span></code></a></li>
<li><a class="reference internal" href="#django.contrib.admin.ModelAdmin.formfield_overrides" title="django.contrib.admin.ModelAdmin.formfield_overrides"><code class="xref py py-attr docutils literal notranslate"><span class="pre">formfield_overrides</span></code></a></li>
<li><a class="reference internal" href="#django.contrib.admin.ModelAdmin.exclude" title="django.contrib.admin.ModelAdmin.exclude"><code class="xref py py-attr docutils literal notranslate"><span class="pre">exclude</span></code></a></li>
<li><a class="reference internal" href="#django.contrib.admin.ModelAdmin.filter_horizontal" title="django.contrib.admin.ModelAdmin.filter_horizontal"><code class="xref py py-attr docutils literal notranslate"><span class="pre">filter_horizontal</span></code></a></li>
<li><a class="reference internal" href="#django.contrib.admin.ModelAdmin.filter_vertical" title="django.contrib.admin.ModelAdmin.filter_vertical"><code class="xref py py-attr docutils literal notranslate"><span class="pre">filter_vertical</span></code></a></li>
<li><a class="reference internal" href="#django.contrib.admin.ModelAdmin.ordering" title="django.contrib.admin.ModelAdmin.ordering"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ordering</span></code></a></li>
<li><a class="reference internal" href="#django.contrib.admin.ModelAdmin.prepopulated_fields" title="django.contrib.admin.ModelAdmin.prepopulated_fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">prepopulated_fields</span></code></a></li>
<li><a class="reference internal" href="#django.contrib.admin.ModelAdmin.get_fieldsets" title="django.contrib.admin.ModelAdmin.get_fieldsets"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_fieldsets()</span></code></a></li>
<li><a class="reference internal" href="#django.contrib.admin.ModelAdmin.get_queryset" title="django.contrib.admin.ModelAdmin.get_queryset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_queryset()</span></code></a></li>
<li><a class="reference internal" href="#django.contrib.admin.ModelAdmin.radio_fields" title="django.contrib.admin.ModelAdmin.radio_fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">radio_fields</span></code></a></li>
<li><a class="reference internal" href="#django.contrib.admin.ModelAdmin.readonly_fields" title="django.contrib.admin.ModelAdmin.readonly_fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">readonly_fields</span></code></a></li>
<li><a class="reference internal" href="#django.contrib.admin.InlineModelAdmin.raw_id_fields" title="django.contrib.admin.InlineModelAdmin.raw_id_fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">raw_id_fields</span></code></a></li>
<li><a class="reference internal" href="#django.contrib.admin.ModelAdmin.formfield_for_choice_field" title="django.contrib.admin.ModelAdmin.formfield_for_choice_field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">formfield_for_choice_field()</span></code></a></li>
<li><a class="reference internal" href="#django.contrib.admin.ModelAdmin.formfield_for_foreignkey" title="django.contrib.admin.ModelAdmin.formfield_for_foreignkey"><code class="xref py py-meth docutils literal notranslate"><span class="pre">formfield_for_foreignkey()</span></code></a></li>
<li><a class="reference internal" href="#django.contrib.admin.ModelAdmin.formfield_for_manytomany" title="django.contrib.admin.ModelAdmin.formfield_for_manytomany"><code class="xref py py-meth docutils literal notranslate"><span class="pre">formfield_for_manytomany()</span></code></a></li>
<li><a class="reference internal" href="#django.contrib.admin.ModelAdmin.has_module_permission" title="django.contrib.admin.ModelAdmin.has_module_permission"><code class="xref py py-meth docutils literal notranslate"><span class="pre">has_module_permission()</span></code></a></li>
</ul>
<p>La classe <code class="docutils literal notranslate"><span class="pre">InlineModelAdmin</span></code> ajoute ou personnalise&nbsp;:</p>
<dl class="attribute">
<dt id="django.contrib.admin.InlineModelAdmin.model">
<code class="descclassname">InlineModelAdmin.</code><code class="descname">model</code><a class="headerlink" href="#django.contrib.admin.InlineModelAdmin.model" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Le modèle utilisé par le sous-formulaire. Attribut obligatoire.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.InlineModelAdmin.fk_name">
<code class="descclassname">InlineModelAdmin.</code><code class="descname">fk_name</code><a class="headerlink" href="#django.contrib.admin.InlineModelAdmin.fk_name" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Le nom de la clé étrangère vers le modèle parent. Dans la plupart des cas, cet attribut est généré automatiquement, mais <code class="docutils literal notranslate"><span class="pre">fk_name</span></code> doit être explicitement défini s’il y a plus d’une clé étrangère vers le même modèle parent.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.InlineModelAdmin.formset">
<code class="descclassname">InlineModelAdmin.</code><code class="descname">formset</code><a class="headerlink" href="#django.contrib.admin.InlineModelAdmin.formset" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La valeur par défaut est <a class="reference internal" href="../../../topics/forms/modelforms.html#django.forms.models.BaseInlineFormSet" title="django.forms.models.BaseInlineFormSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseInlineFormSet</span></code></a>. L’utilisation de votre propre classe de formulaires groupés peut vous donner de nombreuses possibilités de personnalisation. Les sous-formulaires sont construits autour des <a class="reference internal" href="../../../topics/forms/modelforms.html#model-formsets"><span class="std std-ref">formulaires groupés de modèle</span></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.InlineModelAdmin.form">
<code class="descclassname">InlineModelAdmin.</code><code class="descname">form</code><a class="headerlink" href="#django.contrib.admin.InlineModelAdmin.form" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La valeur par défaut de <code class="docutils literal notranslate"><span class="pre">form</span></code> est <code class="docutils literal notranslate"><span class="pre">ModelForm</span></code>. C’est ce qui est transmis à la fonction <a class="reference internal" href="../../forms/models.html#django.forms.models.inlineformset_factory" title="django.forms.models.inlineformset_factory"><code class="xref py py-func docutils literal notranslate"><span class="pre">inlineformset_factory()</span></code></a> lors de la création des sous-formulaires.</p>
</dd></dl>

<div class="admonition warning">
<p class="first admonition-title">Avertissement</p>
<p class="last">Lors de l’écriture de validation personnalisée pour des formulaires <code class="docutils literal notranslate"><span class="pre">InlineModelAdmin</span></code>, prenez garde lorsque vous écrivez du code de validation se basant sur des fonctionnalités du modèle parent. Si ce dernier échoue lors de la validation, son contenu pourrait se trouver dans un état incohérent comme expliqué dans l’avertissement de <a class="reference internal" href="../../../topics/forms/modelforms.html#validation-on-modelform"><span class="std std-ref">Validation d’un ModelForm</span></a>.</p>
</div>
<dl class="attribute">
<dt id="django.contrib.admin.InlineModelAdmin.classes">
<code class="descclassname">InlineModelAdmin.</code><code class="descname">classes</code><a class="headerlink" href="#django.contrib.admin.InlineModelAdmin.classes" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Une liste ou un tuple contenant des classes CSS supplémentaires à appliquer aux sous-formulaires générés. La valeur par défaut est <code class="docutils literal notranslate"><span class="pre">None</span></code>. Comme pour les classes configurées dans <a class="reference internal" href="#django.contrib.admin.ModelAdmin.fieldsets" title="django.contrib.admin.ModelAdmin.fieldsets"><code class="xref py py-attr docutils literal notranslate"><span class="pre">fieldsets</span></code></a>, les sous-formulaires avec une classe <code class="docutils literal notranslate"><span class="pre">collapse</span></code> sont initialement repliés et leur en-tête contient un petit lien «&nbsp;Afficher&nbsp;».</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.InlineModelAdmin.extra">
<code class="descclassname">InlineModelAdmin.</code><code class="descname">extra</code><a class="headerlink" href="#django.contrib.admin.InlineModelAdmin.extra" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Ceci contrôle le nombre de formulaires supplémentaires que le formulaire groupé affichera en plus des formulaires initiaux. La valeur par défaut est 3. Voir la <a class="reference internal" href="../../../topics/forms/formsets.html"><span class="doc">documentation des formulaires groupés</span></a> pour plus d’informations.</p>
<p>Pour les utilisateurs de navigateurs avec JavaScript activé, un lien «&nbsp;Ajouter un autre&nbsp;» est fourni pour permettre d’ajouter un certain nombre de sous-formulaires supplémentaires, en plus de ceux prévus en fonction du paramètre <code class="docutils literal notranslate"><span class="pre">extra</span></code>.</p>
<p>Le lien dynamique ne s’affiche pas si le nombre de formulaires actuellement affichés dépasse <code class="docutils literal notranslate"><span class="pre">max_num</span></code> ou si JavaScript n’est pas activé du côté de l’utilisateur.</p>
<p><a class="reference internal" href="#django.contrib.admin.InlineModelAdmin.get_extra" title="django.contrib.admin.InlineModelAdmin.get_extra"><code class="xref py py-meth docutils literal notranslate"><span class="pre">InlineModelAdmin.get_extra()</span></code></a> permet également de personnaliser le nombre de formulaires supplémentaires.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.InlineModelAdmin.max_num">
<code class="descclassname">InlineModelAdmin.</code><code class="descname">max_num</code><a class="headerlink" href="#django.contrib.admin.InlineModelAdmin.max_num" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Ceci contrôle le nombre maximal de formulaires à afficher dans les sous-formulaires. Cela ne correspond pas directement au nombre d’objets, mais peut l’être si la valeur est assez petite. Voir <a class="reference internal" href="../../../topics/forms/modelforms.html#model-formsets-max-num"><span class="std std-ref">Restriction du nombre d’objets modifiables</span></a> pour plus d’informations.</p>
<p><a class="reference internal" href="#django.contrib.admin.InlineModelAdmin.get_max_num" title="django.contrib.admin.InlineModelAdmin.get_max_num"><code class="xref py py-meth docutils literal notranslate"><span class="pre">InlineModelAdmin.get_max_num()</span></code></a> permet également de personnaliser le nombre maximal de formulaires supplémentaires.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.InlineModelAdmin.min_num">
<code class="descclassname">InlineModelAdmin.</code><code class="descname">min_num</code><a class="headerlink" href="#django.contrib.admin.InlineModelAdmin.min_num" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Ceci contrôle le nombre minimum de formulaires à afficher dans les sous-formulaires. Voir <a class="reference internal" href="../../forms/models.html#django.forms.models.modelformset_factory" title="django.forms.models.modelformset_factory"><code class="xref py py-func docutils literal notranslate"><span class="pre">modelformset_factory()</span></code></a> pour plus d’informations.</p>
<p><a class="reference internal" href="#django.contrib.admin.InlineModelAdmin.get_min_num" title="django.contrib.admin.InlineModelAdmin.get_min_num"><code class="xref py py-meth docutils literal notranslate"><span class="pre">InlineModelAdmin.get_min_num()</span></code></a> vous permet également de personnaliser le nombre minimum de formulaires affichés.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.InlineModelAdmin.raw_id_fields">
<code class="descclassname">InlineModelAdmin.</code><code class="descname">raw_id_fields</code><a class="headerlink" href="#django.contrib.admin.InlineModelAdmin.raw_id_fields" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Par défaut, l’interface d’administration de Django utilise une interface de boîte de sélection (&lt;select&gt;) pour les champs <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code>. Parfois, vous ne voulez pas subir la lenteur engendrée par la sélection de toutes les instances liées pour l’affichage dans la liste déroulante.</p>
<p><code class="docutils literal notranslate"><span class="pre">raw_id_fields</span></code> est une liste de champs que vous souhaitez modifier par un simple composant <code class="docutils literal notranslate"><span class="pre">Input</span></code>, que ce soit un champ <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code> ou <code class="docutils literal notranslate"><span class="pre">ManyToManyField</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">BookInline</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">TabularInline</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Book</span>
    <span class="n">raw_id_fields</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;pages&quot;</span><span class="p">,)</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.InlineModelAdmin.template">
<code class="descclassname">InlineModelAdmin.</code><code class="descname">template</code><a class="headerlink" href="#django.contrib.admin.InlineModelAdmin.template" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Le gabarit utilisé pour produire le sous-formulaire sur la page.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.InlineModelAdmin.verbose_name">
<code class="descclassname">InlineModelAdmin.</code><code class="descname">verbose_name</code><a class="headerlink" href="#django.contrib.admin.InlineModelAdmin.verbose_name" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Une redéfinition du nom <code class="docutils literal notranslate"><span class="pre">verbose_name</span></code> se trouvant dans la classe <code class="docutils literal notranslate"><span class="pre">Meta</span></code> interne au modèle.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.InlineModelAdmin.verbose_name_plural">
<code class="descclassname">InlineModelAdmin.</code><code class="descname">verbose_name_plural</code><a class="headerlink" href="#django.contrib.admin.InlineModelAdmin.verbose_name_plural" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Une redéfinition du nom <code class="docutils literal notranslate"><span class="pre">verbose_name_plural</span></code> se trouvant dans la classe <code class="docutils literal notranslate"><span class="pre">Meta</span></code> interne au modèle.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.InlineModelAdmin.can_delete">
<code class="descclassname">InlineModelAdmin.</code><code class="descname">can_delete</code><a class="headerlink" href="#django.contrib.admin.InlineModelAdmin.can_delete" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Indique si les objets des sous-formulaires peuvent être supprimés dans les sous-formulaires. La valeur par défaut est <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.InlineModelAdmin.show_change_link">
<code class="descclassname">InlineModelAdmin.</code><code class="descname">show_change_link</code><a class="headerlink" href="#django.contrib.admin.InlineModelAdmin.show_change_link" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Indique si les objets de sous-formulaires pouvant être modifiés dans l’interface d’administration possèdent un lien vers le formulaire d’édition. La valeur par défaut est <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.InlineModelAdmin.get_formset">
<code class="descclassname">InlineModelAdmin.</code><code class="descname">get_formset</code>(<em>request</em>, <em>obj=None</em>, <em>**kwargs</em>)<a class="headerlink" href="#django.contrib.admin.InlineModelAdmin.get_formset" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Renvoie une classe <a class="reference internal" href="../../../topics/forms/modelforms.html#django.forms.models.BaseInlineFormSet" title="django.forms.models.BaseInlineFormSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseInlineFormSet</span></code></a> à utiliser dans les vues d’administration pour l’ajout et l’édition. <code class="docutils literal notranslate"><span class="pre">obj</span></code> est l’objet parent en cours d’édition ou <code class="docutils literal notranslate"><span class="pre">None</span></code> lors de l’ajout d’un nouveau parent. Voir l’exemple de <a class="reference internal" href="#django.contrib.admin.ModelAdmin.get_formsets_with_inlines" title="django.contrib.admin.ModelAdmin.get_formsets_with_inlines"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelAdmin.get_formsets_with_inlines</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.InlineModelAdmin.get_extra">
<code class="descclassname">InlineModelAdmin.</code><code class="descname">get_extra</code>(<em>request</em>, <em>obj=None</em>, <em>**kwargs</em>)<a class="headerlink" href="#django.contrib.admin.InlineModelAdmin.get_extra" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Renvoie le nombre de sous-formulaires supplémentaires à ajouter. Par défaut, renvoie l’attribut <a class="reference internal" href="#django.contrib.admin.InlineModelAdmin.extra" title="django.contrib.admin.InlineModelAdmin.extra"><code class="xref py py-attr docutils literal notranslate"><span class="pre">InlineModelAdmin.extra</span></code></a>.</p>
<p>Redéfinissez cette méthode pour déterminer dynamiquement le nombre de sous-formulaires supplémentaires. Par exemple, cela peut dépendre de l’instance de modèle (passée en tant que paramètre nommé <code class="docutils literal notranslate"><span class="pre">obj</span></code>)&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">BinaryTreeAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">TabularInline</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">BinaryTree</span>

    <span class="k">def</span> <span class="nf">get_extra</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="k">if</span> <span class="n">obj</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">extra</span> <span class="o">-</span> <span class="n">obj</span><span class="o">.</span><span class="n">binarytree_set</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">extra</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.InlineModelAdmin.get_max_num">
<code class="descclassname">InlineModelAdmin.</code><code class="descname">get_max_num</code>(<em>request</em>, <em>obj=None</em>, <em>**kwargs</em>)<a class="headerlink" href="#django.contrib.admin.InlineModelAdmin.get_max_num" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Renvoie le nombre maximal de sous-formulaires supplémentaires à ajouter. Par défaut, renvoie l’attribut <a class="reference internal" href="#django.contrib.admin.InlineModelAdmin.max_num" title="django.contrib.admin.InlineModelAdmin.max_num"><code class="xref py py-attr docutils literal notranslate"><span class="pre">InlineModelAdmin.max_num</span></code></a>.</p>
<p>Redéfinissez cette méthode pour déterminer dynamiquement le nombre maximal de sous-formulaires. Par exemple, cela peut dépendre de l’instance de modèle (passée en tant que paramètre nommé <code class="docutils literal notranslate"><span class="pre">obj</span></code>)&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">BinaryTreeAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">TabularInline</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">BinaryTree</span>

    <span class="k">def</span> <span class="nf">get_max_num</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">max_num</span> <span class="o">=</span> <span class="mi">10</span>
        <span class="k">if</span> <span class="n">obj</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">parent</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">max_num</span> <span class="o">-</span> <span class="mi">5</span>
        <span class="k">return</span> <span class="n">max_num</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.InlineModelAdmin.get_min_num">
<code class="descclassname">InlineModelAdmin.</code><code class="descname">get_min_num</code>(<em>request</em>, <em>obj=None</em>, <em>**kwargs</em>)<a class="headerlink" href="#django.contrib.admin.InlineModelAdmin.get_min_num" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Renvoie le nombre minimum de sous-formulaires à utiliser. Par défaut, renvoie l’attribut <a class="reference internal" href="#django.contrib.admin.InlineModelAdmin.min_num" title="django.contrib.admin.InlineModelAdmin.min_num"><code class="xref py py-attr docutils literal notranslate"><span class="pre">InlineModelAdmin.min_num</span></code></a>.</p>
<p>Redéfinissez cette méthode pour déterminer programmatiquement le nombre minimum de sous-formulaires. Par exemple, cela peut être basé sur l’instance de modèle (passée en tant que paramètre nommé <code class="docutils literal notranslate"><span class="pre">obj</span></code>)&nbsp;:</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.InlineModelAdmin.has_add_permission">
<code class="descclassname">InlineModelAdmin.</code><code class="descname">has_add_permission</code>(<em>request</em>, <em>obj</em>)<a class="headerlink" href="#django.contrib.admin.InlineModelAdmin.has_add_permission" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Doit renvoyer <code class="docutils literal notranslate"><span class="pre">True</span></code> si l’ajout d’un sous-objet est autorisé, <code class="docutils literal notranslate"><span class="pre">False</span></code> sinon. <code class="docutils literal notranslate"><span class="pre">obj</span></code> est l’objet parent en cours d’édition ou <code class="docutils literal notranslate"><span class="pre">None</span></code> lors de l’ajout d’un nouveau parent.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.InlineModelAdmin.has_change_permission">
<code class="descclassname">InlineModelAdmin.</code><code class="descname">has_change_permission</code>(<em>request</em>, <em>obj=None</em>)<a class="headerlink" href="#django.contrib.admin.InlineModelAdmin.has_change_permission" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Doit renvoyer <code class="docutils literal notranslate"><span class="pre">True</span></code> si l’édition d’un sous-objet est autorisé, <code class="docutils literal notranslate"><span class="pre">False</span></code> sinon. <code class="docutils literal notranslate"><span class="pre">obj</span></code> est l’objet parent en cours d’édition.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.InlineModelAdmin.has_delete_permission">
<code class="descclassname">InlineModelAdmin.</code><code class="descname">has_delete_permission</code>(<em>request</em>, <em>obj=None</em>)<a class="headerlink" href="#django.contrib.admin.InlineModelAdmin.has_delete_permission" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Doit renvoyer <code class="docutils literal notranslate"><span class="pre">True</span></code> si la suppression d’un sous-objet est autorisée, <code class="docutils literal notranslate"><span class="pre">False</span></code> sinon. <code class="docutils literal notranslate"><span class="pre">obj</span></code> est l’objet parent en cours d’édition.</p>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Le paramètre <code class="docutils literal notranslate"><span class="pre">obj</span></code> transmis aux méthodes <code class="docutils literal notranslate"><span class="pre">InlineModelAdmin</span></code> est l’objet parent en cours d’édition ou <code class="docutils literal notranslate"><span class="pre">None</span></code> lors de l’ajout d’un nouveau parent.</p>
</div>
</div>
<div class="section" id="s-working-with-a-model-with-two-or-more-foreign-keys-to-the-same-parent-model">
<span id="working-with-a-model-with-two-or-more-foreign-keys-to-the-same-parent-model"></span><h3>Modèle possédant deux ou plusieurs clés étrangères vers le même modèle parent<a class="headerlink" href="#working-with-a-model-with-two-or-more-foreign-keys-to-the-same-parent-model" title="Lien permanent vers ce titre">¶</a></h3>
<p>Il est parfois possible d’avoir plus d’une clé étrangère vers le même modèle. Prenez ce modèle par exemple&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="k">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Friendship</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">to_person</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;friends&quot;</span><span class="p">)</span>
    <span class="n">from_person</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;from_friends&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Si vous souhaitez afficher un sous-formulaire sur la page d’administration pour l’édition de <code class="docutils literal notranslate"><span class="pre">Person</span></code>, vous devez définir explicitement la clé étrangère, car Django est incapable de le faire automatiquement&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="k">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">myapp.models</span> <span class="k">import</span> <span class="n">Friendship</span>

<span class="k">class</span> <span class="nc">FriendshipInline</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">TabularInline</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Friendship</span>
    <span class="n">fk_name</span> <span class="o">=</span> <span class="s2">&quot;to_person&quot;</span>

<span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">inlines</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">FriendshipInline</span><span class="p">,</span>
    <span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="s-working-with-many-to-many-models">
<span id="working-with-many-to-many-models"></span><h3>Modèles avec relations plusieurs-à-plusieurs<a class="headerlink" href="#working-with-many-to-many-models" title="Lien permanent vers ce titre">¶</a></h3>
<p>Par défaut, les composants d’administration des relations plusieurs-à-plusieurs sont affichés au niveau du modèle qui définit la référence à <a class="reference internal" href="../../models/fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManyToManyField</span></code></a>. En fonction de la définition de <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code>, chaque champ plusieurs-à-plusieurs d’un modèle est représenté par un <code class="docutils literal notranslate"><span class="pre">&lt;select</span> <span class="pre">multiple&gt;</span></code> HTML standard, un filtre horizontal ou vertical ou un composant <code class="docutils literal notranslate"><span class="pre">raw_id_admin</span></code>. Cependant, il est également possible de remplacer ces composants par des sous-formulaires.</p>
<p>Supposons que nous avons les modèles suivants&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="k">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Group</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span>
    <span class="n">members</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s1">&#39;groups&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Si vous souhaitez afficher les relations plusieurs-à-plusieurs en utilisant un sous-formulaire, vous pouvez le faire en définissant un objet <code class="docutils literal notranslate"><span class="pre">InlineModelAdmin</span></code> pour la relation&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="k">import</span> <span class="n">admin</span>

<span class="k">class</span> <span class="nc">MembershipInline</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">TabularInline</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Group</span><span class="o">.</span><span class="n">members</span><span class="o">.</span><span class="n">through</span>

<span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">inlines</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">MembershipInline</span><span class="p">,</span>
    <span class="p">]</span>

<span class="k">class</span> <span class="nc">GroupAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">inlines</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">MembershipInline</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="n">exclude</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;members&#39;</span><span class="p">,)</span>
</pre></div>
</div>
<p>Il y a deux caractéristiques dignes d’intérêt dans cet exemple.</p>
<p>Premièrement, la classe <code class="docutils literal notranslate"><span class="pre">MembershipInline</span></code> référence <code class="docutils literal notranslate"><span class="pre">Group.members.through</span></code>. L’attribut <code class="docutils literal notranslate"><span class="pre">through</span></code> est une référence au modèle qui gère la relation plusieurs-à-plusieurs. Ce modèle est automatiquement créé par Django lorsque vous définissez un champ de type plusieurs-à-plusieurs.</p>
<p>Deuxièmement, le <code class="docutils literal notranslate"><span class="pre">GroupAdmin</span></code> doit exclure manuellement le champ <code class="docutils literal notranslate"><span class="pre">members</span></code>. Django affiche un composant d’administration pour un champ plusieurs-à-plusieurs du modèle qui définit la relation (dans ce cas, <code class="docutils literal notranslate"><span class="pre">Group</span></code>). Si vous souhaitez utiliser un modèle en sous-formulaire pour représenter la relation multiple, vous devez indiquer à l’administration de Django de ne <em>pas</em> afficher ce composant – autrement vous allez vous retrouver avec deux composants sur la page d’administration pour gérer la relation.</p>
<p>Notez qu’en utilisant cette technique, les signaux <a class="reference internal" href="../../signals.html#django.db.models.signals.m2m_changed" title="django.db.models.signals.m2m_changed"><code class="xref py py-data docutils literal notranslate"><span class="pre">m2m_changed</span></code></a> ne sont pas déclenchés. La raison en est que pour le site d’administration, <code class="docutils literal notranslate"><span class="pre">through</span></code> n’est vu que comme un modèle avec deux clés étrangères et non pas comme une relation plusieurs-à-plusieurs.</p>
<p>À tous autres égards, la classe <code class="docutils literal notranslate"><span class="pre">InlineModelAdmin</span></code> est identique à toute autre. Vous pouvez personnaliser l’apparence en utilisant n’importe laquelle des propriétés de <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code>.</p>
</div>
<div class="section" id="s-working-with-many-to-many-intermediary-models">
<span id="working-with-many-to-many-intermediary-models"></span><h3>Modèles intermédiaires des relations plusieurs-à-plusieurs<a class="headerlink" href="#working-with-many-to-many-intermediary-models" title="Lien permanent vers ce titre">¶</a></h3>
<p>Lorsque vous spécifiez un modèle intermédiaire à l’aide du paramètre <code class="docutils literal notranslate"><span class="pre">through</span></code> d’un champ <a class="reference internal" href="../../models/fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManyToManyField</span></code></a>, l’administration n’affiche pas de composant par défaut. Ceci est dû au fait que chaque instance de modèle intermédiaire nécessite plus d’information que ne peut afficher un composant à lui seul et que la disposition requise pour plusieurs composants varie en fonction du modèle intermédiaire.</p>
<p>Cependant, il est tout à fait légitime de vouloir être en mesure de modifier cette information en ligne. Heureusement, on peut faire cela avec les sous-formulaires d’administration. Supposons que nous ayons les modèles suivants&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="k">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Group</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span>
    <span class="n">members</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="n">through</span><span class="o">=</span><span class="s1">&#39;Membership&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Membership</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">person</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
    <span class="n">group</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Group</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
    <span class="n">date_joined</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">()</span>
    <span class="n">invite_reason</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">64</span><span class="p">)</span>
</pre></div>
</div>
<p>La première étape pour l’affichage du modèle intermédiaire dans l’administration est de définir une classe de sous-formulaire pour le modèle <code class="docutils literal notranslate"><span class="pre">Membership</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MembershipInline</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">TabularInline</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Membership</span>
    <span class="n">extra</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
<p>Cet exemple utilise les valeurs par défaut de <code class="docutils literal notranslate"><span class="pre">InlineModelAdmin</span></code> pour le modèle <code class="docutils literal notranslate"><span class="pre">Membership</span></code>, et limite à un seul les formulaires supplémentaires à ajouter. Cela pourrait être personnalisé en utilisant n’importe quelle option disponible des classes <code class="docutils literal notranslate"><span class="pre">InlineModelAdmin</span></code>.</p>
<p>Créons maintenant des vues d’administration pour les modèles <code class="docutils literal notranslate"><span class="pre">Person</span></code> et <code class="docutils literal notranslate"><span class="pre">Group</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">inlines</span> <span class="o">=</span> <span class="p">(</span><span class="n">MembershipInline</span><span class="p">,)</span>

<span class="k">class</span> <span class="nc">GroupAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">inlines</span> <span class="o">=</span> <span class="p">(</span><span class="n">MembershipInline</span><span class="p">,)</span>
</pre></div>
</div>
<p>Enfin, inscrivez vos modèles <code class="docutils literal notranslate"><span class="pre">Person</span></code> et <code class="docutils literal notranslate"><span class="pre">Group</span></code> au site d’administration&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="n">PersonAdmin</span><span class="p">)</span>
<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Group</span><span class="p">,</span> <span class="n">GroupAdmin</span><span class="p">)</span>
</pre></div>
</div>
<p>Dorénavant, le site d’administration est configuré pour modifier les objets <code class="docutils literal notranslate"><span class="pre">Membership</span></code> dans des sous-formulaires, que ce soit depuis les pages de détail de <code class="docutils literal notranslate"><span class="pre">Person</span></code> ou de <code class="docutils literal notranslate"><span class="pre">Group</span></code>.</p>
</div>
<div class="section" id="s-using-generic-relations-as-an-inline">
<span id="s-id3"></span><span id="using-generic-relations-as-an-inline"></span><span id="id3"></span><h3>Utilisation de relations génériques comme sous-formulaires<a class="headerlink" href="#using-generic-relations-as-an-inline" title="Lien permanent vers ce titre">¶</a></h3>
<p>Il est possible d’utiliser des sous-formulaires avec des objets liés par relation générique. Disons que vous disposez des modèles suivants&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib.contenttypes.fields</span> <span class="k">import</span> <span class="n">GenericForeignKey</span>
<span class="kn">from</span> <span class="nn">django.db</span> <span class="k">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Image</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ImageField</span><span class="p">(</span><span class="n">upload_to</span><span class="o">=</span><span class="s2">&quot;images&quot;</span><span class="p">)</span>
    <span class="n">content_type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">ContentType</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
    <span class="n">object_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">()</span>
    <span class="n">content_object</span> <span class="o">=</span> <span class="n">GenericForeignKey</span><span class="p">(</span><span class="s2">&quot;content_type&quot;</span><span class="p">,</span> <span class="s2">&quot;object_id&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Product</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
<p>Si vous voulez permettre l’édition et la création d’une instance <code class="docutils literal notranslate"><span class="pre">Image</span></code> depuis les vues d’ajout/édition de <code class="docutils literal notranslate"><span class="pre">Product</span></code>, vous pouvez utiliser <a class="reference internal" href="../contenttypes.html#django.contrib.contenttypes.admin.GenericTabularInline" title="django.contrib.contenttypes.admin.GenericTabularInline"><code class="xref py py-class docutils literal notranslate"><span class="pre">GenericTabularInline</span></code></a> ou <a class="reference internal" href="../contenttypes.html#django.contrib.contenttypes.admin.GenericStackedInline" title="django.contrib.contenttypes.admin.GenericStackedInline"><code class="xref py py-class docutils literal notranslate"><span class="pre">GenericStackedInline</span></code></a> (toutes deux des sous-classes de <a class="reference internal" href="../contenttypes.html#django.contrib.contenttypes.admin.GenericInlineModelAdmin" title="django.contrib.contenttypes.admin.GenericInlineModelAdmin"><code class="xref py py-class docutils literal notranslate"><span class="pre">GenericInlineModelAdmin</span></code></a>) fournies par <a class="reference internal" href="../contenttypes.html#module-django.contrib.contenttypes.admin" title="django.contrib.contenttypes.admin"><code class="xref py py-mod docutils literal notranslate"><span class="pre">admin</span></code></a>. Elles mettent en œuvre une disposition visuelle sous forme tabulaire ou empilée, respectivement, pour les formulaires représentant les objets liés, tout comme leurs homologues non génériques. Elles se comportent comme n’importe quel autre sous-formulaire. Dans votre fichier <code class="docutils literal notranslate"><span class="pre">admin.py</span></code> pour cet exemple d’application&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="k">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">django.contrib.contenttypes.admin</span> <span class="k">import</span> <span class="n">GenericTabularInline</span>

<span class="kn">from</span> <span class="nn">myproject.myapp.models</span> <span class="k">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">Product</span>

<span class="k">class</span> <span class="nc">ImageInline</span><span class="p">(</span><span class="n">GenericTabularInline</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Image</span>

<span class="k">class</span> <span class="nc">ProductAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">inlines</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">ImageInline</span><span class="p">,</span>
    <span class="p">]</span>

<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Product</span><span class="p">,</span> <span class="n">ProductAdmin</span><span class="p">)</span>
</pre></div>
</div>
<p>Consultez la <a class="reference internal" href="../contenttypes.html"><span class="doc">documentation de contenttypes</span></a> pour des informations plus spécifiques.</p>
</div>
</div>
<div class="section" id="s-overriding-admin-templates">
<span id="s-admin-overriding-templates"></span><span id="overriding-admin-templates"></span><span id="admin-overriding-templates"></span><h2>Redéfinition des gabarits d’administration<a class="headerlink" href="#overriding-admin-templates" title="Lien permanent vers ce titre">¶</a></h2>
<p>Il est possible de redéfinir de nombreux gabarits que le module d’administration utilise pour générer les différentes pages d’un site d’administration. Vous pouvez même redéfinir quelques-uns de ces gabarits pour une application ou un modèle spécifique.</p>
<div class="section" id="s-set-up-your-projects-admin-template-directories">
<span id="set-up-your-projects-admin-template-directories"></span><h3>Configuration des répertoires de gabarits d’administration pour un projet<a class="headerlink" href="#set-up-your-projects-admin-template-directories" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les fichiers de gabarits d’administration se trouvent dans le répertoire <code class="docutils literal notranslate"><span class="pre">contrib/admin/templates/admin</span></code>.</p>
<p>Dans le but d’en surcharger l’un ou l’autre, créez d’abord un répertoire <code class="docutils literal notranslate"><span class="pre">admin</span></code> dans le répertoire <code class="docutils literal notranslate"><span class="pre">templates</span></code> de votre projet. Il peut s’agir de n’importe quel répertoire mentionné dans l’option <a class="reference internal" href="../../settings.html#std:setting-TEMPLATES-DIRS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DIRS</span></code></a> du moteur <code class="docutils literal notranslate"><span class="pre">DjangoTemplates</span></code> du réglage <a class="reference internal" href="../../settings.html#std:setting-TEMPLATES"><code class="xref std std-setting docutils literal notranslate"><span class="pre">TEMPLATES</span></code></a> setting. Si l’option <code class="docutils literal notranslate"><span class="pre">'loaders'</span></code> a été personnalisée, contrôlez que <code class="docutils literal notranslate"><span class="pre">'django.template.loaders.filesystem.Loader'</span></code> apparaisse avant <code class="docutils literal notranslate"><span class="pre">'django.template.loaders.app_directories.Loader'</span></code> afin que les gabarits personnalisés soient trouvés par le système de chargement des gabarits avant ceux qui sont inclus dans <a class="reference internal" href="#module-django.contrib.admin" title="django.contrib.admin: Django's admin site."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.admin</span></code></a>.</p>
<p>Dans ce répertoire <code class="docutils literal notranslate"><span class="pre">admin</span></code>, créez des sous-répertoires d’après le nom de votre application. Au sein de ces sous-répertoires d’applications, créez des sous-répertoires avec le nom de vos modèles. Notez que l’application d’administration transformera en minuscules le nom du modèle lors de la recherche du répertoire, assurez-vous donc de nommer le répertoire en minuscules si l’application va s’exécuter sur un système de fichiers sensible à la casse.</p>
<p>Pour redéfinir un gabarit d’administration pour une application spécifique, copiez et modifiez le gabarit du répertoire <code class="docutils literal notranslate"><span class="pre">django/contrib/admin/templates/admin</span></code>, et enregistrez-le dans l’un des répertoires que vous venez de créer.</p>
<p>Par exemple, si nous voulions ajouter un outil à la vue de liste pour modification de tous les modèles d’une application nommée <code class="docutils literal notranslate"><span class="pre">my_app</span></code>, il faudrait copier <code class="docutils literal notranslate"><span class="pre">contrib/admin/templates/admin/change_list.html</span></code> vers le répertoire <code class="docutils literal notranslate"><span class="pre">templates/admin/my_app/</span></code> du projet et apporter les modifications nécessaires.</p>
<p>Si nous voulions ajouter un outil à la vue de liste pour modification d’un modèle spécifique appelé <code class="docutils literal notranslate"><span class="pre">Page</span></code>, il faudrait copier ce même fichier vers le répertoire <code class="docutils literal notranslate"><span class="pre">templates/admin/my_app/page</span></code> du projet.</p>
</div>
<div class="section" id="s-overriding-vs-replacing-an-admin-template">
<span id="overriding-vs-replacing-an-admin-template"></span><h3>Redéfinition vs remplacement d’un gabarit d’administration<a class="headerlink" href="#overriding-vs-replacing-an-admin-template" title="Lien permanent vers ce titre">¶</a></h3>
<p>Grâce à la conception modulaire des gabarits d’administration, il n’est généralement ni nécessaire ni souhaitable de remplacer un gabarit entier. Il est presque toujours préférable de redéfinir uniquement la section du gabarit qui a besoin d’être adaptée.</p>
<p>Pour reprendre l’exemple ci-dessus, nous voulons ajouter un nouveau lien à côté de l’outil <code class="docutils literal notranslate"><span class="pre">Historique</span></code> pour le modèle <code class="docutils literal notranslate"><span class="pre">Page</span></code>. Après avoir examiné <code class="docutils literal notranslate"><span class="pre">change_form.html</span></code>, il apparaît que seul le bloc <code class="docutils literal notranslate"><span class="pre">object-tools-items</span></code> doit être redéfini. Voici donc la nouvelle version de <code class="docutils literal notranslate"><span class="pre">change_form.html</span></code>:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&quot;admin/change_form.html&quot;</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">load</span> <span class="nv">i18n</span> <span class="nv">admin_urls</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">block</span> <span class="nv">object-tools-items</span> <span class="cp">%}</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{%</span> <span class="k">url</span> <span class="nv">opts</span><span class="o">|</span><span class="nf">admin_urlname</span><span class="s1">:&#39;history&#39;</span> <span class="nv">original.pk</span><span class="o">|</span><span class="nf">admin_urlquote</span> <span class="cp">%}</span><span class="s">&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;historylink&quot;</span><span class="p">&gt;</span><span class="cp">{%</span> <span class="k">translate</span> <span class="s2">&quot;History&quot;</span> <span class="cp">%}</span><span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;mylink/&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;historylink&quot;</span><span class="p">&gt;</span>My Link<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">has_absolute_url</span> <span class="cp">%}</span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;admin:view_on_site&#39;</span> <span class="nv">content_type_id</span> <span class="nv">original.pk</span> <span class="cp">%}</span><span class="s">&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;viewsitelink&quot;</span><span class="p">&gt;</span><span class="cp">{%</span> <span class="k">translate</span> <span class="s2">&quot;View on site&quot;</span> <span class="cp">%}</span><span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>Et c’est tout ! Si nous placions ce fichier dans le répertoire <code class="docutils literal notranslate"><span class="pre">templates/admin/my_app</span></code>, le nouveau lien apparaîtrait sur le formulaire d’édition de tous les modèles dans my_app.</p>
</div>
<div class="section" id="s-templates-which-may-be-overridden-per-app-or-model">
<span id="s-admin-templates-overridden-per-app-or-model"></span><span id="templates-which-may-be-overridden-per-app-or-model"></span><span id="admin-templates-overridden-per-app-or-model"></span><h3>Gabarits pouvant être redéfinis par application ou par modèle<a class="headerlink" href="#templates-which-may-be-overridden-per-app-or-model" title="Lien permanent vers ce titre">¶</a></h3>
<p>Tous les gabarits <code class="docutils literal notranslate"><span class="pre">contrib/admin/templates/admin</span></code> ne peuvent pas être redéfinis par application ou par modèle. Les suivants le peuvent :</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">actions.html</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">app_index.html</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">change_form.html</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">change_form_object_tools.html</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">change_list.html</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">change_list_object_tools.html</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">change_list_results.html</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">date_hierarchy.html</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">delete_confirmation.html</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">object_history.html</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">pagination.html</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">popup_response.html</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">prepopulated_fields_js.html</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">search_form.html</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">submit_line.html</span></code></li>
</ul>
<p>Parmi les gabarits qui ne peuvent pas être redéfinis de cette façon, il est toujours possible de les redéfinir pour l’ensemble d’un projet en plaçant la nouvelle version dans le répertoire <code class="docutils literal notranslate"><span class="pre">templates/admin</span></code>. Ceci est particulièrement utile pour créer des pages 404 et 500 personnalisées.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Certains gabarits d’administration tels que <code class="docutils literal notranslate"><span class="pre">change_list_results.html</span></code> sont utilisés pour produire des balises d’inclusion personnalisées. Ceux-ci peuvent être remplacés, mais dans ce cas vous feriez probablement mieux de créer votre propre version de la balise en question et de lui donner un nom différent. De cette façon, vous pouvez l’utiliser de manière sélective.</p>
</div>
</div>
<div class="section" id="s-root-and-login-templates">
<span id="root-and-login-templates"></span><h3>Gabarits racine et de connexion<a class="headerlink" href="#root-and-login-templates" title="Lien permanent vers ce titre">¶</a></h3>
<p>Si vous souhaitez modifier les gabarits des pages d’accueil, de connexion ou de déconnexion, vous feriez mieux de créer votre propre instance <code class="docutils literal notranslate"><span class="pre">AdminSite</span></code> (voir ci-dessous), et de modifier les propriétés <a class="reference internal" href="#django.contrib.admin.AdminSite.index_template" title="django.contrib.admin.AdminSite.index_template"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AdminSite.index_template</span></code></a>, <a class="reference internal" href="#django.contrib.admin.AdminSite.login_template" title="django.contrib.admin.AdminSite.login_template"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AdminSite.login_template</span></code></a> ou <a class="reference internal" href="#django.contrib.admin.AdminSite.logout_template" title="django.contrib.admin.AdminSite.logout_template"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AdminSite.logout_template</span></code></a>.</p>
</div>
</div>
<div class="section" id="s-adminsite-objects">
<span id="adminsite-objects"></span><h2>Objets <code class="docutils literal notranslate"><span class="pre">AdminSite</span></code><a class="headerlink" href="#adminsite-objects" title="Lien permanent vers ce titre">¶</a></h2>
<dl class="class">
<dt id="django.contrib.admin.AdminSite">
<em class="property">class </em><code class="descname">AdminSite</code>(<em>name='admin'</em>)<a class="headerlink" href="#django.contrib.admin.AdminSite" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Un site d’administration de Django est représenté par une instance de <code class="docutils literal notranslate"><span class="pre">django.contrib.admin.sites.AdminSite</span></code>; par défaut, une instance de cette classe est créée en tant que <code class="docutils literal notranslate"><span class="pre">django.contrib.admin.site</span></code> et vous pouvez inscrire vos modèles et vos instances de <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code> à cette instance.</p>
<p>Si vous souhaitez personnaliser le site d’administration par défaut, vous pouvez <a class="reference internal" href="#overriding-default-admin-site"><span class="std std-ref">le surcharger</span></a>.</p>
<p>Lors de la construction d’une instance de <code class="docutils literal notranslate"><span class="pre">AdminSite</span></code>, vous pouvez fournir un nom d’instance unique en utilisant le paramètre <code class="docutils literal notranslate"><span class="pre">name</span></code> du constructeur. Ce nom d’instance est utilisé pour identifier l’instance, en particulier lors de la <a class="reference internal" href="#admin-reverse-urls"><span class="std std-ref">résolution inverse des URL de l’administration</span></a>. Si aucun nom d’instance n’est fourni, un nom d’instance <code class="docutils literal notranslate"><span class="pre">admin</span></code> par défaut sera utilisé. Voir <a class="reference internal" href="#customizing-adminsite"><span class="std std-ref">Personnalisation de la classe AdminSite</span></a> qui contient un exemple de personnalisation de la classe <a class="reference internal" href="#django.contrib.admin.AdminSite" title="django.contrib.admin.AdminSite"><code class="xref py py-class docutils literal notranslate"><span class="pre">AdminSite</span></code></a>.</p>
</dd></dl>

<div class="section" id="s-adminsite-attributes">
<span id="adminsite-attributes"></span><h3>Attributs de <code class="docutils literal notranslate"><span class="pre">AdminSite</span></code><a class="headerlink" href="#adminsite-attributes" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les gabarits peuvent redéfinir ou étendre les gabarits d’administration de base comme décrit dans <a class="reference internal" href="#admin-overriding-templates"><span class="std std-ref">Redéfinition des gabarits d’administration</span></a>.</p>
<dl class="attribute">
<dt id="django.contrib.admin.AdminSite.site_header">
<code class="descclassname">AdminSite.</code><code class="descname">site_header</code><a class="headerlink" href="#django.contrib.admin.AdminSite.site_header" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Le texte à insérer au sommet de chaque page du site d’administration, dans une balise <code class="docutils literal notranslate"><span class="pre">&lt;h1&gt;</span></code> (une chaîne). Par défaut, il s’agit de «&nbsp;Administration de Django&nbsp;».</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.AdminSite.site_title">
<code class="descclassname">AdminSite.</code><code class="descname">site_title</code><a class="headerlink" href="#django.contrib.admin.AdminSite.site_title" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Le texte à insérer à la suite de la balise <code class="docutils literal notranslate"><span class="pre">&lt;title&gt;</span></code> de chaque page du site d’administration (une chaîne). Par défaut, il s’agit de « Site d’administration de Django ».</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.AdminSite.site_url">
<code class="descclassname">AdminSite.</code><code class="descname">site_url</code><a class="headerlink" href="#django.contrib.admin.AdminSite.site_url" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>L’URL du lien «&nbsp;Voir le site&nbsp;» au sommet de chaque page d’administration. Par défaut, <code class="docutils literal notranslate"><span class="pre">site_url</span></code> contient <code class="docutils literal notranslate"><span class="pre">/</span></code>. Indiquez la valeur <code class="docutils literal notranslate"><span class="pre">None</span></code> pour supprimer le lien.</p>
<p>Pour les sites fonctionnant dans un sous-chemin, la méthode <a class="reference internal" href="#django.contrib.admin.AdminSite.each_context" title="django.contrib.admin.AdminSite.each_context"><code class="xref py py-meth docutils literal notranslate"><span class="pre">each_context()</span></code></a> vérifie si la requête actuelle possède une valeur <code class="docutils literal notranslate"><span class="pre">request.META['SCRIPT_NAME']</span></code> et utilise celle-ci si <code class="docutils literal notranslate"><span class="pre">site_url``n'est</span> <span class="pre">pas</span> <span class="pre">défini</span> <span class="pre">à</span> <span class="pre">autre</span> <span class="pre">chose</span> <span class="pre">que</span> <span class="pre">``/</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.AdminSite.index_title">
<code class="descclassname">AdminSite.</code><code class="descname">index_title</code><a class="headerlink" href="#django.contrib.admin.AdminSite.index_title" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Le texte à insérer au sommet de la page d’accueil du site d’administration (une chaîne). Par défaut, il s’agit de « Administration du site ».</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.AdminSite.index_template">
<code class="descclassname">AdminSite.</code><code class="descname">index_template</code><a class="headerlink" href="#django.contrib.admin.AdminSite.index_template" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Chemin d’accès vers un gabarit personnalisé qui sera utilisé par la vue d’accueil principale du site d’administration.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.AdminSite.app_index_template">
<code class="descclassname">AdminSite.</code><code class="descname">app_index_template</code><a class="headerlink" href="#django.contrib.admin.AdminSite.app_index_template" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Chemin d’accès vers un gabarit personnalisé qui sera utilisé par la vue d’accueil d’une application du site d’administration.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.AdminSite.empty_value_display">
<code class="descclassname">AdminSite.</code><code class="descname">empty_value_display</code><a class="headerlink" href="#django.contrib.admin.AdminSite.empty_value_display" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La chaîne à utiliser pour l’affichage de valeurs vides dans la liste pour modification du site d’administration. Il s’agit par défaut d’un tiret. La valeur peut aussi être surchargée sur la base des classes <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code> ou sur un champ précis d’une classe <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code> en définissant un attribut <code class="docutils literal notranslate"><span class="pre">empty_value_display</span></code> pour le champ. Voir <a class="reference internal" href="#django.contrib.admin.ModelAdmin.empty_value_display" title="django.contrib.admin.ModelAdmin.empty_value_display"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ModelAdmin.empty_value_display</span></code></a> pour des exemples.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.AdminSite.enable_nav_sidebar">
<code class="descclassname">AdminSite.</code><code class="descname">enable_nav_sidebar</code><a class="headerlink" href="#django.contrib.admin.AdminSite.enable_nav_sidebar" title="Lien permanent vers cette définition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 3.1.</span> </div>
<p>Une valeur booléenne déterminant si la barre latérale de navigation doit être affichée sur les plus grands écrans. Par défaut, cette valeur vaut <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.AdminSite.login_template">
<code class="descclassname">AdminSite.</code><code class="descname">login_template</code><a class="headerlink" href="#django.contrib.admin.AdminSite.login_template" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Chemin d’accès vers un gabarit personnalisé qui sera utilisé par la vue de connexion au site d’administration.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.AdminSite.login_form">
<code class="descclassname">AdminSite.</code><code class="descname">login_form</code><a class="headerlink" href="#django.contrib.admin.AdminSite.login_form" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Sous-classe de <a class="reference internal" href="../../../topics/auth/default.html#django.contrib.auth.forms.AuthenticationForm" title="django.contrib.auth.forms.AuthenticationForm"><code class="xref py py-class docutils literal notranslate"><span class="pre">AuthenticationForm</span></code></a> qui sera utilisée par la vue de connexion au site d’administration.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.AdminSite.logout_template">
<code class="descclassname">AdminSite.</code><code class="descname">logout_template</code><a class="headerlink" href="#django.contrib.admin.AdminSite.logout_template" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Chemin d’accès vers un gabarit personnalisé qui sera utilisé par la vue de déconnexion du site d’administration.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.AdminSite.password_change_template">
<code class="descclassname">AdminSite.</code><code class="descname">password_change_template</code><a class="headerlink" href="#django.contrib.admin.AdminSite.password_change_template" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Chemin d’accès vers un gabarit personnalisé qui sera utilisé par la vue de changement du mot de passe du site d’administration.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.AdminSite.password_change_done_template">
<code class="descclassname">AdminSite.</code><code class="descname">password_change_done_template</code><a class="headerlink" href="#django.contrib.admin.AdminSite.password_change_done_template" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Chemin d’accès vers un gabarit personnalisé qui sera utilisé par la vue de confirmation du changement de mot de passe du site d’administration.</p>
</dd></dl>

</div>
<div class="section" id="s-adminsite-methods">
<span id="adminsite-methods"></span><h3>Méthodes de <code class="docutils literal notranslate"><span class="pre">AdminSite</span></code><a class="headerlink" href="#adminsite-methods" title="Lien permanent vers ce titre">¶</a></h3>
<dl class="method">
<dt id="django.contrib.admin.AdminSite.each_context">
<code class="descclassname">AdminSite.</code><code class="descname">each_context</code>(<em>request</em>)<a class="headerlink" href="#django.contrib.admin.AdminSite.each_context" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Renvoie un dictionnaire de variables à placer dans le contexte de gabarit de chaque page du site d’administration.</p>
<p>Inclut par défaut les variables et valeurs suivantes&nbsp;:</p>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">site_header</span></code>: <a class="reference internal" href="#django.contrib.admin.AdminSite.site_header" title="django.contrib.admin.AdminSite.site_header"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AdminSite.site_header</span></code></a></p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">site_title</span></code>: <a class="reference internal" href="#django.contrib.admin.AdminSite.site_title" title="django.contrib.admin.AdminSite.site_title"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AdminSite.site_title</span></code></a></p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">site_url</span></code>: <a class="reference internal" href="#django.contrib.admin.AdminSite.site_url" title="django.contrib.admin.AdminSite.site_url"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AdminSite.site_url</span></code></a></p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">has_permission</span></code>: <a class="reference internal" href="#django.contrib.admin.AdminSite.has_permission" title="django.contrib.admin.AdminSite.has_permission"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AdminSite.has_permission()</span></code></a></p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">available_apps</span></code>: une liste d’applications provenant du <a class="reference internal" href="../../applications.html"><span class="doc">registre des applications</span></a> disponibles pour l’utilisateur actuel. Chaque élément de la liste est un dictionnaire représentant une application avec les clés suivantes&nbsp;:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">app_label</span></code>: l’étiquette d’application</li>
<li><code class="docutils literal notranslate"><span class="pre">app_url</span></code>: l’URL de la page d’accueil de l’application dans le site d’administration</li>
<li><code class="docutils literal notranslate"><span class="pre">has_module_perms</span></code>: une valeur booléenne indiquant si l’affichage et l’accès à la page d’accueil du module est autorisé pour l’utilisateur actuel</li>
<li><code class="docutils literal notranslate"><span class="pre">models</span></code>: une liste des modèles disponibles dans l’application</li>
</ul>
<p>Chaque modèle est un dictionnaire avec les clés suivantes&nbsp;:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">object_name</span></code>: nom de la classe du modèle</li>
<li><code class="docutils literal notranslate"><span class="pre">name</span></code>: nom pluriel du modèle</li>
<li><code class="docutils literal notranslate"><span class="pre">perms</span></code>: un <code class="docutils literal notranslate"><span class="pre">dict</span></code> indiquant les permissions <code class="docutils literal notranslate"><span class="pre">add</span></code>, <code class="docutils literal notranslate"><span class="pre">change</span></code>, <code class="docutils literal notranslate"><span class="pre">delete</span></code> et <code class="docutils literal notranslate"><span class="pre">view</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">admin_url</span></code>: URL de la liste pour modification du modèle dans le site d’administration</li>
<li><code class="docutils literal notranslate"><span class="pre">add_url</span></code>: URL d’ajout de nouvelle instance de modèle dans le site d’administration</li>
</ul>
</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.AdminSite.has_permission">
<code class="descclassname">AdminSite.</code><code class="descname">has_permission</code>(<em>request</em>)<a class="headerlink" href="#django.contrib.admin.AdminSite.has_permission" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Renvoie <code class="docutils literal notranslate"><span class="pre">True</span></code> si l’utilisateur de la requête <code class="docutils literal notranslate"><span class="pre">HttpRequest</span></code> donnée a la permission de voir au moins une page du site d’administration. Par défaut, il faut que <a class="reference internal" href="../auth.html#django.contrib.auth.models.User.is_active" title="django.contrib.auth.models.User.is_active"><code class="xref py py-attr docutils literal notranslate"><span class="pre">User.is_active</span></code></a> et <a class="reference internal" href="../auth.html#django.contrib.auth.models.User.is_staff" title="django.contrib.auth.models.User.is_staff"><code class="xref py py-attr docutils literal notranslate"><span class="pre">User.is_staff</span></code></a> valent toutes deux <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.AdminSite.register">
<code class="descclassname">AdminSite.</code><code class="descname">register</code>(<em>model_or_iterable</em>, <em>admin_class=None</em>, <em>**options</em>)<a class="headerlink" href="#django.contrib.admin.AdminSite.register" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Inscrit la classe de modèle donnée (ou une liste de classes) avec la classe <code class="docutils literal notranslate"><span class="pre">admin_class</span></code> indiquée. Par défaut, <code class="docutils literal notranslate"><span class="pre">admin_class</span></code> est <a class="reference internal" href="#django.contrib.admin.ModelAdmin" title="django.contrib.admin.ModelAdmin"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelAdmin</span></code></a> (options d’administration par défaut). Si des paramètres nommés sont fournis (par ex. <code class="docutils literal notranslate"><span class="pre">list_display</span></code>), ils seront appliqués comme options de la classe d’administration.</p>
<p>Génère <a class="reference internal" href="../../exceptions.html#django.core.exceptions.ImproperlyConfigured" title="django.core.exceptions.ImproperlyConfigured"><code class="xref py py-class docutils literal notranslate"><span class="pre">ImproperlyConfigured</span></code></a> si un modèle est abstrait et <code class="docutils literal notranslate"><span class="pre">django.contrib.admin.sites.AlreadyRegistered</span></code> si un modèle est déjà inscrit.</p>
</dd></dl>

</div>
<div class="section" id="s-hooking-adminsite-instances-into-your-urlconf">
<span id="s-hooking-adminsite-to-urlconf"></span><span id="hooking-adminsite-instances-into-your-urlconf"></span><span id="hooking-adminsite-to-urlconf"></span><h3>Raccordement des instances <code class="docutils literal notranslate"><span class="pre">AdminSite</span></code> dans la configuration d’URL<a class="headerlink" href="#hooking-adminsite-instances-into-your-urlconf" title="Lien permanent vers ce titre">¶</a></h3>
<p>La dernière étape de la mise en place de l’administration de Django est de brancher votre instance <code class="docutils literal notranslate"><span class="pre">AdminSite</span></code> dans la configuration d’URL. Pour ce faire, faites pointez une URL donnée vers la méthode <code class="docutils literal notranslate"><span class="pre">AdminSite.urls</span></code>. Il n’est pas nécessaire d’utiliser <a class="reference internal" href="../../urls.html#django.urls.include" title="django.urls.include"><code class="xref py py-func docutils literal notranslate"><span class="pre">include()</span></code></a>.</p>
<p>Dans cet exemple, nous faisons correspondre l’instance <code class="docutils literal notranslate"><span class="pre">AdminSite</span></code> par défaut <code class="docutils literal notranslate"><span class="pre">django.contrib.admin.site</span></code> à l’URL <code class="docutils literal notranslate"><span class="pre">/admin/</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># urls.py</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="k">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">django.urls</span> <span class="k">import</span> <span class="n">path</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;admin/&#39;</span><span class="p">,</span> <span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="s-customizing-the-adminsite-class">
<span id="s-customizing-adminsite"></span><span id="customizing-the-adminsite-class"></span><span id="customizing-adminsite"></span><h3>Personnalisation de la classe <code class="xref py py-class docutils literal notranslate"><span class="pre">AdminSite</span></code><a class="headerlink" href="#customizing-the-adminsite-class" title="Lien permanent vers ce titre">¶</a></h3>
<p>Si vous souhaitez mettre en place votre propre site d’administration avec un comportement personnalisé, vous êtes libre de créer une sous-classe de <code class="docutils literal notranslate"><span class="pre">AdminSite</span></code> et d’y redéfinir ou d’y ajouter ce que vous voulez. Ensuite, créez une instance de votre sous-classe de <code class="docutils literal notranslate"><span class="pre">AdminSite</span></code> (sur le même principe que pour toute autre classe Python), et inscrivez-y vos modèles et sous-classes de <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code> au lieu de le faire avec le site par défaut. Finalement, mettez à jour <code class="file docutils literal notranslate"><span class="pre">monprojet/urls.py</span></code> pour y référencer votre sous-classe de <a class="reference internal" href="#django.contrib.admin.AdminSite" title="django.contrib.admin.AdminSite"><code class="xref py py-class docutils literal notranslate"><span class="pre">AdminSite</span></code></a>.</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">myapp/admin.py</span><a class="headerlink" href="#id4" title="Lien permanent vers ce code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib.admin</span> <span class="kn">import</span> <span class="n">AdminSite</span>

<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">MyModel</span>

<span class="k">class</span> <span class="nc">MyAdminSite</span><span class="p">(</span><span class="n">AdminSite</span><span class="p">):</span>
    <span class="n">site_header</span> <span class="o">=</span> <span class="s1">&#39;Monty Python administration&#39;</span>

<span class="n">admin_site</span> <span class="o">=</span> <span class="n">MyAdminSite</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;myadmin&#39;</span><span class="p">)</span>
<span class="n">admin_site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">MyModel</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">monproject/urls.py</span><a class="headerlink" href="#id5" title="Lien permanent vers ce code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.urls</span> <span class="kn">import</span> <span class="n">path</span>

<span class="kn">from</span> <span class="nn">myapp.admin</span> <span class="kn">import</span> <span class="n">admin_site</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;myadmin/&#39;</span><span class="p">,</span> <span class="n">admin_site</span><span class="o">.</span><span class="n">urls</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<p>Notez que la découverte automatique des modules <code class="docutils literal notranslate"><span class="pre">admin</span></code> n’est pas forcément souhaitable lorsque vous utilisez votre propre instance <code class="docutils literal notranslate"><span class="pre">AdminSite</span></code> puisque vous importez probablement tous les modules <code class="docutils literal notranslate"><span class="pre">admin</span></code> de chaque application dans le module principal <code class="docutils literal notranslate"><span class="pre">projet.admin</span></code>. Cela signifie qu’il est nécessaire de remplacer <code class="docutils literal notranslate"><span class="pre">'django.contrib.admin'</span></code> par <code class="docutils literal notranslate"><span class="pre">'django.contrib.admin.apps.SimpleAdminConfig'</span></code> dans le réglage <a class="reference internal" href="../../settings.html#std:setting-INSTALLED_APPS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">INSTALLED_APPS</span></code></a>.</p>
</div>
<div class="section" id="s-overriding-the-default-admin-site">
<span id="s-overriding-default-admin-site"></span><span id="overriding-the-default-admin-site"></span><span id="overriding-default-admin-site"></span><h3>Surcharge du site d’administration par défaut<a class="headerlink" href="#overriding-the-default-admin-site" title="Lien permanent vers ce titre">¶</a></h3>
<p>Vous pouvez surcharger le site <code class="docutils literal notranslate"><span class="pre">django.contrib.admin.site</span></code> par défaut en définissant l’attribut <a class="reference internal" href="#django.contrib.admin.apps.SimpleAdminConfig.default_site" title="django.contrib.admin.apps.SimpleAdminConfig.default_site"><code class="xref py py-attr docutils literal notranslate"><span class="pre">default_site</span></code></a> d’une classe <code class="docutils literal notranslate"><span class="pre">AppConfig</span></code> personnalisée à un chemin d’importation pointé vers une sous-classe de <code class="docutils literal notranslate"><span class="pre">AdminSite</span></code> ou vers un objet exécutable qui renvoie une instance de site.</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">monproject/admin.py</span><a class="headerlink" href="#id6" title="Lien permanent vers ce code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>

<span class="k">class</span> <span class="nc">MyAdminSite</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">AdminSite</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">monproject/apps.py</span><a class="headerlink" href="#id7" title="Lien permanent vers ce code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib.admin.apps</span> <span class="kn">import</span> <span class="n">AdminConfig</span>

<span class="k">class</span> <span class="nc">MyAdminConfig</span><span class="p">(</span><span class="n">AdminConfig</span><span class="p">):</span>
    <span class="n">default_site</span> <span class="o">=</span> <span class="s1">&#39;myproject.admin.MyAdminSite&#39;</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">monproject/settings.py</span><a class="headerlink" href="#id8" title="Lien permanent vers ce code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="o">...</span>
    <span class="s1">&#39;myproject.apps.MyAdminConfig&#39;</span><span class="p">,</span>  <span class="c1"># replaces &#39;django.contrib.admin&#39;</span>
    <span class="o">...</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="s-multiple-admin-sites-in-the-same-urlconf">
<span id="s-multiple-admin-sites"></span><span id="multiple-admin-sites-in-the-same-urlconf"></span><span id="multiple-admin-sites"></span><h3>Plusieurs sites d’administration dans la même configuration d’URL<a class="headerlink" href="#multiple-admin-sites-in-the-same-urlconf" title="Lien permanent vers ce titre">¶</a></h3>
<p>Il est possible de créer plusieurs instances du site d’administration sur le même site Web Django. Créez plusieurs instances <code class="docutils literal notranslate"><span class="pre">AdminSite</span></code> et indiquez pour chacune d’elles une URL différente.</p>
<p>Dans cet exemple, les URL <code class="docutils literal notranslate"><span class="pre">/basic-admin/</span></code> et <code class="docutils literal notranslate"><span class="pre">/advanced-admin/</span></code> correspondent à des versions distinctes du site d’administration, à l’aide des instances <code class="docutils literal notranslate"><span class="pre">AdminSite</span></code> <code class="docutils literal notranslate"><span class="pre">myproject.admin.basic_site</span></code> et <code class="docutils literal notranslate"><span class="pre">myproject.admin.advanced_site</span></code>, respectivement&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># urls.py</span>
<span class="kn">from</span> <span class="nn">django.urls</span> <span class="k">import</span> <span class="n">path</span>
<span class="kn">from</span> <span class="nn">myproject.admin</span> <span class="k">import</span> <span class="n">advanced_site</span><span class="p">,</span> <span class="n">basic_site</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;basic-admin/&#39;</span><span class="p">,</span> <span class="n">basic_site</span><span class="o">.</span><span class="n">urls</span><span class="p">),</span>
    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;advanced-admin/&#39;</span><span class="p">,</span> <span class="n">advanced_site</span><span class="o">.</span><span class="n">urls</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Les instances <code class="docutils literal notranslate"><span class="pre">AdminSite</span></code> acceptent un seul paramètre pour leur constructeur&nbsp;: leur nom, qui est complètement libre. Ce paramètre devient le préfixe des noms d’URL utilisés lors de leur <a class="reference internal" href="#admin-reverse-urls"><span class="std std-ref">résolution inverse</span></a>. Cela n’est nécessaire que si vous utilisez plus d’un <code class="docutils literal notranslate"><span class="pre">AdminSite</span></code>.</p>
</div>
<div class="section" id="s-adding-views-to-admin-sites">
<span id="adding-views-to-admin-sites"></span><h3>Ajout de vues à des sites d’administration<a class="headerlink" href="#adding-views-to-admin-sites" title="Lien permanent vers ce titre">¶</a></h3>
<p>Tout comme <a class="reference internal" href="#django.contrib.admin.ModelAdmin" title="django.contrib.admin.ModelAdmin"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelAdmin</span></code></a>, <a class="reference internal" href="#django.contrib.admin.AdminSite" title="django.contrib.admin.AdminSite"><code class="xref py py-class docutils literal notranslate"><span class="pre">AdminSite</span></code></a> fournit une méthode <a class="reference internal" href="#django.contrib.admin.ModelAdmin.get_urls" title="django.contrib.admin.ModelAdmin.get_urls"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_urls()</span></code></a> qui peut être surchargée pour définir des vues supplémentaires pour le site. Pour ajouter une nouvelle vue à un site d’administration, étendez la méthode de base <a class="reference internal" href="#django.contrib.admin.ModelAdmin.get_urls" title="django.contrib.admin.ModelAdmin.get_urls"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_urls()</span></code></a> afin d’inclure un motif pour la nouvelle vue.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Toute vue que vous rendez et qui utilise les gabarits d’administration, ou qui étend le gabarit d’administration de base, devrait définir <code class="docutils literal notranslate"><span class="pre">request.current_app</span></code> avant le rendu du gabarit. Cette variable devrait contenir <code class="docutils literal notranslate"><span class="pre">self.name</span></code> si la vue est dans un <code class="docutils literal notranslate"><span class="pre">AdminSite</span></code> ou <code class="docutils literal notranslate"><span class="pre">self.admin_site.name</span></code> si la vue est dans un <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code>.</p>
</div>
</div>
<div class="section" id="s-adding-a-password-reset-feature">
<span id="s-auth-password-reset"></span><span id="adding-a-password-reset-feature"></span><span id="auth-password-reset"></span><h3>Ajout d’une fonctionnalité de réinitialisation du mot de passe<a class="headerlink" href="#adding-a-password-reset-feature" title="Lien permanent vers ce titre">¶</a></h3>
<p>Vous pouvez ajouter une fonctionnalité de réinitialisation du mot de passe pour le site d’administration par l’ajout de quelques lignes à votre URLconf. Plus précisément, ajoutez ces quatre motifs</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib.auth</span> <span class="k">import</span> <span class="n">views</span> <span class="k">as</span> <span class="n">auth_views</span>

<span class="n">path</span><span class="p">(</span>
    <span class="s1">&#39;admin/password_reset/&#39;</span><span class="p">,</span>
    <span class="n">auth_views</span><span class="o">.</span><span class="n">PasswordResetView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;admin_password_reset&#39;</span><span class="p">,</span>
<span class="p">),</span>
<span class="n">path</span><span class="p">(</span>
    <span class="s1">&#39;admin/password_reset/done/&#39;</span><span class="p">,</span>
    <span class="n">auth_views</span><span class="o">.</span><span class="n">PasswordResetDoneView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;password_reset_done&#39;</span><span class="p">,</span>
<span class="p">),</span>
<span class="n">path</span><span class="p">(</span>
    <span class="s1">&#39;reset/&lt;uidb64&gt;/&lt;token&gt;/&#39;</span><span class="p">,</span>
    <span class="n">auth_views</span><span class="o">.</span><span class="n">PasswordResetConfirmView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;password_reset_confirm&#39;</span><span class="p">,</span>
<span class="p">),</span>
<span class="n">path</span><span class="p">(</span>
    <span class="s1">&#39;reset/done/&#39;</span><span class="p">,</span>
    <span class="n">auth_views</span><span class="o">.</span><span class="n">PasswordResetCompleteView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;password_reset_complete&#39;</span><span class="p">,</span>
<span class="p">),</span>
</pre></div>
</div>
<p>(Cela suppose que vous avez placé le site d’administration à <code class="docutils literal notranslate"><span class="pre">admin/</span></code> et nécessite que vous placiez les URL commençant par <code class="docutils literal notranslate"><span class="pre">^admin/</span></code> avant la ligne qui inclut l’application d’administration elle-même).</p>
<p>La présence de l’URL nommée <code class="docutils literal notranslate"><span class="pre">admin_password_reset</span></code> fera apparaître un lien «&nbsp;Mot de passe oublié ?&nbsp;» sur la page par défaut d’ouverture de session de l’administration sous la boîte de saisie du mot de passe.</p>
</div>
</div>
<div class="section" id="s-logentry-objects">
<span id="logentry-objects"></span><h2>Objets <code class="docutils literal notranslate"><span class="pre">LogEntry</span></code> (journalisation)<a class="headerlink" href="#logentry-objects" title="Lien permanent vers ce titre">¶</a></h2>
<dl class="class">
<dt id="django.contrib.admin.models.LogEntry">
<em class="property">class </em><code class="descclassname">models.</code><code class="descname">LogEntry</code><a class="headerlink" href="#django.contrib.admin.models.LogEntry" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La classe <code class="docutils literal notranslate"><span class="pre">LogEntry</span></code> garde la trace des ajouts, des modifications et des suppressions d’objets effectués via l’interface d’administration.</p>
</dd></dl>

<div class="section" id="s-logentry-attributes">
<span id="logentry-attributes"></span><h3>Attributs de <code class="docutils literal notranslate"><span class="pre">LogEntry</span></code><a class="headerlink" href="#logentry-attributes" title="Lien permanent vers ce titre">¶</a></h3>
<dl class="attribute">
<dt id="django.contrib.admin.models.LogEntry.action_time">
<code class="descclassname">LogEntry.</code><code class="descname">action_time</code><a class="headerlink" href="#django.contrib.admin.models.LogEntry.action_time" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La date et l’heure de l’action.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.models.LogEntry.user">
<code class="descclassname">LogEntry.</code><code class="descname">user</code><a class="headerlink" href="#django.contrib.admin.models.LogEntry.user" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>L’utilisateur (une instance <a class="reference internal" href="../../settings.html#std:setting-AUTH_USER_MODEL"><code class="xref std std-setting docutils literal notranslate"><span class="pre">AUTH_USER_MODEL</span></code></a>) qui a procédé à l’action.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.models.LogEntry.content_type">
<code class="descclassname">LogEntry.</code><code class="descname">content_type</code><a class="headerlink" href="#django.contrib.admin.models.LogEntry.content_type" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Le type de contenu (<a class="reference internal" href="../contenttypes.html#django.contrib.contenttypes.models.ContentType" title="django.contrib.contenttypes.models.ContentType"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContentType</span></code></a>) de l’objet modifié.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.models.LogEntry.object_id">
<code class="descclassname">LogEntry.</code><code class="descname">object_id</code><a class="headerlink" href="#django.contrib.admin.models.LogEntry.object_id" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La représentation textuelle de la clé primaire de l’objet modifié.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.models.LogEntry.object_repr">
<code class="descclassname">LogEntry.</code><code class="descname">object_repr</code><a class="headerlink" href="#django.contrib.admin.models.LogEntry.object_repr" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La représentation <code class="docutils literal notranslate"><span class="pre">repr()</span></code> de l’objet après sa modification.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.models.LogEntry.action_flag">
<code class="descclassname">LogEntry.</code><code class="descname">action_flag</code><a class="headerlink" href="#django.contrib.admin.models.LogEntry.action_flag" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Le type de l’action journalisée&nbsp;: <code class="docutils literal notranslate"><span class="pre">ADDITION</span></code>, <code class="docutils literal notranslate"><span class="pre">CHANGE</span></code>, <code class="docutils literal notranslate"><span class="pre">DELETION</span></code>.</p>
<p>Par exemple, pour obtenir la liste de tous les ajouts effectués via l’interface d’administration&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib.admin.models</span> <span class="k">import</span> <span class="n">ADDITION</span><span class="p">,</span> <span class="n">LogEntry</span>

<span class="n">LogEntry</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">action_flag</span><span class="o">=</span><span class="n">ADDITION</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.admin.models.LogEntry.change_message">
<code class="descclassname">LogEntry.</code><code class="descname">change_message</code><a class="headerlink" href="#django.contrib.admin.models.LogEntry.change_message" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>La description détaillée de la modification. Dans le cas d’une édition par exemple, le message contient une liste des champs modifiés. Le site d’administration de Django met en forme ce contenu sous forme de structure JSON afin que <a class="reference internal" href="#django.contrib.admin.models.LogEntry.get_change_message" title="django.contrib.admin.models.LogEntry.get_change_message"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_change_message()</span></code></a> puisse recomposer un message traduit dans la langue actuelle de l’utilisateur. Du code personnalisé pourrait cependant introduire une simple chaîne. Il est recommandé de faire appel à la méthdoe <a class="reference internal" href="#django.contrib.admin.models.LogEntry.get_change_message" title="django.contrib.admin.models.LogEntry.get_change_message"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_change_message()</span></code></a> pour lire cette valeur au lieu d’y accéder directement.</p>
</dd></dl>

</div>
<div class="section" id="s-logentry-methods">
<span id="logentry-methods"></span><h3>Méthodes de <code class="docutils literal notranslate"><span class="pre">LogEntry</span></code><a class="headerlink" href="#logentry-methods" title="Lien permanent vers ce titre">¶</a></h3>
<dl class="method">
<dt id="django.contrib.admin.models.LogEntry.get_edited_object">
<code class="descclassname">LogEntry.</code><code class="descname">get_edited_object</code>()<a class="headerlink" href="#django.contrib.admin.models.LogEntry.get_edited_object" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Un raccourci qui renvoie l’objet référencé.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.admin.models.LogEntry.get_change_message">
<code class="descclassname">LogEntry.</code><code class="descname">get_change_message</code>()<a class="headerlink" href="#django.contrib.admin.models.LogEntry.get_change_message" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Met en forme et traduit <a class="reference internal" href="#django.contrib.admin.models.LogEntry.change_message" title="django.contrib.admin.models.LogEntry.change_message"><code class="xref py py-attr docutils literal notranslate"><span class="pre">change_message</span></code></a> dans la langue actuelle de l’utilisateur. Les messages créés avant Django 1.10 seront toujours affichés dans la langue active au moment de leur journalisation.</p>
</dd></dl>

</div>
</div>
<div class="section" id="s-reversing-admin-urls">
<span id="s-admin-reverse-urls"></span><span id="reversing-admin-urls"></span><span id="admin-reverse-urls"></span><h2>Résolution inverse des URL d’administration<a class="headerlink" href="#reversing-admin-urls" title="Lien permanent vers ce titre">¶</a></h2>
<p>Quand un <a class="reference internal" href="#django.contrib.admin.AdminSite" title="django.contrib.admin.AdminSite"><code class="xref py py-class docutils literal notranslate"><span class="pre">AdminSite</span></code></a> est déployé, les vues fournies par ce site sont accessibles à l’aide du <a class="reference internal" href="../../../topics/http/urls.html#naming-url-patterns"><span class="std std-ref">système de résolution inverse d’URL</span></a> de Django.</p>
<p><a class="reference internal" href="#django.contrib.admin.AdminSite" title="django.contrib.admin.AdminSite"><code class="xref py py-class docutils literal notranslate"><span class="pre">AdminSite</span></code></a> fournit les motifs d’URL nommés suivants&nbsp;:</p>
<table class="docutils">
<colgroup>
<col width="30%" />
<col width="29%" />
<col width="41%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Page</th>
<th class="head">Nom d’URL</th>
<th class="head">Paramètres</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Accueil</td>
<td><code class="docutils literal notranslate"><span class="pre">index</span></code></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>Connexion</td>
<td><code class="docutils literal notranslate"><span class="pre">login</span></code></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>Déconnexion</td>
<td><code class="docutils literal notranslate"><span class="pre">logout</span></code></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>Changement de mot de passe</td>
<td><code class="docutils literal notranslate"><span class="pre">password_change</span></code></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>Changement de mot de passe terminé</td>
<td><code class="docutils literal notranslate"><span class="pre">password_change_done</span></code></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>JavaScript i18n</td>
<td><code class="docutils literal notranslate"><span class="pre">jsi18n</span></code></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>Page d’accueil d’application</td>
<td><code class="docutils literal notranslate"><span class="pre">app_list</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">app_label</span></code></td>
</tr>
<tr class="row-odd"><td>Redirection vers la page d’un objet</td>
<td><code class="docutils literal notranslate"><span class="pre">view_on_site</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">content_type_id</span></code>, <code class="docutils literal notranslate"><span class="pre">object_id</span></code></td>
</tr>
</tbody>
</table>
<p>Chaque instance <a class="reference internal" href="#django.contrib.admin.ModelAdmin" title="django.contrib.admin.ModelAdmin"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelAdmin</span></code></a> fournit un ensemble supplémentaire d’URL nommées&nbsp;:</p>
<table class="docutils">
<colgroup>
<col width="27%" />
<col width="57%" />
<col width="16%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Page</th>
<th class="head">Nom d’URL</th>
<th class="head">Paramètres</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Liste pour édition</td>
<td><code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">étiquette_app</span> <span class="pre">}}_{{</span> <span class="pre">nom_modèle</span> <span class="pre">}}_changelist</span></code></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>Ajout</td>
<td><code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">étiquette_app</span> <span class="pre">}}_{{</span> <span class="pre">nom_modèle</span> <span class="pre">}}_add</span></code></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>Historique</td>
<td><code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">étiquette_app</span> <span class="pre">}}_{{</span> <span class="pre">nom_modèle</span> <span class="pre">}}_history</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">object_id</span></code></td>
</tr>
<tr class="row-odd"><td>Suppression</td>
<td><code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">étiquette_app</span> <span class="pre">}}_{{</span> <span class="pre">nom_modèle</span> <span class="pre">}}_delete</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">object_id</span></code></td>
</tr>
<tr class="row-even"><td>Modification</td>
<td><code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">étiquette_app</span> <span class="pre">}}_{{</span> <span class="pre">nom_modèle</span> <span class="pre">}}_change</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">object_id</span></code></td>
</tr>
</tbody>
</table>
<p>La classe <code class="docutils literal notranslate"><span class="pre">UserAdmin</span></code> fournit une URL nommée&nbsp;:</p>
<table class="docutils">
<colgroup>
<col width="27%" />
<col width="57%" />
<col width="16%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Page</th>
<th class="head">Nom d’URL</th>
<th class="head">Paramètres</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Changement de mot de passe</td>
<td><code class="docutils literal notranslate"><span class="pre">auth_user_password_change</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">user_id</span></code></td>
</tr>
</tbody>
</table>
<p>Ces URL nommées sont inscrites auprès de l’espace de noms d’application <code class="docutils literal notranslate"><span class="pre">admin</span></code>, et à l’espace de noms d’instance correspondant au nom de l’instance Site.</p>
<p>Donc, si vous voulez obtenir une référence à la vue d’édition pour un objet <code class="docutils literal notranslate"><span class="pre">Choice</span></code> particulier (de l’application de sondages) dans l’administration par défaut, il faudrait écrire&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">django.urls</span> <span class="k">import</span> <span class="n">reverse</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Choice</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">change_url</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;admin:polls_choice_change&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="p">,))</span>
</pre></div>
</div>
<p>La première instance inscrite de l’application d’administration (quel que soit le nom de l’instance) sera identifiée et utilisée pour résoudre la vue d’édition des instances <code class="docutils literal notranslate"><span class="pre">poll.Choice</span></code> pour cette instance.</p>
<p>Si vous cherchez une URL dans une instance d’administration spécifique, fournissez le nom de cette instance comme indication <code class="docutils literal notranslate"><span class="pre">current_app</span></code> dans l’appel à <code class="docutils literal notranslate"><span class="pre">reverse</span></code>. Par exemple, si vous vouliez spécifiquement obtenir la vue d’administration de l’instance d’administration nommée <code class="docutils literal notranslate"><span class="pre">custom</span></code>, il faudrait écrire&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">change_url</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;admin:polls_choice_change&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="p">,),</span> <span class="n">current_app</span><span class="o">=</span><span class="s1">&#39;custom&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Pour plus de détails, consultez la documentation sur la <a class="reference internal" href="../../../topics/http/urls.html#topics-http-reversing-url-namespaces"><span class="std std-ref">résolution inverse des URL avec espaces de noms</span></a>.</p>
<p>Pour permettre une résolution inverse plus facile des URL d’administration dans les gabarits, Django fournit un filtre <code class="docutils literal notranslate"><span class="pre">admin_urlname</span></code> qui accepte une action comme paramètre&nbsp;:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">load</span> <span class="nv">admin_urls</span> <span class="cp">%}</span>
<span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{%</span> <span class="k">url</span> <span class="nv">opts</span><span class="o">|</span><span class="nf">admin_urlname</span><span class="s1">:&#39;add&#39;</span> <span class="cp">%}</span><span class="s">&quot;</span><span class="p">&gt;</span>Add user<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{%</span> <span class="k">url</span> <span class="nv">opts</span><span class="o">|</span><span class="nf">admin_urlname</span><span class="s1">:&#39;delete&#39;</span> <span class="nv">user.pk</span> <span class="cp">%}</span><span class="s">&quot;</span><span class="p">&gt;</span>Delete this user<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>L’action dans les exemples ci-dessus correspond à la dernière partie des noms d’URL pour les instances <a class="reference internal" href="#django.contrib.admin.ModelAdmin" title="django.contrib.admin.ModelAdmin"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelAdmin</span></code></a> décrites ci-dessus. La variable <code class="docutils literal notranslate"><span class="pre">opts</span></code> peut être n’importe quel objet possédant les attributs <code class="docutils literal notranslate"><span class="pre">app_label</span></code> et <code class="docutils literal notranslate"><span class="pre">model_name</span></code> et est généralement fournie par les vues d’administration du modèle courant.</p>
</div>
<div class="section" id="s-the-staff-member-required-decorator">
<span id="the-staff-member-required-decorator"></span><h2>Le décorateur <code class="docutils literal notranslate"><span class="pre">staff_member_required</span></code><a class="headerlink" href="#the-staff-member-required-decorator" title="Lien permanent vers ce titre">¶</a></h2>
<dl class="function">
<dt id="django.contrib.admin.views.decorators.staff_member_required">
<code class="descname">staff_member_required</code>(<em>redirect_field_name='next'</em>, <em>login_url='admin:login'</em>)<a class="headerlink" href="#django.contrib.admin.views.decorators.staff_member_required" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Ce décorateur est utilisé pour les vues d’administration qui requièrent une autorisation. Une vue décorée par cette fonction aura le comportement suivant&nbsp;:</p>
<ul class="simple">
<li>Si l’utilisateur est connecté, est un membre autorisé (<code class="docutils literal notranslate"><span class="pre">User.is_staff=True</span></code>) et actif (<code class="docutils literal notranslate"><span class="pre">User.is_active=True</span></code>), la vue s’exécute normalement.</li>
<li>Sinon, la requête est redirigée vers l’URL spécifiée par le paramètre <code class="docutils literal notranslate"><span class="pre">login_url</span></code>, avec le chemin initialement demandé dans une variable de chaîne de requête nommée selon <code class="docutils literal notranslate"><span class="pre">redirect_field_name</span></code>. Par exemple&nbsp;: <code class="docutils literal notranslate"><span class="pre">/admin/login/?next=/admin/polls/question/3/</span></code>.</li>
</ul>
<p>Exemple d’utilisation&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib.admin.views.decorators</span> <span class="k">import</span> <span class="n">staff_member_required</span>

<span class="nd">@staff_member_required</span>
<span class="k">def</span> <span class="nf">my_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../../contents.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Le site d’administration de Django</a><ul>
<li><a class="reference internal" href="#overview">Aperçu</a><ul>
<li><a class="reference internal" href="#other-topics">Autres sujets</a></li>
</ul>
</li>
<li><a class="reference internal" href="#modeladmin-objects">Objets <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code></a><ul>
<li><a class="reference internal" href="#the-register-decorator">Le décorateur <code class="docutils literal notranslate"><span class="pre">register</span></code></a></li>
<li><a class="reference internal" href="#discovery-of-admin-files">Découvert des fichiers d’administration</a></li>
<li><a class="reference internal" href="#modeladmin-options">Options de <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code></a><ul>
<li><a class="reference internal" href="#custom-template-options">Options de gabarit personnalisées</a></li>
</ul>
</li>
<li><a class="reference internal" href="#modeladmin-methods">Méthodes de <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code></a><ul>
<li><a class="reference internal" href="#other-methods">Autres méthodes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#modeladmin-asset-definitions">Définitions des fichiers annexes de <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code></a><ul>
<li><a class="reference internal" href="#jquery">jQuery</a></li>
</ul>
</li>
<li><a class="reference internal" href="#adding-custom-validation-to-the-admin">Ajout de validation personnalisée à l’administration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#inlinemodeladmin-objects">Objets <code class="docutils literal notranslate"><span class="pre">InlineModelAdmin</span></code></a><ul>
<li><a class="reference internal" href="#inlinemodeladmin-options">Options de <code class="docutils literal notranslate"><span class="pre">InlineModelAdmin</span></code></a></li>
<li><a class="reference internal" href="#working-with-a-model-with-two-or-more-foreign-keys-to-the-same-parent-model">Modèle possédant deux ou plusieurs clés étrangères vers le même modèle parent</a></li>
<li><a class="reference internal" href="#working-with-many-to-many-models">Modèles avec relations plusieurs-à-plusieurs</a></li>
<li><a class="reference internal" href="#working-with-many-to-many-intermediary-models">Modèles intermédiaires des relations plusieurs-à-plusieurs</a></li>
<li><a class="reference internal" href="#using-generic-relations-as-an-inline">Utilisation de relations génériques comme sous-formulaires</a></li>
</ul>
</li>
<li><a class="reference internal" href="#overriding-admin-templates">Redéfinition des gabarits d’administration</a><ul>
<li><a class="reference internal" href="#set-up-your-projects-admin-template-directories">Configuration des répertoires de gabarits d’administration pour un projet</a></li>
<li><a class="reference internal" href="#overriding-vs-replacing-an-admin-template">Redéfinition vs remplacement d’un gabarit d’administration</a></li>
<li><a class="reference internal" href="#templates-which-may-be-overridden-per-app-or-model">Gabarits pouvant être redéfinis par application ou par modèle</a></li>
<li><a class="reference internal" href="#root-and-login-templates">Gabarits racine et de connexion</a></li>
</ul>
</li>
<li><a class="reference internal" href="#adminsite-objects">Objets <code class="docutils literal notranslate"><span class="pre">AdminSite</span></code></a><ul>
<li><a class="reference internal" href="#adminsite-attributes">Attributs de <code class="docutils literal notranslate"><span class="pre">AdminSite</span></code></a></li>
<li><a class="reference internal" href="#adminsite-methods">Méthodes de <code class="docutils literal notranslate"><span class="pre">AdminSite</span></code></a></li>
<li><a class="reference internal" href="#hooking-adminsite-instances-into-your-urlconf">Raccordement des instances <code class="docutils literal notranslate"><span class="pre">AdminSite</span></code> dans la configuration d’URL</a></li>
<li><a class="reference internal" href="#customizing-the-adminsite-class">Personnalisation de la classe <code class="docutils literal notranslate"><span class="pre">AdminSite</span></code></a></li>
<li><a class="reference internal" href="#overriding-the-default-admin-site">Surcharge du site d’administration par défaut</a></li>
<li><a class="reference internal" href="#multiple-admin-sites-in-the-same-urlconf">Plusieurs sites d’administration dans la même configuration d’URL</a></li>
<li><a class="reference internal" href="#adding-views-to-admin-sites">Ajout de vues à des sites d’administration</a></li>
<li><a class="reference internal" href="#adding-a-password-reset-feature">Ajout d’une fonctionnalité de réinitialisation du mot de passe</a></li>
</ul>
</li>
<li><a class="reference internal" href="#logentry-objects">Objets <code class="docutils literal notranslate"><span class="pre">LogEntry</span></code> (journalisation)</a><ul>
<li><a class="reference internal" href="#logentry-attributes">Attributs de <code class="docutils literal notranslate"><span class="pre">LogEntry</span></code></a></li>
<li><a class="reference internal" href="#logentry-methods">Méthodes de <code class="docutils literal notranslate"><span class="pre">LogEntry</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#reversing-admin-urls">Résolution inverse des URL d’administration</a></li>
<li><a class="reference internal" href="#the-staff-member-required-decorator">Le décorateur <code class="docutils literal notranslate"><span class="pre">staff_member_required</span></code></a></li>
</ul>
</li>
</ul>

  <h4>Sujet précédent</h4>
  <p class="topless"><a href="../index.html"
                        title="Chapitre précédent">Paquets <code class="docutils literal notranslate"><span class="pre">contrib</span></code></a></p>
  <h4>Sujet suivant</h4>
  <p class="topless"><a href="actions.html"
                        title="Chapitre suivant">Actions d’administration</a></p>
  <div role="note" aria-label="source link">
    <h3>Cette page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/ref/contrib/admin/index.txt"
            rel="nofollow">Montrer le code source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Recherche rapide</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
              <h3>Last update:</h3>
              <p class="topless">oct. 29, 2020</p>
          </div>
        
      
    </div>

    <div id="ft">
      <div class="nav">
    &laquo; <a href="../index.html" title="Paquets &lt;code class=&#34;docutils literal notranslate&#34;&gt;&lt;span class=&#34;pre&#34;&gt;contrib&lt;/span&gt;&lt;/code&gt;">previous</a>
     |
    <a href="../../index.html" title="Référence de l’API" accesskey="U">up</a>
   |
    <a href="actions.html" title="Actions d’administration">next</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>