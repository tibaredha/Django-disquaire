
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Installation des bibliothèques géospatiales &#8212; Documentation Django 3.1.3.dev</title>
    <link rel="stylesheet" href="../../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../../../_static/translations.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Recherche" href="../../../../search.html" />
    <link rel="next" title="Installation de PostGIS" href="postgis.html" />
    <link rel="prev" title="Installation de GeoDjango" href="index.html" />



 
<script src="../../../../templatebuiltins.js"></script>
<script>
(function($) {
    if (!django_template_builtins) {
       // templatebuiltins.js missing, do nothing.
       return;
    }
    $(document).ready(function() {
        // Hyperlink Django template tags and filters
        var base = "../../../templates/builtins.html";
        if (base == "#") {
            // Special case for builtins.html itself
            base = "";
        }
        // Tags are keywords, class '.k'
        $("div.highlight\\-html\\+django span.k").each(function(i, elem) {
             var tagname = $(elem).text();
             if ($.inArray(tagname, django_template_builtins.ttags) != -1) {
                 var fragment = tagname.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + tagname + "</a>");
             }
        });
        // Filters are functions, class '.nf'
        $("div.highlight\\-html\\+django span.nf").each(function(i, elem) {
             var filtername = $(elem).text();
             if ($.inArray(filtername, django_template_builtins.tfilters) != -1) {
                 var fragment = filtername.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + filtername + "</a>");
             }
        });
    });
})(jQuery);</script>

  </head><body>

    <div class="document">
  <div id="custom-doc" class="yui-t6">
    <div id="hd">
      <h1><a href="../../../../index.html">Documentation Django 3.1.3.dev</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../../../../index.html">Home</a>  |
        <a title="Table of contents" href="../../../../contents.html">Table of contents</a>  |
        <a title="Global index" href="../../../../genindex.html">Index</a>  |
        <a title="Module index" href="../../../../py-modindex.html">Modules</a>
      </div>
      <div class="nav">
    &laquo; <a href="index.html" title="Installation de GeoDjango">previous</a>
     |
    <a href="../../../index.html" title="Référence de l’API" accesskey="U">up</a>
   |
    <a href="postgis.html" title="Installation de PostGIS">next</a> &raquo;</div>
    </div>

    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="ref-contrib-gis-install-geolibs">
            
  <div class="section" id="s-installing-geospatial-libraries">
<span id="installing-geospatial-libraries"></span><h1>Installation des bibliothèques géospatiales<a class="headerlink" href="#installing-geospatial-libraries" title="Lien permanent vers ce titre">¶</a></h1>
<p>GeoDjango utilise et fournit des interfaces pour les bibliothèques géospatiales libres suivantes&nbsp;:</p>
<table class="docutils">
<colgroup>
<col width="19%" />
<col width="28%" />
<col width="25%" />
<col width="28%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Programme</th>
<th class="head">Description</th>
<th class="head">Requis</th>
<th class="head">Versions prises en charge</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="../geos.html"><span class="doc">GEOS</span></a></td>
<td>Geometry Engine Open Source</td>
<td>Oui</td>
<td>3.8, 3.7, 3.6, 3.5</td>
</tr>
<tr class="row-odd"><td><a class="reference external" href="https://github.com/OSGeo/proj.4/wiki/">PROJ.4</a></td>
<td>Bibliothèque de projections cartographiques</td>
<td>Oui (uniquement PostgreSQL et SQLite)</td>
<td>6.3, 6.2, 6.1, 6.0, 5.x, 4.x</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../gdal.html"><span class="doc">GDAL</span></a></td>
<td>Bibliothèque</td>
<td>Oui</td>
<td>3.1, 3.0, 2.4, 2.3, 2.2, 2.1, 2.0</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../geoip2.html"><span class="doc">GeoIP</span></a></td>
<td>Bibliothèque de géolocalisation basée sur IP</td>
<td>Non</td>
<td>2</td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://postgis.net/">PostGIS</a></td>
<td>Extensions spatiales pour PostgreSQL</td>
<td>Oui (uniquement PostgreSQL)</td>
<td>3.0, 2.5, 2.4, 2.3, 2.2</td>
</tr>
<tr class="row-odd"><td><a class="reference external" href="https://www.gaia-gis.it/gaia-sins/">SpatiaLite</a></td>
<td>Extensions spatiales pour SQLite</td>
<td>Oui (uniquement SQLite)</td>
<td>4.3</td>
</tr>
</tbody>
</table>
<p>Notez que des versions plus anciennes ou plus récentes de ces bibliothèques <em>peuvent</em> aussi très bien fonctionner avec GeoDjango. À vous de voir.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Les interfaces GeoDjango vers GEOS, GDAL et GeoIP peuvent être utilisées indépendamment de Django. Autrement dit, il n’est pas nécessaire d’avoir une base de données ou un fichier de réglages, importez-les comme un module normal à partir de <a class="reference internal" href="../index.html#module-django.contrib.gis" title="django.contrib.gis: Geographic Information System (GIS) extensions for Django"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.gis</span></code></a>.</p>
</div>
<p>Sur Debian/Ubuntu, il est conseillé d’installer les paquets suivants qui installeront, directement ou par l’intermédiaire de dépendances, les bibliothèques géospatiales nécessaires&nbsp;:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> sudo apt-get install binutils libproj-dev gdal-bin
</pre></div>
</div>
<p>Veuillez également consulter les instructions spécifiques si vous utilisez <a class="reference internal" href="index.html#macos"><span class="std std-ref">macOS</span></a> ou <a class="reference internal" href="index.html#windows"><span class="std std-ref">Windows</span></a>.</p>
<div class="section" id="s-building-from-source">
<span id="s-build-from-source"></span><span id="building-from-source"></span><span id="build-from-source"></span><h2>Compilation à partir des sources<a class="headerlink" href="#building-from-source" title="Lien permanent vers ce titre">¶</a></h2>
<p>Lors de l’installation à partir des sources sur les systèmes UNIX et GNU/Linux, suivez consciencieusement les instructions d’installation et installer les bibliothèques dans l’ordre indiqué. Si vous utilisez MySQL ou Oracle comme base de données spatiale, seul GEOS est nécessaire.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Sur les plates-formes Linux, il peut être nécessaire de lancer la commande <code class="docutils literal notranslate"><span class="pre">ldconfig</span></code> après l’installation de chaque bibliothèque. Par exemple&nbsp;:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo make install
$ sudo ldconfig
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Les utilisateurs macOS doivent installer <a class="reference external" href="https://developer.apple.com/xcode/">Xcode</a> afin de pouvoir compiler du code à partir des sources.</p>
</div>
<div class="section" id="s-geos">
<span id="s-geosbuild"></span><span id="geos"></span><span id="geosbuild"></span><h3>GEOS<a class="headerlink" href="#geos" title="Lien permanent vers ce titre">¶</a></h3>
<p>GEOS est une bibliothèque C++ destinée aux opérations géométriques et constitue la représentation géométrique interne par défaut que GeoDjango utilise (derrière les objets géométriques «&nbsp;différés&nbsp;»). Spécifiquement, l’API de la bibliothèque C (par ex. <code class="docutils literal notranslate"><span class="pre">libgeos_c.so</span></code>) est appelée directement depuis Python à l’aide de ctypes.</p>
<p>Premièrement, téléchargez GEOS à partir du site Web GEOS et décompressez l’archive des sources&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ wget https://download.osgeo.org/geos/geos-X.Y.Z.tar.bz2
$ tar xjf geos-X.Y.Z.tar.bz2
</pre></div>
</div>
<p>Puis, placez-vous dans le répertoire où GEOS a été décompressé et lancez le script «&nbsp;configure&nbsp;», compilez et installez&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd geos-X.Y.Z
$ ./configure
$ make
$ sudo make install
$ cd ..
</pre></div>
</div>
<div class="section" id="s-troubleshooting">
<span id="troubleshooting"></span><h4>Dépannage<a class="headerlink" href="#troubleshooting" title="Lien permanent vers ce titre">¶</a></h4>
<div class="section" id="s-can-t-find-geos-library">
<span id="can-t-find-geos-library"></span><h5>Impossible de trouver la bibliothèque GEOS<a class="headerlink" href="#can-t-find-geos-library" title="Lien permanent vers ce titre">¶</a></h5>
<p>Lorsque GeoDjango ne peut pas trouver GEOS, cette erreur apparaît&nbsp;:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ImportError: Could not find the GEOS library (tried &quot;geos_c&quot;). Try setting GEOS_LIBRARY_PATH in your settings.
</pre></div>
</div>
<p>La solution la plus courante est de configurer correctement <a class="reference internal" href="index.html#libsettings"><span class="std std-ref">Réglages d’environnement de bibliothèques</span></a> <em>ou</em> de définir <a class="reference internal" href="#geoslibrarypath"><span class="std std-ref">GEOS_LIBRARY_PATH</span></a> dans vos réglages.</p>
<p>Si vous utilisez un paquet binaire de GEOS (par ex. sur Ubuntu), il peut être utile de <a class="reference internal" href="index.html#binutils"><span class="std std-ref">Installation de binutils</span></a>.</p>
</div>
<div class="section" id="s-geos-library-path">
<span id="s-geoslibrarypath"></span><span id="geos-library-path"></span><span id="geoslibrarypath"></span><h5><code class="docutils literal notranslate"><span class="pre">GEOS_LIBRARY_PATH</span></code><a class="headerlink" href="#geos-library-path" title="Lien permanent vers ce titre">¶</a></h5>
<p>Si votre bibliothèque GEOS se trouve à un emplacement non standard ou que vous ne souhaitez pas modifier le chemin des bibliothèques système, il est possible d’ajouter le réglage <a class="reference internal" href="../geos.html#std:setting-GEOS_LIBRARY_PATH"><code class="xref std std-setting docutils literal notranslate"><span class="pre">GEOS_LIBRARY_PATH</span></code></a> dans votre fichier de réglages Django et d’y indiquer le chemin complet vers la bibliothèque GEOS en C. Par exemple&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GEOS_LIBRARY_PATH</span> <span class="o">=</span> <span class="s1">&#39;/home/bob/local/lib/libgeos_c.so&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Le réglage doit contenir le chemin <em>complet</em> vers la bibliothèque partagée en <strong>C</strong>&nbsp;; en d’autres termes, il faut indiquer <code class="docutils literal notranslate"><span class="pre">libgeos_c.so</span></code>, et non pas <code class="docutils literal notranslate"><span class="pre">libgeos.so</span></code>.</p>
</div>
<p>Voir aussi <a class="reference internal" href="../geos.html#geos-exceptions-in-logfile"><span class="std std-ref">Mes fichiers journaux sont remplis d’erreurs liées à GEOS</span></a>.</p>
</div>
</div>
</div>
<div class="section" id="s-proj4">
<span id="s-id3"></span><span id="proj4"></span><span id="id3"></span><h3>PROJ.4<a class="headerlink" href="#proj4" title="Lien permanent vers ce titre">¶</a></h3>
<p><a class="reference external" href="https://github.com/OSGeo/proj.4/wiki/">PROJ.4</a> est une bibliothèque de conversion de données géospatiales vers différents systèmes de référence de coordonnées.</p>
<p>Premièrement, téléchargez le code source de PROJ.4 et les fichiers de données associés («&nbsp;datum shifting files&nbsp;») <a class="footnote-reference" href="#id9" id="id4">[1]</a>&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ wget https://download.osgeo.org/proj/proj-X.Y.Z.tar.gz
$ wget https://download.osgeo.org/proj/proj-datumgrid-X.Y.tar.gz
</pre></div>
</div>
<p>Ensuite, décompressez l’archive du code source et extrayez les fichiers de données complémentaires dans le sous-répertoire <code class="docutils literal notranslate"><span class="pre">nad</span></code>. Cela doit être fait <em>avant</em> la configuration&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ tar xzf proj-X.Y.Z.tar.gz
$ cd proj-X.Y.Z/nad
$ tar xzf ../../proj-datumgrid-X.Y.tar.gz
$ cd ..
</pre></div>
</div>
<p>Pour terminer, lancez «&nbsp;configure&nbsp;» et «&nbsp;make&nbsp;» et installez PROJ.4&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ./configure
$ make
$ sudo make install
$ cd ..
</pre></div>
</div>
</div>
<div class="section" id="s-gdal">
<span id="s-gdalbuild"></span><span id="gdal"></span><span id="gdalbuild"></span><h3>GDAL<a class="headerlink" href="#gdal" title="Lien permanent vers ce titre">¶</a></h3>
<p><a class="reference external" href="https://trac.osgeo.org/gdal/">GDAL</a> est une excellente bibliothèque géospatiale libre capable de lire la plupart des formats de données spatiales vectoriels et matriciels. Actuellement, GeoDjango ne prend en charge que les fonctionnalités des <a class="reference internal" href="../gdal.html"><span class="doc">données vectorielles de GDAL</span></a> <a class="footnote-reference" href="#id10" id="id5">[2]</a>. <a class="reference internal" href="#geosbuild"><span class="std std-ref">GEOS</span></a> et <a class="reference internal" href="#proj4"><span class="std std-ref">PROJ.4</span></a> devraient être installés avant de compiler GDAL.</p>
<p>Téléchargez d’abord la dernière version publiée de GDAL et décompressez l’archive&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ wget https://download.osgeo.org/gdal/X.Y.Z/gdal-X.Y.Z.tar.gz
$ tar xzf gdal-X.Y.Z.tar.gz
$ cd gdal-X.Y.Z
</pre></div>
</div>
<p>Lancez les opérations «&nbsp;configure&nbsp;», «&nbsp;make&nbsp;» et «&nbsp;install&nbsp;»&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ./configure
$ make # Go get some coffee, this takes a while.
$ sudo make install
$ cd ..
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Comme GeoDjango possède ses propres interfaces Python, les instructions précédentes ne compilent pas les liaisons Python propres à GDAL. Les liaisons peuvent être compilées en ajoutant l’option <code class="docutils literal notranslate"><span class="pre">--with-python</span></code> lors du lancement de <code class="docutils literal notranslate"><span class="pre">configure</span></code>. Voir <a class="reference external" href="https://trac.osgeo.org/gdal/wiki/GdalOgrInPython">GDAL/OGR dans Python</a> pour plus d’informations sur les liaisons de GDAL.</p>
</div>
<p>Si vous rencontrez un problème, consultez la section dépannage ci-dessous pour y trouver des suggestions et des solutions.</p>
<div class="section" id="s-gdaltrouble">
<span id="s-id8"></span><span id="gdaltrouble"></span><span id="id8"></span><h4>Dépannage<a class="headerlink" href="#gdaltrouble" title="Lien permanent vers ce titre">¶</a></h4>
<div class="section" id="s-can-t-find-gdal-library">
<span id="can-t-find-gdal-library"></span><h5>Impossible de trouver la bibliothèque GDAL<a class="headerlink" href="#can-t-find-gdal-library" title="Lien permanent vers ce titre">¶</a></h5>
<p>Lorsque GeoDjango ne peut pas trouver la bibliothèque GDAL, configurez vos <a class="reference internal" href="index.html#libsettings"><span class="std std-ref">Réglages d’environnement de bibliothèques</span></a> <em>ou</em> définissez <a class="reference internal" href="#gdallibrarypath"><span class="std std-ref">GDAL_LIBRARY_PATH</span></a> dans vos réglages.</p>
</div>
<div class="section" id="s-gdal-library-path">
<span id="s-gdallibrarypath"></span><span id="gdal-library-path"></span><span id="gdallibrarypath"></span><h5><code class="docutils literal notranslate"><span class="pre">GDAL_LIBRARY_PATH</span></code><a class="headerlink" href="#gdal-library-path" title="Lien permanent vers ce titre">¶</a></h5>
<p>Si votre bibliothèque GDAL se trouve à un emplacement non standard ou que vous ne souhaitez pas modifier le chemin des bibliothèques système, il est possible d’ajouter le réglage <a class="reference internal" href="../gdal.html#std:setting-GDAL_LIBRARY_PATH"><code class="xref std std-setting docutils literal notranslate"><span class="pre">GDAL_LIBRARY_PATH</span></code></a> dans votre fichier de réglages Django et d’y indiquer le chemin complet vers la bibliothèque GDAL. Par exemple&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GDAL_LIBRARY_PATH</span> <span class="o">=</span> <span class="s1">&#39;/home/sue/local/lib/libgdal.so&#39;</span>
</pre></div>
</div>
<p class="rubric">Notes de bas de page</p>
<table class="docutils footnote" frame="void" id="id9" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id4">[1]</a></td><td>Les fichiers «&nbsp;datum shifting&nbsp;» sont nécessaires pour convertir les données dans et à partir de certaines projections. Par exemple, la chaîne PROJ.4 de la <a class="reference external" href="https://spatialreference.org/ref/sr-org/6864/prj/">projection Google (900913 or 3857)</a> nécessite la fichier de grille <code class="docutils literal notranslate"><span class="pre">null</span></code> qui ne se trouve que dans les fichiers « datum shifting ». Il est plus simple d’installer de suite ces fichiers plutôt que de devoir dépanner un problème causé par leur absence plus tard.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id10" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id5">[2]</a></td><td>Spécifiquement, GeoDjango fournit la prise en charge de la bibliothèque <a class="reference external" href="https://gdal.org/user/vector_data_model.html">OGR</a>, un composant de GDAL.</td></tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../../../contents.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Installation des bibliothèques géospatiales</a><ul>
<li><a class="reference internal" href="#building-from-source">Compilation à partir des sources</a><ul>
<li><a class="reference internal" href="#geos">GEOS</a><ul>
<li><a class="reference internal" href="#troubleshooting">Dépannage</a><ul>
<li><a class="reference internal" href="#can-t-find-geos-library">Impossible de trouver la bibliothèque GEOS</a></li>
<li><a class="reference internal" href="#geos-library-path"><code class="docutils literal notranslate"><span class="pre">GEOS_LIBRARY_PATH</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#proj4">PROJ.4</a></li>
<li><a class="reference internal" href="#gdal">GDAL</a><ul>
<li><a class="reference internal" href="#gdaltrouble">Dépannage</a><ul>
<li><a class="reference internal" href="#can-t-find-gdal-library">Impossible de trouver la bibliothèque GDAL</a></li>
<li><a class="reference internal" href="#gdal-library-path"><code class="docutils literal notranslate"><span class="pre">GDAL_LIBRARY_PATH</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Sujet précédent</h4>
  <p class="topless"><a href="index.html"
                        title="Chapitre précédent">Installation de GeoDjango</a></p>
  <h4>Sujet suivant</h4>
  <p class="topless"><a href="postgis.html"
                        title="Chapitre suivant">Installation de PostGIS</a></p>
  <div role="note" aria-label="source link">
    <h3>Cette page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../../_sources/ref/contrib/gis/install/geolibs.txt"
            rel="nofollow">Montrer le code source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Recherche rapide</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
              <h3>Last update:</h3>
              <p class="topless">oct. 29, 2020</p>
          </div>
        
      
    </div>

    <div id="ft">
      <div class="nav">
    &laquo; <a href="index.html" title="Installation de GeoDjango">previous</a>
     |
    <a href="../../../index.html" title="Référence de l’API" accesskey="U">up</a>
   |
    <a href="postgis.html" title="Installation de PostGIS">next</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>