
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Installation de GeoDjango &#8212; Documentation Django 3.1.3.dev</title>
    <link rel="stylesheet" href="../../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../../../_static/translations.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Recherche" href="../../../../search.html" />
    <link rel="next" title="Installation des bibliothèques géospatiales" href="geolibs.html" />
    <link rel="prev" title="Tutoriel GeoDjango" href="../tutorial.html" />



 
<script src="../../../../templatebuiltins.js"></script>
<script>
(function($) {
    if (!django_template_builtins) {
       // templatebuiltins.js missing, do nothing.
       return;
    }
    $(document).ready(function() {
        // Hyperlink Django template tags and filters
        var base = "../../../templates/builtins.html";
        if (base == "#") {
            // Special case for builtins.html itself
            base = "";
        }
        // Tags are keywords, class '.k'
        $("div.highlight\\-html\\+django span.k").each(function(i, elem) {
             var tagname = $(elem).text();
             if ($.inArray(tagname, django_template_builtins.ttags) != -1) {
                 var fragment = tagname.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + tagname + "</a>");
             }
        });
        // Filters are functions, class '.nf'
        $("div.highlight\\-html\\+django span.nf").each(function(i, elem) {
             var filtername = $(elem).text();
             if ($.inArray(filtername, django_template_builtins.tfilters) != -1) {
                 var fragment = filtername.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + filtername + "</a>");
             }
        });
    });
})(jQuery);</script>

  </head><body>

    <div class="document">
  <div id="custom-doc" class="yui-t6">
    <div id="hd">
      <h1><a href="../../../../index.html">Documentation Django 3.1.3.dev</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../../../../index.html">Home</a>  |
        <a title="Table of contents" href="../../../../contents.html">Table of contents</a>  |
        <a title="Global index" href="../../../../genindex.html">Index</a>  |
        <a title="Module index" href="../../../../py-modindex.html">Modules</a>
      </div>
      <div class="nav">
    &laquo; <a href="../tutorial.html" title="Tutoriel GeoDjango">previous</a>
     |
    <a href="../../../index.html" title="Référence de l’API" accesskey="U">up</a>
   |
    <a href="geolibs.html" title="Installation des bibliothèques géospatiales">next</a> &raquo;</div>
    </div>

    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="ref-contrib-gis-install-index">
            
  <div class="section" id="s-geodjango-installation">
<span id="geodjango-installation"></span><h1>Installation de GeoDjango<a class="headerlink" href="#geodjango-installation" title="Lien permanent vers ce titre">¶</a></h1>
<div class="section" id="s-overview">
<span id="overview"></span><h2>Aperçu<a class="headerlink" href="#overview" title="Lien permanent vers ce titre">¶</a></h2>
<p>En général, l’installation de GeoDjango requiert&nbsp;:</p>
<ol class="arabic simple">
<li><a class="reference internal" href="#django"><span class="std std-ref">Python et Django</span></a></li>
<li><a class="reference internal" href="#spatial-database"><span class="std std-ref">Base de données spatiale</span></a></li>
<li><a class="reference internal" href="geolibs.html"><span class="doc">Installation des bibliothèques géospatiales</span></a></li>
</ol>
<p>Des détails au sujet de chaque exigence et des instructions d’installation sont fournies dans les sections ci-dessous. De plus, des instructions spécifiques à des plates-formes particulières sont disponibles pour&nbsp;:</p>
<ul class="simple">
<li><a class="reference internal" href="#macos"><span class="std std-ref">macOS</span></a></li>
<li><a class="reference internal" href="#windows"><span class="std std-ref">Windows</span></a></li>
</ul>
<div class="admonition-use-the-source admonition">
<p class="first admonition-title">Utilisation du code source</p>
<p class="last">Comme GeoDjango tire profit des derniers développements de la technologie logicielle géospatiale libre, des versions récentes des bibliothèques sont nécessaires. Si des paquets binaires ne sont pas disponibles sur votre plate-forme, il peut être nécessaire d’installer à partir des sources. Lors de la compilation des bibliothèques à partir des sources, suivez attentivement les consignes, particulièrement si vous êtes débutant.</p>
</div>
</div>
<div class="section" id="s-requirements">
<span id="requirements"></span><h2>Exigences<a class="headerlink" href="#requirements" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="s-python-and-django">
<span id="s-django"></span><span id="python-and-django"></span><span id="django"></span><h3>Python et Django<a class="headerlink" href="#python-and-django" title="Lien permanent vers ce titre">¶</a></h3>
<p>Comme GeoDjango est inclus dans Django, référez-vous aux <a class="reference internal" href="../../../../topics/install.html#installing-official-release"><span class="std std-ref">instructions d’installation</span></a> de Django pour des détails sur l’installation.</p>
</div>
<div class="section" id="s-spatial-database">
<span id="s-id1"></span><span id="spatial-database"></span><span id="id1"></span><h3>Base de données spatiale<a class="headerlink" href="#spatial-database" title="Lien permanent vers ce titre">¶</a></h3>
<p>PostgreSQL (avec PostGIS), MySQL (essentiellement avec le moteur MyISAM), Oracle et SQLite (avec SpatiaLite) sont les bases de données spatiales actuellement prises en charge.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">PostGIS est recommandé, car c’est la base de données spatiale libre la plus mature et riche en fonctionnalités.</p>
</div>
<p>Les bibliothèques géospatiales requises pour une installation de GeoDjango dépendent de la base de données spatiale utilisée. Le tableau ci-après présente les bibliothèques requises, les versions prises en charge et d’éventuelles notes pour les différents moteurs de base de données&nbsp;:</p>
<table class="docutils">
<colgroup>
<col width="15%" />
<col width="24%" />
<col width="15%" />
<col width="46%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Base de données</th>
<th class="head">Bibliothèques requises</th>
<th class="head">Versions prises en charge</th>
<th class="head">Notes</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PostgreSQL</td>
<td>GEOS, GDAL, PROJ.4, PostGIS</td>
<td>9.5+</td>
<td>Exige PostGIS.</td>
</tr>
<tr class="row-odd"><td>MySQL</td>
<td>GEOS, GDAL</td>
<td>5.6.1+</td>
<td><a class="reference internal" href="../db-api.html#mysql-spatial-limitations"><span class="std std-ref">Fonctionnalités limitées</span></a>.</td>
</tr>
<tr class="row-even"><td>Oracle</td>
<td>GEOS, GDAL</td>
<td>12.2+</td>
<td>XE non pris en charge.</td>
</tr>
<tr class="row-odd"><td>SQLite</td>
<td>GEOS, GDAL, PROJ.4, SpatiaLite</td>
<td>3.8.3+</td>
<td>Nécessite SpatiaLite 4.3+</td>
</tr>
</tbody>
</table>
<p>Voir aussi cette <a class="reference external" href="https://trac.osgeo.org/postgis/wiki/UsersWikiPostgreSQLPostGIS">matrice comparative</a> sur le Wiki OSGeo pour des combinaisons possibles entre PostgreSQL/PostGIS/GEOS/GDAL.</p>
</div>
</div>
<div class="section" id="s-installation">
<span id="installation"></span><h2>Installation<a class="headerlink" href="#installation" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="s-geospatial-libraries">
<span id="geospatial-libraries"></span><h3>Bibliothèques géospatiales<a class="headerlink" href="#geospatial-libraries" title="Lien permanent vers ce titre">¶</a></h3>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="geolibs.html">Installation des bibliothèques géospatiales</a></li>
</ul>
</div>
</div>
<div class="section" id="s-database-installation">
<span id="database-installation"></span><h3>Installation de la base de données<a class="headerlink" href="#database-installation" title="Lien permanent vers ce titre">¶</a></h3>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="postgis.html">Installation de PostGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="spatialite.html">Installation de SpatiaLite</a></li>
</ul>
</div>
</div>
<div class="section" id="s-databases-configuration">
<span id="databases-configuration"></span><h3>Configuration de <a class="reference internal" href="../../../settings.html#std:setting-DATABASES"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DATABASES</span></code></a><a class="headerlink" href="#databases-configuration" title="Lien permanent vers ce titre">¶</a></h3>
<p>Définissez le réglage <a class="reference internal" href="../../../settings.html#std:setting-DATABASE-ENGINE"><code class="xref std std-setting docutils literal notranslate"><span class="pre">ENGINE</span></code></a> à l’un des <a class="reference internal" href="../db-api.html#spatial-backends"><span class="std std-ref">moteurs spatiaux</span></a>.</p>
</div>
<div class="section" id="s-add-django-contrib-gis-to-installed-apps">
<span id="add-django-contrib-gis-to-installed-apps"></span><h3>Ajout de <code class="docutils literal notranslate"><span class="pre">django.contrib.gis</span></code> à <a class="reference internal" href="../../../settings.html#std:setting-INSTALLED_APPS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">INSTALLED_APPS</span></code></a><a class="headerlink" href="#add-django-contrib-gis-to-installed-apps" title="Lien permanent vers ce titre">¶</a></h3>
<p>Comme pour d’autres applications contribuées dans Django, il <em>suffit</em> d’ajouter <a class="reference internal" href="../index.html#module-django.contrib.gis" title="django.contrib.gis: Geographic Information System (GIS) extensions for Django"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.gis</span></code></a> à <a class="reference internal" href="../../../settings.html#std:setting-INSTALLED_APPS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">INSTALLED_APPS</span></code></a> dans vos réglages. Ceci afin que les gabarits <code class="docutils literal notranslate"><span class="pre">gis</span></code> puissent être découverts&nbsp;; dans le cas contraire, certaines fonctions comme l’interface d’administration géographique ou les plans de sites KML ne fonctionneraient pas correctement.</p>
</div>
</div>
<div class="section" id="s-troubleshooting">
<span id="troubleshooting"></span><h2>Dépannage<a class="headerlink" href="#troubleshooting" title="Lien permanent vers ce titre">¶</a></h2>
<p>Si vous ne trouvez pas de solution à votre problème sur cette page, participez alors à la communauté&nbsp;! Vous pouvez&nbsp;:</p>
<ul class="simple">
<li>Rejoindre le canal IRC <code class="docutils literal notranslate"><span class="pre">#geodjango</span></code> sur Freenode. Soyez patient et poli&nbsp;; même si vous n’obtenez pas de réponse immédiate, quelqu’un essaiera de répondre à votre question au moment où il la lira.</li>
<li>Poser votre question sur la liste de diffusion <a class="reference external" href="https://groups.google.com/d/forum/geodjango">GeoDjango</a> (en anglais).</li>
<li>Créer un ticket dans le <a class="reference external" href="https://code.djangoproject.com/newticket">trac de Django</a> si vous pensez qu’il y a un bogue. Prenez soin de fournir une description complète du problème, les versions utilisées et indiquez le composant «&nbsp;GIS&nbsp;».</li>
</ul>
<div class="section" id="s-library-environment-settings">
<span id="s-libsettings"></span><span id="library-environment-settings"></span><span id="libsettings"></span><h3>Réglages d’environnement de bibliothèques<a class="headerlink" href="#library-environment-settings" title="Lien permanent vers ce titre">¶</a></h3>
<p>Le problème de loin le plus fréquent lors de l’installation de GeoDjango est que les bibliothèques partagées externes (par ex. GEOS et GDAL) ne sont pas trouvées  <a class="footnote-reference" href="#id25" id="id5">[1]</a>. Typiquement, la cause de ce problème est que le système d’exploitation ne connaît pas les répertoires dans lesquels sont installées les bibliothèques compilées à partir de leurs sources.</p>
<p>En général, le chemin de bibliothèque peut être défini pour chaque utilisateur en définissant une variable d’environnement ou en configurant un chemin de bibliothèque global pour tout le système.</p>
<div class="section" id="s-ld-library-path-environment-variable">
<span id="ld-library-path-environment-variable"></span><h4>Variable d’environnement <code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code><a class="headerlink" href="#ld-library-path-environment-variable" title="Lien permanent vers ce titre">¶</a></h4>
<p>Un utilisateur peut définir cette variable d’environnement pour personnaliser les chemins de bibliothèques qu’ils souhaitent utiliser. Le répertoire de bibliothèques traditionnel pour du logiciel compilé depuis les sources est <code class="docutils literal notranslate"><span class="pre">/usr/local/lib</span></code>. Il faut donc inclure <code class="docutils literal notranslate"><span class="pre">/usr/local/lib</span></code> dans la variable <code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code>. Par exemple, voici ce qu’un utilisateur pourrait ajouter dans son fichier de profil bash&nbsp;:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">export LD_LIBRARY_PATH=/usr/local/lib</span>
</pre></div>
</div>
</div>
<div class="section" id="s-setting-system-library-path">
<span id="setting-system-library-path"></span><h4>Définition du chemin de bibliothèque au niveau système<a class="headerlink" href="#setting-system-library-path" title="Lien permanent vers ce titre">¶</a></h4>
<p>Sur les systèmes GNU/Linux, il existe le plus souvent un fichier <code class="docutils literal notranslate"><span class="pre">/etc/ld.so.conf</span></code> qui peut contenir des chemins supplémentaires provenant de fichiers d’un autre répertoire, tel que <code class="docutils literal notranslate"><span class="pre">/etc/ld.so.conf.d</span></code>. En tant qu’utilisateur root, ajoutez le chemin de bibliothèque personnalisé (comme <code class="docutils literal notranslate"><span class="pre">/usr/local/lib</span></code>) sur une nouvelle ligne dans <code class="docutils literal notranslate"><span class="pre">ld.so.conf</span></code>. Ceci est <em>un</em> exemple de la façon dont on peut le faire&nbsp;:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> sudo <span class="nb">echo</span> /usr/local/lib &gt;&gt; /etc/ld.so.conf
<span class="gp">$</span> sudo ldconfig
</pre></div>
</div>
<p>Pour les utilisateurs d’OpenSolaris, le chemin des bibliothèques systèmes peut être modifié par l’utilitaire <code class="docutils literal notranslate"><span class="pre">crle</span></code>. Exécutez <code class="docutils literal notranslate"><span class="pre">crle</span></code> sans option pour afficher la configuration actuelle et exécutez <code class="docutils literal notranslate"><span class="pre">crle</span> <span class="pre">-l</span></code> pour définir un nouveau chemin de bibliothèque. Soyez <em>très</em> prudent lors de la modification de chemins de bibliothèques systèmes&nbsp;:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> crle -l <span class="nv">$OLD_PATH</span>:/usr/local/lib
</pre></div>
</div>
</div>
<div class="section" id="s-install-binutils">
<span id="s-binutils"></span><span id="install-binutils"></span><span id="binutils"></span><h4>Installation de <code class="docutils literal notranslate"><span class="pre">binutils</span></code><a class="headerlink" href="#install-binutils" title="Lien permanent vers ce titre">¶</a></h4>
<p>GeoDjango utilise la fonction <code class="docutils literal notranslate"><span class="pre">find_library</span></code> (provenant du module Python <code class="docutils literal notranslate"><span class="pre">ctypes.util</span></code>) pour chercher les bibliothèques. La routine <code class="docutils literal notranslate"><span class="pre">find_library</span></code> utilise un programme nommé <code class="docutils literal notranslate"><span class="pre">objdump</span></code> (faisant partie du paquet <code class="docutils literal notranslate"><span class="pre">binutils</span></code>) pour vérifier la présence d’une bibliothèque partagée sur les systèmes GNU/Linux. De ce fait, si <code class="docutils literal notranslate"><span class="pre">binutils</span></code> n’est pas installé sur votre système Linux, le module ctypes de Python pourrait ne pas trouver une bibliothèque même si le chemin des bibliothèques est correctement défini et que les bibliothèques géospatiales ont été compilées avec succès.</p>
<p>Le paquet <code class="docutils literal notranslate"><span class="pre">binutils</span></code> peut être installé sur les systèmes Debian et Ubuntu en utilisant la commande suivante&nbsp;:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> sudo apt-get install binutils
</pre></div>
</div>
<p>De même, sur les systèmes Red Hat et CentOS&nbsp;:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> sudo yum install binutils
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="s-platform-specific-instructions">
<span id="platform-specific-instructions"></span><h2>Instructions spécifiques à certaines plates-formes<a class="headerlink" href="#platform-specific-instructions" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="s-macos">
<span id="s-id6"></span><span id="macos"></span><span id="id6"></span><h3>macOS<a class="headerlink" href="#macos" title="Lien permanent vers ce titre">¶</a></h3>
<p>En raison de la variété des systèmes d’empaquetage disponibles pour macOS, il existe différentes options pour installer GeoDjango. Ces options sont&nbsp;:</p>
<ul class="simple">
<li><a class="reference internal" href="#postgresapp"><span class="std std-ref">Postgres.app</span></a> (le plus simple et la solution recommandée)</li>
<li><a class="reference internal" href="#homebrew"><span class="std std-ref">Homebrew</span></a></li>
<li><a class="reference internal" href="#kyngchaos"><span class="std std-ref">Paquets KyngChaos</span></a></li>
<li><a class="reference internal" href="#fink"><span class="std std-ref">Fink</span></a></li>
<li><a class="reference internal" href="#macports"><span class="std std-ref">MacPorts</span></a></li>
<li><a class="reference internal" href="geolibs.html#build-from-source"><span class="std std-ref">Compilation à partir des sources</span></a></li>
</ul>
<p>Cette section inclut aussi des instructions pour installer une version mise à jour de <a class="reference internal" href="#macos-python"><span class="std std-ref">Python</span></a> à partir de paquets fournis par la fondation Python Software, mais ce n’est pas une obligation.</p>
<div class="section" id="s-python">
<span id="s-macos-python"></span><span id="python"></span><span id="macos-python"></span><h4>Python<a class="headerlink" href="#python" title="Lien permanent vers ce titre">¶</a></h4>
<p>Même si Python est préinstallé sur macOS, il est possible de le réinstaller avec des <a class="reference external" href="https://www.python.org/ftp/python/">paquets fournis</a> par la fondation Python Software. Un des avantages de ces installeurs est que la version Python propre à macOS et utilisée en interne par le système d’exploitation n’est pas touchée.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Il sera alors nécessaire de modifier la variable d’environnement <code class="docutils literal notranslate"><span class="pre">PATH</span></code> dans votre fichier <code class="docutils literal notranslate"><span class="pre">.profile</span></code> afin que la nouvelle version de Python soit utilisée lorsque vous saisissez <code class="docutils literal notranslate"><span class="pre">python</span></code> dans la ligne de commande&nbsp;:</p>
<div class="last highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">export PATH=/Library/Frameworks/Python.framework/Versions/Current/bin:$PATH</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="s-postgres-app">
<span id="s-postgresapp"></span><span id="postgres-app"></span><span id="postgresapp"></span><h4>Postgres.app<a class="headerlink" href="#postgres-app" title="Lien permanent vers ce titre">¶</a></h4>
<p><a class="reference external" href="https://postgresapp.com/">Postgres.app</a> est un serveur PostgreSQL indépendant qui inclut l’extension PostGIS. Il sera aussi nécessaire d’installer <code class="docutils literal notranslate"><span class="pre">gdal</span></code> et <code class="docutils literal notranslate"><span class="pre">libgeoip</span></code> avec <a class="reference internal" href="#homebrew"><span class="std std-ref">Homebrew</span></a>.</p>
<p>Après avoir installé Postgres.app, ajoutez ce qui suit à votre fichier <code class="docutils literal notranslate"><span class="pre">.bash_profile</span></code> afin de pouvoir exécuter les programmes correspondants à partir de la ligne de commande. Remplacez <code class="docutils literal notranslate"><span class="pre">X.Y</span></code> par la version de PostgreSQL dans le paquet Postgres.app que vous avez installé&nbsp;:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/Applications/Postgres.app/Contents/Versions/X.Y/bin
</pre></div>
</div>
<p>Vous pouvez vérifier si le chemin est correctement défini en tapant <code class="docutils literal notranslate"><span class="pre">which</span> <span class="pre">psql</span></code> dans une invite de commande.</p>
</div>
<div class="section" id="s-homebrew">
<span id="s-id9"></span><span id="homebrew"></span><span id="id9"></span><h4>Homebrew<a class="headerlink" href="#homebrew" title="Lien permanent vers ce titre">¶</a></h4>
<p><a class="reference external" href="https://brew.sh/">Homebrew</a> met à disposition des «&nbsp;recettes&nbsp;» pour la compilation de binaires et de paquets à partir des sources. Il fournit des recettes pour les prérequis de GeoDjango sur les ordinateurs Macintosh tournant sous macOS. Dans la mesure où Homebrew compile les logiciels à partir de leurs sources, <a class="reference external" href="https://developer.apple.com/xcode/">Xcode</a> est indispensable.</p>
<p>En résumé&nbsp;:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> brew install postgresql
<span class="gp">$</span> brew install postgis
<span class="gp">$</span> brew install gdal
<span class="gp">$</span> brew install libgeoip
</pre></div>
</div>
</div>
<div class="section" id="s-kyngchaos-packages">
<span id="s-kyngchaos"></span><span id="kyngchaos-packages"></span><span id="kyngchaos"></span><h4>Paquets KyngChaos<a class="headerlink" href="#kyngchaos-packages" title="Lien permanent vers ce titre">¶</a></h4>
<p>William Kyngesburye fournit un certain nombre de <a class="reference external" href="https://www.kyngchaos.com/software/frameworks">paquets binaires de bibliothèques géospatiales</a> qui aident à l’installation de GeoDjango sur macOS sans devoir les compiler à partir des sources. Cependant, <a class="reference external" href="https://developer.apple.com/xcode/">Xcode</a> est toujours nécessaire afin de pouvoir compiler les adaptateurs de base de données Python <a class="reference internal" href="#psycopg2-kyngchaos"><span class="std std-ref">psycopg2</span></a> (pour PostGIS).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Les utilisateurs de SpatiaLite devraient consulter la section <a class="reference internal" href="spatialite.html#spatialite-macos"><span class="std std-ref">Instructions spécifiques à macOS</span></a> après l’installation des paquets pour des instructions supplémentaires.</p>
</div>
<p>Téléchargez les paquets des infrastructures&nbsp;suivantes&nbsp;:</p>
<ul class="simple">
<li>UnixImageIO</li>
<li>PROJ</li>
<li>GEOS</li>
<li>SQLite3 (y compris la bibliothèque SpatiaLite)</li>
<li>GDAL</li>
</ul>
<p>Installez les paquets dans l’ordre présenté ci-dessus, car les paquets GDAL et SQLite ont besoin des paquets qui les précèdent dans la liste.</p>
<p>Après cela, vous pouvez aussi installer les paquets binaires KyngChaos pour <a class="reference external" href="https://www.kyngchaos.com/software/postgres">PostgreSQL et PostGIS</a>.</p>
<p>Après avoir installé les paquets binaires, il faut encore ajouter ce qui suit à votre fichier <code class="docutils literal notranslate"><span class="pre">.profile</span></code> afin de pouvoir exécuter les programmes correspondants à partir de la ligne de commande&nbsp;:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">export PATH=/Library/Frameworks/UnixImageIO.framework/Programs:$PATH</span>
<span class="go">export PATH=/Library/Frameworks/PROJ.framework/Programs:$PATH</span>
<span class="go">export PATH=/Library/Frameworks/GEOS.framework/Programs:$PATH</span>
<span class="go">export PATH=/Library/Frameworks/SQLite3.framework/Programs:$PATH</span>
<span class="go">export PATH=/Library/Frameworks/GDAL.framework/Programs:$PATH</span>
<span class="go">export PATH=/usr/local/pgsql/bin:$PATH</span>
</pre></div>
</div>
<div class="section" id="s-psycopg2">
<span id="s-psycopg2-kyngchaos"></span><span id="psycopg2"></span><span id="psycopg2-kyngchaos"></span><h5>psycopg2<a class="headerlink" href="#psycopg2" title="Lien permanent vers ce titre">¶</a></h5>
<p>Après avoir installé les binaires KyngChaos et avoir modifié la variable <code class="docutils literal notranslate"><span class="pre">PATH</span></code> comme expliqué plus haut, <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code> peut être installé en utilisant la commande suivante&nbsp;:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> python -m pip install psycopg2
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Si vous ne disposez pas de <code class="docutils literal notranslate"><span class="pre">pip</span></code>, suivez les <a class="reference internal" href="../../../../topics/install.html#installing-official-release"><span class="std std-ref">instructions d’installation</span></a> pour l’installer.</p>
</div>
</div>
<div class="section" id="s-fink">
<span id="s-id13"></span><span id="fink"></span><span id="id13"></span><h5>Fink<a class="headerlink" href="#fink" title="Lien permanent vers ce titre">¶</a></h5>
<p><a class="reference external" href="https://schwehr.blogspot.com/">Kurt Schwehr</a> a eu la bonté de créer des paquets GeoDjango pour les utilisateurs du système de paquets <a class="reference external" href="http://www.finkproject.org/">Fink</a>. <a class="reference external" href="http://pdb.finkproject.org/pdb/browse.php?summary=django-gis">Différents paquets sont disponibles</a> (commençant par <code class="docutils literal notranslate"><span class="pre">django-gis</span></code>), en fonction de la version de Python que vous souhaitez utiliser.</p>
</div>
</div>
<div class="section" id="s-macports">
<span id="s-id17"></span><span id="macports"></span><span id="id17"></span><h4>MacPorts<a class="headerlink" href="#macports" title="Lien permanent vers ce titre">¶</a></h4>
<p><a class="reference external" href="https://www.macports.org/">MacPorts</a> peut être utilisé pour installer les prérequis de GeoDjango sur les ordinateurs tournant sous macOS. Dans la mesure où MacPorts compile les logiciels à partir de leurs sources, <a class="reference external" href="https://developer.apple.com/xcode/">Xcode</a> est indispensable.</p>
<p>En résumé&nbsp;:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> sudo port install postgresql93-server
<span class="gp">$</span> sudo port install geos
<span class="gp">$</span> sudo port install proj
<span class="gp">$</span> sudo port install postgis
<span class="gp">$</span> sudo port install gdal +geos
<span class="gp">$</span> sudo port install libgeoip
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Il sera aussi nécessaire de modifier la variable d’environnement <code class="docutils literal notranslate"><span class="pre">PATH</span></code> dans votre fichier <code class="docutils literal notranslate"><span class="pre">.profile</span></code> afin que les programmes MacPorts soient accessibles dans la ligne de commande&nbsp;:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">export PATH=/opt/local/bin:/opt/local/lib/postgresql93/bin</span>
</pre></div>
</div>
<p>De plus, ajoutez le réglage <code class="docutils literal notranslate"><span class="pre">DYLD_FALLBACK_LIBRARY_PATH</span></code> afin que les bibliothèques puissent être trouvées par Python&nbsp;:</p>
<div class="last highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">export DYLD_FALLBACK_LIBRARY_PATH=/opt/local/lib:/opt/local/lib/postgresql93</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="s-windows">
<span id="s-id19"></span><span id="windows"></span><span id="id19"></span><h3>Windows<a class="headerlink" href="#windows" title="Lien permanent vers ce titre">¶</a></h3>
<p>Suivez scrupuleusement l’ordre des sections suivantes afin d’installer GeoDjango sur Windows. Dans ce tutoriel, nous installerons les versions 64 bits de chaque application.</p>
<div class="section" id="s-id20">
<span id="id20"></span><h4>Python<a class="headerlink" href="#id20" title="Lien permanent vers ce titre">¶</a></h4>
<p>Installez une version 64 bits de Python. Voir <a class="reference internal" href="../../../../howto/windows.html"><span class="doc">Installation de Python</span></a> pour plus d’informations.</p>
</div>
<div class="section" id="s-postgresql">
<span id="postgresql"></span><h4>PostgreSQL<a class="headerlink" href="#postgresql" title="Lien permanent vers ce titre">¶</a></h4>
<p>Téléchargez la dernière version de l”<a class="reference external" href="https://www.enterprisedb.com/downloads/postgres-postgresql-downloads">installeur PostgreSQL 12.x</a> à partir du site Web <a class="reference external" href="https://www.enterprisedb.com">EnterpriseDB</a>. Puis, lancez cet installeur, suivez les instructions qui apparaissent et conservez les options par défaut, sauf si vous connaissez les conséquences de leur modification.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">L’installeur PostgreSQL crée un nouveau superutilisateur de base de données nommé <code class="docutils literal notranslate"><span class="pre">postgres</span></code>. On vous demandera une seule fois de définir le mot de passe, prenez garde de bien vous en souvenir&nbsp;!</p>
</div>
<p>Lorsque l’installeur a terminé, il demande de lancer Stack Builder en quittant. Laissez cette option cochée, car c’est nécessaire pour installer <a class="reference internal" href="#postgisasb"><span class="std std-ref">PostGIS</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">En cas d’installation réussie, le serveur PostgreSQL tourne en arrière-plan à chaque démarrage du système sous forme de service Windows. Un groupe de menu de démarrage <span class="menuselection">PostgreSQL 12.x</span> sera créé pour contenir des raccourcis pour les programmes Application Stack Builder (ASB) et SQL Shell&nbsp;; ce dernier lance une commande <code class="docutils literal notranslate"><span class="pre">psql</span></code> dans une fenêtre de commandes.</p>
</div>
</div>
<div class="section" id="s-postgis">
<span id="s-postgisasb"></span><span id="postgis"></span><span id="postgisasb"></span><h4>PostGIS<a class="headerlink" href="#postgis" title="Lien permanent vers ce titre">¶</a></h4>
<p>À partir du programme Stack Builder (à lancer en dehors de l’installeur, <span class="menuselection">Démarrer ‣ PostgreSQL 12 ‣ Application Stack Builder</span>), choisissez <span class="menuselection">PostgreSQL 12 (x64) on port 5432</span> dans le menu déroulant et cliquez sur Suivant. Ouvrez l’arborescence de menu <span class="menuselection">Categories ‣ Spatial Extensions</span> et choisissez <span class="menuselection">PostGIS X.Y for PostgreSQL 12</span>.</p>
<p>Après avoir cliqué sur suivant, vous devez confirmer le paquet sélectionné et le « Download directory ». Cliquez une nouvelle fois sur suivant, PostGIS sera téléchargé et vous devrez encore cliquer sur suivant pour lancer l’installeur PostGIS. Choisissez les options par défaut lors de l’installation. Le processus d’installation contient trois boîtes de dialogue Oui/Non, l’option par défaut étant Non pour les trois.</p>
</div>
<div class="section" id="s-osgeo4w">
<span id="s-id23"></span><span id="osgeo4w"></span><span id="id23"></span><h4>OSGeo4W<a class="headerlink" href="#osgeo4w" title="Lien permanent vers ce titre">¶</a></h4>
<p>L”<a class="reference external" href="https://trac.osgeo.org/osgeo4w/">installeur OSGeo4W</a> aide à l’installation des bibliothèques PROJ, GDAL et GEOS requises par GeoDjango. Commencez par télécharger l”<a href="#id26"><span class="problematic" id="id27">`installeur OSGeo4W`_</span></a> (64bit) et exécutez-le. Choisissez <span class="menuselection">Express Web-GIS Install</span> et cliquez sur suivant. Dans la liste de sélection des paquets, contrôlez que GDAL est sélectionné&nbsp;; MapServer est aussi sélectionné par défaut, mais n’est pas nécessaire pour GeoDjango et peut être désélectionné sans problème. Après avoir cliqué sur suivant et accepté l’accord de licence, les paquets sont automatiquement téléchargés et installés&nbsp;; vous pouvez ensuite quitter l’installeur.</p>
</div>
<div class="section" id="s-modify-windows-environment">
<span id="modify-windows-environment"></span><h4>Modification de l’environnement Windows<a class="headerlink" href="#modify-windows-environment" title="Lien permanent vers ce titre">¶</a></h4>
<p>Afin de pouvoir utiliser GeoDjango, il est nécessaire d’ajouter les répertoires  OSGeo4W au chemin <code class="docutils literal notranslate"><span class="pre">Path</span></code> du système Windows. Il faut également créer les variables d’environnement <code class="docutils literal notranslate"><span class="pre">GDAL_DATA</span></code> et <code class="docutils literal notranslate"><span class="pre">PROJ_LIB</span></code>. Les commandes ci-après, exécutables avec <code class="docutils literal notranslate"><span class="pre">cmd.exe</span></code> configurent tout cela. Redémarrez votre appareil une fois que tout est terminé afin que les nouvelles variables d’environnement soient reconnues :</p>
<div class="highlight-bat notranslate"><div class="highlight"><pre><span></span><span class="k">set</span> <span class="nv">OSGEO4W_ROOT</span><span class="p">=</span>C:\OSGeo4W64
<span class="k">set</span> <span class="nv">GDAL_DATA</span><span class="p">=</span><span class="nv">%OSGEO4W_ROOT%</span>\share\gdal
<span class="k">set</span> <span class="nv">PROJ_LIB</span><span class="p">=</span><span class="nv">%OSGEO4W_ROOT%</span>\share\proj
<span class="k">set</span> <span class="nv">PATH</span><span class="p">=</span><span class="nv">%PATH%</span>;<span class="nv">%OSGEO4W_ROOT%</span>\bin
reg ADD <span class="s2">&quot;HKLM\SYSTEM\CurrentControlSet\Control\Session Manager\Environment&quot;</span> /v Path /t REG_EXPAND_SZ /f /d <span class="s2">&quot;</span><span class="nv">%PATH%</span><span class="s2">&quot;</span>
reg ADD <span class="s2">&quot;HKLM\SYSTEM\CurrentControlSet\Control\Session Manager\Environment&quot;</span> /v GDAL_DATA /t REG_EXPAND_SZ /f /d <span class="s2">&quot;</span><span class="nv">%GDAL_DATA%</span><span class="s2">&quot;</span>
reg ADD <span class="s2">&quot;HKLM\SYSTEM\CurrentControlSet\Control\Session Manager\Environment&quot;</span> /v PROJ_LIB /t REG_EXPAND_SZ /f /d <span class="s2">&quot;</span><span class="nv">%PROJ_LIB%</span><span class="s2">&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Nous supposons que la version 64 bits de OSGeo4W est installée. Si vous avez installé la version 32 bits, vous devrez modifier la première commande en <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">OSGEO4W_ROOT=C:\OSGeo4W</span></code>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Il est nécessaire de disposer des droits d’administrateur pour exécuter ces commandes. Dans ce but, lancez une invite de commande en mode administrateur et saisissez les commandes ci-dessus. Vous devez vous déconnecter puis vous reconnecter pour que ces réglages s’appliquent réellement.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Si vous avez personnalisé les répertoires d’installation de OSGeo4W, vous devrez alors aussi modifier de façon cohérente les variables <code class="docutils literal notranslate"><span class="pre">OSGEO4W_ROOT</span></code>.</p>
</div>
</div>
<div class="section" id="s-install-django-and-set-up-database">
<span id="install-django-and-set-up-database"></span><h4>Installation de Django et configuration de base de données<a class="headerlink" href="#install-django-and-set-up-database" title="Lien permanent vers ce titre">¶</a></h4>
<p><a class="reference internal" href="../../../../topics/install.html#installing-official-release"><span class="std std-ref">installez Django</span></a> sur votre système. Il est recommandé de créer un <a class="reference external" href="https://docs.python.org/3/tutorial/venv.html" title="(disponible dans Python v3.9)"><span class="xref std std-doc">environnement virtuel</span></a> pour chaque projet que vous créez.</p>
</div>
<div class="section" id="s-id24">
<span id="id24"></span><h4>psycopg2<a class="headerlink" href="#id24" title="Lien permanent vers ce titre">¶</a></h4>
<p>Le module Python <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code> fournit l’interface entre Python et la base de données PostgreSQL. <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code> peut être installé par pip dans votre environnement virtuel Python</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pip install psycopg2</span>
</pre></div>
</div>
<p class="rubric">Notes de bas de page</p>
<table class="docutils footnote" frame="void" id="id25" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id5">[1]</a></td><td>GeoDjango utilise la routine <a class="reference external" href="https://docs.python.org/3/library/ctypes.html#ctypes.util.find_library" title="(disponible dans Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_library()</span></code></a> de <code class="docutils literal notranslate"><span class="pre">ctypes.util</span></code> pour trouver les bibliothèques partagées.</td></tr>
</tbody>
</table>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../../../contents.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Installation de GeoDjango</a><ul>
<li><a class="reference internal" href="#overview">Aperçu</a></li>
<li><a class="reference internal" href="#requirements">Exigences</a><ul>
<li><a class="reference internal" href="#python-and-django">Python et Django</a></li>
<li><a class="reference internal" href="#spatial-database">Base de données spatiale</a></li>
</ul>
</li>
<li><a class="reference internal" href="#installation">Installation</a><ul>
<li><a class="reference internal" href="#geospatial-libraries">Bibliothèques géospatiales</a></li>
<li><a class="reference internal" href="#database-installation">Installation de la base de données</a></li>
<li><a class="reference internal" href="#databases-configuration">Configuration de <code class="docutils literal notranslate"><span class="pre">DATABASES</span></code></a></li>
<li><a class="reference internal" href="#add-django-contrib-gis-to-installed-apps">Ajout de <code class="docutils literal notranslate"><span class="pre">django.contrib.gis</span></code> à <code class="docutils literal notranslate"><span class="pre">INSTALLED_APPS</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#troubleshooting">Dépannage</a><ul>
<li><a class="reference internal" href="#library-environment-settings">Réglages d’environnement de bibliothèques</a><ul>
<li><a class="reference internal" href="#ld-library-path-environment-variable">Variable d’environnement <code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code></a></li>
<li><a class="reference internal" href="#setting-system-library-path">Définition du chemin de bibliothèque au niveau système</a></li>
<li><a class="reference internal" href="#install-binutils">Installation de <code class="docutils literal notranslate"><span class="pre">binutils</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#platform-specific-instructions">Instructions spécifiques à certaines plates-formes</a><ul>
<li><a class="reference internal" href="#macos">macOS</a><ul>
<li><a class="reference internal" href="#python">Python</a></li>
<li><a class="reference internal" href="#postgres-app">Postgres.app</a></li>
<li><a class="reference internal" href="#homebrew">Homebrew</a></li>
<li><a class="reference internal" href="#kyngchaos-packages">Paquets KyngChaos</a><ul>
<li><a class="reference internal" href="#psycopg2">psycopg2</a></li>
<li><a class="reference internal" href="#fink">Fink</a></li>
</ul>
</li>
<li><a class="reference internal" href="#macports">MacPorts</a></li>
</ul>
</li>
<li><a class="reference internal" href="#windows">Windows</a><ul>
<li><a class="reference internal" href="#id20">Python</a></li>
<li><a class="reference internal" href="#postgresql">PostgreSQL</a></li>
<li><a class="reference internal" href="#postgis">PostGIS</a></li>
<li><a class="reference internal" href="#osgeo4w">OSGeo4W</a></li>
<li><a class="reference internal" href="#modify-windows-environment">Modification de l’environnement Windows</a></li>
<li><a class="reference internal" href="#install-django-and-set-up-database">Installation de Django et configuration de base de données</a></li>
<li><a class="reference internal" href="#id24">psycopg2</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Sujet précédent</h4>
  <p class="topless"><a href="../tutorial.html"
                        title="Chapitre précédent">Tutoriel GeoDjango</a></p>
  <h4>Sujet suivant</h4>
  <p class="topless"><a href="geolibs.html"
                        title="Chapitre suivant">Installation des bibliothèques géospatiales</a></p>
  <div role="note" aria-label="source link">
    <h3>Cette page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../../_sources/ref/contrib/gis/install/index.txt"
            rel="nofollow">Montrer le code source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Recherche rapide</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
              <h3>Last update:</h3>
              <p class="topless">oct. 29, 2020</p>
          </div>
        
      
    </div>

    <div id="ft">
      <div class="nav">
    &laquo; <a href="../tutorial.html" title="Tutoriel GeoDjango">previous</a>
     |
    <a href="../../../index.html" title="Référence de l’API" accesskey="U">up</a>
   |
    <a href="geolibs.html" title="Installation des bibliothèques géospatiales">next</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>