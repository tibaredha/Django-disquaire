
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Référence des index de modèle &#8212; Documentation Django 3.1.3.dev</title>
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../_static/translations.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Recherche" href="../../search.html" />
    <link rel="next" title="Référence des contraintes" href="constraints.html" />
    <link rel="prev" title="Référence des champs de modèle" href="fields.html" />



 
<script src="../../templatebuiltins.js"></script>
<script>
(function($) {
    if (!django_template_builtins) {
       // templatebuiltins.js missing, do nothing.
       return;
    }
    $(document).ready(function() {
        // Hyperlink Django template tags and filters
        var base = "../templates/builtins.html";
        if (base == "#") {
            // Special case for builtins.html itself
            base = "";
        }
        // Tags are keywords, class '.k'
        $("div.highlight\\-html\\+django span.k").each(function(i, elem) {
             var tagname = $(elem).text();
             if ($.inArray(tagname, django_template_builtins.ttags) != -1) {
                 var fragment = tagname.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + tagname + "</a>");
             }
        });
        // Filters are functions, class '.nf'
        $("div.highlight\\-html\\+django span.nf").each(function(i, elem) {
             var filtername = $(elem).text();
             if ($.inArray(filtername, django_template_builtins.tfilters) != -1) {
                 var fragment = filtername.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + filtername + "</a>");
             }
        });
    });
})(jQuery);</script>

  </head><body>

    <div class="document">
  <div id="custom-doc" class="yui-t6">
    <div id="hd">
      <h1><a href="../../index.html">Documentation Django 3.1.3.dev</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../../index.html">Home</a>  |
        <a title="Table of contents" href="../../contents.html">Table of contents</a>  |
        <a title="Global index" href="../../genindex.html">Index</a>  |
        <a title="Module index" href="../../py-modindex.html">Modules</a>
      </div>
      <div class="nav">
    &laquo; <a href="fields.html" title="Référence des champs de modèle">previous</a>
     |
    <a href="../index.html" title="Référence de l’API" accesskey="U">up</a>
   |
    <a href="constraints.html" title="Référence des contraintes">next</a> &raquo;</div>
    </div>

    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="ref-models-indexes">
            
  <div class="section" id="s-module-django.db.models.indexes">
<span id="s-model-index-reference"></span><span id="module-django.db.models.indexes"></span><span id="model-index-reference"></span><h1>Référence des index de modèle<a class="headerlink" href="#module-django.db.models.indexes" title="Lien permanent vers ce titre">¶</a></h1>
<p>Les classes d’index facilitent la création d’index de base de données. Elles peuvent être ajoutées avec l’option <a class="reference internal" href="options.html#django.db.models.Options.indexes" title="django.db.models.Options.indexes"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Meta.indexes</span></code></a>. Ce document détaille les références d’API de <a class="reference internal" href="#django.db.models.Index" title="django.db.models.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> ce qui inclut les <a class="reference internal" href="#index-options">options d’index</a>.</p>
<div class="admonition-referencing-built-in-indexes admonition">
<p class="first admonition-title">Référencement des index intégrés</p>
<p class="last">Les index sont définis dans <code class="docutils literal notranslate"><span class="pre">django.db.models.indexes</span></code>, mais par commodité ils sont importés dans <a class="reference internal" href="../../topics/db/models.html#module-django.db.models" title="django.db.models"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.db.models</span></code></a>. La convention standard est d’utiliser <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">django.db</span> <span class="pre">import</span> <span class="pre">models</span></code> et de se référer aux index avec <code class="docutils literal notranslate"><span class="pre">models.&lt;IndexClass&gt;</span></code>.</p>
</div>
<div class="section" id="s-index-options">
<span id="index-options"></span><h2>Options d”<code class="docutils literal notranslate"><span class="pre">Index</span></code><a class="headerlink" href="#index-options" title="Lien permanent vers ce titre">¶</a></h2>
<dl class="class">
<dt id="django.db.models.Index">
<em class="property">class </em><code class="descname">Index</code>(<em>fields=()</em>, <em>name=None</em>, <em>db_tablespace=None</em>, <em>opclasses=()</em>, <em>condition=None</em>)<a class="headerlink" href="#django.db.models.Index" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Crée un index (B-Tree) dans la base de données.</p>
</dd></dl>

<div class="section" id="s-fields">
<span id="fields"></span><h3><code class="docutils literal notranslate"><span class="pre">fields</span></code><a class="headerlink" href="#fields" title="Lien permanent vers ce titre">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Index.fields">
<code class="descclassname">Index.</code><code class="descname">fields</code><a class="headerlink" href="#django.db.models.Index.fields" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<p>Une liste ou un tuple de noms de champs sur lesquels l’index doit porter.</p>
<p>Par défaut, les index sont créés avec un tri croissant sur chaque colonne. Pour définir un index avec un tri décroissant sur une certaine colonne, ajoutez un tiret devant le nom du champ.</p>
<p>Par exemple, <code class="docutils literal notranslate"><span class="pre">Index(fields=['headline',</span> <span class="pre">'-pub_date'])</span></code> produit un code SQL contenant <code class="docutils literal notranslate"><span class="pre">(headline,</span> <span class="pre">pub_date</span> <span class="pre">DESC)</span></code>. Le tri dans les index n’est pas géré par MySQL. Dans ce cas, un index avec tri décroissant est traité comme un index normal.</p>
</div>
<div class="section" id="s-name">
<span id="name"></span><h3><code class="docutils literal notranslate"><span class="pre">name</span></code><a class="headerlink" href="#name" title="Lien permanent vers ce titre">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Index.name">
<code class="descclassname">Index.</code><code class="descname">name</code><a class="headerlink" href="#django.db.models.Index.name" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<p>Le nom de l’index. Si <code class="docutils literal notranslate"><span class="pre">name</span></code> n’est pas fourni, Django va générer automatiquement un nom. Par compatibilité avec les différentes bases de données, les noms d’index ne peuvent pas être plus longs que 30 caractères et ne doivent pas commencer par un nombre (0-9) ni par un soulignement (_).</p>
<div class="admonition-partial-indexes-in-abstract-base-classes admonition">
<p class="first admonition-title">Index partiels dans les classes de base abstraites</p>
<p class="last">Un index doit toujours être nommé de façon unique. Cela signifie qu’il n’est pas possible de définir un index partiel dans une classe de base abstraite, dans la mesure où l’option <a class="reference internal" href="options.html#django.db.models.Options.indexes" title="django.db.models.Options.indexes"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Meta.indexes</span></code></a> est héritée par les sous-classes avec exactement les mêmes valeurs d’attributs (y compris <code class="docutils literal notranslate"><span class="pre">name</span></code>). Pour éviter des collisions de nom, le nom peut contenir <code class="docutils literal notranslate"><span class="pre">'%(app_label)s'``et</span> <span class="pre">``'%(class)s'</span></code> qui seront remplacés respectivement par l’étiquette de l’application et le nom de la classe du modèle concret (tout en minuscules). Par exemple, <code class="docutils literal notranslate"><span class="pre">Index(fields=['title'],</span> <span class="pre">name='%(app_label)s_%(class)s_title_index')</span></code>.</p>
</div>
<div class="versionchanged">
<span class="title">Changed in Django 3.0:</span> <p>L’interpolation des variables <code class="docutils literal notranslate"><span class="pre">'%(app_label)s'</span></code> et <code class="docutils literal notranslate"><span class="pre">'%(class)s'</span></code> a été ajoutée.</p>
</div>
</div>
<div class="section" id="s-db-tablespace">
<span id="db-tablespace"></span><h3><code class="docutils literal notranslate"><span class="pre">db_tablespace</span></code><a class="headerlink" href="#db-tablespace" title="Lien permanent vers ce titre">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Index.db_tablespace">
<code class="descclassname">Index.</code><code class="descname">db_tablespace</code><a class="headerlink" href="#django.db.models.Index.db_tablespace" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<p>Le nom de l”<a class="reference internal" href="../../topics/db/tablespaces.html"><span class="doc">espace de tables de base de données</span></a> à utiliser pour cet index. Pour les index sur un seul champ et si <code class="docutils literal notranslate"><span class="pre">db_tablespace</span></code> n’est pas indiqué, l’index est créé dans l’espace <code class="docutils literal notranslate"><span class="pre">db_tablespace</span></code> du champ.</p>
<p>Si <a class="reference internal" href="fields.html#django.db.models.Field.db_tablespace" title="django.db.models.Field.db_tablespace"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Field.db_tablespace</span></code></a> n’est pas présent (ou si l’index utilise plusieurs champs), l’index est créé dans l’espace de tables défini dans l’option <a class="reference internal" href="options.html#django.db.models.Options.db_tablespace" title="django.db.models.Options.db_tablespace"><code class="xref py py-attr docutils literal notranslate"><span class="pre">db_tablespace</span></code></a> dans la classe <code class="docutils literal notranslate"><span class="pre">Meta</span></code> du modèle. Si aucun de ces espaces n’est défini, l’index est créé dans le même espace de tables que la table.</p>
<div class="admonition seealso">
<p class="first admonition-title">Voir aussi</p>
<p class="last">Pour une liste des index spécifiques à PostgreSQL, voir <a class="reference internal" href="../contrib/postgres/indexes.html#module-django.contrib.postgres.indexes" title="django.contrib.postgres.indexes"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.postgres.indexes</span></code></a>.</p>
</div>
</div>
<div class="section" id="s-opclasses">
<span id="opclasses"></span><h3><code class="docutils literal notranslate"><span class="pre">opclasses</span></code><a class="headerlink" href="#opclasses" title="Lien permanent vers ce titre">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Index.opclasses">
<code class="descclassname">Index.</code><code class="descname">opclasses</code><a class="headerlink" href="#django.db.models.Index.opclasses" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<p>Les noms des <a class="reference external" href="https://www.postgresql.org/docs/current/indexes-opclass.html">classes d’opérateurs PostgreSQL</a> à utiliser pour cet index. Si vous nécessitez une classe d’opérateur personnalisée, vous devez en fournir une pour chaque champ de l’index.</p>
<p>Par exemple, <code class="docutils literal notranslate"><span class="pre">GinIndex(name='json_index',</span> <span class="pre">fields=['jsonfield'],</span> <span class="pre">opclasses=['jsonb_path_ops'])</span></code> crée un index gin pour le champ <code class="docutils literal notranslate"><span class="pre">jsonfield</span></code> en utilisant les classes d’opérateurs <code class="docutils literal notranslate"><span class="pre">jsonb_path_ops</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">opclasses</span></code> est ignoré pour les bases de données autres que PostgreSQL.</p>
<p><a class="reference internal" href="#django.db.models.Index.name" title="django.db.models.Index.name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Index.name</span></code></a> est obligatoire quand on utilise <code class="docutils literal notranslate"><span class="pre">opclasses</span></code>.</p>
</div>
<div class="section" id="s-condition">
<span id="condition"></span><h3><code class="docutils literal notranslate"><span class="pre">condition</span></code><a class="headerlink" href="#condition" title="Lien permanent vers ce titre">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Index.condition">
<code class="descclassname">Index.</code><code class="descname">condition</code><a class="headerlink" href="#django.db.models.Index.condition" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<p>Si la table est très grande et que vos requêtes ciblent principalement un certain sous-ensemble de lignes, il peut être utile de restreindre l’index à ce sous-ensemble. Indiquez une condition sous forme de <a class="reference internal" href="querysets.html#django.db.models.Q" title="django.db.models.Q"><code class="xref py py-class docutils literal notranslate"><span class="pre">Q</span></code></a>. Par exemple, <code class="docutils literal notranslate"><span class="pre">condition=Q(pages__gt=400)</span></code> va indexer les lignes dont le champ <code class="docutils literal notranslate"><span class="pre">pages</span></code> est plus grand que 400.</p>
<p><a class="reference internal" href="#django.db.models.Index.name" title="django.db.models.Index.name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Index.name</span></code></a> est obligatoire quand on utilise <code class="docutils literal notranslate"><span class="pre">condition</span></code>.</p>
<div class="admonition-restrictions-on-postgresql admonition">
<p class="first admonition-title">Restrictions pour PostgreSQL</p>
<p class="last">PostgreSQL exige que les fonctions référencées dans la condition soient marquées comme IMMUTABLE. Django ne le vérifie pas, mais PostgreSQL produira une erreur. Cela signifie que des fonctions telles que <a class="reference internal" href="database-functions.html#date-functions"><span class="std std-ref">Fonctions de date</span></a> et <a class="reference internal" href="database-functions.html#django.db.models.functions.Concat" title="django.db.models.functions.Concat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Concat</span></code></a> ne sont pas admises. Si vous stockez des dates dans un champ <a class="reference internal" href="fields.html#django.db.models.DateTimeField" title="django.db.models.DateTimeField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateTimeField</span></code></a>, la comparaison avec des objets <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(disponible dans Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code></a> peut nécessiter la présence du paramètre <code class="docutils literal notranslate"><span class="pre">tzinfo</span></code> car sinon la comparaison pourrait aboutir à une fonction « mutable » en raison du forçage de type que Django effectue pour les <a class="reference internal" href="querysets.html#field-lookups"><span class="std std-ref">expressions de requête</span></a>.</p>
</div>
<div class="admonition-restrictions-on-sqlite admonition">
<p class="first admonition-title">Restrictions pour SQLite</p>
<p class="last">SQLite <a class="reference external" href="https://www.sqlite.org/partialindex.html">impose des restrictions</a> sur la façon dont un index partiel peut être construit.</p>
</div>
<div class="admonition-oracle admonition">
<p class="first admonition-title">Oracle</p>
<p class="last">Oracle ne prend pas en charge les index partiels. Par contre, les index partiels peuvent être émulés à l’aide d’index fonctionnels. Utilisez une <a class="reference internal" href="../../topics/migrations.html"><span class="doc">migration</span></a> pour ajouter l’index avec <a class="reference internal" href="../migration-operations.html#django.db.migrations.operations.RunSQL" title="django.db.migrations.operations.RunSQL"><code class="xref py py-class docutils literal notranslate"><span class="pre">RunSQL</span></code></a>.</p>
</div>
<div class="admonition-mysql-and-mariadb admonition">
<p class="first admonition-title">MySQL et MariaDB</p>
<p class="last">Le paramètre <code class="docutils literal notranslate"><span class="pre">condition</span></code> est ignoré avec MySQL et MariaDB, car aucune de ces bases de données ne prend en charge les index conditionnels.</p>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../contents.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Référence des index de modèle</a><ul>
<li><a class="reference internal" href="#index-options">Options d”<code class="docutils literal notranslate"><span class="pre">Index</span></code></a><ul>
<li><a class="reference internal" href="#fields"><code class="docutils literal notranslate"><span class="pre">fields</span></code></a></li>
<li><a class="reference internal" href="#name"><code class="docutils literal notranslate"><span class="pre">name</span></code></a></li>
<li><a class="reference internal" href="#db-tablespace"><code class="docutils literal notranslate"><span class="pre">db_tablespace</span></code></a></li>
<li><a class="reference internal" href="#opclasses"><code class="docutils literal notranslate"><span class="pre">opclasses</span></code></a></li>
<li><a class="reference internal" href="#condition"><code class="docutils literal notranslate"><span class="pre">condition</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Sujet précédent</h4>
  <p class="topless"><a href="fields.html"
                        title="Chapitre précédent">Référence des champs de modèle</a></p>
  <h4>Sujet suivant</h4>
  <p class="topless"><a href="constraints.html"
                        title="Chapitre suivant">Référence des contraintes</a></p>
  <div role="note" aria-label="source link">
    <h3>Cette page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/ref/models/indexes.txt"
            rel="nofollow">Montrer le code source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Recherche rapide</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
              <h3>Last update:</h3>
              <p class="topless">oct. 29, 2020</p>
          </div>
        
      
    </div>

    <div id="ft">
      <div class="nav">
    &laquo; <a href="fields.html" title="Référence des champs de modèle">previous</a>
     |
    <a href="../index.html" title="Référence de l’API" accesskey="U">up</a>
   |
    <a href="constraints.html" title="Référence des contraintes">next</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>