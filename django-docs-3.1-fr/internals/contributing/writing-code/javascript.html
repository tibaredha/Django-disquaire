
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>JavaScript &#8212; Documentation Django 3.1.3.dev</title>
    <link rel="stylesheet" href="../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../../_static/translations.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Recherche" href="../../../search.html" />
    <link rel="next" title="Écrire la documentation" href="../writing-documentation.html" />
    <link rel="prev" title="Travailler avec Git et GitHub" href="working-with-git.html" />



 
<script src="../../../templatebuiltins.js"></script>
<script>
(function($) {
    if (!django_template_builtins) {
       // templatebuiltins.js missing, do nothing.
       return;
    }
    $(document).ready(function() {
        // Hyperlink Django template tags and filters
        var base = "../../../ref/templates/builtins.html";
        if (base == "#") {
            // Special case for builtins.html itself
            base = "";
        }
        // Tags are keywords, class '.k'
        $("div.highlight\\-html\\+django span.k").each(function(i, elem) {
             var tagname = $(elem).text();
             if ($.inArray(tagname, django_template_builtins.ttags) != -1) {
                 var fragment = tagname.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + tagname + "</a>");
             }
        });
        // Filters are functions, class '.nf'
        $("div.highlight\\-html\\+django span.nf").each(function(i, elem) {
             var filtername = $(elem).text();
             if ($.inArray(filtername, django_template_builtins.tfilters) != -1) {
                 var fragment = filtername.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + filtername + "</a>");
             }
        });
    });
})(jQuery);(function($) {
    $(document).ready(function() {
        $(".c-tab-unix").on("click", function() {
            $("section.c-content-unix").show();
            $("section.c-content-win").hide();
            $(".c-tab-unix").prop("checked", true);
        });
        $(".c-tab-win").on("click", function() {
            $("section.c-content-win").show();
            $("section.c-content-unix").hide();
            $(".c-tab-win").prop("checked", true);
        });
    });
})(jQuery);</script>
<link rel="stylesheet" href="../../../_static/console-tabs.css" type="text/css" />
  </head><body>

    <div class="document">
  <div id="custom-doc" class="yui-t6">
    <div id="hd">
      <h1><a href="../../../index.html">Documentation Django 3.1.3.dev</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../../../index.html">Home</a>  |
        <a title="Table of contents" href="../../../contents.html">Table of contents</a>  |
        <a title="Global index" href="../../../genindex.html">Index</a>  |
        <a title="Module index" href="../../../py-modindex.html">Modules</a>
      </div>
      <div class="nav">
    &laquo; <a href="working-with-git.html" title="Travailler avec Git et GitHub">previous</a>
     |
    <a href="../../index.html" title="Fonctionnement interne du projet Django" accesskey="U">up</a>
   |
    <a href="../writing-documentation.html" title="Écrire la documentation">next</a> &raquo;</div>
    </div>

    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="internals-contributing-writing-code-javascript">
            
  <div class="section" id="s-javascript">
<span id="javascript"></span><h1>JavaScript<a class="headerlink" href="#javascript" title="Lien permanent vers ce titre">¶</a></h1>
<p>Même si la majorité du code Django est en Python, les applications contribuées <code class="docutils literal notranslate"><span class="pre">admin</span></code> et <code class="docutils literal notranslate"><span class="pre">gis</span></code> contiennent du code JavaScript.</p>
<p>Veuillez respecter ces standards de codage lorsque vous écrivez du code JavaScript destiné à faire partie de Django.</p>
<div class="section" id="s-code-style">
<span id="code-style"></span><h2>Style de code<a class="headerlink" href="#code-style" title="Lien permanent vers ce titre">¶</a></h2>
<ul class="simple">
<li>Veuillez respecter le style d’indentation défini dans le fichier <code class="docutils literal notranslate"><span class="pre">.editorconfig</span></code>. Nous recommandons d’utiliser un éditeur de texte avec prise en charge de <a class="reference external" href="https://editorconfig.org/">EditorConfig</a> pour éviter des problèmes d’indentation et d’espace. La plupart des fichiers JavaScript utilisent 4 espaces pour l’indentation, mais il y a quelques exceptions.</li>
<li>Lors du nommage des variables, utilisez la notation <code class="docutils literal notranslate"><span class="pre">camelCase</span></code> plutôt que la <code class="docutils literal notranslate"><span class="pre">séparation_par_soulignement</span></code>. Il peut arriver que certains fichiers JavaScript utilisent un style de code différent. Merci de vous conformer au style de code de chaque fichier.</li>
<li>Utilisez le vérificateur de code <a class="reference external" href="https://eslint.org/">ESLint</a> pour contrôler si votre code contient des bogues ou des erreurs de style. ESLint est lancé en même temps que les tests JavaScript. Nous recommandons également d’installer un greffon ESLint dans votre éditeur de texte.</li>
<li>Lorsque c’est possible, écrivez du code qui fonctionnera même si la structure de la page est modifiée plus tard par du JavaScript. Par exemple, lors de l’inscription d’une fonction de clic, écrivez <code class="docutils literal notranslate"><span class="pre">$('body').on('click',</span> <span class="pre">sélecteur,</span> <span class="pre">fonction)</span></code> plutôt que <code class="docutils literal notranslate"><span class="pre">$(sélecteur).click(fonction)</span></code>. Cela simplifie l’extension du comportement par défaut de Django avec JavaScript par d’autres projets.</li>
</ul>
</div>
<div class="section" id="s-javascript-patches">
<span id="s-id1"></span><span id="javascript-patches"></span><span id="id1"></span><h2>Correctifs JavaScript<a class="headerlink" href="#javascript-patches" title="Lien permanent vers ce titre">¶</a></h2>
<p>Django’s admin system leverages the jQuery framework to increase the
capabilities of the admin interface. In conjunction, there is an emphasis on
admin JavaScript performance and minimizing overall admin media file size.
Serving compressed or «&nbsp;minified&nbsp;» versions of JavaScript files is considered
best practice in this regard.</p>
<p>To that end, patches for JavaScript files should include both the original
code for future development (e.g. <code class="docutils literal notranslate"><span class="pre">foo.js</span></code>), and a compressed version for
production use (e.g. <code class="docutils literal notranslate"><span class="pre">foo.min.js</span></code>). Any links to the file in the codebase
should point to the compressed version.</p>
<div class="section" id="s-compressing-javascript">
<span id="compressing-javascript"></span><h3>Compressing JavaScript<a class="headerlink" href="#compressing-javascript" title="Lien permanent vers ce titre">¶</a></h3>
<p>Pour simplifier le processus de mise à disposition de code JavaScript optimisé, Django contient un script Python utile pour créer une version « minifiée ». Pour le lancer :</p>
<div class="console-block" id="console-block-0">
<input class="c-tab-unix" id="c-tab-0-unix" type="radio" name="console-0" checked>
<label for="c-tab-0-unix" title="Linux/macOS">&#xf17c/&#xf179</label>
<input class="c-tab-win" id="c-tab-0-win" type="radio" name="console-0">
<label for="c-tab-0-win" title="Windows">&#xf17a</label>
<section class="c-content-unix" id="c-content-0-unix">
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> python django/contrib/admin/bin/compress.py
</pre></div>
</div>
</section>
<section class="c-content-win" id="c-content-0-win">
<div class="highlight"><pre><span></span><span class="gp">...\&gt;</span> py django\contrib\admin\bin\compress.py
</pre></div>
</section>
</div>
<p>En arrière-plan, <code class="docutils literal notranslate"><span class="pre">compress.py</span></code> est une interface au <a class="reference external" href="https://developers.google.com/closure/compiler/">compilateur Closure</a> de Google, lui-même écrit en Java. La bibliothèque de compilation Closure n’est pas livrée avec Django, mais sera automatiquement installée par <code class="docutils literal notranslate"><span class="pre">npm</span></code>. La bibliothèque de compilation Closure nécessite <a class="reference external" href="https://www.java.com">Java</a> 7 ou plus récent.</p>
<p>Merci de ne pas oublier de lancer <code class="docutils literal notranslate"><span class="pre">compress.py</span></code> et d’inclure le <code class="docutils literal notranslate"><span class="pre">diff</span></code> des scripts minifiés lorsque vous soumettez des correctifs de JavaScript pour Django.</p>
</div>
</div>
<div class="section" id="s-javascript-tests">
<span id="s-id2"></span><span id="javascript-tests"></span><span id="id2"></span><h2>Tests JavaScript<a class="headerlink" href="#javascript-tests" title="Lien permanent vers ce titre">¶</a></h2>
<p>Les tests JavaScript de Django peuvent être lancés dans un navigateur ou à partir de la ligne de commande. Les tests sont situés dans un répertoire <code class="docutils literal notranslate"><span class="pre">js_tests</span></code> au premier niveau.</p>
<div class="section" id="s-writing-tests">
<span id="writing-tests"></span><h3>Écriture de tests<a class="headerlink" href="#writing-tests" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les tests JavaScript de Django utilisent <a class="reference external" href="https://qunitjs.com/">QUnit</a>. Voici un exemple de module de test :</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">QUnit</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;magicTricks&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">beforeEach</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kr">const</span> <span class="nx">$</span> <span class="o">=</span> <span class="nx">django</span><span class="p">.</span><span class="nx">jQuery</span><span class="p">;</span>
        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#qunit-fixture&#39;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;&lt;button class=&quot;button&quot;&gt;&lt;/button&gt;&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="nx">QUnit</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="s1">&#39;removeOnClick removes button on click&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">assert</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">$</span> <span class="o">=</span> <span class="nx">django</span><span class="p">.</span><span class="nx">jQuery</span><span class="p">;</span>
    <span class="nx">removeOnClick</span><span class="p">(</span><span class="s1">&#39;.button&#39;</span><span class="p">);</span>
    <span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.button&#39;</span><span class="p">).</span><span class="nx">length</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.button&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">();</span>
    <span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.button&#39;</span><span class="p">).</span><span class="nx">length</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">QUnit</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="s1">&#39;copyOnClick adds button on click&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">assert</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">$</span> <span class="o">=</span> <span class="nx">django</span><span class="p">.</span><span class="nx">jQuery</span><span class="p">;</span>
    <span class="nx">copyOnClick</span><span class="p">(</span><span class="s1">&#39;.button&#39;</span><span class="p">);</span>
    <span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.button&#39;</span><span class="p">).</span><span class="nx">length</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.button&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">();</span>
    <span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.button&#39;</span><span class="p">).</span><span class="nx">length</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Consultez la documentation de QUnit pour des informations sur les types d”<a class="reference external" href="https://api.qunitjs.com/assert/">assertions prises en charge par QUnit</a>.</p>
</div>
<div class="section" id="s-running-tests">
<span id="running-tests"></span><h3>Lancement des tests<a class="headerlink" href="#running-tests" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les tests JavaScript peuvent être lancés à partir d’un navigateur Web ou de la ligne de commande.</p>
<div class="section" id="s-testing-from-a-web-browser">
<span id="testing-from-a-web-browser"></span><h4>Tests à partir d’un navigateur Web<a class="headerlink" href="#testing-from-a-web-browser" title="Lien permanent vers ce titre">¶</a></h4>
<p>Pour lancer les tests à partir d’un navigateur Web, ouvrez <code class="docutils literal notranslate"><span class="pre">js_tests/tests.html</span></code> dans votre navigateur.</p>
<p>Pour mesure la couverture de code lors de l’exécution des tests, vous devez afficher ce fichier par HTTP. Pour voir la couverture de code :</p>
<ul class="simple">
<li>Exécutez <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">http.server</span></code> à partir du répertoire racine (pas depuis le répertoire <code class="docutils literal notranslate"><span class="pre">js_tests</span></code>).</li>
<li>Ouvrez <a class="reference external" href="http://localhost:8000/js_tests/tests.html">http://localhost:8000/js_tests/tests.html</a> dans votre navigateur Web.</li>
</ul>
</div>
<div class="section" id="s-testing-from-the-command-line">
<span id="testing-from-the-command-line"></span><h4>Tests à partir de la ligne de commande<a class="headerlink" href="#testing-from-the-command-line" title="Lien permanent vers ce titre">¶</a></h4>
<p>Pour lancer les tests à partir de la ligne de commande, il est nécessaire que <a class="reference external" href="https://nodejs.org/">Node.js</a> soit installé.</p>
<p>Après l’installation de <code class="docutils literal notranslate"><span class="pre">Node.js</span></code>, installez les dépendances de tests JavaScript en exécutant ce qui suit à partir de la racine du dépôt Django :</p>
<div class="console-block" id="console-block-1">
<input class="c-tab-unix" id="c-tab-1-unix" type="radio" name="console-1" checked>
<label for="c-tab-1-unix" title="Linux/macOS">&#xf17c/&#xf179</label>
<input class="c-tab-win" id="c-tab-1-win" type="radio" name="console-1">
<label for="c-tab-1-win" title="Windows">&#xf17a</label>
<section class="c-content-unix" id="c-content-1-unix">
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> npm install
</pre></div>
</div>
</section>
<section class="c-content-win" id="c-content-1-win">
<div class="highlight"><pre><span></span><span class="gp">...\&gt;</span> npm install
</pre></div>
</section>
</div>
<p>Puis, lancez les tests avec :</p>
<div class="console-block" id="console-block-2">
<input class="c-tab-unix" id="c-tab-2-unix" type="radio" name="console-2" checked>
<label for="c-tab-2-unix" title="Linux/macOS">&#xf17c/&#xf179</label>
<input class="c-tab-win" id="c-tab-2-win" type="radio" name="console-2">
<label for="c-tab-2-win" title="Windows">&#xf17a</label>
<section class="c-content-unix" id="c-content-2-unix">
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> npm <span class="nb">test</span>
</pre></div>
</div>
</section>
<section class="c-content-win" id="c-content-2-win">
<div class="highlight"><pre><span></span><span class="gp">...\&gt;</span> npm test
</pre></div>
</section>
</div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../../contents.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">JavaScript</a><ul>
<li><a class="reference internal" href="#code-style">Style de code</a></li>
<li><a class="reference internal" href="#javascript-patches">Correctifs JavaScript</a><ul>
<li><a class="reference internal" href="#compressing-javascript">Compressing JavaScript</a></li>
</ul>
</li>
<li><a class="reference internal" href="#javascript-tests">Tests JavaScript</a><ul>
<li><a class="reference internal" href="#writing-tests">Écriture de tests</a></li>
<li><a class="reference internal" href="#running-tests">Lancement des tests</a><ul>
<li><a class="reference internal" href="#testing-from-a-web-browser">Tests à partir d’un navigateur Web</a></li>
<li><a class="reference internal" href="#testing-from-the-command-line">Tests à partir de la ligne de commande</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Sujet précédent</h4>
  <p class="topless"><a href="working-with-git.html"
                        title="Chapitre précédent">Travailler avec Git et GitHub</a></p>
  <h4>Sujet suivant</h4>
  <p class="topless"><a href="../writing-documentation.html"
                        title="Chapitre suivant">Écrire la documentation</a></p>
  <div role="note" aria-label="source link">
    <h3>Cette page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/internals/contributing/writing-code/javascript.txt"
            rel="nofollow">Montrer le code source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Recherche rapide</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
              <h3>Last update:</h3>
              <p class="topless">oct. 29, 2020</p>
          </div>
        
      
    </div>

    <div id="ft">
      <div class="nav">
    &laquo; <a href="working-with-git.html" title="Travailler avec Git et GitHub">previous</a>
     |
    <a href="../../index.html" title="Fonctionnement interne du projet Django" accesskey="U">up</a>
   |
    <a href="../writing-documentation.html" title="Écrire la documentation">next</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>