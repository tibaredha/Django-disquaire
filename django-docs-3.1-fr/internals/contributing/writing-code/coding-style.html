
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Style de code &#8212; Documentation Django 3.1.3.dev</title>
    <link rel="stylesheet" href="../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../../_static/translations.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Recherche" href="../../../search.html" />
    <link rel="next" title="Les tests unitaires" href="unit-tests.html" />
    <link rel="prev" title="Écriture du code" href="index.html" />



 
<script src="../../../templatebuiltins.js"></script>
<script>
(function($) {
    if (!django_template_builtins) {
       // templatebuiltins.js missing, do nothing.
       return;
    }
    $(document).ready(function() {
        // Hyperlink Django template tags and filters
        var base = "../../../ref/templates/builtins.html";
        if (base == "#") {
            // Special case for builtins.html itself
            base = "";
        }
        // Tags are keywords, class '.k'
        $("div.highlight\\-html\\+django span.k").each(function(i, elem) {
             var tagname = $(elem).text();
             if ($.inArray(tagname, django_template_builtins.ttags) != -1) {
                 var fragment = tagname.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + tagname + "</a>");
             }
        });
        // Filters are functions, class '.nf'
        $("div.highlight\\-html\\+django span.nf").each(function(i, elem) {
             var filtername = $(elem).text();
             if ($.inArray(filtername, django_template_builtins.tfilters) != -1) {
                 var fragment = filtername.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + filtername + "</a>");
             }
        });
    });
})(jQuery);(function($) {
    $(document).ready(function() {
        $(".c-tab-unix").on("click", function() {
            $("section.c-content-unix").show();
            $("section.c-content-win").hide();
            $(".c-tab-unix").prop("checked", true);
        });
        $(".c-tab-win").on("click", function() {
            $("section.c-content-win").show();
            $("section.c-content-unix").hide();
            $(".c-tab-win").prop("checked", true);
        });
    });
})(jQuery);</script>
<link rel="stylesheet" href="../../../_static/console-tabs.css" type="text/css" />
  </head><body>

    <div class="document">
  <div id="custom-doc" class="yui-t6">
    <div id="hd">
      <h1><a href="../../../index.html">Documentation Django 3.1.3.dev</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../../../index.html">Home</a>  |
        <a title="Table of contents" href="../../../contents.html">Table of contents</a>  |
        <a title="Global index" href="../../../genindex.html">Index</a>  |
        <a title="Module index" href="../../../py-modindex.html">Modules</a>
      </div>
      <div class="nav">
    &laquo; <a href="index.html" title="Écriture du code">previous</a>
     |
    <a href="../../index.html" title="Fonctionnement interne du projet Django" accesskey="U">up</a>
   |
    <a href="unit-tests.html" title="Les tests unitaires">next</a> &raquo;</div>
    </div>

    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="internals-contributing-writing-code-coding-style">
            
  <div class="section" id="s-coding-style">
<span id="coding-style"></span><h1>Style de code<a class="headerlink" href="#coding-style" title="Lien permanent vers ce titre">¶</a></h1>
<p>Veuillez respecter ces standards de codage lorsque vous écrivez du code destiné à faire partie de Django.</p>
<div class="section" id="s-python-style">
<span id="s-coding-style-python"></span><span id="python-style"></span><span id="coding-style-python"></span><h2>Style Python<a class="headerlink" href="#python-style" title="Lien permanent vers ce titre">¶</a></h2>
<ul>
<li><p class="first">Veuillez respecter le style d’indentation défini dans le fichier <code class="docutils literal notranslate"><span class="pre">.editorconfig</span></code>. Nous recommandons d’utiliser un éditeur de texte avec prise en charge de <a class="reference external" href="https://editorconfig.org/">EditorConfig</a> pour éviter des problèmes d’indentation et d’espace. Les fichiers Python utilisent 4 espaces pour l’indentation et les fichiers HTML 2 espaces.</p>
</li>
<li><p class="first">Sauf exception particulière, suivez les recommandations <span class="target" id="index-10"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0008"><strong>PEP 8</strong></a>.</p>
<p>Utilisez <a class="reference external" href="https://pypi.org/project/flake8/">flake8</a> pour détecter les problèmes de ce genre. Notez que notre fichier <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code> contient une exclusion de certains fichiers (modules obsolètes qu’il serait inutile de corriger et certains codes d’origine externe que Django incorpore), ainsi que l’exclusion de certains contrôles d’erreurs que nous ne considérons pas comme des violations graves. Souvenez-vous que <span class="target" id="index-11"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0008"><strong>PEP 8</strong></a>  n’est qu’un guide, le respect du style du code environnant est l’objectif principal.</p>
<p>An exception to <span class="target" id="index-2"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0008"><strong>PEP 8</strong></a> is our rules on line lengths. Don’t limit lines of
code to 79 characters if it means the code looks significantly uglier or is
harder to read. We allow up to 119 characters as this is the width of GitHub
code review; anything longer requires horizontal scrolling which makes review
more difficult. This check is included when you run <code class="docutils literal notranslate"><span class="pre">flake8</span></code>. Documentation,
comments, and docstrings should be wrapped at 79 characters, even though
<span class="target" id="index-3"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0008"><strong>PEP 8</strong></a> suggests 72.</p>
</li>
<li><p class="first">Utilisez 4 espaces pour l’indentation.</p>
</li>
<li><p class="first">Utilisez l’indentation pendante de quatre espaces plutôt que l’alignement vertical</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span>
    <span class="s1">&#39;Here is a multiline error message &#39;</span>
    <span class="s1">&#39;shortened for clarity.&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Au lieu de&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s1">&#39;Here is a multiline error message &#39;</span>
                     <span class="s1">&#39;shortened for clarity.&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Cela améliore l’utilisation de l’espace et évite de devoir changer l’alignement des chaînes quand la longueur de la première ligne change.</p>
</li>
<li><p class="first">Utilisez des guillemets simples pour les chaînes, ou des guillemet doubles si la chaîne contient elle-même un guillemet simple. Ne perdez pas de temps à réarranger du code existant non lié à la modification en cours pour se conformer à ce style.</p>
</li>
<li><p class="first">String variable interpolation may use
<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#old-string-formatting" title="(disponible dans Python v3.9)"><span class="xref std std-ref">%-formatting</span></a>, <a class="reference external" href="https://docs.python.org/3/reference/lexical_analysis.html#f-strings" title="(disponible dans Python v3.9)"><span class="xref std std-ref">f-strings</span></a>, or <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str.format" title="(disponible dans Python v3.9)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">str.format()</span></code></a> as appropriate, with the goal of
maximizing code readability.</p>
<p>Final judgments of readability are left to the Merger’s discretion. As a
guide, f-strings should use only plain variable and property access, with
prior local variable assignment for more complex cases:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Allowed</span>
<span class="n">f</span><span class="s1">&#39;hello </span><span class="si">{user}</span><span class="s1">&#39;</span>
<span class="n">f</span><span class="s1">&#39;hello </span><span class="si">{user.name}</span><span class="s1">&#39;</span>
<span class="n">f</span><span class="s1">&#39;hello </span><span class="si">{self.user.name}</span><span class="s1">&#39;</span>

<span class="c1"># Disallowed</span>
<span class="n">f</span><span class="s1">&#39;hello {get_user()}&#39;</span>
<span class="n">f</span><span class="s1">&#39;you are {user.age * 365.25} days old&#39;</span>

<span class="c1"># Allowed with local variable assignment</span>
<span class="n">user</span> <span class="o">=</span> <span class="n">get_user</span><span class="p">()</span>
<span class="n">f</span><span class="s1">&#39;hello </span><span class="si">{user}</span><span class="s1">&#39;</span>
<span class="n">user_days_old</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">age</span> <span class="o">*</span> <span class="mf">365.25</span>
<span class="n">f</span><span class="s1">&#39;you are </span><span class="si">{user_days_old}</span><span class="s1"> days old&#39;</span>
</pre></div>
</div>
<p>f-strings should not be used for any string that may require translation,
including error and logging messages. In general <code class="docutils literal notranslate"><span class="pre">format()</span></code> is more
verbose, so the other formatting methods are preferred.</p>
<p>Don’t waste time doing unrelated refactoring of existing code to adjust the
formatting method.</p>
</li>
<li><p class="first">Évitez l’utilisation de « we » dans les commentaires, par ex. « Loop over » plutôt que « We loop over ».</p>
</li>
<li><p class="first">Utilisez les soulignements, pas la CasseChameau, pour les noms de variables, de fonctions et de méthodes (par ex. <code class="docutils literal notranslate"><span class="pre">poll.get_unique_voters()</span></code> au lieu de <code class="docutils literal notranslate"><span class="pre">poll.getUniqueVoters()</span></code>).</p>
</li>
<li><p class="first">Utilisez la <code class="docutils literal notranslate"><span class="pre">CasseChameau</span></code> pour les noms de classes (ou pour les fonctions fabriques qui renvoient des classes).</p>
</li>
<li><p class="first">Dans les chaînes de documentation (docstring), suivez le style des chaînes existantes ainsi que <span class="target" id="index-12"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0257"><strong>PEP 257</strong></a>.</p>
</li>
<li><p class="first">Dans les tests, utilisez <a class="reference internal" href="../../../topics/testing/tools.html#django.test.SimpleTestCase.assertRaisesMessage" title="django.test.SimpleTestCase.assertRaisesMessage"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertRaisesMessage()</span></code></a> et <a class="reference internal" href="../../../topics/testing/tools.html#django.test.SimpleTestCase.assertWarnsMessage" title="django.test.SimpleTestCase.assertWarnsMessage"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertWarnsMessage()</span></code></a> au lieu de <a class="reference external" href="https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertRaises" title="(disponible dans Python v3.9)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertRaises()</span></code></a> et <a class="reference external" href="https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertWarns" title="(disponible dans Python v3.9)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertWarns()</span></code></a> afin de pouvoir contrôler le message d’exception ou d’avertissement. N’utilisez <a class="reference external" href="https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertRaisesRegex" title="(disponible dans Python v3.9)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertRaisesRegex()</span></code></a> et <a class="reference external" href="https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertWarnsRegex" title="(disponible dans Python v3.9)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertWarnsRegex()</span></code></a> que si vous avez besoin de la correspondance par expression régulière.</p>
<p>Utilisez <a class="reference external" href="https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertIs" title="(disponible dans Python v3.9)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertIs(…,</span> <span class="pre">True/False)</span></code></a> pour tester les valeurs booléennes, plutôt que <a class="reference external" href="https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertTrue" title="(disponible dans Python v3.9)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertTrue()</span></code></a> et <a class="reference external" href="https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertFalse" title="(disponible dans Python v3.9)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertFalse()</span></code></a>, car cela vous permet de contrôler la valeur booléenne exacte et pas seulement le résultat booléen de l’évaluation de l’expression.</p>
</li>
<li><p class="first">Dans les chaînes de documentation des tests, exprimez le comportement attendu tel que démontré par chaque test. N’incluez pas de préambules tels que « Tests that » ou « Ensures that ».</p>
<p>Réservez les références aux tickets pour les problèmes obscurs où le ticket dispose de détails supplémentaires ne pouvant pas être facilement décrits dans les chaînes de documentation ou les commentaires. Incluez alors le numéro de ticket à la fin d’une phrase comme ceci</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_foo</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A test docstring looks like this (#123456).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="o">...</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="s-imports">
<span id="s-coding-style-imports"></span><span id="imports"></span><span id="coding-style-imports"></span><h2>Importations<a class="headerlink" href="#imports" title="Lien permanent vers ce titre">¶</a></h2>
<ul>
<li><p class="first">Utilisez <a class="reference external" href="https://github.com/timothycrosley/isort#readme">isort</a> pour automatiser le tri des importations en suivant les directives ci-dessous.</p>
<p>Pour faire vite :</p>
<div class="console-block" id="console-block-0">
<input class="c-tab-unix" id="c-tab-0-unix" type="radio" name="console-0" checked>
<label for="c-tab-0-unix" title="Linux/macOS">&#xf17c/&#xf179</label>
<input class="c-tab-win" id="c-tab-0-win" type="radio" name="console-0">
<label for="c-tab-0-win" title="Windows">&#xf17a</label>
<section class="c-content-unix" id="c-content-0-unix">
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> python -m pip install isort &gt;<span class="o">=</span> <span class="m">5</span>.1.0
<span class="gp">$</span> isort -rc .
</pre></div>
</div>
</section>
<section class="c-content-win" id="c-content-0-win">
<div class="highlight"><pre><span></span><span class="gp">...\&gt;</span> py -m pip install isort <span class="p">&gt;</span>= 5.1.0
<span class="gp">...\&gt;</span> isort -rc .
</pre></div>
</section>
</div>
<p>Ceci exécute <code class="docutils literal notranslate"><span class="pre">isort</span></code> de manière récursive à partir du répertoire courant, en modifiant tout fichier ne se conformant pas aux directives. S’il est nécessaire d’avoir des importations non triées (par exemple pour éviter une importation circulaire), utilisez un commentaire comme ceci</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">module</span>  <span class="c1"># isort:skip</span>
</pre></div>
</div>
</li>
<li><p class="first">Placez les importations dans ces groupes :: futur, bibliothèque standard, bibliothèques tierces, autres composants Django, composant Django local, instructions try/except. Trier les lignes de chaque groupe dans l’ordre alphabétique selon le nom complet du module. Dans chaque section, placez toutes les instructions <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">module</span></code> avant celles de type <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">module</span> <span class="pre">import</span> <span class="pre">objects</span></code>. Utilisez des importations absolues pour les autres composants Django et des importations relatives pour les composants locaux.</p>
</li>
<li><p class="first">Sur chaque ligne, triez les éléments par ordre alphabétique en groupant les noms avec majuscule avant les noms avec minuscule.</p>
</li>
<li><p class="first">Séparez les longues lignes par des parenthèses et indentez les lignes de continuation par 4 espaces. Ajoutez une virgule finale après la dernière importation et placez la parenthèse fermante sur sa propre ligne.</p>
<p>Placez une seule ligne vierge entre la dernière importation et tout code de niveau module, et placez deux lignes vierges au-dessus de la première fonction ou classe.</p>
<p>Par exemple (les commentaires ne sont qu’à titre informatif) :</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">django/contrib/admin/example.py</span><a class="headerlink" href="#id1" title="Lien permanent vers ce code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># future</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">unicode_literals</span>

<span class="c1"># standard library</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">chain</span>

<span class="c1"># third-party</span>
<span class="kn">import</span> <span class="nn">bcrypt</span>

<span class="c1"># Django</span>
<span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">Http404</span>
<span class="kn">from</span> <span class="nn">django.http.response</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">Http404</span><span class="p">,</span> <span class="n">HttpResponse</span><span class="p">,</span> <span class="n">HttpResponseNotAllowed</span><span class="p">,</span> <span class="n">StreamingHttpResponse</span><span class="p">,</span>
    <span class="n">cookie</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># local Django</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">LogEntry</span>

<span class="c1"># try/except</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">yaml</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="n">yaml</span> <span class="o">=</span> <span class="bp">None</span>

<span class="n">CONSTANT</span> <span class="o">=</span> <span class="s1">&#39;foo&#39;</span>


<span class="k">class</span> <span class="nc">Example</span><span class="p">:</span>
    <span class="c1"># ...</span>
</pre></div>
</div>
</div>
</li>
<li><p class="first">Utilisez des importations les plus directes possibles quand elles sont disponibles</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.views</span> <span class="k">import</span> <span class="n">View</span>
</pre></div>
</div>
<p>au lieu de</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.views.generic.base</span> <span class="k">import</span> <span class="n">View</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="s-template-style">
<span id="template-style"></span><h2>Style des gabarits<a class="headerlink" href="#template-style" title="Lien permanent vers ce titre">¶</a></h2>
<ul>
<li><p class="first">Dans le code des gabarits Django, placez un et un seul espace entre les accolades et le contenu des balises.</p>
<p>Faites :</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">foo</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>Ne faites pas&nbsp;:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span><span class="nv">foo</span><span class="cp">}}</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="s-view-style">
<span id="view-style"></span><h2>Style des vues<a class="headerlink" href="#view-style" title="Lien permanent vers ce titre">¶</a></h2>
<ul>
<li><p class="first">Dans les vues de Django, le premier paramètre d’une vue fonction devrait s’appeler <code class="docutils literal notranslate"><span class="pre">request</span></code>.</p>
<p>Faites</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_view</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">foo</span><span class="p">):</span>
    <span class="c1"># ...</span>
</pre></div>
</div>
<p>Ne faites pas&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_view</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="n">foo</span><span class="p">):</span>
    <span class="c1"># ...</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="s-model-style">
<span id="model-style"></span><h2>Style des modèles<a class="headerlink" href="#model-style" title="Lien permanent vers ce titre">¶</a></h2>
<ul>
<li><p class="first">Les noms de champs devraient être tout en minuscules, en utilisant des soulignements au lieu du StyleChameau.</p>
<p>Faites</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">first_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
    <span class="n">last_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
</pre></div>
</div>
<p>Ne faites pas&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">FirstName</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
    <span class="n">Last_Name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">La <code class="docutils literal notranslate"><span class="pre">class</span> <span class="pre">Meta</span></code> doit apparaître <em>après</em> les définitions de champs, avec une seule ligne vierge séparant les champs de la définition de classe.</p>
<p>Faites</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">first_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
    <span class="n">last_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s1">&#39;people&#39;</span>
</pre></div>
</div>
<p>Ne faites pas&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">first_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
    <span class="n">last_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s1">&#39;people&#39;</span>
</pre></div>
</div>
<p>Ne faites pas ça non plus :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s1">&#39;people&#39;</span>

    <span class="n">first_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
    <span class="n">last_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">L’ordre des classes internes de modèles et des méthodes standards doit être le suivant (notez qu’elles ne sont pas toutes obligatoires) :</p>
<ul class="simple">
<li>Tous les champs de la base de données</li>
<li>Attributs des gestionnaires personnalisés</li>
<li><code class="docutils literal notranslate"><span class="pre">class</span> <span class="pre">Meta</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">__str__()</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">save()</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">get_absolute_url()</span></code></li>
<li>Toute autre méthode personnalisée</li>
</ul>
</li>
<li><p class="first">Si <code class="docutils literal notranslate"><span class="pre">choices</span></code> est défini pour un champ de modèle, définissez chaque choix sous forme de liste de tuples, avec un nom tout en majuscules comme attribut de classe du modèle. Exemple</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">DIRECTION_UP</span> <span class="o">=</span> <span class="s1">&#39;U&#39;</span>
    <span class="n">DIRECTION_DOWN</span> <span class="o">=</span> <span class="s1">&#39;D&#39;</span>
    <span class="n">DIRECTION_CHOICES</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="n">DIRECTION_UP</span><span class="p">,</span> <span class="s1">&#39;Up&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">DIRECTION_DOWN</span><span class="p">,</span> <span class="s1">&#39;Down&#39;</span><span class="p">),</span>
    <span class="p">]</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="s-use-of-django-conf-settings">
<span id="use-of-django-conf-settings"></span><h2>Utilisation de <code class="docutils literal notranslate"><span class="pre">django.conf.settings</span></code><a class="headerlink" href="#use-of-django-conf-settings" title="Lien permanent vers ce titre">¶</a></h2>
<p>Les modules ne devraient généralement pas utiliser des réglages stockés dans <code class="docutils literal notranslate"><span class="pre">django.conf.settings</span></code> à leur premier niveau (c’est-à-dire évalués au moment de l’importation du module). Voici pourquoi :</p>
<p>La configuration manuelle des réglages (qui ne dépend pas de la variable d’environnement <span class="target" id="index-13"></span><a class="reference internal" href="../../../topics/settings.html#envvar-DJANGO_SETTINGS_MODULE"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">DJANGO_SETTINGS_MODULE</span></code></a>) est autorisée et possible comme ceci</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.conf</span> <span class="k">import</span> <span class="n">settings</span>

<span class="n">settings</span><span class="o">.</span><span class="n">configure</span><span class="p">({},</span> <span class="n">SOME_SETTING</span><span class="o">=</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Cependant, si un réglage est accédé avant la ligne <code class="docutils literal notranslate"><span class="pre">settings.configure</span></code>, ceci ne fonctionnera pas (en interne, <code class="docutils literal notranslate"><span class="pre">settings</span></code> est un <code class="docutils literal notranslate"><span class="pre">LazyObject</span></code> qui se configure automatiquement au moment où on accède aux réglages si ce n’est pas encore fait).</p>
<p>Ainsi, si un module contient du code tel que celui-ci</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.conf</span> <span class="k">import</span> <span class="n">settings</span>
<span class="kn">from</span> <span class="nn">django.urls</span> <span class="k">import</span> <span class="n">get_callable</span>

<span class="n">default_foo_view</span> <span class="o">=</span> <span class="n">get_callable</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">FOO_VIEW</span><span class="p">)</span>
</pre></div>
</div>
<p>…alors l’importation de ce module provoquera la configuration de l’objet <code class="docutils literal notranslate"><span class="pre">settings</span></code>. Cela signifie que la capacité d’importer le module au premier niveau à partir de code externe est incompatible avec la possibilité de configurer manuellement l’objet <code class="docutils literal notranslate"><span class="pre">settings</span></code>, ou cela le rend très difficile dans certaines circonstances.</p>
<p>Au lieu du code ci-dessus, un niveau de diffèrement ou d’indirection doit être ajouté, tel que <code class="docutils literal notranslate"><span class="pre">django.utils.functional.LazyObject</span></code>, <code class="docutils literal notranslate"><span class="pre">django.utils.functional.lazy()</span></code> ou <code class="docutils literal notranslate"><span class="pre">lambda</span></code>.</p>
</div>
<div class="section" id="s-miscellaneous">
<span id="miscellaneous"></span><h2>Divers<a class="headerlink" href="#miscellaneous" title="Lien permanent vers ce titre">¶</a></h2>
<ul class="simple">
<li>Marquez toutes les chaînes à traduire ; voir la  <a class="reference internal" href="../../../topics/i18n/index.html"><span class="doc">documentation i18n</span></a> pour plus de détails.</li>
<li>Supprimez les instructions <code class="docutils literal notranslate"><span class="pre">import</span></code> qui ne sont plus utilisées lorsque vous modifiez du code. <a class="reference external" href="https://pypi.org/project/flake8/">flake8</a> peut identifier ces importations à votre place. Si une importation inutilisée doit rester pour garantir une compatibilité, placez un commentaire <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">NOQA</span></code> à la fin de la ligne pour indiquer à <code class="docutils literal notranslate"><span class="pre">flake8</span></code> de rester silencieux.</li>
<li>Supprimez systématiquement tout espace vide en fin de ligne dans le code car ils ajoutent des caractères inutilement, présentent un encombrement visuel dans les correctifs et peuvent aussi provoquer occasionnellement des conflits de fusion inutiles. Certains environnements de développement peuvent être configurés pour les supprimer automatiquement et les plupart des outils de gestion de version peuvent être réglés pour les mettre en évidence dans les affichages de différences.</li>
<li>N’écrivez pas votre nom dans le code que vous produisez. Notre politique est de placer les noms des contributeurs dans le fichier <code class="docutils literal notranslate"><span class="pre">AUTHORS</span></code> distribué avec Django au lieu de les répartir dans tout le code. Prenez la liberté d’inclure votre nom dans ce fichier <code class="docutils literal notranslate"><span class="pre">AUTHORS</span></code> dans votre correctif si vous faites plus qu’une simple modification triviale.</li>
</ul>
</div>
<div class="section" id="s-javascript-style">
<span id="javascript-style"></span><h2>Style JavaScript<a class="headerlink" href="#javascript-style" title="Lien permanent vers ce titre">¶</a></h2>
<p>Pour plus de détails sur le style de code JavaScript utilisé par Django, consultez <a class="reference internal" href="javascript.html"><span class="doc">JavaScript</span></a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../../contents.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Style de code</a><ul>
<li><a class="reference internal" href="#python-style">Style Python</a></li>
<li><a class="reference internal" href="#imports">Importations</a></li>
<li><a class="reference internal" href="#template-style">Style des gabarits</a></li>
<li><a class="reference internal" href="#view-style">Style des vues</a></li>
<li><a class="reference internal" href="#model-style">Style des modèles</a></li>
<li><a class="reference internal" href="#use-of-django-conf-settings">Utilisation de <code class="docutils literal notranslate"><span class="pre">django.conf.settings</span></code></a></li>
<li><a class="reference internal" href="#miscellaneous">Divers</a></li>
<li><a class="reference internal" href="#javascript-style">Style JavaScript</a></li>
</ul>
</li>
</ul>

  <h4>Sujet précédent</h4>
  <p class="topless"><a href="index.html"
                        title="Chapitre précédent">Écriture du code</a></p>
  <h4>Sujet suivant</h4>
  <p class="topless"><a href="unit-tests.html"
                        title="Chapitre suivant">Les tests unitaires</a></p>
  <div role="note" aria-label="source link">
    <h3>Cette page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/internals/contributing/writing-code/coding-style.txt"
            rel="nofollow">Montrer le code source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Recherche rapide</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
              <h3>Last update:</h3>
              <p class="topless">oct. 29, 2020</p>
          </div>
        
      
    </div>

    <div id="ft">
      <div class="nav">
    &laquo; <a href="index.html" title="Écriture du code">previous</a>
     |
    <a href="../../index.html" title="Fonctionnement interne du projet Django" accesskey="U">up</a>
   |
    <a href="unit-tests.html" title="Les tests unitaires">next</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>