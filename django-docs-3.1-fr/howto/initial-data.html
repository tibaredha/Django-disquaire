
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Données initiales pour les modèles &#8212; Documentation Django 3.1.3.dev</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="next" title="Intégration de Django avec une base de données existante" href="legacy-databases.html" />
    <link rel="prev" title="Signalement d’erreurs" href="error-reporting.html" />



 
<script src="../templatebuiltins.js"></script>
<script>
(function($) {
    if (!django_template_builtins) {
       // templatebuiltins.js missing, do nothing.
       return;
    }
    $(document).ready(function() {
        // Hyperlink Django template tags and filters
        var base = "../ref/templates/builtins.html";
        if (base == "#") {
            // Special case for builtins.html itself
            base = "";
        }
        // Tags are keywords, class '.k'
        $("div.highlight\\-html\\+django span.k").each(function(i, elem) {
             var tagname = $(elem).text();
             if ($.inArray(tagname, django_template_builtins.ttags) != -1) {
                 var fragment = tagname.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + tagname + "</a>");
             }
        });
        // Filters are functions, class '.nf'
        $("div.highlight\\-html\\+django span.nf").each(function(i, elem) {
             var filtername = $(elem).text();
             if ($.inArray(filtername, django_template_builtins.tfilters) != -1) {
                 var fragment = filtername.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + filtername + "</a>");
             }
        });
    });
})(jQuery);</script>

  </head><body>

    <div class="document">
  <div id="custom-doc" class="yui-t6">
    <div id="hd">
      <h1><a href="../index.html">Documentation Django 3.1.3.dev</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../index.html">Home</a>  |
        <a title="Table of contents" href="../contents.html">Table of contents</a>  |
        <a title="Global index" href="../genindex.html">Index</a>  |
        <a title="Module index" href="../py-modindex.html">Modules</a>
      </div>
      <div class="nav">
    &laquo; <a href="error-reporting.html" title="Signalement d’erreurs">previous</a>
     |
    <a href="index.html" title="Guides pratiques" accesskey="U">up</a>
   |
    <a href="legacy-databases.html" title="Intégration de Django avec une base de données existante">next</a> &raquo;</div>
    </div>

    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="howto-initial-data">
            
  <div class="section" id="s-providing-initial-data-for-models">
<span id="providing-initial-data-for-models"></span><h1>Données initiales pour les modèles<a class="headerlink" href="#providing-initial-data-for-models" title="Lien permanent vers ce titre">¶</a></h1>
<p>Il est parfois utile de pré-remplir la base de données avec des données fixes au moment de la première configuration d’une application. Vous pouvez fournir des données initiales au moyen de migrations ou d’instantanés.</p>
<div class="section" id="s-providing-initial-data-with-migrations">
<span id="providing-initial-data-with-migrations"></span><h2>Données initiales par les migrations<a class="headerlink" href="#providing-initial-data-with-migrations" title="Lien permanent vers ce titre">¶</a></h2>
<p>Si vous souhaitez charger automatiquement des données initiales pour une application, créez une <a class="reference internal" href="../topics/migrations.html#data-migrations"><span class="std std-ref">migration de données</span></a>. Les migrations sont exécutées lors de la mise en place de la base de données, les données y seront donc disponibles, sujettes à <a class="reference internal" href="../topics/testing/overview.html#test-case-serialized-rollback"><span class="std std-ref">certaines restrictions</span></a>.</p>
</div>
<div class="section" id="s-providing-data-with-fixtures">
<span id="s-initial-data-via-fixtures"></span><span id="providing-data-with-fixtures"></span><span id="initial-data-via-fixtures"></span><h2>Ajout de données par des instantanés<a class="headerlink" href="#providing-data-with-fixtures" title="Lien permanent vers ce titre">¶</a></h2>
<p>Il est aussi possible de fournir des données à l’aide d’instantanés. Cependant, ces données ne sont pas chargées automatiquement, sauf si vous utilisez <a class="reference internal" href="../topics/testing/tools.html#django.test.TransactionTestCase.fixtures" title="django.test.TransactionTestCase.fixtures"><code class="xref py py-attr docutils literal notranslate"><span class="pre">TransactionTestCase.fixtures</span></code></a>.</p>
<p>Un instantané (fixture en anglais) est un ensemble de données que Django peut importer dans une base de données. La façon la plus directe de créer un instantané si vous avez déjà les données dans votre base est d’utiliser la commande <a class="reference internal" href="../ref/django-admin.html#django-admin-dumpdata"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">manage.py</span> <span class="pre">dumpdata</span></code></a>. Sinon, vous pouvez aussi créer des instantanés manuellement ; ils peuvent être écrits sous forme de documents JSON, XML ou YAML (si <a class="reference external" href="https://pyyaml.org/">PyYAML</a> est installée). La <a class="reference internal" href="../topics/serialization.html"><span class="doc">documentation sur la sérialisation</span></a> contient plus de détails sur chacun de ces <a class="reference internal" href="../topics/serialization.html#serialization-formats"><span class="std std-ref">formats de sérialisation</span></a>.</p>
<p>Comme exemple, voici à quoi pourrait ressembler un instantané pour un modèle <code class="docutils literal notranslate"><span class="pre">Person</span></code> en JSON&nbsp;:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;model&quot;</span><span class="o">:</span> <span class="s2">&quot;myapp.person&quot;</span><span class="p">,</span>
    <span class="s2">&quot;pk&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;fields&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;first_name&quot;</span><span class="o">:</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span>
      <span class="s2">&quot;last_name&quot;</span><span class="o">:</span> <span class="s2">&quot;Lennon&quot;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="s2">&quot;model&quot;</span><span class="o">:</span> <span class="s2">&quot;myapp.person&quot;</span><span class="p">,</span>
    <span class="s2">&quot;pk&quot;</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s2">&quot;fields&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;first_name&quot;</span><span class="o">:</span> <span class="s2">&quot;Paul&quot;</span><span class="p">,</span>
      <span class="s2">&quot;last_name&quot;</span><span class="o">:</span> <span class="s2">&quot;McCartney&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Et voici le même instantané en YAML&nbsp;:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="nt">model</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">myapp.person</span>
  <span class="nt">pk</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
  <span class="nt">fields</span><span class="p">:</span>
    <span class="nt">first_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">John</span>
    <span class="nt">last_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Lennon</span>
<span class="p p-Indicator">-</span> <span class="nt">model</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">myapp.person</span>
  <span class="nt">pk</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
  <span class="nt">fields</span><span class="p">:</span>
    <span class="nt">first_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Paul</span>
    <span class="nt">last_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">McCartney</span>
</pre></div>
</div>
<p>Ces données doivent se trouver dans un répertoire <code class="docutils literal notranslate"><span class="pre">fixtures</span></code> à l’intérieur de votre application.</p>
<p>Il est possible de charger des données en appelant <a class="reference internal" href="../ref/django-admin.html#django-admin-loaddata"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">manage.py</span> <span class="pre">loaddata</span></code></a> <code class="docutils literal notranslate"><span class="pre">&lt;nom_instantané&gt;</span></code>, où <code class="docutils literal notranslate"><span class="pre">&lt;nom_instantané&gt;</span></code> est le nom du fichier instantané que vous avez créé. Lors de chaque lancement de <a class="reference internal" href="../ref/django-admin.html#django-admin-loaddata"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">loaddata</span></code></a>, les données de l’instantané sont lues et rechargées dans la base de données. Notez que cela signifie que si vous modifiez l’un des objets créés par l’instantané et que vous relancez <a class="reference internal" href="../ref/django-admin.html#django-admin-loaddata"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">loaddata</span></code></a>, vous écraserez toute modification effectuée en base de données.</p>
<div class="section" id="s-where-django-finds-fixture-files">
<span id="where-django-finds-fixture-files"></span><h3>Emplacements de recherche des instantanés<a class="headerlink" href="#where-django-finds-fixture-files" title="Lien permanent vers ce titre">¶</a></h3>
<p>Par défaut, Django recherche des instantanés dans un répertoire <code class="docutils literal notranslate"><span class="pre">fixtures</span></code> pour chaque application. Vous pouvez définir le réglage <a class="reference internal" href="../ref/settings.html#std:setting-FIXTURE_DIRS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">FIXTURE_DIRS</span></code></a> à une liste de répertoires supplémentaires dans lesquels Django doit chercher.</p>
<p>Quand vous lancez <a class="reference internal" href="../ref/django-admin.html#django-admin-loaddata"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">manage.py</span> <span class="pre">loaddata</span></code></a>, vous pouvez aussi indiquer un chemin vers un fichier d’instantané, ce qui remplace la recherche dans les répertoires habituels.</p>
<div class="admonition seealso">
<p class="first admonition-title">Voir aussi</p>
<p class="last">Les instantanés sont aussi employés par l”<a class="reference internal" href="../topics/testing/tools.html#topics-testing-fixtures"><span class="std std-ref">infrastructure de test</span></a> pour aider à la préparation d’environnements de tests cohérents.</p>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Données initiales pour les modèles</a><ul>
<li><a class="reference internal" href="#providing-initial-data-with-migrations">Données initiales par les migrations</a></li>
<li><a class="reference internal" href="#providing-data-with-fixtures">Ajout de données par des instantanés</a><ul>
<li><a class="reference internal" href="#where-django-finds-fixture-files">Emplacements de recherche des instantanés</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Sujet précédent</h4>
  <p class="topless"><a href="error-reporting.html"
                        title="Chapitre précédent">Signalement d’erreurs</a></p>
  <h4>Sujet suivant</h4>
  <p class="topless"><a href="legacy-databases.html"
                        title="Chapitre suivant">Intégration de Django avec une base de données existante</a></p>
  <div role="note" aria-label="source link">
    <h3>Cette page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/howto/initial-data.txt"
            rel="nofollow">Montrer le code source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Recherche rapide</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
              <h3>Last update:</h3>
              <p class="topless">oct. 29, 2020</p>
          </div>
        
      
    </div>

    <div id="ft">
      <div class="nav">
    &laquo; <a href="error-reporting.html" title="Signalement d’erreurs">previous</a>
     |
    <a href="index.html" title="Guides pratiques" accesskey="U">up</a>
   |
    <a href="legacy-databases.html" title="Intégration de Django avec une base de données existante">next</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>