
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Notes de publication de Django 3.1 &#8212; Documentation Django 3.1.3.dev</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="next" title="Django 3.0.11 release notes" href="3.0.11.html" />
    <link rel="prev" title="Notes de publication de Django 3.1.1" href="3.1.1.html" />



 
<script src="../templatebuiltins.js"></script>
<script>
(function($) {
    if (!django_template_builtins) {
       // templatebuiltins.js missing, do nothing.
       return;
    }
    $(document).ready(function() {
        // Hyperlink Django template tags and filters
        var base = "../ref/templates/builtins.html";
        if (base == "#") {
            // Special case for builtins.html itself
            base = "";
        }
        // Tags are keywords, class '.k'
        $("div.highlight\\-html\\+django span.k").each(function(i, elem) {
             var tagname = $(elem).text();
             if ($.inArray(tagname, django_template_builtins.ttags) != -1) {
                 var fragment = tagname.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + tagname + "</a>");
             }
        });
        // Filters are functions, class '.nf'
        $("div.highlight\\-html\\+django span.nf").each(function(i, elem) {
             var filtername = $(elem).text();
             if ($.inArray(filtername, django_template_builtins.tfilters) != -1) {
                 var fragment = filtername.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + filtername + "</a>");
             }
        });
    });
})(jQuery);</script>

  </head><body>

    <div class="document">
  <div id="custom-doc" class="yui-t6">
    <div id="hd">
      <h1><a href="../index.html">Documentation Django 3.1.3.dev</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../index.html">Home</a>  |
        <a title="Table of contents" href="../contents.html">Table of contents</a>  |
        <a title="Global index" href="../genindex.html">Index</a>  |
        <a title="Module index" href="../py-modindex.html">Modules</a>
      </div>
      <div class="nav">
    &laquo; <a href="3.1.1.html" title="Notes de publication de Django 3.1.1">previous</a>
     |
    <a href="index.html" title="Notes de publication" accesskey="U">up</a>
   |
    <a href="3.0.11.html" title="Django 3.0.11 release notes">next</a> &raquo;</div>
    </div>

    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="releases-3.1">
            
  <div class="section" id="s-django-3-1-release-notes">
<span id="django-3-1-release-notes"></span><h1>Notes de publication de Django 3.1<a class="headerlink" href="#django-3-1-release-notes" title="Lien permanent vers ce titre">¶</a></h1>
<p><em>4 août 2020</em></p>
<p>Bienvenue dans Django 3.1&nbsp;!</p>
<p>Ces notes de publications couvrent les <a class="reference internal" href="#whats-new-3-1"><span class="std std-ref">nouvelles fonctionnalités</span></a>, ainsi que certaines <a class="reference internal" href="#backwards-incompatible-3-1"><span class="std std-ref">modifications non rétro-compatibles</span></a> dont il faut être au courant lors la mise à jour depuis Django 3.0 ou des versions plus anciennes. Nous avons <a class="reference internal" href="#removed-features-3-1"><span class="std std-ref">abandonné certaines fonctionnalités</span></a> qui ont atteint la fin de leur cycle d’obsolescence et nous avons commencé <a class="reference internal" href="#deprecated-features-3-1"><span class="std std-ref">le processus d’obsolescence de certaines fonctionnalités</span></a>.</p>
<p>Voir le guide <a class="reference internal" href="../howto/upgrade-version.html"><span class="doc">Mise à jour de Django à une version plus récente</span></a> si vous mettez à jour un projet existant.</p>
<div class="section" id="s-python-compatibility">
<span id="python-compatibility"></span><h2>Compatibilité Python<a class="headerlink" href="#python-compatibility" title="Lien permanent vers ce titre">¶</a></h2>
<p>Django 3.1 supports Python 3.6, 3.7, 3.8, and 3.9 (as of 3.1.3). We <strong>highly
recommend</strong> and only officially support the latest release of each series.</p>
</div>
<div class="section" id="s-what-s-new-in-django-3-1">
<span id="s-whats-new-3-1"></span><span id="what-s-new-in-django-3-1"></span><span id="whats-new-3-1"></span><h2>Quoi de neuf dans Django 3.1<a class="headerlink" href="#what-s-new-in-django-3-1" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="s-asynchronous-views-and-middleware-support">
<span id="asynchronous-views-and-middleware-support"></span><h3>Prise en charge des vues et intergiciels asynchrones<a class="headerlink" href="#asynchronous-views-and-middleware-support" title="Lien permanent vers ce titre">¶</a></h3>
<p>Django prend dorénavant en charge un chemin de requête pleinement asynchrone, y compris :</p>
<ul class="simple">
<li>des <a class="reference internal" href="../topics/http/views.html#async-views"><span class="std std-ref">vues asynchrones</span></a></li>
<li>des <a class="reference internal" href="../topics/http/middleware.html#async-middleware"><span class="std std-ref">intergiciels asynchrones</span></a></li>
<li>des <a class="reference internal" href="../topics/testing/tools.html#async-tests"><span class="std std-ref">tests et un client de test asynchrones</span></a></li>
</ul>
<p>Pour débuter avec des vues asynchrones, vous devez déclarer une vue avec <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">def</span> <span class="nf">my_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s1">&#39;Hello, async world!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Toutes les fonctionnalités asynchrones sont prises en charge que vous fonctionniez en mode WSGI ou ASGI. Cependant, en utilisant du code asynchrone en mode WSGI, des limites de performance doivent être attendues. Vous pouvez en apprendre davantage sur ce sujet dans la documentation <a class="reference internal" href="../topics/async.html"><span class="doc">Gestion du code asynchrone</span></a>.</p>
<p>Vous êtes libre de mélanger des vues, intergiciels et tests asynchrones et synchrones autant que vous voulez. Django va s’assurer que vous vous trouviez toujours dans le bon contexte d’exécution. Nous nous attendons à ce que la plupart des projets conservent la majorité de leurs vues synchrones et n’aient qu’une petite partie de leurs vues en mode asynchrone, mais c’est à vous d’en décider.</p>
<p>L’ORM, la couche de cache et d’autres parties du code de Django qui effectuent des appels réseau à longue durée ne gèrent pas encore l’accès asynchrone. Nous espérons ajouter cette prise ne charge dans les prochaines publications. Les vues asynchrones sont idéales quand vous effectuez beaucoup d’appels d’API ou de requêtes HTTP dans vos vues. Il est maintenant possible d’effectuer tous ces appels HTTP nativement en parallèle pour augmenter considérablement la vitesse d’exécution de vos vues.</p>
<p>La prise ne charge de code asynchrone devrait être entièrement rétrocompatible et nous avons tenté de nous assurer qu’il n’y a pas de régression de performance pour le code synchrone existant. Il ne devrait pas y avoir d’effet décelable pour un projet Django existant.</p>
</div>
<div class="section" id="s-jsonfield-for-all-supported-database-backends">
<span id="jsonfield-for-all-supported-database-backends"></span><h3>Champ JSONField pour tous les moteurs de bases de données qui le permetttent<a class="headerlink" href="#jsonfield-for-all-supported-database-backends" title="Lien permanent vers ce titre">¶</a></h3>
<p>Django inclut dorénavant des champs <a class="reference internal" href="../ref/models/fields.html#django.db.models.JSONField" title="django.db.models.JSONField"><code class="xref py py-class docutils literal notranslate"><span class="pre">models.JSONField</span></code></a> et <a class="reference internal" href="../ref/forms/fields.html#django.forms.JSONField" title="django.forms.JSONField"><code class="xref py py-class docutils literal notranslate"><span class="pre">forms.JSONField</span></code></a> qui peuvent être utilisés avec tous les moteurs de base de données qui offrent ce champ. Les deux champs permettent de personnaliser leurs codeur et décodeur JSON. Le champ de modèle gère l’introspection, les <a class="reference internal" href="../topics/db/queries.html#querying-jsonfield"><span class="std std-ref">interrogations et transformations</span></a> qui étaient précédemment disponibles uniquement pour PostgreSQL</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="k">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">ContactInfo</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">JSONField</span><span class="p">()</span>

<span class="n">ContactInfo</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;John&#39;</span><span class="p">,</span>
    <span class="s1">&#39;cities&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;London&#39;</span><span class="p">,</span> <span class="s1">&#39;Cambridge&#39;</span><span class="p">],</span>
    <span class="s1">&#39;pets&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;dogs&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Rufus&#39;</span><span class="p">,</span> <span class="s1">&#39;Meg&#39;</span><span class="p">]},</span>
<span class="p">})</span>
<span class="n">ContactInfo</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
    <span class="n">data__name</span><span class="o">=</span><span class="s1">&#39;John&#39;</span><span class="p">,</span>
    <span class="n">data__pets__has_key</span><span class="o">=</span><span class="s1">&#39;dogs&#39;</span><span class="p">,</span>
    <span class="n">data__cities__contains</span><span class="o">=</span><span class="s1">&#39;London&#39;</span><span class="p">,</span>
<span class="p">)</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>
</div>
<p>Si votre projet utilise <code class="docutils literal notranslate"><span class="pre">django.contrib.postgres.fields.JSONField</span></code> et les champs de formulaires et transformations relatives, vous devriez ajuster les importations pour utiliser les nouveaux champs, puis produire et appliquer une migration de base de données. Pour l’instant, les anciens champs et transformations sont conservés sous forme de références aux nouveaux emplacements et sont <a class="reference internal" href="#deprecated-jsonfield"><span class="std std-ref">marqués comme obsolètes à partir de cette publication</span></a>.</p>
</div>
<div class="section" id="s-default-hashing-algorithm-settings">
<span id="s-default-hashing-algorithm-usage"></span><span id="default-hashing-algorithm-settings"></span><span id="default-hashing-algorithm-usage"></span><h3>Réglage <code class="docutils literal notranslate"><span class="pre">DEFAULT_HASHING_ALGORITHM</span></code><a class="headerlink" href="#default-hashing-algorithm-settings" title="Lien permanent vers ce titre">¶</a></h3>
<p>Le nouveau réglage temporaire <a class="reference internal" href="../ref/settings.html#std:setting-DEFAULT_HASHING_ALGORITHM"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DEFAULT_HASHING_ALGORITHM</span></code></a> permet d’indiquer l’algorithme de hachage par défaut à utiliser pour le codage des cookies, les jetons de réinitialisation de mot de passe du site d’administration, les sessions d’utilisateurs et les signatures créées par <a class="reference internal" href="../topics/signing.html#django.core.signing.Signer" title="django.core.signing.Signer"><code class="xref py py-class docutils literal notranslate"><span class="pre">django.core.signing.Signer</span></code></a> et <a class="reference internal" href="../topics/signing.html#django.core.signing.dumps" title="django.core.signing.dumps"><code class="xref py py-meth docutils literal notranslate"><span class="pre">django.core.signing.dumps()</span></code></a>.</p>
<p>La prise en charge de SHA-256 a été ajoutée dans Django 3.1. Si vous mettez à jour plusieurs instances du même projet vers Django 3.1, vous devriez définir <a class="reference internal" href="../ref/settings.html#std:setting-DEFAULT_HASHING_ALGORITHM"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DEFAULT_HASHING_ALGORITHM</span></code></a> à <code class="docutils literal notranslate"><span class="pre">'sha1'</span></code> durant la transition, afin de rester compatible avec les anciennes versions de Django. Notez que cela exige Django 3.1.1+. Après avoir terminé la transition vers la version 3.1, vous pouvez enlever la surcharge de <a class="reference internal" href="../ref/settings.html#std:setting-DEFAULT_HASHING_ALGORITHM"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DEFAULT_HASHING_ALGORITHM</span></code></a>.</p>
<p>Ce réglage est obsolète dès cette publication, car la prise en charge des jetons, cookies, sessions et signatures utilisant l’algorithme SHA-1 sera supprimée dans Django 4.0.</p>
</div>
<div class="section" id="s-minor-features">
<span id="minor-features"></span><h3>Fonctionnalités mineures<a class="headerlink" href="#minor-features" title="Lien permanent vers ce titre">¶</a></h3>
<div class="section" id="s-django-contrib-admin">
<span id="django-contrib-admin"></span><h4><a class="reference internal" href="../ref/contrib/admin/index.html#module-django.contrib.admin" title="django.contrib.admin: Django's admin site."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.admin</span></code></a><a class="headerlink" href="#django-contrib-admin" title="Lien permanent vers ce titre">¶</a></h4>
<ul>
<li><p class="first">Le nouveau filtre <code class="docutils literal notranslate"><span class="pre">django.contrib.admin.EmptyFieldListFilter</span></code> pour <a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin.list_filter" title="django.contrib.admin.ModelAdmin.list_filter"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ModelAdmin.list_filter</span></code></a> permet de filtrer les valeurs vides (chaînes vides et valeurs nulles) dans la vue pour modification de l’administration.</p>
</li>
<li><p class="first">Les filtres dans la barre latérale de droite de la vue pour modification du site d’administration contient dorénavant un lien pour effacer tous les filtres.</p>
</li>
<li><p class="first">Le site d’administration possède maintenant une barre latérale sur les grands écrans pour une navigation simplifiée. Elle est activée par défaut mais peut être désactivée en utilisant un <code class="docutils literal notranslate"><span class="pre">AdminSite</span></code> personnalisé et en définissant son attribut <a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.AdminSite.enable_nav_sidebar" title="django.contrib.admin.AdminSite.enable_nav_sidebar"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AdminSite.enable_nav_sidebar</span></code></a> à <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<p>Le rendu de la barre latérale nécessite d’accéder à la requête en cours pour pouvoir définir les possibilités de rôles CSS et ARIA. Cela nécessite la présence de <code class="docutils literal notranslate"><span class="pre">'django.template.context_processors.request'</span></code> dans l’option <code class="docutils literal notranslate"><span class="pre">'context_processors'</span></code> de :setting:<a href="#id1"><span class="problematic" id="id2">`</span></a>OPTIONS &lt;TEMPLATES-OPTIONS&gt; <a href="#id3"><span class="problematic" id="id4">`</span></a>.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">XRegExp</span></code> a été mis à jour de la version 2.0.0 à 3.2.0.</p>
</li>
<li><p class="first">La version intégrée de jQuery a été mise à jour de 3.4.1 vers 3.5.1.</p>
</li>
<li><p class="first">La bibliothèque Select2 a été mise à jour de la version 4.0.7 vers 4.0.13.</p>
</li>
</ul>
</div>
<div class="section" id="s-django-contrib-auth">
<span id="django-contrib-auth"></span><h4><a class="reference internal" href="../topics/auth/index.html#module-django.contrib.auth" title="django.contrib.auth: Django's authentication framework."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.auth</span></code></a><a class="headerlink" href="#django-contrib-auth" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Le nombre d’itération par défaut du hacheur de mot de passe PBKDF2 a été augmenté de 180’000 à 216’000.</li>
<li>Le nouveau réglage <a class="reference internal" href="../ref/settings.html#std:setting-PASSWORD_RESET_TIMEOUT"><code class="xref std std-setting docutils literal notranslate"><span class="pre">PASSWORD_RESET_TIMEOUT</span></code></a> permet de définir le nombre de secondes pendant lequel un lien de réinitialisation de mot de passe est valide. Ce réglage est privilégié par rapport au réglage obsolète <code class="docutils literal notranslate"><span class="pre">PASSWORD_RESET_TIMEOUT_DAYS</span></code> qui sera supprimé dans Django 4.0.</li>
<li>Le mécanisme de réinitialisation de mot de passe utilise dorénavant l’algorithme de hachage SHA-256. La prise en charge des jetons utilisant l’ancien algorithme de hachage restera jusqu’à Django 4.0.</li>
<li><a class="reference internal" href="../topics/auth/customizing.html#django.contrib.auth.models.AbstractBaseUser.get_session_auth_hash" title="django.contrib.auth.models.AbstractBaseUser.get_session_auth_hash"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AbstractBaseUser.get_session_auth_hash()</span></code></a> utilise dorénavant l’algorithme de hachage SHA-256. La prise en charge des sessions utilisateurs utilisant l’ancien algorithme de hachage restera jusqu’à Django 4.0.</li>
</ul>
</div>
<div class="section" id="s-django-contrib-contenttypes">
<span id="django-contrib-contenttypes"></span><h4><a class="reference internal" href="../ref/contrib/contenttypes.html#module-django.contrib.contenttypes" title="django.contrib.contenttypes: Provides generic interface to installed models."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.contenttypes</span></code></a><a class="headerlink" href="#django-contrib-contenttypes" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>La nouvelle option <a class="reference internal" href="../ref/django-admin.html#cmdoption-remove-stale-contenttypes-include-stale-apps"><code class="xref std std-option docutils literal notranslate"><span class="pre">remove_stale_contenttypes</span> <span class="pre">--include-stale-apps</span></code></a> permet de supprimer les types de contenu périmés provenant des applications précédemment installées qui ont été supprimées de <a class="reference internal" href="../ref/settings.html#std:setting-INSTALLED_APPS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">INSTALLED_APPS</span></code></a>.</li>
</ul>
</div>
<div class="section" id="s-django-contrib-gis">
<span id="django-contrib-gis"></span><h4><a class="reference internal" href="../ref/contrib/gis/index.html#module-django.contrib.gis" title="django.contrib.gis: Geographic Information System (GIS) extensions for Django"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.gis</span></code></a><a class="headerlink" href="#django-contrib-gis" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>La requête <a class="reference internal" href="../ref/contrib/gis/geoquerysets.html#std:fieldlookup-relate"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">relate</span></code></a> est dorénavant prise en charge avec MariaDB.</li>
<li>La propriété <a class="reference internal" href="../ref/contrib/gis/geos.html#django.contrib.gis.geos.LinearRing.is_counterclockwise" title="django.contrib.gis.geos.LinearRing.is_counterclockwise"><code class="xref py py-attr docutils literal notranslate"><span class="pre">LinearRing.is_counterclockwise</span></code></a> a été ajoutée.</li>
<li><a class="reference internal" href="../ref/contrib/gis/functions.html#django.contrib.gis.db.models.functions.AsGeoJSON" title="django.contrib.gis.db.models.functions.AsGeoJSON"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsGeoJSON</span></code></a> est dorénavant prise en charge avec Oracle.</li>
<li>Les fonctions <a class="reference internal" href="../ref/contrib/gis/functions.html#django.contrib.gis.db.models.functions.AsWKB" title="django.contrib.gis.db.models.functions.AsWKB"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsWKB</span></code></a> et <a class="reference internal" href="../ref/contrib/gis/functions.html#django.contrib.gis.db.models.functions.AsWKT" title="django.contrib.gis.db.models.functions.AsWKT"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsWKT</span></code></a> ont été ajoutées.</li>
<li>La prise en charge de PostGIS 3 et GDAL3 a été ajoutée.</li>
</ul>
</div>
<div class="section" id="s-django-contrib-humanize">
<span id="django-contrib-humanize"></span><h4><a class="reference internal" href="../ref/contrib/humanize.html#module-django.contrib.humanize" title="django.contrib.humanize: A set of Django template filters useful for adding a &quot;human touch&quot; to data."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.humanize</span></code></a><a class="headerlink" href="#django-contrib-humanize" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Le filtre de gabarit <a class="reference internal" href="../ref/contrib/humanize.html#std:templatefilter-intword"><code class="xref std std-tfilter docutils literal notranslate"><span class="pre">intword</span></code></a> prend désormais en charge les nombres entiers négatifs.</li>
</ul>
</div>
<div class="section" id="s-django-contrib-postgres">
<span id="django-contrib-postgres"></span><h4><a class="reference internal" href="../ref/contrib/postgres/index.html#module-django.contrib.postgres" title="django.contrib.postgres: PostgreSQL-specific fields and features"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.postgres</span></code></a><a class="headerlink" href="#django-contrib-postgres" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>La nouvelle classe <a class="reference internal" href="../ref/contrib/postgres/indexes.html#django.contrib.postgres.indexes.BloomIndex" title="django.contrib.postgres.indexes.BloomIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">BloomIndex</span></code></a> permet de créer des index <code class="docutils literal notranslate"><span class="pre">bloom</span></code> dans la base de données. La nouvelle opération de migration <a class="reference internal" href="../ref/contrib/postgres/operations.html#django.contrib.postgres.operations.BloomExtension" title="django.contrib.postgres.operations.BloomExtension"><code class="xref py py-class docutils literal notranslate"><span class="pre">BloomExtension</span></code></a> installe l’extension <code class="docutils literal notranslate"><span class="pre">bloom</span></code> pour ajouter la prise en charge de cet index.</li>
<li><a class="reference internal" href="../ref/models/instances.html#django.db.models.Model.get_FOO_display" title="django.db.models.Model.get_FOO_display"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_FOO_display()</span></code></a> prend dorénavant en charge les champs <a class="reference internal" href="../ref/contrib/postgres/fields.html#django.contrib.postgres.fields.ArrayField" title="django.contrib.postgres.fields.ArrayField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArrayField</span></code></a> et <a class="reference internal" href="../ref/contrib/postgres/fields.html#django.contrib.postgres.fields.RangeField" title="django.contrib.postgres.fields.RangeField"><code class="xref py py-class docutils literal notranslate"><span class="pre">RangeField</span></code></a>.</li>
<li>Les nouvelles expressions de requête <a class="reference internal" href="../ref/contrib/postgres/fields.html#std:fieldlookup-rangefield.lower_inc"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">rangefield.lower_inc</span></code></a>, <a class="reference internal" href="../ref/contrib/postgres/fields.html#std:fieldlookup-rangefield.lower_inf"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">rangefield.lower_inf</span></code></a>, <a class="reference internal" href="../ref/contrib/postgres/fields.html#std:fieldlookup-rangefield.upper_inc"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">rangefield.upper_inc</span></code></a> et <a class="reference internal" href="../ref/contrib/postgres/fields.html#std:fieldlookup-rangefield.upper_inf"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">rangefield.upper_inf</span></code></a> permettent d’interroger <a class="reference internal" href="../ref/contrib/postgres/fields.html#django.contrib.postgres.fields.RangeField" title="django.contrib.postgres.fields.RangeField"><code class="xref py py-class docutils literal notranslate"><span class="pre">RangeField</span></code></a> selon un type de limite.</li>
<li><a class="reference internal" href="../ref/contrib/postgres/fields.html#std:fieldlookup-rangefield.contained_by"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">rangefield.contained_by</span></code></a> prends dorénavant en charge les champs <a class="reference internal" href="../ref/models/fields.html#django.db.models.SmallAutoField" title="django.db.models.SmallAutoField"><code class="xref py py-class docutils literal notranslate"><span class="pre">SmallAutoField</span></code></a>, <a class="reference internal" href="../ref/models/fields.html#django.db.models.AutoField" title="django.db.models.AutoField"><code class="xref py py-class docutils literal notranslate"><span class="pre">AutoField</span></code></a>, <a class="reference internal" href="../ref/models/fields.html#django.db.models.BigAutoField" title="django.db.models.BigAutoField"><code class="xref py py-class docutils literal notranslate"><span class="pre">BigAutoField</span></code></a>, <a class="reference internal" href="../ref/models/fields.html#django.db.models.SmallIntegerField" title="django.db.models.SmallIntegerField"><code class="xref py py-class docutils literal notranslate"><span class="pre">SmallIntegerField</span></code></a> et <a class="reference internal" href="../ref/models/fields.html#django.db.models.DecimalField" title="django.db.models.DecimalField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DecimalField</span></code></a>.</li>
<li><a class="reference internal" href="../ref/contrib/postgres/search.html#django.contrib.postgres.search.SearchQuery" title="django.contrib.postgres.search.SearchQuery"><code class="xref py py-class docutils literal notranslate"><span class="pre">SearchQuery</span></code></a> prend dorénavant en charge le type de recherche <code class="docutils literal notranslate"><span class="pre">'websearch'</span></code> avec PostgreSQL 11+.</li>
<li><a class="reference internal" href="../ref/contrib/postgres/search.html#django.contrib.postgres.search.SearchQuery" title="django.contrib.postgres.search.SearchQuery"><code class="xref py py-class docutils literal notranslate"><span class="pre">SearchQuery.value</span></code></a> prend dorénavant en charge les expressions de requête.</li>
<li>La nouvelle classe <a class="reference internal" href="../ref/contrib/postgres/search.html#django.contrib.postgres.search.SearchHeadline" title="django.contrib.postgres.search.SearchHeadline"><code class="xref py py-class docutils literal notranslate"><span class="pre">SearchHeadline</span></code></a> permet de mettre en évidence les résultats de recherche.</li>
<li>La requête <a class="reference internal" href="../ref/contrib/postgres/search.html#std:fieldlookup-search"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">search</span></code></a> prend dorénavant en charge les expressions de requête.</li>
<li>Le nouveau paramètre <code class="docutils literal notranslate"><span class="pre">cover_density</span></code> de <a class="reference internal" href="../ref/contrib/postgres/search.html#django.contrib.postgres.search.SearchRank" title="django.contrib.postgres.search.SearchRank"><code class="xref py py-class docutils literal notranslate"><span class="pre">SearchRank</span></code></a> permet de classer les résultats par taux de couverture.</li>
<li>Le nouveau paramètre <code class="docutils literal notranslate"><span class="pre">normalization</span></code> de <a class="reference internal" href="../ref/contrib/postgres/search.html#django.contrib.postgres.search.SearchRank" title="django.contrib.postgres.search.SearchRank"><code class="xref py py-class docutils literal notranslate"><span class="pre">SearchRank</span></code></a> permet de normaliser les classements.</li>
<li>Le nouvel attribut <a class="reference internal" href="../ref/contrib/postgres/constraints.html#django.contrib.postgres.constraints.ExclusionConstraint.deferrable" title="django.contrib.postgres.constraints.ExclusionConstraint.deferrable"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ExclusionConstraint.deferrable</span></code></a> permet de créer des contraintes d’exclusion différables.</li>
</ul>
</div>
<div class="section" id="s-django-contrib-sessions">
<span id="django-contrib-sessions"></span><h4><a class="reference internal" href="../topics/http/sessions.html#module-django.contrib.sessions" title="django.contrib.sessions: Provides session management for Django projects."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.sessions</span></code></a><a class="headerlink" href="#django-contrib-sessions" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Le réglage <a class="reference internal" href="../ref/settings.html#std:setting-SESSION_COOKIE_SAMESITE"><code class="xref std std-setting docutils literal notranslate"><span class="pre">SESSION_COOKIE_SAMESITE</span></code></a> autorise dorénavant la valeur <code class="docutils literal notranslate"><span class="pre">'None'</span></code> (chaîne) pour indiquer explicitement que le cookie doit être envoyé avec toutes les requêtes (de même site ou inter-sites).</li>
</ul>
</div>
<div class="section" id="s-django-contrib-staticfiles">
<span id="django-contrib-staticfiles"></span><h4><a class="reference internal" href="../ref/contrib/staticfiles.html#module-django.contrib.staticfiles" title="django.contrib.staticfiles: An app for handling static files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.staticfiles</span></code></a><a class="headerlink" href="#django-contrib-staticfiles" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Le réglage <a class="reference internal" href="../ref/settings.html#std:setting-STATICFILES_DIRS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">STATICFILES_DIRS</span></code></a> accepte maintenant les chemins <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(disponible dans Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a>.</li>
</ul>
</div>
<div class="section" id="s-cache">
<span id="cache"></span><h4>Cache<a class="headerlink" href="#cache" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Le décorateur <a class="reference internal" href="../topics/http/decorators.html#django.views.decorators.cache.cache_control" title="django.views.decorators.cache.cache_control"><code class="xref py py-func docutils literal notranslate"><span class="pre">cache_control()</span></code></a> et la méthode <a class="reference internal" href="../ref/utils.html#django.utils.cache.patch_cache_control" title="django.utils.cache.patch_cache_control"><code class="xref py py-func docutils literal notranslate"><span class="pre">patch_cache_control()</span></code></a> acceptent dorénavant plusieurs noms de champs dans la directive <code class="docutils literal notranslate"><span class="pre">no-cache</span></code> de l’en-tête <code class="docutils literal notranslate"><span class="pre">Cache-Control</span></code>, en accord avec la <span class="target" id="index-2"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc7234.html#section-5.2.2.2"><strong>RFC 7234#section-5.2.2.2</strong></a>.</li>
<li><a class="reference internal" href="../topics/cache.html#django.core.caches.cache.delete" title="django.core.caches.cache.delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">delete()</span></code></a> renvoie dorénavant <code class="docutils literal notranslate"><span class="pre">True</span></code> si la clé à été supprimée avec succès, sinon <code class="docutils literal notranslate"><span class="pre">False</span></code>.</li>
</ul>
</div>
<div class="section" id="s-csrf">
<span id="csrf"></span><h4>CSRF<a class="headerlink" href="#csrf" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Le réglage <a class="reference internal" href="../ref/settings.html#std:setting-CSRF_COOKIE_SAMESITE"><code class="xref std std-setting docutils literal notranslate"><span class="pre">CSRF_COOKIE_SAMESITE</span></code></a> autorise dorénavant la valeur <code class="docutils literal notranslate"><span class="pre">'None'</span></code> (chaîne) pour indiquer explicitement que le cookie doit être envoyé avec toutes les requêtes (de même site ou inter-sites).</li>
</ul>
</div>
<div class="section" id="s-email">
<span id="email"></span><h4>Email<a class="headerlink" href="#email" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Le réglage <a class="reference internal" href="../ref/settings.html#std:setting-EMAIL_FILE_PATH"><code class="xref std std-setting docutils literal notranslate"><span class="pre">EMAIL_FILE_PATH</span></code></a>, utilisé par le <a class="reference internal" href="../topics/email.html#topic-email-file-backend"><span class="std std-ref">moteur de messagerie basé sur des fichiers</span></a> accepte dorénavant les chemins <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(disponible dans Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a>.</li>
</ul>
</div>
<div class="section" id="s-error-reporting">
<span id="error-reporting"></span><h4>Signalement d’erreurs<a class="headerlink" href="#error-reporting" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="../howto/error-reporting.html#django.views.debug.SafeExceptionReporterFilter" title="django.views.debug.SafeExceptionReporterFilter"><code class="xref py py-class docutils literal notranslate"><span class="pre">django.views.debug.SafeExceptionReporterFilter</span></code></a> filtre dorénavant les valeurs sensibles dans <code class="docutils literal notranslate"><span class="pre">request.META</span></code> dans les rapports d’exceptions.</li>
<li>Les nouveaux attributs <a class="reference internal" href="../howto/error-reporting.html#django.views.debug.SafeExceptionReporterFilter.cleansed_substitute" title="django.views.debug.SafeExceptionReporterFilter.cleansed_substitute"><code class="xref py py-attr docutils literal notranslate"><span class="pre">SafeExceptionReporterFilter.cleansed_substitute</span></code></a> et <a class="reference internal" href="../howto/error-reporting.html#django.views.debug.SafeExceptionReporterFilter.hidden_settings" title="django.views.debug.SafeExceptionReporterFilter.hidden_settings"><code class="xref py py-attr docutils literal notranslate"><span class="pre">SafeExceptionReporterFilter.hidden_settings</span></code></a> permettent de personnaliser les réglages sensibles et le filtrage de <code class="docutils literal notranslate"><span class="pre">request.META</span></code> dans les rapports d’exceptions.</li>
<li>La vue de débogage technique 404 respecte dorénavant <a class="reference internal" href="../ref/settings.html#std:setting-DEFAULT_EXCEPTION_REPORTER_FILTER"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DEFAULT_EXCEPTION_REPORTER_FILTER</span></code></a> lorsqu’elle applique le filtrage des réglages.</li>
<li>Le nouveau réglage <a class="reference internal" href="../ref/settings.html#std:setting-DEFAULT_EXCEPTION_REPORTER"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DEFAULT_EXCEPTION_REPORTER</span></code></a> permet de fournir une sous-classe de <a class="reference internal" href="../howto/error-reporting.html#django.views.debug.ExceptionReporter" title="django.views.debug.ExceptionReporter"><code class="xref py py-class docutils literal notranslate"><span class="pre">django.views.debug.ExceptionReporter</span></code></a> pour personnaliser la génération des rapports d’exceptions. Voir <a class="reference internal" href="../howto/error-reporting.html#custom-error-reports"><span class="std std-ref">Rapports d’erreur personnalisés</span></a> pour plus de détails.</li>
</ul>
</div>
<div class="section" id="s-file-storage">
<span id="file-storage"></span><h4>Stockage de fichier<a class="headerlink" href="#file-storage" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>La méthode <code class="docutils literal notranslate"><span class="pre">FileSystemStorage.save()</span></code> accepte maintenant les chemins <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(disponible dans Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a>.</li>
<li><a class="reference internal" href="../ref/models/fields.html#django.db.models.FileField" title="django.db.models.FileField"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileField</span></code></a> et <a class="reference internal" href="../ref/models/fields.html#django.db.models.ImageField" title="django.db.models.ImageField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ImageField</span></code></a> acceptent dorénavant un objet exécutable comme valeur de <code class="docutils literal notranslate"><span class="pre">storage</span></code>. Cela permet de modifier le stockage utilisé au moment de l’exécution, choisissant par exemple différents stockages en fonction de l’environnement.</li>
</ul>
</div>
<div class="section" id="s-forms">
<span id="forms"></span><h4>Formulaires<a class="headerlink" href="#forms" title="Lien permanent vers ce titre">¶</a></h4>
<ul>
<li><p class="first"><a class="reference internal" href="../ref/forms/fields.html#django.forms.ModelChoiceIterator" title="django.forms.ModelChoiceIterator"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelChoiceIterator</span></code></a>, utilisé par <a class="reference internal" href="../ref/forms/fields.html#django.forms.ModelChoiceField" title="django.forms.ModelChoiceField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelChoiceField</span></code></a> et <a class="reference internal" href="../ref/forms/fields.html#django.forms.ModelMultipleChoiceField" title="django.forms.ModelMultipleChoiceField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelMultipleChoiceField</span></code></a>, utilise dorénavant <a class="reference internal" href="../ref/forms/fields.html#django.forms.ModelChoiceIteratorValue" title="django.forms.ModelChoiceIteratorValue"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelChoiceIteratorValue</span></code></a> qui peut être utilisé par les composants pour accéder aux instances de modèles. Voir <a class="reference internal" href="../ref/forms/fields.html#iterating-relationship-choices"><span class="std std-ref">Itération sur les choix relationnels</span></a> pour plus de détails.</p>
</li>
<li><p class="first"><a class="reference internal" href="../ref/forms/fields.html#django.forms.DateTimeField" title="django.forms.DateTimeField"><code class="xref py py-class docutils literal notranslate"><span class="pre">django.forms.DateTimeField</span></code></a> accepte dorénavant les dates dans un sous-ensemble des formats de date/heure ISO 8601, y compris le fuseau horaire facultatif, par ex. <code class="docutils literal notranslate"><span class="pre">2019-10-10T06:47</span></code>, <code class="docutils literal notranslate"><span class="pre">2019-10-10T06:47:23+04:00</span></code> ou <code class="docutils literal notranslate"><span class="pre">2019-10-10T06:47:23Z</span></code>. Le fuseau horaire est toujours conservé s’il est présent, et des dates/heures conscientes de leur fuseau sont toujours renvoyées même si <a class="reference internal" href="../ref/settings.html#std:setting-USE_TZ"><code class="xref std std-setting docutils literal notranslate"><span class="pre">USE_TZ</span></code></a> vaut <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<p>De plus, <code class="docutils literal notranslate"><span class="pre">DateTimeField</span></code> utilise dorénavant <code class="docutils literal notranslate"><span class="pre">DATE_INPUT_FORMATS</span></code> en plus de <code class="docutils literal notranslate"><span class="pre">DATETIME_INPUT_FORMATS</span></code> lors de la conversion d’une valeur saisie dans un champ vers une valeur <code class="docutils literal notranslate"><span class="pre">datetime</span></code>.</p>
</li>
<li><p class="first"><a class="reference internal" href="../ref/forms/widgets.html#django.forms.MultiWidget.widgets" title="django.forms.MultiWidget.widgets"><code class="xref py py-attr docutils literal notranslate"><span class="pre">MultiWidget.widgets</span></code></a> accepte dorénavant un dictionnaire qui permet de personnaliser les attributs <code class="docutils literal notranslate"><span class="pre">name</span></code> des sous-composants.</p>
</li>
<li><p class="first">La nouvelle propriété <a class="reference internal" href="../ref/forms/api.html#django.forms.BoundField.widget_type" title="django.forms.BoundField.widget_type"><code class="xref py py-attr docutils literal notranslate"><span class="pre">BoundField.widget_type</span></code></a> peut être utilisée pour ajuster dynamiquement la production des formulaires en fonction du type de composant.</p>
</li>
</ul>
</div>
<div class="section" id="s-internationalization">
<span id="internationalization"></span><h4>Internationalisation<a class="headerlink" href="#internationalization" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Le réglage <a class="reference internal" href="../ref/settings.html#std:setting-LANGUAGE_COOKIE_SAMESITE"><code class="xref std std-setting docutils literal notranslate"><span class="pre">LANGUAGE_COOKIE_SAMESITE</span></code></a> autorise dorénavant la valeur <code class="docutils literal notranslate"><span class="pre">'None'</span></code> (chaîne) pour indiquer explicitement que le cookie doit être envoyé avec toutes les requêtes (de même site ou inter-sites).</li>
<li>La prise en charge des traductions en arabe algérien, igbo, kirghize, tadjik et turkmène a été ajoutée.</li>
</ul>
</div>
<div class="section" id="s-management-commands">
<span id="management-commands"></span><h4>Commandes d’administration<a class="headerlink" href="#management-commands" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>La nouvelle option <a class="reference internal" href="../ref/django-admin.html#cmdoption-check-database"><code class="xref std std-option docutils literal notranslate"><span class="pre">check</span> <span class="pre">--database</span></code></a> permet d’indiquer des alias de base de données lors de l’exécution des contrôles systèmes <code class="docutils literal notranslate"><span class="pre">database</span></code>. Précédemment, ces contrôles étaient activés pour toutes les bases configurées dans <a class="reference internal" href="../ref/settings.html#std:setting-DATABASES"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DATABASES</span></code></a> lorsqu’on passait le drapeau <code class="docutils literal notranslate"><span class="pre">database</span></code> à la commande.</li>
<li>La nouvelle option <a class="reference internal" href="../ref/django-admin.html#cmdoption-migrate-check"><code class="xref std std-option docutils literal notranslate"><span class="pre">migrate</span> <span class="pre">--check</span></code></a> fait quitter la commande avec un statut différent de 0 lorsque des migrations non appliquées sont détectées.</li>
<li>Le nouveau paramètre <code class="docutils literal notranslate"><span class="pre">returncode</span></code> de <a class="reference internal" href="../howto/custom-management-commands.html#django.core.management.CommandError" title="django.core.management.CommandError"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CommandError</span></code></a> permet de personnaliser le statut de sortie des commandes d’administration.</li>
<li>La nouvelle option <a class="reference internal" href="../ref/django-admin.html#cmdoption-dbshell"><code class="xref std std-option docutils literal notranslate"><span class="pre">dbshell</span> <span class="pre">--</span> <span class="pre">PARAMÈTRES</span></code></a> permet de passer des paramètres supplémentaires au client de ligne de commande de la base de données.</li>
<li>Les commandes <a class="reference internal" href="../ref/django-admin.html#django-admin-flush"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">flush</span></code></a> et <a class="reference internal" href="../ref/django-admin.html#django-admin-sqlflush"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">sqlflush</span></code></a> incluent dorénavant du code SQL pour réinitialiser les séquences avec SQLite.</li>
</ul>
</div>
<div class="section" id="s-models">
<span id="models"></span><h4>Modèles<a class="headerlink" href="#models" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>La nouvelle fonction <a class="reference internal" href="../ref/models/database-functions.html#django.db.models.functions.ExtractIsoWeekDay" title="django.db.models.functions.ExtractIsoWeekDay"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExtractIsoWeekDay</span></code></a> extrait les jours de semaine ISO-8601 des champs <a class="reference internal" href="../ref/models/fields.html#django.db.models.DateField" title="django.db.models.DateField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateField</span></code></a> et <a class="reference internal" href="../ref/models/fields.html#django.db.models.DateTimeField" title="django.db.models.DateTimeField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateTimeField</span></code></a>, et la nouvelle expression de requête <a class="reference internal" href="../ref/models/querysets.html#std:fieldlookup-iso_week_day"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">iso_week_day</span></code></a> permet d’interroger selon un jour de semaine ISO-8601.</li>
<li><a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.explain" title="django.db.models.query.QuerySet.explain"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.explain()</span></code></a> prend dorénavant en charge :<ul>
<li>le format <code class="docutils literal notranslate"><span class="pre">TREE</span></code> de MySQL 8.0.16+ ;</li>
<li>l’option <code class="docutils literal notranslate"><span class="pre">analyze</span></code> de MySQL 8.0.18+ et MariaDB.</li>
</ul>
</li>
<li>Le champ <a class="reference internal" href="../ref/models/fields.html#django.db.models.PositiveBigIntegerField" title="django.db.models.PositiveBigIntegerField"><code class="xref py py-class docutils literal notranslate"><span class="pre">PositiveBigIntegerField</span></code></a> a été ajouté ; il est similaire à <a class="reference internal" href="../ref/models/fields.html#django.db.models.PositiveIntegerField" title="django.db.models.PositiveIntegerField"><code class="xref py py-class docutils literal notranslate"><span class="pre">PositiveIntegerField</span></code></a> sauf qu’il ne permet des valeurs que jusqu’à une certaine limite (dépendante de la base de données). Les valeurs de <code class="docutils literal notranslate"><span class="pre">0</span></code> à <code class="docutils literal notranslate"><span class="pre">9223372036854775807</span></code> sont valables pour toutes les bases de données prises en charge par Django.</li>
<li>La nouvelle option <a class="reference internal" href="../ref/models/fields.html#django.db.models.RESTRICT" title="django.db.models.RESTRICT"><code class="xref py py-class docutils literal notranslate"><span class="pre">RESTRICT</span></code></a> du paramètre <a class="reference internal" href="../ref/models/fields.html#django.db.models.ForeignKey.on_delete" title="django.db.models.ForeignKey.on_delete"><code class="xref py py-attr docutils literal notranslate"><span class="pre">on_delete</span></code></a> de <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code> et de <code class="docutils literal notranslate"><span class="pre">OneToOneField</span></code> émule le comportement de la contrainte SQL <code class="docutils literal notranslate"><span class="pre">ON</span> <span class="pre">DELETE</span> <span class="pre">RESTRICT</span></code>.</li>
<li><a class="reference internal" href="../ref/models/constraints.html#django.db.models.CheckConstraint.check" title="django.db.models.CheckConstraint.check"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CheckConstraint.check</span></code></a> prend dorénavant en charge les expressions booléennes.</li>
<li>Les méthodes <a class="reference internal" href="../ref/models/relations.html#django.db.models.fields.related.RelatedManager.add" title="django.db.models.fields.related.RelatedManager.add"><code class="xref py py-meth docutils literal notranslate"><span class="pre">RelatedManager.add()</span></code></a>, <a class="reference internal" href="../ref/models/relations.html#django.db.models.fields.related.RelatedManager.create" title="django.db.models.fields.related.RelatedManager.create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create()</span></code></a> et <a class="reference internal" href="../ref/models/relations.html#django.db.models.fields.related.RelatedManager.set" title="django.db.models.fields.related.RelatedManager.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set()</span></code></a> acceptent dorénavant les objets exécutables comme valeurs du paramètre <code class="docutils literal notranslate"><span class="pre">through_defaults</span></code>.</li>
<li>Le nouveau paramètre <code class="docutils literal notranslate"><span class="pre">is_dst</span></code> de <a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.datetimes" title="django.db.models.query.QuerySet.datetimes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.datetimes()</span></code></a> détermine le traitement des heures non existantes ou ambiguës.</li>
<li>La nouvelle méthode <code class="docutils literal notranslate"><span class="pre">bitxor()</span></code> de l’expression <a class="reference internal" href="../ref/models/expressions.html#django.db.models.F" title="django.db.models.F"><code class="xref py py-class docutils literal notranslate"><span class="pre">F</span></code></a> permet l”<a class="reference internal" href="../topics/db/queries.html#using-f-expressions-in-filters"><span class="std std-ref">opération bit-à-bit XOR</span></a>.</li>
<li><a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.bulk_create" title="django.db.models.query.QuerySet.bulk_create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.bulk_create()</span></code></a> définit dorénavant la clé primaire des objets quand on l’utilise avec MariaDB 10.5+</li>
<li>La méthode <code class="docutils literal notranslate"><span class="pre">DatabaseOperations.sql_flush()</span></code> génère dorénavant du code SQL plus efficace avec MySQL en utilisant des instructions <code class="docutils literal notranslate"><span class="pre">DELETE</span></code> au lieu de <code class="docutils literal notranslate"><span class="pre">TRUNCATE</span></code>  pour les tables qui ne nécessitent pas la réinitialisation de leurs séquences.</li>
<li>Les fonctions SQLite sont dorénavant marquées comme <a class="reference external" href="https://docs.python.org/3/library/sqlite3.html#sqlite3.Connection.create_function" title="(disponible dans Python v3.9)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">déterministes</span></code></a> avec Python 3.8+. Cela permet de les utiliser dans des contraintes de contrôle et dans des index partiaux.</li>
<li>Le nouvel attribut <a class="reference internal" href="../ref/models/constraints.html#django.db.models.UniqueConstraint.deferrable" title="django.db.models.UniqueConstraint.deferrable"><code class="xref py py-attr docutils literal notranslate"><span class="pre">UniqueConstraint.deferrable</span></code></a> permet de créer des contraintes d’unicité différables.</li>
</ul>
</div>
<div class="section" id="s-pagination">
<span id="pagination"></span><h4>Pagination<a class="headerlink" href="#pagination" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Il est maintenant possible d’itérer sur des objets <a class="reference internal" href="../ref/paginator.html#django.core.paginator.Paginator" title="django.core.paginator.Paginator"><code class="xref py py-class docutils literal notranslate"><span class="pre">Paginator</span></code></a> pour produire ses pages.</li>
</ul>
</div>
<div class="section" id="s-requests-and-responses">
<span id="requests-and-responses"></span><h4>Requêtes et réponses<a class="headerlink" href="#requests-and-responses" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Si <a class="reference internal" href="../ref/settings.html#std:setting-ALLOWED_HOSTS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">ALLOWED_HOSTS</span></code></a> est vide et que <code class="docutils literal notranslate"><span class="pre">DEBUG=True</span></code>, les sous-domaines de localhost sont maintenant autorisés dans l’en-tête <code class="docutils literal notranslate"><span class="pre">Host</span></code>, par ex. <code class="docutils literal notranslate"><span class="pre">static.localhost</span></code>.</li>
<li><a class="reference internal" href="../ref/request-response.html#django.http.HttpResponse.set_cookie" title="django.http.HttpResponse.set_cookie"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HttpResponse.set_cookie()</span></code></a> et <a class="reference internal" href="../ref/request-response.html#django.http.HttpResponse.set_signed_cookie" title="django.http.HttpResponse.set_signed_cookie"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HttpResponse.set_signed_cookie()</span></code></a> autorisent désormais l’utilisation de <code class="docutils literal notranslate"><span class="pre">samesite='None'</span></code> (chaîne) pour indiquer explicitement que le cookie doit être envoyé avec toutes les requêtes du même site et inter-sites.</li>
<li>La nouvelle méthode <a class="reference internal" href="../ref/request-response.html#django.http.HttpRequest.accepts" title="django.http.HttpRequest.accepts"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HttpRequest.accepts()</span></code></a> renvoie un booléen indiquant si la requête accepte le type MIME donné en fonction de l’en-tête HTTP <code class="docutils literal notranslate"><span class="pre">Accept</span></code>.</li>
</ul>
</div>
<div class="section" id="s-security">
<span id="s-whats-new-security-3-1"></span><span id="security"></span><span id="whats-new-security-3-1"></span><h4>Sécurité<a class="headerlink" href="#security" title="Lien permanent vers ce titre">¶</a></h4>
<ul>
<li><p class="first">Le réglage <a class="reference internal" href="../ref/settings.html#std:setting-SECURE_REFERRER_POLICY"><code class="xref std std-setting docutils literal notranslate"><span class="pre">SECURE_REFERRER_POLICY</span></code></a> contient dorénavant par défaut la valeur <code class="docutils literal notranslate"><span class="pre">'same-origin'</span></code>. Avec cette valeur, <a class="reference internal" href="../ref/middleware.html#django.middleware.security.SecurityMiddleware" title="django.middleware.security.SecurityMiddleware"><code class="xref py py-class docutils literal notranslate"><span class="pre">SecurityMiddleware</span></code></a> définit l’en-tête <a class="reference internal" href="../ref/middleware.html#referrer-policy"><span class="std std-ref">Politique de référencement</span></a> à <code class="docutils literal notranslate"><span class="pre">same-origin</span></code> pour toutes les réponses qui ne l’ont pas déjà. Cela évite que l’en-tête <code class="docutils literal notranslate"><span class="pre">Referer</span></code> soit envoyé à d’autres origines. Si vous avez besoin du comportement précédent, définissez explicitement <a class="reference internal" href="../ref/settings.html#std:setting-SECURE_REFERRER_POLICY"><code class="xref std std-setting docutils literal notranslate"><span class="pre">SECURE_REFERRER_POLICY</span></code></a> à <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</li>
<li><p class="first">L’algorithme par défaut de <a class="reference internal" href="../topics/signing.html#django.core.signing.Signer" title="django.core.signing.Signer"><code class="xref py py-class docutils literal notranslate"><span class="pre">django.core.signing.Signer</span></code></a>, <a class="reference internal" href="../topics/signing.html#django.core.signing.loads" title="django.core.signing.loads"><code class="xref py py-meth docutils literal notranslate"><span class="pre">django.core.signing.loads()</span></code></a> et <a class="reference internal" href="../topics/signing.html#django.core.signing.dumps" title="django.core.signing.dumps"><code class="xref py py-meth docutils literal notranslate"><span class="pre">django.core.signing.dumps()</span></code></a> est dorénavant SHA-256. La prise en charge de signatures faites avec l’ancien algorithme SHA-1 sera conservée jusqu’à Django 4.0.</p>
<p>De plus, le nouveau paramètre <code class="docutils literal notranslate"><span class="pre">algorithm</span></code> de <a class="reference internal" href="../topics/signing.html#django.core.signing.Signer" title="django.core.signing.Signer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Signer</span></code></a> permet de personnaliser l’algorithme de hachage.</p>
</li>
</ul>
</div>
<div class="section" id="s-templates">
<span id="templates"></span><h4>Gabarits<a class="headerlink" href="#templates" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Les balises de gabarit <a class="reference internal" href="../topics/i18n/translation.html#std:templatetag-translate"><code class="xref std std-ttag docutils literal notranslate"><span class="pre">translate</span></code></a> and <a class="reference internal" href="../topics/i18n/translation.html#std:templatetag-blocktranslate"><code class="xref std std-ttag docutils literal notranslate"><span class="pre">blocktranslate</span></code></a>&nbsp; pour la régionalisation dans le code des gabarits ont été renommées. Les anciens alias de ces balises (<a class="reference internal" href="../topics/i18n/translation.html#std:templatetag-trans"><code class="xref std std-ttag docutils literal notranslate"><span class="pre">trans</span></code></a> et <a class="reference internal" href="../topics/i18n/translation.html#std:templatetag-blocktrans"><code class="xref std std-ttag docutils literal notranslate"><span class="pre">blocktrans</span></code></a>) continueront de fonctionner et seront conservés dans le futur proche.</li>
<li>La balise de gabarit <a class="reference internal" href="../ref/templates/builtins.html#std:templatetag-include"><code class="xref std std-ttag docutils literal notranslate"><span class="pre">include</span></code></a> accepte maintenant des objects itérables de noms de gabarits.</li>
</ul>
</div>
<div class="section" id="s-tests">
<span id="tests"></span><h4>Tests<a class="headerlink" href="#tests" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="../topics/testing/tools.html#django.test.SimpleTestCase" title="django.test.SimpleTestCase"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleTestCase</span></code></a> implément dorénavant la méthode <code class="docutils literal notranslate"><span class="pre">debug()</span></code> pour permettre de lancer un test sans collecter son résultat et intercepter les exceptions. Ceci peut être utiliser pour pouvoir exécuter les tests avec un débogueur.</li>
<li>Le nouveau réglage de base de données de test <a class="reference internal" href="../ref/settings.html#std:setting-TEST_MIGRATE"><code class="xref std std-setting docutils literal notranslate"><span class="pre">MIGRATE</span></code></a> permet de désactiver les migrations pendant la création d’une base de données de test.</li>
<li>Le lanceur de tests de Django prend dorénavant en charge une option <a class="reference internal" href="../ref/django-admin.html#cmdoption-test-buffer"><code class="xref std std-option docutils literal notranslate"><span class="pre">test</span> <span class="pre">--buffer</span></code></a> pour supprimer tout affichage pour les tests qui passent.</li>
<li><a class="reference internal" href="../topics/testing/advanced.html#django.test.runner.DiscoverRunner" title="django.test.runner.DiscoverRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">DiscoverRunner</span></code></a> n’exécute plus les contrôles systèmes pour les bases de données qui ne sont pas <a class="reference internal" href="../topics/testing/tools.html#testing-multi-db"><span class="std std-ref">référencées par les tests</span></a>.</li>
<li>La terminaison (teardown) de la classe <a class="reference internal" href="../topics/testing/tools.html#django.test.TransactionTestCase" title="django.test.TransactionTestCase"><code class="xref py py-class docutils literal notranslate"><span class="pre">TransactionTestCase</span></code></a> est dorénavant plus rapide avec MySQL en raison des améliorations de la command <a class="reference internal" href="../ref/django-admin.html#django-admin-flush"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">flush</span></code></a>. Comme effet de bord, cette classe de réinitialise plus automatiquement les séquences dans le processus de terminaison. Activez <a class="reference internal" href="../topics/testing/advanced.html#django.test.TransactionTestCase.reset_sequences" title="django.test.TransactionTestCase.reset_sequences"><code class="xref py py-attr docutils literal notranslate"><span class="pre">TransactionTestCase.reset_sequences</span></code></a> si vos tests ont besoin de cette fonctionnalité.</li>
</ul>
</div>
<div class="section" id="s-urls">
<span id="urls"></span><h4>URL<a class="headerlink" href="#urls" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Les <a class="reference internal" href="../topics/http/urls.html#registering-custom-path-converters"><span class="std std-ref">convertisseurs de chemin</span></a> peuvent dorénavant générer <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> dans <code class="docutils literal notranslate"><span class="pre">to_url()</span></code> pour indiquer qu’aucune correspondance n’a été trouvée dans la résolution inverse des URL.</li>
</ul>
</div>
<div class="section" id="s-utilities">
<span id="utilities"></span><h4>Utilitaires<a class="headerlink" href="#utilities" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="../ref/utils.html#django.utils.encoding.filepath_to_uri" title="django.utils.encoding.filepath_to_uri"><code class="xref py py-func docutils literal notranslate"><span class="pre">filepath_to_uri()</span></code></a> accepte maintenant les chemins <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(disponible dans Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a>.</li>
<li><a class="reference internal" href="../ref/utils.html#django.utils.dateparse.parse_duration" title="django.utils.dateparse.parse_duration"><code class="xref py py-func docutils literal notranslate"><span class="pre">parse_duration()</span></code></a> prend dorénavant en charge les séparateurs virgules pour les fractions décimales dans le format ISO 8601.</li>
<li><a class="reference internal" href="../ref/utils.html#django.utils.dateparse.parse_datetime" title="django.utils.dateparse.parse_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">parse_datetime()</span></code></a>, <a class="reference internal" href="../ref/utils.html#django.utils.dateparse.parse_duration" title="django.utils.dateparse.parse_duration"><code class="xref py py-func docutils literal notranslate"><span class="pre">parse_duration()</span></code></a> et <a class="reference internal" href="../ref/utils.html#django.utils.dateparse.parse_time" title="django.utils.dateparse.parse_time"><code class="xref py py-func docutils literal notranslate"><span class="pre">parse_time()</span></code></a> acceptent dorénavant les séparateurs virgules pour les millisecondes.</li>
</ul>
</div>
<div class="section" id="s-miscellaneous">
<span id="miscellaneous"></span><h4>Divers<a class="headerlink" href="#miscellaneous" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Le moteur SQLite accepte dorénavant les valeurs <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(disponible dans Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a> dans son réglage <code class="docutils literal notranslate"><span class="pre">NAME</span></code>.</li>
<li>Le fichier <code class="docutils literal notranslate"><span class="pre">settings.py</span></code> généré par la commande <a class="reference internal" href="../ref/django-admin.html#django-admin-startproject"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">startproject</span></code></a> utilise dorénavant un chemin <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(disponible dans Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a> au lieu de <a class="reference external" href="https://docs.python.org/3/library/os.path.html#module-os.path" title="(disponible dans Python v3.9)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">os.path</span></code></a> pour la construction des chemins du système de fichiers.</li>
<li>Le réglage <a class="reference internal" href="../ref/settings.html#std:setting-DATABASE-TIME_ZONE"><code class="xref std std-setting docutils literal notranslate"><span class="pre">TIME_ZONE</span></code></a> est désormais autorisé pour les bases de données qui gèrent les fuseaux horaires.</li>
</ul>
</div>
</div>
</div>
<div class="section" id="s-backwards-incompatible-changes-in-3-1">
<span id="s-backwards-incompatible-3-1"></span><span id="backwards-incompatible-changes-in-3-1"></span><span id="backwards-incompatible-3-1"></span><h2>Changements incompatibles avec les anciennes versions dans Django 3.1<a class="headerlink" href="#backwards-incompatible-changes-in-3-1" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="s-database-backend-api">
<span id="database-backend-api"></span><h3>API de moteur de base de données<a class="headerlink" href="#database-backend-api" title="Lien permanent vers ce titre">¶</a></h3>
<p>Cette section décrit des modifications qui pourraient être nécessaires dans des moteurs de base de données tiers.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">DatabaseOperations.fetch_returned_insert_columns()</span></code> exige dorénavant un paramètre supplémentaire <code class="docutils literal notranslate"><span class="pre">returning_params</span></code>.</li>
<li>La propriété <code class="docutils literal notranslate"><span class="pre">connection.timezone</span></code> vaut dorénavant <code class="docutils literal notranslate"><span class="pre">'UTC'</span></code> par défaut ou la valeur de <a class="reference internal" href="../ref/settings.html#std:setting-DATABASE-TIME_ZONE"><code class="xref std std-setting docutils literal notranslate"><span class="pre">TIME_ZONE</span></code></a> lorsque <a class="reference internal" href="../ref/settings.html#std:setting-USE_TZ"><code class="xref std std-setting docutils literal notranslate"><span class="pre">USE_TZ</span></code></a> vaut <code class="docutils literal notranslate"><span class="pre">True</span></code> avec les bases de données prenant en charge les fuseaux horaires. Précédement, il contenait  <code class="docutils literal notranslate"><span class="pre">None</span></code> avec les bases de données prenant en charge les fuseaux horaires.</li>
<li>La propriété <code class="docutils literal notranslate"><span class="pre">connection._nodb_connection</span></code> a été modifiée en une méthode <code class="docutils literal notranslate"><span class="pre">connection._nodb_cursor()</span></code> et renvoie dorénavant un gestionnaire de contexte produisant un curseur et fermant automatiquement ce curseur et sa connexion en sortant du contexte avec l’instruction <code class="docutils literal notranslate"><span class="pre">with</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">DatabaseClient.runshell()</span></code> exige dorénavant un paramètre supplémentaire <code class="docutils literal notranslate"><span class="pre">parameters</span></code> sous forme de liste de paramètres supplémentaires à transmettre au client de ligne de commande.</li>
<li>Le paramètre positionnel <code class="docutils literal notranslate"><span class="pre">sequences</span></code> de <code class="docutils literal notranslate"><span class="pre">DatabaseOperations.sql_flush()</span></code> est remplacé par le paramètre <code class="docutils literal notranslate"><span class="pre">reset_sequences</span></code>, purement mot-clé et booléen. Si <code class="docutils literal notranslate"><span class="pre">True</span></code>, les séquences des tables tronquées seront réinitialisées.</li>
<li>Le paramètre <code class="docutils literal notranslate"><span class="pre">allow_cascade</span></code> de <code class="docutils literal notranslate"><span class="pre">DatabaseOperations.sql_flush()</span></code> est dorénavant un paramètre uniquement par mot-clé.</li>
<li>Le paramètre positionnel <code class="docutils literal notranslate"><span class="pre">using</span></code> de <code class="docutils literal notranslate"><span class="pre">DatabaseOperations.execute_sql_flush()</span></code> a été supprimé. La méthode utilise dorénavant la base de données de l’instance appelée.</li>
<li>Les moteurs de base de données externes doivent implémenter la prise en charge de <code class="docutils literal notranslate"><span class="pre">JSONField</span></code> ou définir <code class="docutils literal notranslate"><span class="pre">DatabaseFeatures.supports_json_field</span></code> à <code class="docutils literal notranslate"><span class="pre">False</span></code>. Si le stockage de primitives n’est pas pris en charge, il faut définir <code class="docutils literal notranslate"><span class="pre">DatabaseFeatures.supports_primitives_in_json_field</span></code> à <code class="docutils literal notranslate"><span class="pre">False</span></code>. Si un type de données JSON spécifique existe, définissez <code class="docutils literal notranslate"><span class="pre">DatabaseFeatures.has_native_json_field</span></code> à <code class="docutils literal notranslate"><span class="pre">True</span></code>. Si <a class="reference internal" href="../topics/db/queries.html#std:fieldlookup-jsonfield.contains"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">jsonfield.contains</span></code></a> et <a class="reference internal" href="../topics/db/queries.html#std:fieldlookup-jsonfield.contained_by"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">jsonfield.contained_by</span></code></a> ne sont pas pris en charge, définissez <code class="docutils literal notranslate"><span class="pre">DatabaseFeatures.supports_json_field_contains</span></code> à <code class="docutils literal notranslate"><span class="pre">False</span></code>.</li>
<li>Les moteurs de base de données de tierce-partie doivent implémenter l’introspection pour <code class="docutils literal notranslate"><span class="pre">JSONField</span></code> ou définir <code class="docutils literal notranslate"><span class="pre">can_introspect_json_field</span></code> à <code class="docutils literal notranslate"><span class="pre">False</span></code>.</li>
</ul>
</div>
<div class="section" id="s-dropped-support-for-mariadb-10-1">
<span id="dropped-support-for-mariadb-10-1"></span><h3>Abandon de la prise en charge de MariaDB 10.1<a class="headerlink" href="#dropped-support-for-mariadb-10-1" title="Lien permanent vers ce titre">¶</a></h3>
<p>La prise en charge amont de MariaDB 10.1 se termine en octobre 2020. Django 3.1 prend en charge MariaDB 10.2 et plus récent.</p>
</div>
<div class="section" id="s-contrib-admin-browser-support">
<span id="contrib-admin-browser-support"></span><h3>Navigateurs pris en charge par <code class="docutils literal notranslate"><span class="pre">contrib.admin</span></code><a class="headerlink" href="#contrib-admin-browser-support" title="Lien permanent vers ce titre">¶</a></h3>
<p>Le site d’administration ne prend plus en charge le navigateur obsolète Internet Explorer. Consultez la <a class="reference internal" href="../faq/admin.html#admin-browser-support"><span class="std std-ref">FAQ de l’administration</span></a> pour plus de détails sur les navigateurs pris en charge.</p>
</div>
<div class="section" id="s-abstractuser-first-name-max-length-increased-to-150">
<span id="abstractuser-first-name-max-length-increased-to-150"></span><h3>L’attribut <code class="docutils literal notranslate"><span class="pre">max_length</span></code> de <a class="reference internal" href="../ref/contrib/auth.html#django.contrib.auth.models.User.first_name" title="django.contrib.auth.models.User.first_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AbstractUser.first_name</span></code></a> a été étendu à 150<a class="headerlink" href="#abstractuser-first-name-max-length-increased-to-150" title="Lien permanent vers ce titre">¶</a></h3>
<p>Une migration pour <a class="reference internal" href="../ref/contrib/auth.html#django.contrib.auth.models.User.first_name" title="django.contrib.auth.models.User.first_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">django.contrib.auth.models.User.first_name</span></code></a> a été incluse. Si vous disposez d’un modèle utilisateur personnalisé héritant de <code class="docutils literal notranslate"><span class="pre">AbstractUser</span></code>, vous devrez produire et appliquer une migration de base de données pour votre modèle.</p>
<p>Si vous souhaitez conserver la limite de 30 caractères pour les prénoms, utilisez un formulaire personnalisé</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django</span> <span class="k">import</span> <span class="n">forms</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth.forms</span> <span class="k">import</span> <span class="n">UserChangeForm</span>

<span class="k">class</span> <span class="nc">MyUserChangeForm</span><span class="p">(</span><span class="n">UserChangeForm</span><span class="p">):</span>
    <span class="n">first_name</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>Si vous souhaitez conserver cette restriction dans le site d’administration lors de l’édition des utilisateurs, définissez <code class="docutils literal notranslate"><span class="pre">UserAdmin.form</span></code> à ce formulaire</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib.auth.admin</span> <span class="k">import</span> <span class="n">UserAdmin</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="k">import</span> <span class="n">User</span>

<span class="k">class</span> <span class="nc">MyUserAdmin</span><span class="p">(</span><span class="n">UserAdmin</span><span class="p">):</span>
    <span class="n">form</span> <span class="o">=</span> <span class="n">MyUserChangeForm</span>

<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">unregister</span><span class="p">(</span><span class="n">User</span><span class="p">)</span>
<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">MyUserAdmin</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="s-id1">
<span id="id1"></span><h3>Divers<a class="headerlink" href="#id1" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li>Les clés de cache utilisées par <a class="reference internal" href="../topics/cache.html#std:templatetag-cache"><code class="xref std std-ttag docutils literal notranslate"><span class="pre">cache</span></code></a> et générées par <a class="reference internal" href="../topics/cache.html#django.core.cache.utils.make_template_fragment_key" title="django.core.cache.utils.make_template_fragment_key"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_template_fragment_key()</span></code></a> sont différentes des clés générées par les anciennes versions de Django. Après la mise à jour vers Django 3.1, la première requête vers tout fragment de gabarit mis en cache va devoir remplir à nouveau le cache.</li>
<li>La logique derrière la décision de renvoyer une redirection ou une réponse HTTP 204 dans la vue <a class="reference internal" href="../topics/i18n/translation.html#django.views.i18n.set_language" title="django.views.i18n.set_language"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_language()</span></code></a> est dorénavant basée sur l’en-tête HTTP <code class="docutils literal notranslate"><span class="pre">Accept</span></code> au lieu de la présence de l’en-tête HTTP <code class="docutils literal notranslate"><span class="pre">X-Requested-With</span></code>.</li>
<li>Les importations de compatibilité pour <code class="docutils literal notranslate"><span class="pre">django.core.exceptions.EmptyResultSet</span></code> dans <code class="docutils literal notranslate"><span class="pre">django.db.models.query</span></code>, <code class="docutils literal notranslate"><span class="pre">django.db.models.sql</span></code> et <code class="docutils literal notranslate"><span class="pre">django.db.models.sql.datastructures</span></code> ont été supprimées.</li>
<li>L’importation de compatibilité pour  <code class="docutils literal notranslate"><span class="pre">django.core.exceptions.FieldDoesNotExist</span></code> dans <code class="docutils literal notranslate"><span class="pre">django.db.models.fields</span></code> a été supprimée.</li>
<li>Les importations de compatibilité pour <code class="docutils literal notranslate"><span class="pre">django.forms.utils.pretty_name()</span></code> et <code class="docutils literal notranslate"><span class="pre">django.forms.boundfield.BoundField</span></code> dans <code class="docutils literal notranslate"><span class="pre">django.forms.forms</span></code> ont été supprimées.</li>
<li>Les importations de compatibilité pour <code class="docutils literal notranslate"><span class="pre">Context</span></code>, <code class="docutils literal notranslate"><span class="pre">ContextPopException</span></code> et <code class="docutils literal notranslate"><span class="pre">RequestContext</span></code> dans <code class="docutils literal notranslate"><span class="pre">django.template.base</span></code> ont été supprimées.</li>
<li>L’importation de compatibilité pour <code class="docutils literal notranslate"><span class="pre">django.contrib.admin.helpers.ACTION_CHECKBOX_NAME</span></code> dans <code class="docutils literal notranslate"><span class="pre">django.contrib.admin</span></code> a été supprimée.</li>
<li>Les réglages <a class="reference internal" href="../ref/settings.html#std:setting-STATIC_URL"><code class="xref std std-setting docutils literal notranslate"><span class="pre">STATIC_URL</span></code></a> et <a class="reference internal" href="../ref/settings.html#std:setting-MEDIA_URL"><code class="xref std std-setting docutils literal notranslate"><span class="pre">MEDIA_URL</span></code></a> définis à des chemins relatifs sont dorénavant préfixés par la valeur <code class="docutils literal notranslate"><span class="pre">SCRIPT_NAME</span></code> fournie par le serveur (ou <code class="docutils literal notranslate"><span class="pre">/</span></code> si non défini). Ce changement ne devrait pas affecter les réglages définis à des URL valides ou des chemins absolus.</li>
<li><a class="reference internal" href="../ref/middleware.html#django.middleware.http.ConditionalGetMiddleware" title="django.middleware.http.ConditionalGetMiddleware"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConditionalGetMiddleware</span></code></a> n’ajoute plus l’en-tête <code class="docutils literal notranslate"><span class="pre">ETag</span></code> aux réponses qui ont un contenu <a class="reference internal" href="../ref/request-response.html#django.http.HttpResponse.content" title="django.http.HttpResponse.content"><code class="xref py py-attr docutils literal notranslate"><span class="pre">content</span></code></a> vide.</li>
<li>Le décorateur <code class="docutils literal notranslate"><span class="pre">django.utils.decorators.classproperty()</span></code> a été rendu public et déplacé vers <a class="reference internal" href="../ref/utils.html#django.utils.functional.classproperty" title="django.utils.functional.classproperty"><code class="xref py py-class docutils literal notranslate"><span class="pre">django.utils.functional.classproperty()</span></code></a>.</li>
<li>Le filtre de gabarit <a class="reference internal" href="../ref/templates/builtins.html#std:templatefilter-floatformat"><code class="xref std std-tfilter docutils literal notranslate"><span class="pre">floatformat</span></code></a> produit dorénavant <code class="docutils literal notranslate"><span class="pre">0</span></code> (positif) pour les nombres négatifs arrondis à zéro.</li>
<li>Les options <a class="reference internal" href="../ref/models/options.html#django.db.models.Options.ordering" title="django.db.models.Options.ordering"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Meta.ordering</span></code></a> et <a class="reference internal" href="../ref/models/options.html#django.db.models.Options.unique_together" title="django.db.models.Options.unique_together"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Meta.unique_together</span></code></a> des modèles dans les modules <code class="docutils literal notranslate"><span class="pre">django.contrib</span></code> qui étaient précédemment des tuples sont maintenant des listes.</li>
<li>Le composant calendrier du site d’administration gère dorénavant les années sur deux chiffres selon la spécification Open Group, c’est-à-dire que les valeurs entre 69 et 99 sont attribuées au siècle précédent et les valeurs entre 0 et 68 sont attribuées au siècle actuel.</li>
<li>Les formats de date uniquement ont été supprimés de la liste par défaut de <a class="reference internal" href="../ref/settings.html#std:setting-DATETIME_INPUT_FORMATS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DATETIME_INPUT_FORMATS</span></code></a>.</li>
<li>Le composant <a class="reference internal" href="../ref/forms/widgets.html#django.forms.FileInput" title="django.forms.FileInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileInput</span></code></a> ne produit plus d’attribut HTML <code class="docutils literal notranslate"><span class="pre">required</span></code> lorsque des données initiales sont présentes.</li>
<li>La classe non documentée <code class="docutils literal notranslate"><span class="pre">django.views.debug.ExceptionReporterFilter</span></code> a été supprimée. Comme le spécifie la documentation <a class="reference internal" href="../howto/error-reporting.html#custom-error-reports"><span class="std std-ref">Rapports d’erreur personnalisés</span></a>, les classes à placer dans <a class="reference internal" href="../ref/settings.html#std:setting-DEFAULT_EXCEPTION_REPORTER_FILTER"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DEFAULT_EXCEPTION_REPORTER_FILTER</span></code></a> doivent hériter de <a class="reference internal" href="../howto/error-reporting.html#django.views.debug.SafeExceptionReporterFilter" title="django.views.debug.SafeExceptionReporterFilter"><code class="xref py py-class docutils literal notranslate"><span class="pre">django.views.debug.SafeExceptionReporterFilter</span></code></a>.</li>
<li>L’expiration du cache définie par le décorateur <a class="reference internal" href="../topics/cache.html#django.views.decorators.cache.cache_page" title="django.views.decorators.cache.cache_page"><code class="xref py py-func docutils literal notranslate"><span class="pre">cache_page()</span></code></a> a désormais la priorité sur la directive <code class="docutils literal notranslate"><span class="pre">max-age</span></code> de l’en-tête <code class="docutils literal notranslate"><span class="pre">Cache-Control</span></code>.</li>
<li>Lorsqu’on passe un champ distant non local dans le paramètre <a class="reference internal" href="../ref/models/fields.html#django.db.models.ForeignKey.to_field" title="django.db.models.ForeignKey.to_field"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ForeignKey.to_field</span></code></a>, cela génère maintenant une exception <a class="reference internal" href="../ref/exceptions.html#django.core.exceptions.FieldError" title="django.core.exceptions.FieldError"><code class="xref py py-class docutils literal notranslate"><span class="pre">FieldError</span></code></a>.</li>
<li>Le réglage <a class="reference internal" href="../ref/settings.html#std:setting-SECURE_REFERRER_POLICY"><code class="xref std std-setting docutils literal notranslate"><span class="pre">SECURE_REFERRER_POLICY</span></code></a> contient désormais <code class="docutils literal notranslate"><span class="pre">'same-origin'</span></code> par défaut. Consultez la <a class="reference internal" href="#whats-new-security-3-1"><span class="std std-ref">section sécurité</span></a> des nouveautés de Django 3.1 pour plus de détails.</li>
<li>La commande d’administration <a class="reference internal" href="../ref/django-admin.html#django-admin-check"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">check</span></code></a> exécute dorénavant les contrôles systèmes <code class="docutils literal notranslate"><span class="pre">database</span></code> uniquement pour les alias de base de données indiqués par l’option <a class="reference internal" href="../ref/django-admin.html#cmdoption-check-database"><code class="xref std std-option docutils literal notranslate"><span class="pre">check</span> <span class="pre">--database</span></code></a>.</li>
<li>La commande d’administration <a class="reference internal" href="../ref/django-admin.html#django-admin-migrate"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">migrate</span></code></a> exécute dorénavant les contrôles systèmes <code class="docutils literal notranslate"><span class="pre">database</span></code> uniquement pour la base de données de la migration.</li>
<li>Les classes CSS du site d’administration <code class="docutils literal notranslate"><span class="pre">row1</span></code> et <code class="docutils literal notranslate"><span class="pre">row2</span></code> ont été supprimées en faveur des pseudo-classes <code class="docutils literal notranslate"><span class="pre">:nth-child(odd)</span></code> et <code class="docutils literal notranslate"><span class="pre">:nth-child(even)</span></code>.</li>
<li>La fonction <a class="reference internal" href="../topics/auth/passwords.html#django.contrib.auth.hashers.make_password" title="django.contrib.auth.hashers.make_password"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_password()</span></code></a> exige dorénavant que son paramètre soit une chaîne ou des octets. D’autres types de données doivent préalablement être forcés à l’un de ces types.</li>
<li>Le paramètre non documenté <code class="docutils literal notranslate"><span class="pre">version</span></code> de la fonction <a class="reference internal" href="../ref/contrib/gis/functions.html#django.contrib.gis.db.models.functions.AsKML" title="django.contrib.gis.db.models.functions.AsKML"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsKML</span></code></a> a été supprimé.</li>
<li>Les <a class="reference internal" href="../topics/serialization.html#serialization-formats"><span class="std std-ref">sérialiseurs JSON et YAML</span></a> utilisés par <a class="reference internal" href="../ref/django-admin.html#django-admin-dumpdata"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">dumpdata</span></code></a> produisent toutes leurs données en Unicode par défaut. SI vous voulez conserver le comportement précédent, passez <code class="docutils literal notranslate"><span class="pre">ensure_ascii=True</span></code> au sérialiseur JSON ou <code class="docutils literal notranslate"><span class="pre">allow_unicode=False</span></code> au sérialiseur YAML.</li>
<li>Le relanceur automatique ne surveille plus les changements dans les fichiers de traductions intégrés de Django.</li>
<li>La version minimum de <code class="docutils literal notranslate"><span class="pre">mysqlclient</span></code> prise en charge est passée de 1.3.13 à 1.4.0.</li>
<li>Les éléments non documentés <code class="docutils literal notranslate"><span class="pre">django.contrib.postgres.forms.InvalidJSONInput</span></code> et <code class="docutils literal notranslate"><span class="pre">django.contrib.postgres.forms.JSONString</span></code> ont été déplacés vers <code class="docutils literal notranslate"><span class="pre">django.forms.fields</span></code>.</li>
<li>La classe <code class="docutils literal notranslate"><span class="pre">django.contrib.postgres.fields.jsonb.JsonAdapter</span></code> non documentée a été supprimée.</li>
<li>La balise <a class="reference internal" href="../topics/i18n/formatting.html#std:templatetag-localize"><code class="xref std std-ttag docutils literal notranslate"><span class="pre">{%</span> <span class="pre">localize</span> <span class="pre">off</span> <span class="pre">%}</span></code></a>&nbsp; et le filtre <a class="reference internal" href="../topics/i18n/formatting.html#std:templatefilter-unlocalize"><code class="xref std std-tfilter docutils literal notranslate"><span class="pre">unlocalize</span></code></a> ne tiennent plus compte du réglage <a class="reference internal" href="../ref/settings.html#std:setting-DECIMAL_SEPARATOR"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DECIMAL_SEPARATOR</span></code></a>.</li>
<li>La version minimum de <code class="docutils literal notranslate"><span class="pre">asgiref</span></code> prise en charge est passée de 3.2 à 3.2.10.</li>
<li>La classe <a class="reference internal" href="../topics/forms/media.html"><span class="doc">Media</span></a> produit dorénavant les balises <code class="docutils literal notranslate"><span class="pre">&lt;script&gt;</span></code> sans l’attribut <code class="docutils literal notranslate"><span class="pre">type</span></code> pour respecter les <a class="reference external" href="https://html.spec.whatwg.org/multipage/scripting.html#the-script-element">recommandations WHATWG</a>.</li>
<li><a class="reference internal" href="../ref/forms/fields.html#django.forms.ModelChoiceIterator" title="django.forms.ModelChoiceIterator"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelChoiceIterator</span></code></a>, used by
<a class="reference internal" href="../ref/forms/fields.html#django.forms.ModelChoiceField" title="django.forms.ModelChoiceField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelChoiceField</span></code></a> and
<a class="reference internal" href="../ref/forms/fields.html#django.forms.ModelMultipleChoiceField" title="django.forms.ModelMultipleChoiceField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelMultipleChoiceField</span></code></a>, now yields 2-tuple choices
containing <a class="reference internal" href="../ref/forms/fields.html#django.forms.ModelChoiceIteratorValue" title="django.forms.ModelChoiceIteratorValue"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelChoiceIteratorValue</span></code></a> instances as the
first <code class="docutils literal notranslate"><span class="pre">value</span></code> element in each choice. In most cases this proxies
transparently, but if you need the <code class="docutils literal notranslate"><span class="pre">field</span></code> value itself, use the
<a class="reference internal" href="../ref/forms/fields.html#django.forms.ModelChoiceIteratorValue.value" title="django.forms.ModelChoiceIteratorValue.value"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ModelChoiceIteratorValue.value</span></code></a> attribute instead.</li>
</ul>
</div>
</div>
<div class="section" id="s-features-deprecated-in-3-1">
<span id="s-deprecated-features-3-1"></span><span id="features-deprecated-in-3-1"></span><span id="deprecated-features-3-1"></span><h2>Fonctionnalités rendues obsolètes dans Django 3.1<a class="headerlink" href="#features-deprecated-in-3-1" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="s-postgresql-jsonfield">
<span id="s-deprecated-jsonfield"></span><span id="postgresql-jsonfield"></span><span id="deprecated-jsonfield"></span><h3>Le champ <code class="docutils literal notranslate"><span class="pre">JSONField</span></code> spécifique à PostgreSQL<a class="headerlink" href="#postgresql-jsonfield" title="Lien permanent vers ce titre">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">django.contrib.postgres.fields.JSONField</span></code> et <code class="docutils literal notranslate"><span class="pre">django.contrib.postgres.forms.JSONField</span></code> sont obsolètes et remplacées par <a class="reference internal" href="../ref/models/fields.html#django.db.models.JSONField" title="django.db.models.JSONField"><code class="xref py py-class docutils literal notranslate"><span class="pre">models.JSONField</span></code></a> et <a class="reference internal" href="../ref/forms/fields.html#django.forms.JSONField" title="django.forms.JSONField"><code class="xref py py-class docutils literal notranslate"><span class="pre">forms.JSONField</span></code></a>.</p>
<p>Les transformations non documentées <code class="docutils literal notranslate"><span class="pre">django.contrib.postgres.fields.jsonb.KeyTransform</span></code> et <code class="docutils literal notranslate"><span class="pre">django.contrib.postgres.fields.jsonb.KeyTextTransform</span></code> sont aussi obsolètes et remplacées par les transformations dans <code class="docutils literal notranslate"><span class="pre">django.db.models.fields.json</span></code>.</p>
<p>Les nouveaux éléments  <code class="docutils literal notranslate"><span class="pre">JSONField</span></code>, <code class="docutils literal notranslate"><span class="pre">KeyTransform</span></code> et <code class="docutils literal notranslate"><span class="pre">KeyTextTransform</span></code> peuvent être utilisés avec tous les moteurs de base de données pris en charge officiellement par Django.</p>
</div>
<div class="section" id="s-id2">
<span id="id2"></span><h3>Divers<a class="headerlink" href="#id2" title="Lien permanent vers ce titre">¶</a></h3>
<ul>
<li><p class="first">Le réglage <code class="docutils literal notranslate"><span class="pre">PASSWORD_RESET_TIMEOUT_DAYS</span></code> a été rendu obsolète au profit de <a class="reference internal" href="../ref/settings.html#std:setting-PASSWORD_RESET_TIMEOUT"><code class="xref std std-setting docutils literal notranslate"><span class="pre">PASSWORD_RESET_TIMEOUT</span></code></a>.</p>
</li>
<li><p class="first">L’utilisation non documentée de l’expression de requête <a class="reference internal" href="../ref/models/querysets.html#std:fieldlookup-isnull"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">isnull</span></code></a> avec des valeurs non booléennes dans la partie droite est obsolète, utilisez plutôt <code class="docutils literal notranslate"><span class="pre">True</span></code> ou <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</li>
<li><p class="first">La classe d’exception tout juste documentée <code class="docutils literal notranslate"><span class="pre">django.db.models.query_utils.InvalidQuery</span></code> a été rendue obsolète au profit de <a class="reference internal" href="../ref/exceptions.html#django.core.exceptions.FieldDoesNotExist" title="django.core.exceptions.FieldDoesNotExist"><code class="xref py py-class docutils literal notranslate"><span class="pre">FieldDoesNotExist</span></code></a> et de <a class="reference internal" href="../ref/exceptions.html#django.core.exceptions.FieldError" title="django.core.exceptions.FieldError"><code class="xref py py-class docutils literal notranslate"><span class="pre">FieldError</span></code></a>.</p>
</li>
<li><p class="first">Le point d’entrée <code class="docutils literal notranslate"><span class="pre">django-admin.py</span></code> est obsolète ; il faut plutôt utiliser <code class="docutils literal notranslate"><span class="pre">django-admin</span></code>.</p>
</li>
<li><p class="first">La méthode <code class="docutils literal notranslate"><span class="pre">HttpRequest.is_ajax()</span></code> est osbolète car elle dépend d’une manière de signifier des appels AJAX propre à jQuery, alors que l’usage actuel tend à utiliser l”<a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">API fetch</a> de JavaScript. En fonction de votre cas d’utilisation, vous pouvez soit écrire votre propre méthode de détection AJAX, soit utiliser la nouvelle méthode <a class="reference internal" href="../ref/request-response.html#django.http.HttpRequest.accepts" title="django.http.HttpRequest.accepts"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HttpRequest.accepts()</span></code></a> si votre code se base sur l’en-tête HTTP <code class="docutils literal notranslate"><span class="pre">Accept</span></code> du client.</p>
<p>Si vous écrivez votre propre méthode de détection AJAX, <code class="docutils literal notranslate"><span class="pre">request.is_ajax()</span></code> peut être reproduite exactement avec la condition <code class="docutils literal notranslate"><span class="pre">request.headers.get('x-requested-with')</span> <span class="pre">==</span> <span class="pre">'XMLHttpRequest'</span></code>.</p>
</li>
<li><p class="first">La transmission de <code class="docutils literal notranslate"><span class="pre">None</span></code> comme premier paramètre de <code class="docutils literal notranslate"><span class="pre">django.utils.deprecation.MiddlewareMixin.__init__()</span></code> est obsolète.</p>
</li>
<li><p class="first">Le format de codage des valeurs de cookies utilisé par <a class="reference internal" href="../ref/contrib/messages.html#django.contrib.messages.storage.cookie.CookieStorage" title="django.contrib.messages.storage.cookie.CookieStorage"><code class="xref py py-class docutils literal notranslate"><span class="pre">CookieStorage</span></code></a> est différent du format généré par les anciennes versions de Django. La prise en charge de l’ancien format demeure jusqu’à Django 4.0.</p>
</li>
<li><p class="first">Le format de codage des sessions est différent du format généré par les anciennes versions de Django. La prise en charge de l’ancien format demeure jusqu’à Django 4.0.</p>
</li>
<li><p class="first">Le paramètre à titre purement documentaire <code class="docutils literal notranslate"><span class="pre">providing_args</span></code> de <a class="reference internal" href="../topics/signals.html#django.dispatch.Signal" title="django.dispatch.Signal"><code class="xref py py-class docutils literal notranslate"><span class="pre">Signal</span></code></a> est obsolète. Si vous comptez sur ce paramètre comme information de documentation, vous pouvez déplacer son contenu dans un commentaire de code.</p>
</li>
<li><p class="first">L’appel à <code class="docutils literal notranslate"><span class="pre">django.utils.crypto.get_random_string()</span></code> sans paramètre de longueur <code class="docutils literal notranslate"><span class="pre">length</span></code> est obsolète.</p>
</li>
<li><p class="first">Le message <code class="docutils literal notranslate"><span class="pre">list</span></code> de <a class="reference internal" href="../ref/forms/fields.html#django.forms.ModelMultipleChoiceField" title="django.forms.ModelMultipleChoiceField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelMultipleChoiceField</span></code></a> a été rendu obsolète au profit de <code class="docutils literal notranslate"><span class="pre">invalid_list</span></code>.</p>
</li>
<li><p class="first">La transmission d’alias de colonnes bruts à <a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.order_by" title="django.db.models.query.QuerySet.order_by"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.order_by()</span></code></a> est osbolète. Le même résultat peut être obtenu en passant préalablement les alias dans un objet <a class="reference internal" href="../ref/models/expressions.html#django.db.models.expressions.RawSQL" title="django.db.models.expressions.RawSQL"><code class="xref py py-class docutils literal notranslate"><span class="pre">RawSQL</span></code></a>.</p>
</li>
<li><p class="first">Le champ de modèle <code class="docutils literal notranslate"><span class="pre">NullBooleanField</span></code> a été rendu obsolète en faveur de <code class="docutils literal notranslate"><span class="pre">BooleanField(null=True)</span></code>.</p>
</li>
<li><p class="first">L’alias <code class="docutils literal notranslate"><span class="pre">django.conf.urls.url()</span></code> de <a class="reference internal" href="../ref/urls.html#django.urls.re_path" title="django.urls.re_path"><code class="xref py py-func docutils literal notranslate"><span class="pre">django.urls.re_path()</span></code></a> est obsolète.</p>
</li>
<li><p class="first">Les balises de gabarit <code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">ifequal</span> <span class="pre">%}</span></code> et <code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">ifnotequal</span> <span class="pre">%}</span></code> sont obsolètes et <a class="reference internal" href="../ref/templates/builtins.html#std:templatetag-if"><code class="xref std std-ttag docutils literal notranslate"><span class="pre">{%</span> <span class="pre">if</span> <span class="pre">%}</span></code></a> doit être utilisé à la place. <code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">if</span> <span class="pre">%}</span></code> couvre tous les cas d’utilisation, mais si vous voulez vraiment continuer à utiliser ces balises, elles peuvent être extraites du code de Django vers un de vos modules puis incluses comme balise intégrée dans l’option <a class="reference internal" href="../topics/templates.html#django.template.backends.django.DjangoTemplates" title="django.template.backends.django.DjangoTemplates"><code class="xref py py-class docutils literal notranslate"><span class="pre">'builtins'</span></code></a> de <a class="reference internal" href="../ref/settings.html#std:setting-TEMPLATES-OPTIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">OPTIONS</span></code></a>.</p>
</li>
<li><p class="first">Le réglage temporaire <code class="docutils literal notranslate"><span class="pre">DEFAULT_HASHING_ALGORITHM</span></code> est obsolète.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="s-features-removed-in-3-1">
<span id="s-removed-features-3-1"></span><span id="features-removed-in-3-1"></span><span id="removed-features-3-1"></span><h2>Fonctionnalités supprimées dans 3.1<a class="headerlink" href="#features-removed-in-3-1" title="Lien permanent vers ce titre">¶</a></h2>
<p>Ces fonctionnalités ont atteint la fin de leur cycle d’obsolescence et sont supprimées dans Django 3.1.</p>
<p>Voir <a class="reference internal" href="2.2.html#deprecated-features-2-2"><span class="std std-ref">Fonctionnalités rendues obsolètes dans Django 2.2</span></a> pour les détails de ces changements, ainsi que pour savoir comment supprimer l’utilisation de ces fonctionnalités.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">django.utils.timezone.FixedOffset</span></code> a été supprimée.</li>
<li><code class="docutils literal notranslate"><span class="pre">django.core.paginator.QuerySetPaginator</span></code> a été supprimée.</li>
<li>L’attribut <code class="docutils literal notranslate"><span class="pre">Meta.ordering</span></code> des modèles n’affecte plus les requêtes <code class="docutils literal notranslate"><span class="pre">GROUP</span> <span class="pre">BY</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">django.contrib.postgres.fields.FloatRangeField</span></code> et <code class="docutils literal notranslate"><span class="pre">django.contrib.postgres.forms.FloatRangeField</span></code> ont été supprimés.</li>
<li>Le réglage <code class="docutils literal notranslate"><span class="pre">FILE_CHARSET</span></code> a été supprimé.</li>
<li><code class="docutils literal notranslate"><span class="pre">django.contrib.staticfiles.storage.CachedStaticFilesStorage</span></code> a été supprimée.</li>
<li>La méthode <code class="docutils literal notranslate"><span class="pre">RemoteUserBackend.configure_user()</span></code> exige <code class="docutils literal notranslate"><span class="pre">request</span></code> comme premier paramètre positionnel.</li>
<li>La prise en charge de <code class="docutils literal notranslate"><span class="pre">SimpleTestCase.allow_database_queries</span></code> et de <code class="docutils literal notranslate"><span class="pre">TransactionTestCase.multi_db</span></code> a été supprimée.</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Notes de publication de Django 3.1</a><ul>
<li><a class="reference internal" href="#python-compatibility">Compatibilité Python</a></li>
<li><a class="reference internal" href="#what-s-new-in-django-3-1">Quoi de neuf dans Django 3.1</a><ul>
<li><a class="reference internal" href="#asynchronous-views-and-middleware-support">Prise en charge des vues et intergiciels asynchrones</a></li>
<li><a class="reference internal" href="#jsonfield-for-all-supported-database-backends">Champ JSONField pour tous les moteurs de bases de données qui le permetttent</a></li>
<li><a class="reference internal" href="#default-hashing-algorithm-settings">Réglage <code class="docutils literal notranslate"><span class="pre">DEFAULT_HASHING_ALGORITHM</span></code></a></li>
<li><a class="reference internal" href="#minor-features">Fonctionnalités mineures</a><ul>
<li><a class="reference internal" href="#django-contrib-admin"><code class="docutils literal notranslate"><span class="pre">django.contrib.admin</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-auth"><code class="docutils literal notranslate"><span class="pre">django.contrib.auth</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-contenttypes"><code class="docutils literal notranslate"><span class="pre">django.contrib.contenttypes</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-gis"><code class="docutils literal notranslate"><span class="pre">django.contrib.gis</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-humanize"><code class="docutils literal notranslate"><span class="pre">django.contrib.humanize</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-postgres"><code class="docutils literal notranslate"><span class="pre">django.contrib.postgres</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-sessions"><code class="docutils literal notranslate"><span class="pre">django.contrib.sessions</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-staticfiles"><code class="docutils literal notranslate"><span class="pre">django.contrib.staticfiles</span></code></a></li>
<li><a class="reference internal" href="#cache">Cache</a></li>
<li><a class="reference internal" href="#csrf">CSRF</a></li>
<li><a class="reference internal" href="#email">Email</a></li>
<li><a class="reference internal" href="#error-reporting">Signalement d’erreurs</a></li>
<li><a class="reference internal" href="#file-storage">Stockage de fichier</a></li>
<li><a class="reference internal" href="#forms">Formulaires</a></li>
<li><a class="reference internal" href="#internationalization">Internationalisation</a></li>
<li><a class="reference internal" href="#management-commands">Commandes d’administration</a></li>
<li><a class="reference internal" href="#models">Modèles</a></li>
<li><a class="reference internal" href="#pagination">Pagination</a></li>
<li><a class="reference internal" href="#requests-and-responses">Requêtes et réponses</a></li>
<li><a class="reference internal" href="#security">Sécurité</a></li>
<li><a class="reference internal" href="#templates">Gabarits</a></li>
<li><a class="reference internal" href="#tests">Tests</a></li>
<li><a class="reference internal" href="#urls">URL</a></li>
<li><a class="reference internal" href="#utilities">Utilitaires</a></li>
<li><a class="reference internal" href="#miscellaneous">Divers</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#backwards-incompatible-changes-in-3-1">Changements incompatibles avec les anciennes versions dans Django 3.1</a><ul>
<li><a class="reference internal" href="#database-backend-api">API de moteur de base de données</a></li>
<li><a class="reference internal" href="#dropped-support-for-mariadb-10-1">Abandon de la prise en charge de MariaDB 10.1</a></li>
<li><a class="reference internal" href="#contrib-admin-browser-support">Navigateurs pris en charge par <code class="docutils literal notranslate"><span class="pre">contrib.admin</span></code></a></li>
<li><a class="reference internal" href="#abstractuser-first-name-max-length-increased-to-150">L’attribut <code class="docutils literal notranslate"><span class="pre">max_length</span></code> de <code class="docutils literal notranslate"><span class="pre">AbstractUser.first_name</span></code> a été étendu à 150</a></li>
<li><a class="reference internal" href="#id1">Divers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#features-deprecated-in-3-1">Fonctionnalités rendues obsolètes dans Django 3.1</a><ul>
<li><a class="reference internal" href="#postgresql-jsonfield">Le champ <code class="docutils literal notranslate"><span class="pre">JSONField</span></code> spécifique à PostgreSQL</a></li>
<li><a class="reference internal" href="#id2">Divers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#features-removed-in-3-1">Fonctionnalités supprimées dans 3.1</a></li>
</ul>
</li>
</ul>

  <h4>Sujet précédent</h4>
  <p class="topless"><a href="3.1.1.html"
                        title="Chapitre précédent">Notes de publication de Django 3.1.1</a></p>
  <h4>Sujet suivant</h4>
  <p class="topless"><a href="3.0.11.html"
                        title="Chapitre suivant">Django 3.0.11 release notes</a></p>
  <div role="note" aria-label="source link">
    <h3>Cette page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/releases/3.1.txt"
            rel="nofollow">Montrer le code source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Recherche rapide</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
              <h3>Last update:</h3>
              <p class="topless">oct. 29, 2020</p>
          </div>
        
      
    </div>

    <div id="ft">
      <div class="nav">
    &laquo; <a href="3.1.1.html" title="Notes de publication de Django 3.1.1">previous</a>
     |
    <a href="index.html" title="Notes de publication" accesskey="U">up</a>
   |
    <a href="3.0.11.html" title="Django 3.0.11 release notes">next</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>