
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Notes de publication de Django 1.9 &#8212; Documentation Django 3.1.3.dev</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="next" title="Notes de publication de Django 1.8.19" href="1.8.19.html" />
    <link rel="prev" title="Notes de publication de Django 1.9.1" href="1.9.1.html" />



 
<script src="../templatebuiltins.js"></script>
<script>
(function($) {
    if (!django_template_builtins) {
       // templatebuiltins.js missing, do nothing.
       return;
    }
    $(document).ready(function() {
        // Hyperlink Django template tags and filters
        var base = "../ref/templates/builtins.html";
        if (base == "#") {
            // Special case for builtins.html itself
            base = "";
        }
        // Tags are keywords, class '.k'
        $("div.highlight\\-html\\+django span.k").each(function(i, elem) {
             var tagname = $(elem).text();
             if ($.inArray(tagname, django_template_builtins.ttags) != -1) {
                 var fragment = tagname.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + tagname + "</a>");
             }
        });
        // Filters are functions, class '.nf'
        $("div.highlight\\-html\\+django span.nf").each(function(i, elem) {
             var filtername = $(elem).text();
             if ($.inArray(filtername, django_template_builtins.tfilters) != -1) {
                 var fragment = filtername.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + filtername + "</a>");
             }
        });
    });
})(jQuery);</script>

  </head><body>

    <div class="document">
  <div id="custom-doc" class="yui-t6">
    <div id="hd">
      <h1><a href="../index.html">Documentation Django 3.1.3.dev</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../index.html">Home</a>  |
        <a title="Table of contents" href="../contents.html">Table of contents</a>  |
        <a title="Global index" href="../genindex.html">Index</a>  |
        <a title="Module index" href="../py-modindex.html">Modules</a>
      </div>
      <div class="nav">
    &laquo; <a href="1.9.1.html" title="Notes de publication de Django 1.9.1">previous</a>
     |
    <a href="index.html" title="Notes de publication" accesskey="U">up</a>
   |
    <a href="1.8.19.html" title="Notes de publication de Django 1.8.19">next</a> &raquo;</div>
    </div>

    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="releases-1.9">
            
  <div class="section" id="s-django-1-9-release-notes">
<span id="django-1-9-release-notes"></span><h1>Notes de publication de Django 1.9<a class="headerlink" href="#django-1-9-release-notes" title="Lien permanent vers ce titre">¶</a></h1>
<p><em>1er décembre 2015</em></p>
<p>Bienvenue dans Django 1.9&nbsp;!</p>
<p>These release notes cover the <a class="reference internal" href="#whats-new-1-9"><span class="std std-ref">new features</span></a>, as well as
some <a class="reference internal" href="#backwards-incompatible-1-9"><span class="std std-ref">backwards incompatible changes</span></a> you’ll
want to be aware of when upgrading from Django 1.8 or older versions. We’ve
<a class="reference internal" href="#removed-features-1-9"><span class="std std-ref">dropped some features</span></a> that have reached the end of
their deprecation cycle, and we’ve <a class="reference internal" href="#deprecated-features-1-9"><span class="std std-ref">begun the deprecation process for some
features</span></a>.</p>
<p>Voir le guide <a class="reference internal" href="../howto/upgrade-version.html"><span class="doc">Mise à jour de Django à une version plus récente</span></a> si vous mettez à jour un projet existant.</p>
<div class="section" id="s-python-compatibility">
<span id="python-compatibility"></span><h2>Compatibilité Python<a class="headerlink" href="#python-compatibility" title="Lien permanent vers ce titre">¶</a></h2>
<p>Django 1.9 requiert Python 2.7, 3.4 ou 3.5. Nous <strong>recommandons vivement</strong> et nous ne prenons officiellement en charge que la dernière publication de chaque série.</p>
<p>La série Django 1.8 est la dernière à prendre en charge Python 3.2 et 3.3.</p>
</div>
<div class="section" id="s-what-s-new-in-django-1-9">
<span id="s-whats-new-1-9"></span><span id="what-s-new-in-django-1-9"></span><span id="whats-new-1-9"></span><h2>Quoi de neuf dans Django 1.9<a class="headerlink" href="#what-s-new-in-django-1-9" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="s-performing-actions-after-a-transaction-commit">
<span id="performing-actions-after-a-transaction-commit"></span><h3>Lancement d’actions après le commit d’une transaction<a class="headerlink" href="#performing-actions-after-a-transaction-commit" title="Lien permanent vers ce titre">¶</a></h3>
<p>Le nouveau point d’entrée <a class="reference internal" href="../topics/db/transactions.html#django.db.transaction.on_commit" title="django.db.transaction.on_commit"><code class="xref py py-func docutils literal notranslate"><span class="pre">on_commit()</span></code></a> permet de lancer des actions après qu’une transaction de base de données a été validée avec succès. C’est utile pour des tâches telles que l’envoi de courriels de notification, la création de tâches à placer dans une file ou pour l’invalidation des caches.</p>
<p>Cette fonctionnalité provenant du paquet <a class="reference external" href="https://pypi.org/project/django-transaction-hooks/">django-transaction-hooks</a> a été intégrée dans Django.</p>
</div>
<div class="section" id="s-password-validation">
<span id="password-validation"></span><h3>Validation des mots de passe<a class="headerlink" href="#password-validation" title="Lien permanent vers ce titre">¶</a></h3>
<p>Django offre maintenant la validation de mots de passe pour aider à prévenir l’utilisation de mots de passe faibles par les utilisateurs. La validation est intégrée aux formulaires de changement et de réinitialisation des mots de passe et s’intègre facilement dans n’importe quel autre code. La validation est effectuée par un ou plusieurs validateurs, configurés dans le  nouveau réglage <a class="reference internal" href="../ref/settings.html#std:setting-AUTH_PASSWORD_VALIDATORS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">AUTH_PASSWORD_VALIDATORS</span></code></a>.</p>
<p>Quatre validateurs sont inclus dans Django&nbsp;; ceux-ci peuvent imposer une longueur minimale, comparer le mot de passe à des attributs de l’utilisateur tels que leur nom, s’assurer que les mots de passe ne soient pas entièrement numériques, ou comparer avec une liste de mots de passe communs. Vous pouvez combiner plusieurs validateurs, et certains validateurs possèdent des options de configuration propres. Par exemple, vous pouvez choisir de fournir une liste personnalisée de mots de passe communs. Chaque validateur fournit un texte d’aide pour expliquer ses exigences à l’utilisateur.</p>
<p>Par défaut, aucune validation n’est effectuée et tous les mots de passe sont acceptés. Si vous ne mettez pas de contenu dans <a class="reference internal" href="../ref/settings.html#std:setting-AUTH_PASSWORD_VALIDATORS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">AUTH_PASSWORD_VALIDATORS</span></code></a>, vous ne verrez aucun changement. Dans les nouveaux projets créés avec le gabarit <a class="reference internal" href="../ref/django-admin.html#django-admin-startproject"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">startproject</span></code></a> par défaut, un ensemble simple de validateurs est activé. Pour activer la validation de base dans les formulaires d’authentification de Django dans votre projet, vous pouvez définir, par exemple&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AUTH_PASSWORD_VALIDATORS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="s1">&#39;django.contrib.auth.password_validation.UserAttributeSimilarityValidator&#39;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="s1">&#39;django.contrib.auth.password_validation.MinimumLengthValidator&#39;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="s1">&#39;django.contrib.auth.password_validation.CommonPasswordValidator&#39;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="s1">&#39;django.contrib.auth.password_validation.NumericPasswordValidator&#39;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Voir <a class="reference internal" href="../topics/auth/passwords.html#password-validation"><span class="std std-ref">Validation des mots de passe</span></a> pour plus de détails.</p>
</div>
<div class="section" id="s-permission-mixins-for-class-based-views">
<span id="permission-mixins-for-class-based-views"></span><h3>Classes mixins de permissions dans les vues fondées sur les classes<a class="headerlink" href="#permission-mixins-for-class-based-views" title="Lien permanent vers ce titre">¶</a></h3>
<p>Django est dorénavant livré avec les classes mixins <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.mixins.AccessMixin" title="django.contrib.auth.mixins.AccessMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">AccessMixin</span></code></a>, <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.mixins.LoginRequiredMixin" title="django.contrib.auth.mixins.LoginRequiredMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">LoginRequiredMixin</span></code></a>, <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.mixins.PermissionRequiredMixin" title="django.contrib.auth.mixins.PermissionRequiredMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">PermissionRequiredMixin</span></code></a> et <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.mixins.UserPassesTestMixin" title="django.contrib.auth.mixins.UserPassesTestMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">UserPassesTestMixin</span></code></a> pour fournir la fonctionnalité de <code class="docutils literal notranslate"><span class="pre">django.contrib.auth.decorators</span></code> pour les vues fondées sur les classes. Ces classes proviennent ou s’inspirent en tout cas du projet <a class="reference external" href="https://django-braces.readthedocs.io/en/latest/index.html">django-braces</a>.</p>
<p>There are a few differences between Django’s and <code class="docutils literal notranslate"><span class="pre">django-braces</span></code>”
implementation, though:</p>
<ul class="simple">
<li>L’attribut <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.mixins.AccessMixin.raise_exception" title="django.contrib.auth.mixins.AccessMixin.raise_exception"><code class="xref py py-attr docutils literal notranslate"><span class="pre">raise_exception</span></code></a> ne peut valoir que <code class="docutils literal notranslate"><span class="pre">True</span></code> ou <code class="docutils literal notranslate"><span class="pre">False</span></code>. Les exceptions ou objets exécutables personnalisés ne sont pas pris en charge.</li>
<li>La méthode <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.mixins.AccessMixin.handle_no_permission" title="django.contrib.auth.mixins.AccessMixin.handle_no_permission"><code class="xref py py-meth docutils literal notranslate"><span class="pre">handle_no_permission()</span></code></a> n’accepte pas de paramètre <code class="docutils literal notranslate"><span class="pre">request</span></code>. La requête en cours est disponible dans <code class="docutils literal notranslate"><span class="pre">self.request</span></code>.</li>
<li>La fonction personnalisée <code class="docutils literal notranslate"><span class="pre">test_func()</span></code> de <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.mixins.UserPassesTestMixin" title="django.contrib.auth.mixins.UserPassesTestMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">UserPassesTestMixin</span></code></a> n’accepte pas de paramètre <code class="docutils literal notranslate"><span class="pre">user</span></code>. La requête en cours est disponible dans <code class="docutils literal notranslate"><span class="pre">self.request.user</span></code>.</li>
<li>L’attribut <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.mixins.PermissionRequiredMixin" title="django.contrib.auth.mixins.PermissionRequiredMixin"><code class="xref py py-attr docutils literal notranslate"><span class="pre">permission_required</span></code></a> accepte une chaîne (définissant une permission) ou une liste de chaînes (définissant plusieurs permissions) qui doivent être accordées pour autoriser l’accès.</li>
<li>Le nouvel attribut <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.mixins.AccessMixin.permission_denied_message" title="django.contrib.auth.mixins.AccessMixin.permission_denied_message"><code class="xref py py-attr docutils literal notranslate"><span class="pre">permission_denied_message</span></code></a> permet de transmettre un message à l’exception <code class="docutils literal notranslate"><span class="pre">PermissionDenied</span></code>.</li>
</ul>
</div>
<div class="section" id="s-new-styling-for-contrib-admin">
<span id="new-styling-for-contrib-admin"></span><h3>Nouveau style pour <code class="docutils literal notranslate"><span class="pre">contrib.admin</span></code><a class="headerlink" href="#new-styling-for-contrib-admin" title="Lien permanent vers ce titre">¶</a></h3>
<p>L’interface d’administration présente un nouvel aspect moderne et en aplat avec de nouvelles icônes SVG qui s’affichent parfaitement sur des écrans haute densité. Elle garantit toujours une expérience pleinement fonctionnelle avec les navigateurs <a class="reference external" href="https://github.com/yui/yui3/wiki/Graded-Browser-Support">de niveau A de YUI</a>. Les navigateurs plus anciens peuvent parfois se comporter en mode dégradé acceptable.</p>
</div>
<div class="section" id="s-running-tests-in-parallel">
<span id="running-tests-in-parallel"></span><h3>Lancement des tests en parallèle<a class="headerlink" href="#running-tests-in-parallel" title="Lien permanent vers ce titre">¶</a></h3>
<p>The <a class="reference internal" href="../ref/django-admin.html#django-admin-test"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">test</span></code></a> command now supports a <a class="reference internal" href="../ref/django-admin.html#cmdoption-test-parallel"><code class="xref std std-option docutils literal notranslate"><span class="pre">--parallel</span></code></a> option to run a project’s tests in multiple processes in parallel.</p>
<p>Chaque processus travaille avec sa propre base de données. Vous devez vous assurer que les différents cas de test n’accèdent pas aux mêmes ressources. Par exemple, les cas de test qui touchent au système de fichiers devraient créer un répertoire temporaire pour leur propre usage.</p>
<p>Cette option est activée par défaut pour la propre suite de tests de Django pour autant que&nbsp;:</p>
<ul class="simple">
<li>le système d’exploitation le prend en charge (tous sauf Windows)</li>
<li>le moteur de base de données le prend en charge (tous les moteurs intégrés sauf Oracle)</li>
</ul>
</div>
<div class="section" id="s-minor-features">
<span id="minor-features"></span><h3>Fonctionnalités mineures<a class="headerlink" href="#minor-features" title="Lien permanent vers ce titre">¶</a></h3>
<div class="section" id="s-django-contrib-admin">
<span id="django-contrib-admin"></span><h4><a class="reference internal" href="../ref/contrib/admin/index.html#module-django.contrib.admin" title="django.contrib.admin: Django's admin site."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.admin</span></code></a><a class="headerlink" href="#django-contrib-admin" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Les vues d’administration possèdent maintenant des attributs <code class="docutils literal notranslate"><span class="pre">model_admin</span></code> ou <code class="docutils literal notranslate"><span class="pre">admin_site</span></code>.</li>
<li>L’URL de la vue de modification du site d’administration a été modifiée (de <code class="docutils literal notranslate"><span class="pre">/admin/&lt;app&gt;/&lt;modèle&gt;/&lt;pk&gt;/</span></code> par défaut à <code class="docutils literal notranslate"><span class="pre">/admin/&lt;app&gt;/&lt;modèle&gt;/&lt;pk&gt;/change/</span></code>). Cela ne devrait pas affecter votre application sauf si vous avez codé en dur des URL d’administration. Dans ce cas, remplacez ces liens de préférence par la <a class="reference internal" href="../ref/contrib/admin/index.html#admin-reverse-urls"><span class="std std-ref">résolution inverse des URL d’administration</span></a>. Notez que l’ancienne URL redirige toujours vers la nouvelle par rétrocompatibilité, mais cela pourrait cesser dans une version future.</li>
<li><a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin.get_list_select_related" title="django.contrib.admin.ModelAdmin.get_list_select_related"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ModelAdmin.get_list_select_related()</span></code></a> a été ajoutée pour permettre de modifier les valeurs <code class="docutils literal notranslate"><span class="pre">select_related()</span></code> utilisées dans la requête de la liste pour modification du site d’administration en fonction de la requête.</li>
<li>La variable de contexte <code class="docutils literal notranslate"><span class="pre">available_apps</span></code>, qui contient la liste des applications disponibles pour l’utilisateur actuel, a été ajoutée à la méthode <a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.AdminSite.each_context" title="django.contrib.admin.AdminSite.each_context"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AdminSite.each_context()</span></code></a>.</li>
<li><a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.AdminSite.empty_value_display" title="django.contrib.admin.AdminSite.empty_value_display"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AdminSite.empty_value_display</span></code></a> et <a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin.empty_value_display" title="django.contrib.admin.ModelAdmin.empty_value_display"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ModelAdmin.empty_value_display</span></code></a> ont été ajoutés pour surcharger l’affichage de valeurs vides dans la liste pour modification du site d’administration. Il est aussi possible de personnaliser la valeur pour chaque champ.</li>
<li>Des événements jQuery ont été ajoutés <a class="reference internal" href="../ref/contrib/admin/javascript.html#admin-javascript-inline-form-events"><span class="std std-ref">lorsqu’un sous-formulaire est ajouté ou enlevé</span></a> sur la page contenant le formulaire de modification.</li>
<li>Le composant de sélection de l’heure inclut une option «&nbsp;18:00&nbsp;» par cohérence avec la présence d’options prédéfinies toutes les 6 heures.</li>
<li>La génération de «&nbsp;slugs&nbsp;» en JavaScript prend dorénavant en charge les caractères roumains.</li>
</ul>
</div>
<div class="section" id="s-django-contrib-admindocs">
<span id="django-contrib-admindocs"></span><h4><a class="reference internal" href="../ref/contrib/admin/admindocs.html#module-django.contrib.admindocs" title="django.contrib.admindocs: Django's admin documentation generator."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.admindocs</span></code></a><a class="headerlink" href="#django-contrib-admindocs" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>La section modèles de <code class="docutils literal notranslate"><span class="pre">admindocs</span></code> documente dorénavant aussi les méthodes qui acceptent des paramètres, plutôt que de les ignorer.</li>
</ul>
</div>
<div class="section" id="s-django-contrib-auth">
<span id="django-contrib-auth"></span><h4><a class="reference internal" href="../topics/auth/index.html#module-django.contrib.auth" title="django.contrib.auth: Django's authentication framework."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.auth</span></code></a><a class="headerlink" href="#django-contrib-auth" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Le nombre d’itérations par défaut du hachage des mots de passe PBKDF2 a été augmenté de 20%. Cette modification rétrocompatible n’affecte pas ceux qui ont créé une sous-classe de <code class="docutils literal notranslate"><span class="pre">django.contrib.auth.hashers.PBKDF2PasswordHasher</span></code> pour modifier la valeur par défaut.</li>
<li>La classe <code class="docutils literal notranslate"><span class="pre">BCryptSHA256PasswordHasher</span></code> met dorénavant les mots de passe à jour lorsque son attribut <code class="docutils literal notranslate"><span class="pre">rounds</span></code> est modifié.</li>
<li><code class="docutils literal notranslate"><span class="pre">AbstractBaseUser</span></code> et <code class="docutils literal notranslate"><span class="pre">BaseUserManager</span></code> ont été déplacés vers un nouveau module <code class="docutils literal notranslate"><span class="pre">django.contrib.auth.base_user</span></code> afin qu’ils puissent être importés sans devoir inclure <code class="docutils literal notranslate"><span class="pre">django.contrib.auth</span></code> dans <a class="reference internal" href="../ref/settings.html#std:setting-INSTALLED_APPS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">INSTALLED_APPS</span></code></a> (ce qui générait une avertissement d’obsolescence dans les anciennes versions et qui n’est plus pris en charge depuis Django 1.9).</li>
<li>Le paramètre <code class="docutils literal notranslate"><span class="pre">permission</span></code> de <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.decorators.permission_required" title="django.contrib.auth.decorators.permission_required"><code class="xref py py-func docutils literal notranslate"><span class="pre">permission_required()</span></code></a> accepte toutes les variantes d’éléments itérables, pas seulement les listes et les tuples.</li>
<li>La nouvelle classe <a class="reference internal" href="../ref/middleware.html#django.contrib.auth.middleware.PersistentRemoteUserMiddleware" title="django.contrib.auth.middleware.PersistentRemoteUserMiddleware"><code class="xref py py-class docutils literal notranslate"><span class="pre">PersistentRemoteUserMiddleware</span></code></a> rend possible l’exploitation de <code class="docutils literal notranslate"><span class="pre">REMOTE_USER</span></code> dans les configurations où cet en-tête n’est renseigné que sur les pages de connexion et non sur les autres requêtes de la session.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">django.contrib.auth.views.password_reset()</span></code> view accepts an
<code class="docutils literal notranslate"><span class="pre">extra_email_context</span></code> parameter.</li>
</ul>
</div>
<div class="section" id="s-django-contrib-contenttypes">
<span id="django-contrib-contenttypes"></span><h4><a class="reference internal" href="../ref/contrib/contenttypes.html#module-django.contrib.contenttypes" title="django.contrib.contenttypes: Provides generic interface to installed models."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.contenttypes</span></code></a><a class="headerlink" href="#django-contrib-contenttypes" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Il est maintenant possible d’utiliser <a class="reference internal" href="../ref/models/options.html#django.db.models.Options.order_with_respect_to" title="django.db.models.Options.order_with_respect_to"><code class="xref py py-attr docutils literal notranslate"><span class="pre">order_with_respect_to</span></code></a> avec une relation <code class="docutils literal notranslate"><span class="pre">GenericForeignKey</span></code>.</li>
</ul>
</div>
<div class="section" id="s-django-contrib-gis">
<span id="django-contrib-gis"></span><h4><a class="reference internal" href="../ref/contrib/gis/index.html#module-django.contrib.gis" title="django.contrib.gis: Geographic Information System (GIS) extensions for Django"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.gis</span></code></a><a class="headerlink" href="#django-contrib-gis" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Toutes les méthodes <code class="docutils literal notranslate"><span class="pre">GeoQuerySet</span></code> ont été rendues obsolètes et remplacées par des <a class="reference internal" href="../ref/contrib/gis/functions.html"><span class="doc">fonctions de base de données équivalentes</span></a>. Dès que les anciennes méthodes auront été remplacées dans votre code, il est alors même possible d’enlever le gestionnaire spécial <code class="docutils literal notranslate"><span class="pre">GeoManager</span></code> de vos classes de modèles géographiques.</li>
<li>L’interface GDAL prend désormais en charge l’instanciation d”<a class="reference internal" href="../ref/contrib/gis/gdal.html#raster-data-source-objects"><span class="std std-ref">objets GDALRaster</span></a> à base de fichiers et en mémoire à partir de données brutes. Les propriétés matricielles telles que la projection ou les valeurs de pixels peuvent maintenant être modifiées.</li>
<li>Pour les utilisateurs de PostGIS, le nouveau champ <a class="reference internal" href="../ref/contrib/gis/model-api.html#django.contrib.gis.db.models.RasterField" title="django.contrib.gis.db.models.RasterField"><code class="xref py py-class docutils literal notranslate"><span class="pre">RasterField</span></code></a> permet de <a class="reference internal" href="../ref/contrib/gis/db-api.html#creating-and-saving-raster-models"><span class="std std-ref">stocker des objets GDALRaster</span></a>. Il prend en charge la création automatique d’index spatial et la reprojection lors de l’enregistrement d’un modèle. Il ne supporte pas encore l’interrogation spatiale.</li>
<li>La nouvelle méthode <a class="reference internal" href="../ref/contrib/gis/gdal.html#django.contrib.gis.gdal.GDALRaster.warp" title="django.contrib.gis.gdal.GDALRaster.warp"><code class="xref py py-meth docutils literal notranslate"><span class="pre">GDALRaster.warp()</span></code></a> permet de déformer une structure matricielle en indiquant des propriétés cibles telles que l’origine, la largeur, la hauteur ou la taille de pixel (parmi d’autres).</li>
<li>La nouvelle méthode <a class="reference internal" href="../ref/contrib/gis/gdal.html#django.contrib.gis.gdal.GDALRaster.transform" title="django.contrib.gis.gdal.GDALRaster.transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">GDALRaster.transform()</span></code></a> permet de transformer une structure matricielle dans un autre système de référence spatiale en indiquant un code <code class="docutils literal notranslate"><span class="pre">srid</span></code> cible.</li>
<li>La nouvelle classe <a class="reference internal" href="../ref/contrib/gis/geoip2.html#django.contrib.gis.geoip2.GeoIP2" title="django.contrib.gis.geoip2.GeoIP2"><code class="xref py py-class docutils literal notranslate"><span class="pre">GeoIP2</span></code></a> permet d’exploiter les bases de données GeoLite2 de MaxMind qui incluent la prise en charge des adresses IPv6.</li>
<li>The default OpenLayers library version included in widgets has been updated
from 2.13 to 2.13.1.</li>
</ul>
</div>
<div class="section" id="s-django-contrib-postgres">
<span id="django-contrib-postgres"></span><h4><a class="reference internal" href="../ref/contrib/postgres/index.html#module-django.contrib.postgres" title="django.contrib.postgres: PostgreSQL-specific fields and features"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.postgres</span></code></a><a class="headerlink" href="#django-contrib-postgres" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>La prise en charge de l’interrogation <a class="reference internal" href="../ref/contrib/postgres/fields.html#std:fieldlookup-rangefield.contained_by"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">rangefield.contained_by</span></code></a> a été ajoutée pour certains champs intégrés qui correspondent aux champs d’intervalle.</li>
<li>Le champ <a class="reference internal" href="../ref/contrib/postgres/fields.html#django.contrib.postgres.fields.JSONField" title="django.contrib.postgres.fields.JSONField"><code class="xref py py-class docutils literal notranslate"><span class="pre">JSONField</span></code></a> a été ajouté.</li>
<li>Des <a class="reference internal" href="../ref/contrib/postgres/aggregates.html"><span class="doc">Fonctions d’agrégation spécifiques à PostgreSQL</span></a> ont été ajoutées.</li>
<li>La fonction de base de données <a class="reference internal" href="../ref/contrib/postgres/functions.html#django.contrib.postgres.functions.TransactionNow" title="django.contrib.postgres.functions.TransactionNow"><code class="xref py py-class docutils literal notranslate"><span class="pre">TransactionNow</span></code></a> a été ajoutée.</li>
</ul>
</div>
<div class="section" id="s-django-contrib-sessions">
<span id="django-contrib-sessions"></span><h4><a class="reference internal" href="../topics/http/sessions.html#module-django.contrib.sessions" title="django.contrib.sessions: Provides session management for Django projects."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.sessions</span></code></a><a class="headerlink" href="#django-contrib-sessions" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Le modèle de session et les classes <code class="docutils literal notranslate"><span class="pre">SessionStore</span></code> pour les moteurs <code class="docutils literal notranslate"><span class="pre">db</span></code> et <code class="docutils literal notranslate"><span class="pre">cached_db</span></code> ont été refactorisés pour permettre de bâtir sur ceux-ci un moteur de session personnalisé fondé sur une base de données. Voir <a class="reference internal" href="../topics/http/sessions.html#extending-database-backed-session-engines"><span class="std std-ref">Extension des moteurs de sessions s’appuyant sur une base de données</span></a> pour plus de détails.</li>
</ul>
</div>
<div class="section" id="s-django-contrib-sites">
<span id="django-contrib-sites"></span><h4><a class="reference internal" href="../ref/contrib/sites.html#module-django.contrib.sites" title="django.contrib.sites: Lets you operate multiple websites from the same database and Django project"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.sites</span></code></a><a class="headerlink" href="#django-contrib-sites" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="../ref/contrib/sites.html#django.contrib.sites.shortcuts.get_current_site" title="django.contrib.sites.shortcuts.get_current_site"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_current_site()</span></code></a> gère maintenant le cas où <code class="docutils literal notranslate"><span class="pre">request.get_host()</span></code> renvoie <code class="docutils literal notranslate"><span class="pre">domaine:port</span></code>, par exemple <code class="docutils literal notranslate"><span class="pre">exemple.com:80</span></code>. Si la recherche échoue parce que l’hôte ne correspond pas à un enregistrement dans la base de données et que l’hôte dispose d’un port, la recherche est relancée sans le port et uniquement avec la partie du domaine.</li>
</ul>
</div>
<div class="section" id="s-django-contrib-syndication">
<span id="django-contrib-syndication"></span><h4><a class="reference internal" href="../ref/contrib/syndication.html#module-django.contrib.syndication" title="django.contrib.syndication: A framework for generating syndication feeds, in RSS and Atom, quite easily."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.syndication</span></code></a><a class="headerlink" href="#django-contrib-syndication" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Plusieurs annexes par élément de flux sont maintenant possibles. Si plusieurs annexes sont définies pour un flux RSS, une exception est produite car les flux RSS, au contraire des flux Atom, ne gèrent pas plusieurs annexes par élément de flux.</li>
</ul>
</div>
<div class="section" id="s-cache">
<span id="cache"></span><h4>Cache<a class="headerlink" href="#cache" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">django.core.cache.backends.base.BaseCache</span></code> possède maintenant une méthode <code class="docutils literal notranslate"><span class="pre">get_or_set()</span></code>.</li>
<li><a class="reference internal" href="../topics/http/decorators.html#django.views.decorators.cache.never_cache" title="django.views.decorators.cache.never_cache"><code class="xref py py-func docutils literal notranslate"><span class="pre">django.views.decorators.cache.never_cache()</span></code></a> envoie maintenant des en-têtes plus persuasifs (<code class="docutils literal notranslate"><span class="pre">no-cache,</span> <span class="pre">no-store,</span> <span class="pre">must-revalidate</span></code> ont été ajoutés à <code class="docutils literal notranslate"><span class="pre">Cache-Control</span></code>) puor mieux empêcher le cache. Ceci a aussi été ajouté à Django 1.8.8.</li>
</ul>
</div>
<div class="section" id="s-csrf">
<span id="csrf"></span><h4>CSRF<a class="headerlink" href="#csrf" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Le nom d’en-tête de requête utilisé pour l’authentification CSRF peut être personnalisé avec <a class="reference internal" href="../ref/settings.html#std:setting-CSRF_HEADER_NAME"><code class="xref std std-setting docutils literal notranslate"><span class="pre">CSRF_HEADER_NAME</span></code></a>.</li>
<li>L’en-tête de référant CSRF est maintenant validée en fonction du réglage <a class="reference internal" href="../ref/settings.html#std:setting-CSRF_COOKIE_DOMAIN"><code class="xref std std-setting docutils literal notranslate"><span class="pre">CSRF_COOKIE_DOMAIN</span></code></a> si celui-ci est défini. Voir <a class="reference internal" href="../ref/csrf.html#how-csrf-works"><span class="std std-ref">Fonctionnement</span></a> pour plus de détails.</li>
<li>Le nouveau réglage <a class="reference internal" href="../ref/settings.html#std:setting-CSRF_TRUSTED_ORIGINS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">CSRF_TRUSTED_ORIGINS</span></code></a> donne la possibilité d’autoriser des requêtes non sûres (par ex. <code class="docutils literal notranslate"><span class="pre">POST</span></code>) d’origine croisée sur HTTPS.</li>
</ul>
</div>
<div class="section" id="s-database-backends">
<span id="database-backends"></span><h4>Moteurs de base de données<a class="headerlink" href="#database-backends" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Le moteur PostgreSQL (<code class="docutils literal notranslate"><span class="pre">django.db.backends.postgresql_psycopg2</span></code>) est également disponible en tant que <code class="docutils literal notranslate"><span class="pre">django.db.backends.postgresql</span></code>. L’ancien nom continuera d’être disponible par rétro-compatibilité.</li>
</ul>
</div>
<div class="section" id="s-file-storage">
<span id="file-storage"></span><h4>Stockage de fichier<a class="headerlink" href="#file-storage" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="../ref/files/storage.html#django.core.files.storage.Storage.get_valid_name" title="django.core.files.storage.Storage.get_valid_name"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Storage.get_valid_name()</span></code></a> est dorénavant appelée lorsque <a class="reference internal" href="../ref/models/fields.html#django.db.models.FileField.upload_to" title="django.db.models.FileField.upload_to"><code class="xref py py-attr docutils literal notranslate"><span class="pre">upload_to</span></code></a> est un objet exécutable.</li>
<li><a class="reference internal" href="../ref/files/file.html#django.core.files.File" title="django.core.files.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code></a> possède maintenant la méthode <code class="docutils literal notranslate"><span class="pre">seekable()</span></code> avec Python 3.</li>
</ul>
</div>
<div class="section" id="s-forms">
<span id="forms"></span><h4>Formulaires<a class="headerlink" href="#forms" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="../topics/forms/modelforms.html#django.forms.ModelForm" title="django.forms.ModelForm"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelForm</span></code></a> accepte la nouvelle option <code class="docutils literal notranslate"><span class="pre">Meta</span></code> <code class="docutils literal notranslate"><span class="pre">field_classes</span></code> pour personnaliser les types de champs. Voir <a class="reference internal" href="../topics/forms/modelforms.html#modelforms-overriding-default-fields"><span class="std std-ref">Surcharge des champs par défaut</span></a> pour plus de détails.</li>
<li>Vous pouvez maintenant définir l’ordre dans lequel les champs de formulaire sont affichés en vous servant de l’attribut <a class="reference internal" href="../ref/forms/api.html#django.forms.Form.field_order" title="django.forms.Form.field_order"><code class="xref py py-attr docutils literal notranslate"><span class="pre">field_order</span></code></a>, du paramètre de constructeur <code class="docutils literal notranslate"><span class="pre">field_order</span></code> ou de la méthode <a class="reference internal" href="../ref/forms/api.html#django.forms.Form.order_fields" title="django.forms.Form.order_fields"><code class="xref py py-meth docutils literal notranslate"><span class="pre">order_fields()</span></code></a>.</li>
<li>Un préfixe de formulaire peut être défini dans une classe de formulaire, non seulement lors de l’instanciation du formulaire. Voir <a class="reference internal" href="../ref/forms/api.html#form-prefix"><span class="std std-ref">Préfixes de formulaires</span></a> pour plus de détails.</li>
<li>Vous pouvez maintenant <a class="reference internal" href="../topics/forms/formsets.html#custom-formset-form-kwargs"><span class="std std-ref">définir des paramètres nommés</span></a> que vous souhaitez transmettre au constructeur des formulaires dans un jeu de formulaires.</li>
<li><a class="reference internal" href="../ref/forms/fields.html#django.forms.SlugField" title="django.forms.SlugField"><code class="xref py py-class docutils literal notranslate"><span class="pre">SlugField</span></code></a> accepte dorénavant un paramètre <a class="reference internal" href="../ref/forms/fields.html#django.forms.SlugField.allow_unicode" title="django.forms.SlugField.allow_unicode"><code class="xref py py-attr docutils literal notranslate"><span class="pre">allow_unicode</span></code></a> pour autoriser les caractères Unicode dans les «&nbsp;slugs&nbsp;».</li>
<li><a class="reference internal" href="../ref/forms/fields.html#django.forms.CharField" title="django.forms.CharField"><code class="xref py py-class docutils literal notranslate"><span class="pre">CharField</span></code></a> accepte maintenant un paramètre <a class="reference internal" href="../ref/forms/fields.html#django.forms.CharField.strip" title="django.forms.CharField.strip"><code class="xref py py-attr docutils literal notranslate"><span class="pre">strip</span></code></a> pour épurer les données saisies d’éventuelles espaces initiales ou finales. Comme la valeur par défaut est <code class="docutils literal notranslate"><span class="pre">True</span></code>, le comportement est donc différent des versions précédentes.</li>
<li>Les champs de formulaire acceptent maintenant un paramètre <a class="reference internal" href="../ref/forms/fields.html#django.forms.Field.disabled" title="django.forms.Field.disabled"><code class="xref py py-attr docutils literal notranslate"><span class="pre">disabled</span></code></a> ce qui provoque l’affichage d’un composant de champ désactivé dans les navigateurs.</li>
<li>Il est maintenant possible de personnaliser les champs de formulaire liés aux données en surchargeant la méthode <a class="reference internal" href="../ref/forms/api.html#django.forms.Field.get_bound_field" title="django.forms.Field.get_bound_field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_bound_field()</span></code></a>.</li>
</ul>
</div>
<div class="section" id="s-generic-views">
<span id="generic-views"></span><h4>Vues génériques<a class="headerlink" href="#generic-views" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Les vues fondées sur les classes générées par <code class="docutils literal notranslate"><span class="pre">as_view()</span></code> possèdent maintenant les attributs <code class="docutils literal notranslate"><span class="pre">view_class</span></code> et <code class="docutils literal notranslate"><span class="pre">view_initkwargs</span></code>.</li>
<li><a class="reference internal" href="../ref/utils.html#django.utils.decorators.method_decorator" title="django.utils.decorators.method_decorator"><code class="xref py py-func docutils literal notranslate"><span class="pre">method_decorator()</span></code></a> peut maintenant être utilisée avec une liste ou un tuple de décorateurs. On peut aussi l’utiliser pour <a class="reference internal" href="../topics/class-based-views/intro.html#id1"><span class="std std-ref">décorer des classes au lieu de méthodes</span></a>.</li>
</ul>
</div>
<div class="section" id="s-internationalization">
<span id="internationalization"></span><h4>Internationalisation<a class="headerlink" href="#internationalization" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>La vue <a class="reference internal" href="../topics/i18n/translation.html#django.views.i18n.set_language" title="django.views.i18n.set_language"><code class="xref py py-func docutils literal notranslate"><span class="pre">django.views.i18n.set_language()</span></code></a> redirige maintenant correctement vers les <a class="reference internal" href="../topics/i18n/translation.html#url-internationalization"><span class="std std-ref">URL traduites</span></a> lorsqu’elles sont disponibles.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">django.views.i18n.javascript_catalog()</span></code> view now works correctly
if used multiple times with different configurations on the same page.</li>
<li>La fonction <a class="reference internal" href="../ref/utils.html#django.utils.timezone.make_aware" title="django.utils.timezone.make_aware"><code class="xref py py-func docutils literal notranslate"><span class="pre">django.utils.timezone.make_aware()</span></code></a> possède un nouveau paramètre <code class="docutils literal notranslate"><span class="pre">is_dst</span></code> pour aider à résoudre les heures ambiguës lors des passages heure d’été / heure d’hiver.</li>
<li>Les variantes de langue prises en charge par gettext peuvent maintenant être utilisées. Elles sont généralement utilisées pour des langues qui s’écrivent dans différentes écritures, par exemple latin et cyrillique (comme par ex.  <code class="docutils literal notranslate"><span class="pre">be&#64;latin</span></code>).</li>
<li>Added the <code class="docutils literal notranslate"><span class="pre">django.views.i18n.json_catalog()</span></code> view to help build a custom
client-side i18n library upon Django translations. It returns a JSON object
containing a translations catalog, formatting settings, and a plural rule.</li>
<li>L’attribut <code class="docutils literal notranslate"><span class="pre">name_translated</span></code> a été ajouté à l’objet renvoyé par la balise de gabarit <a class="reference internal" href="../topics/i18n/translation.html#std:templatetag-get_language_info"><code class="xref std std-ttag docutils literal notranslate"><span class="pre">get_language_info</span></code></a>. Un filtre de gabarit similaire a aussi été ajouté&nbsp;: <a class="reference internal" href="../topics/i18n/translation.html#std:templatefilter-language_name_translated"><code class="xref std std-tfilter docutils literal notranslate"><span class="pre">language_name_translated</span></code></a>.</li>
<li>Vous pouvez maintenant exécuter <a class="reference internal" href="../ref/django-admin.html#django-admin-compilemessages"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">compilemessages</span></code></a> à partir du répertoire racine d’un projet et elle trouvera tous les fichiers de messages qui ont été créés par <a class="reference internal" href="../ref/django-admin.html#django-admin-makemessages"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">makemessages</span></code></a>.</li>
<li><a class="reference internal" href="../ref/django-admin.html#django-admin-makemessages"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">makemessages</span></code></a> appelle maintenant xgettext une fois par répertoire de langue au lieu d’une fois par fichier traduisible. Cela accélère la construction des catalogues de traduction.</li>
<li><a class="reference internal" href="../topics/i18n/translation.html#std:templatetag-blocktrans"><code class="xref std std-ttag docutils literal notranslate"><span class="pre">blocktrans</span></code></a> permet d’attribuer son résultat à une variable avec <code class="docutils literal notranslate"><span class="pre">asvar</span></code>.</li>
<li>Deux nouvelles langues sont disponibles&nbsp;: l’espagnol colombien et le gaélique écossais.</li>
</ul>
</div>
<div class="section" id="s-management-commands">
<span id="management-commands"></span><h4>Commandes d’administration<a class="headerlink" href="#management-commands" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>La nouvelle commande <a class="reference internal" href="../ref/django-admin.html#django-admin-sendtestemail"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">sendtestemail</span></code></a> permet d’envoyer un courriel de test pour confirmer facilement que l’envoi de courriels au travers de Django fonctionne.</li>
<li>Pour améliorer la lisibilité du code SQL généré par la commande <a class="reference internal" href="../ref/django-admin.html#django-admin-sqlmigrate"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">sqlmigrate</span></code></a>, le code SQL généré pour chaque opération de migration est précédé par la description de l’opération.</li>
<li>Le résultat produit par la commande <a class="reference internal" href="../ref/django-admin.html#django-admin-dumpdata"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">dumpdata</span></code></a> est maintenant ordonné de manière déterministe. De plus, lorsque l’option <code class="docutils literal notranslate"><span class="pre">--output</span></code> est donnée, la commande affiche aussi une barre de progression dans le terminal.</li>
<li>La commande <a class="reference internal" href="../ref/django-admin.html#django-admin-createcachetable"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">createcachetable</span></code></a> offre maintenant une option <code class="docutils literal notranslate"><span class="pre">--dry-run</span></code> pour afficher le code SQL au lieu de l’exécuter.</li>
<li>La commande <a class="reference internal" href="../ref/django-admin.html#django-admin-startapp"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">startapp</span></code></a> crée un fichier <code class="docutils literal notranslate"><span class="pre">apps.py</span></code>. Comme celui-ci ne contient pas <code class="docutils literal notranslate"><span class="pre">default_app_config</span></code> (une <a class="reference internal" href="../ref/applications.html#configuring-applications-ref"><span class="std std-ref">API découragée</span></a>), vous devez indiquer le chemin de la configuration d’application dans <a class="reference internal" href="../ref/settings.html#std:setting-INSTALLED_APPS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">INSTALLED_APPS</span></code></a>, par exemple <code class="docutils literal notranslate"><span class="pre">'polls.apps.PollsConfig'</span></code>, pour que la configuration soit utilisée (au lieu d’un simple <code class="docutils literal notranslate"><span class="pre">'polls'</span></code>).</li>
<li>Avec le moteur PostgreSQL, la commande <a class="reference internal" href="../ref/django-admin.html#django-admin-dbshell"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">dbshell</span></code></a> peut se connecter à la base de données en utilisant le mot de passe provenant du fichier des réglages (au lieu de devoir le saisir manuellement).</li>
<li>Le paquet <code class="docutils literal notranslate"><span class="pre">django</span></code> peut être exécuté comme un script, comme par exemple <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">django</span></code>, ce qui produira le même comportement que <code class="docutils literal notranslate"><span class="pre">django-admin</span></code>.</li>
<li>Les commandes d’administration possédant l’option <code class="docutils literal notranslate"><span class="pre">--noinput</span></code> acceptent maintenant également <code class="docutils literal notranslate"><span class="pre">--no-input</span></code> comme alias de cette option.</li>
</ul>
</div>
<div class="section" id="s-migrations">
<span id="migrations"></span><h4>Migrations<a class="headerlink" href="#migrations" title="Lien permanent vers ce titre">¶</a></h4>
<ul>
<li><p class="first">Initial migrations are now marked with an <a class="reference internal" href="../topics/migrations.html#django.db.migrations.Migration.initial" title="django.db.migrations.Migration.initial"><code class="xref py py-attr docutils literal notranslate"><span class="pre">initial</span> <span class="pre">=</span> <span class="pre">True</span></code></a> class attribute which allows
<a class="reference internal" href="../ref/django-admin.html#cmdoption-migrate-fake-initial"><code class="xref std std-option docutils literal notranslate"><span class="pre">migrate</span> <span class="pre">--fake-initial</span></code></a> to more easily detect initial migrations.</p>
</li>
<li><p class="first">La prise en charge de la sérialisation d’instances <code class="docutils literal notranslate"><span class="pre">functools.partial</span></code> et <code class="docutils literal notranslate"><span class="pre">LazyObject</span></code> a été ajoutée.</p>
</li>
<li><p class="first">Lorsqu’on indique la valeur <code class="docutils literal notranslate"><span class="pre">None</span></code> pour un élément dans <a class="reference internal" href="../ref/settings.html#std:setting-MIGRATION_MODULES"><code class="xref std std-setting docutils literal notranslate"><span class="pre">MIGRATION_MODULES</span></code></a>, Django considère que cette application ne possède pas de migration.</p>
</li>
<li><p class="first">Lors de l’application des migrations, l’étape «&nbsp;rendu des états de modèles&nbsp;» qui apparaît lors de l’exécution des migrations avec une verbosité de 2 ou plus élevée calcule maintenant uniquement les états des migrations qui ont déjà été appliquées. Les états de modèles des migrations en cours d’application sont générés à la demande, ce qui réduit drastiquement la quantité de mémoire nécessaire.</p>
<p>Cependant, cette amélioration n’est pas disponible lors de l’inversion des migrations et, dans ce cas, il est toujours nécessaire de précalculer et de stocker les états des migrations intermédiaires.</p>
<p>Cette amélioration est aussi la cause de la non prise en charge par Django des plans de migration mixtes. Ces plans mixtes consistent en une liste de migrations où certaines doivent être appliquées et d’autres inversées. Cela n’a jamais été officiellement pris en charge et il n’existait pas d’API publique qui s’appuyait sur ce comportement.</p>
</li>
<li><p class="first">La commande <a class="reference internal" href="../ref/django-admin.html#django-admin-squashmigrations"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">squashmigrations</span></code></a> accepte dorénavant la possibilité d’indiquer la migration de départ à partir de laquelle les migrations sont fusionnées.</p>
</li>
</ul>
</div>
<div class="section" id="s-models">
<span id="models"></span><h4>Modèles<a class="headerlink" href="#models" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.bulk_create" title="django.db.models.query.QuerySet.bulk_create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.bulk_create()</span></code></a> fonctionne maintenant aussi pour des modèles mandataires.</li>
<li>La configuration des bases de données contient une nouvelle option <a class="reference internal" href="../ref/settings.html#std:setting-DATABASE-TIME_ZONE"><code class="xref std std-setting docutils literal notranslate"><span class="pre">TIME_ZONE</span></code></a> pour interagir avec les bases de données qui stockent les dates/heures en heure locale et qui ne prennent pas en charge les fuseaux horaires lorsque <a class="reference internal" href="../ref/settings.html#std:setting-USE_TZ"><code class="xref std std-setting docutils literal notranslate"><span class="pre">USE_TZ</span></code></a> vaut <code class="docutils literal notranslate"><span class="pre">True</span></code>.</li>
<li>La méthode <a class="reference internal" href="../ref/models/relations.html#django.db.models.fields.related.RelatedManager.set" title="django.db.models.fields.related.RelatedManager.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">RelatedManager.set()</span></code></a> a été ajoutée aux gestionnaires de relations créés par les champs <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code>, <code class="docutils literal notranslate"><span class="pre">GenericForeignKey</span></code> et <code class="docutils literal notranslate"><span class="pre">ManyToManyField</span></code>.</li>
<li>La méthode <a class="reference internal" href="../ref/models/relations.html#django.db.models.fields.related.RelatedManager.add" title="django.db.models.fields.related.RelatedManager.add"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add()</span></code></a> du côté opposé d’une clé étrangère possède maintenant un paramètre <code class="docutils literal notranslate"><span class="pre">bulk</span></code> pour permettre l’exécution d’une seule requête quel que soit le nombre d’objets à ajouter, au lieu d’exiger une requête par objet.</li>
<li>Le paramètre <code class="docutils literal notranslate"><span class="pre">keep_parents</span></code> a été ajouté à <a class="reference internal" href="../ref/models/instances.html#django.db.models.Model.delete" title="django.db.models.Model.delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Model.delete()</span></code></a> pour permettre de ne supprimer que les données «&nbsp;enfant&nbsp;» d’un modèle qui hérite d’autres tables.</li>
<li><a class="reference internal" href="../ref/models/instances.html#django.db.models.Model.delete" title="django.db.models.Model.delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Model.delete()</span></code></a> et <a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.delete" title="django.db.models.query.QuerySet.delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.delete()</span></code></a> renvoient le nombre d’objets supprimés.</li>
<li>Un contrôle système a été ajouté pour empêcher de définir à la fois <code class="docutils literal notranslate"><span class="pre">Meta.ordering</span></code> et <code class="docutils literal notranslate"><span class="pre">order_with_respect_to</span></code> pour le même modèle.</li>
<li>Les interrogations de <a class="reference internal" href="../ref/models/querysets.html#std:fieldlookup-year"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">date</span> <span class="pre">et</span> <span class="pre">d'heure</span></code></a> peuvent être suivies d’autres interrogations (comme <a class="reference internal" href="../ref/models/querysets.html#std:fieldlookup-exact"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">exact</span></code></a>, <a class="reference internal" href="../ref/models/querysets.html#std:fieldlookup-gt"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">gt</span></code></a>, <a class="reference internal" href="../ref/models/querysets.html#std:fieldlookup-lt"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">lt</span></code></a>, etc.). Par exemple, <code class="docutils literal notranslate"><span class="pre">Entry.objects.filter(pub_date__month__gt=6)</span></code>.</li>
<li>Les interrogations d’heure (heure, minute, seconde) sont maintenant prises en charge par <a class="reference internal" href="../ref/models/fields.html#django.db.models.TimeField" title="django.db.models.TimeField"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeField</span></code></a> pour tous les moteurs de base de données. Sauf pour SQLite, ces interrogations étaient déjà disponibles depuis Django 1.7, mais non documentées.</li>
<li>Le paramètre <code class="docutils literal notranslate"><span class="pre">output_field</span></code> a été ajouté pour permettre l’agrégation <a class="reference internal" href="../ref/models/querysets.html#django.db.models.Avg" title="django.db.models.Avg"><code class="xref py py-class docutils literal notranslate"><span class="pre">Avg</span></code></a> sur des colonnes non numériques, comme par exemple <code class="docutils literal notranslate"><span class="pre">DurationField</span></code>.</li>
<li>L’interrogation <a class="reference internal" href="../ref/models/querysets.html#std:fieldlookup-date"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">date</span></code></a> a été ajoutée à <a class="reference internal" href="../ref/models/fields.html#django.db.models.DateTimeField" title="django.db.models.DateTimeField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateTimeField</span></code></a> pour permettre d’interroger le champ par la seule portion de date.</li>
<li>Les fonctions de base de données <a class="reference internal" href="../ref/models/database-functions.html#django.db.models.functions.Greatest" title="django.db.models.functions.Greatest"><code class="xref py py-class docutils literal notranslate"><span class="pre">Greatest</span></code></a> et <a class="reference internal" href="../ref/models/database-functions.html#django.db.models.functions.Least" title="django.db.models.functions.Least"><code class="xref py py-class docutils literal notranslate"><span class="pre">Least</span></code></a> ont été ajoutées.</li>
<li>La fonction de base de données <a class="reference internal" href="../ref/models/database-functions.html#django.db.models.functions.Now" title="django.db.models.functions.Now"><code class="xref py py-class docutils literal notranslate"><span class="pre">Now</span></code></a> a été ajoutée&nbsp;; celle-ci renvoie la date et l’heure courantes.</li>
<li><a class="reference internal" href="../ref/models/lookups.html#django.db.models.Transform" title="django.db.models.Transform"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transform</span></code></a> est dorénavant une sous-classe de <a class="reference internal" href="../ref/models/expressions.html#func-expressions"><span class="std std-ref">Func()</span></a>, ce qui permet aux objets <code class="docutils literal notranslate"><span class="pre">Transform</span></code> d’être utilisés dans la partie droite d’une expression, comme pour les objets <code class="docutils literal notranslate"><span class="pre">Func</span></code> normaux. Cela permet d’inscrire certaines fonctions de base de données comme <a class="reference internal" href="../ref/models/database-functions.html#django.db.models.functions.Length" title="django.db.models.functions.Length"><code class="xref py py-class docutils literal notranslate"><span class="pre">Length</span></code></a>, <a class="reference internal" href="../ref/models/database-functions.html#django.db.models.functions.Lower" title="django.db.models.functions.Lower"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lower</span></code></a> et <a class="reference internal" href="../ref/models/database-functions.html#django.db.models.functions.Upper" title="django.db.models.functions.Upper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Upper</span></code></a> en tant que transformations.</li>
<li><a class="reference internal" href="../ref/models/fields.html#django.db.models.SlugField" title="django.db.models.SlugField"><code class="xref py py-class docutils literal notranslate"><span class="pre">SlugField</span></code></a> accepte dorénavant un paramètre <a class="reference internal" href="../ref/models/fields.html#django.db.models.SlugField.allow_unicode" title="django.db.models.SlugField.allow_unicode"><code class="xref py py-attr docutils literal notranslate"><span class="pre">allow_unicode</span></code></a> pour autoriser les caractères Unicode dans les «&nbsp;slugs&nbsp;».</li>
<li>Il est maintenant possible de référencer les annotations dans <code class="docutils literal notranslate"><span class="pre">QuerySet.distinct()</span></code>.</li>
<li>Avec SQLite, <code class="docutils literal notranslate"><span class="pre">connection.queries</span></code> affiche les requêtes avec les paramètres substitués.</li>
<li>Les <a class="reference internal" href="../ref/models/expressions.html"><span class="doc">expressions de requête</span></a> peuvent maintenant être utilisées lors de la création de nouvelles instances de modèles avec <code class="docutils literal notranslate"><span class="pre">save()</span></code>, <code class="docutils literal notranslate"><span class="pre">create()</span></code> et <code class="docutils literal notranslate"><span class="pre">bulk_create()</span></code>.</li>
</ul>
</div>
<div class="section" id="s-requests-and-responses">
<span id="requests-and-responses"></span><h4>Requêtes et réponses<a class="headerlink" href="#requests-and-responses" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Tant que <a class="reference internal" href="../ref/request-response.html#django.http.HttpResponse.reason_phrase" title="django.http.HttpResponse.reason_phrase"><code class="xref py py-attr docutils literal notranslate"><span class="pre">HttpResponse.reason_phrase</span></code></a> n’est pas explicitement défini, sa valeur est maintenant déterminée par la valeur actuelle de <a class="reference internal" href="../ref/request-response.html#django.http.HttpResponse.status_code" title="django.http.HttpResponse.status_code"><code class="xref py py-attr docutils literal notranslate"><span class="pre">HttpResponse.status_code</span></code></a>. La modification de  <code class="docutils literal notranslate"><span class="pre">status_code</span></code> en dehors du constructeur modifie également la valeur de <code class="docutils literal notranslate"><span class="pre">reason_phrase</span></code>.</li>
<li>La vue de débogage affiche maintenant les détails de la chaîne des exceptions avec Python 3.</li>
<li>Les vues d’erreur 40x par défaut acceptent maintenant un second paramètre positionnel, l’exception qui a déclenché l’erreur.</li>
<li>Les gestionnaires des vues d’erreur prennent maintenant en charge <a class="reference internal" href="../ref/template-response.html#django.template.response.TemplateResponse" title="django.template.response.TemplateResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">TemplateResponse</span></code></a>, qui sont couramment utilisées avec les vues fondées sur les classes.</li>
<li>Les exceptions générées par la méthode <code class="docutils literal notranslate"><span class="pre">render()</span></code> sont maintenant aussi transmises à la méthode <code class="docutils literal notranslate"><span class="pre">process_exception()</span></code> de chaque intergiciel.</li>
<li>Les intergiciels de requête peuvent maintenant définir <a class="reference internal" href="../ref/request-response.html#django.http.HttpRequest.urlconf" title="django.http.HttpRequest.urlconf"><code class="xref py py-attr docutils literal notranslate"><span class="pre">HttpRequest.urlconf</span></code></a> à <code class="docutils literal notranslate"><span class="pre">None</span></code> pour annuler tout changement effectué par un intergiciel précédent et revenir à la valeur <a class="reference internal" href="../ref/settings.html#std:setting-ROOT_URLCONF"><code class="xref std std-setting docutils literal notranslate"><span class="pre">ROOT_URLCONF</span></code></a> de départ.</li>
<li>Le contrôle <a class="reference internal" href="../ref/settings.html#std:setting-DISALLOWED_USER_AGENTS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DISALLOWED_USER_AGENTS</span></code></a> dans <a class="reference internal" href="../ref/middleware.html#django.middleware.common.CommonMiddleware" title="django.middleware.common.CommonMiddleware"><code class="xref py py-class docutils literal notranslate"><span class="pre">CommonMiddleware</span></code></a> génère maintenant une exception <a class="reference internal" href="../ref/exceptions.html#django.core.exceptions.PermissionDenied" title="django.core.exceptions.PermissionDenied"><code class="xref py py-class docutils literal notranslate"><span class="pre">PermissionDenied</span></code></a>  au lieu de <a class="reference internal" href="../ref/request-response.html#django.http.HttpResponseForbidden" title="django.http.HttpResponseForbidden"><code class="xref py py-class docutils literal notranslate"><span class="pre">HttpResponseForbidden</span></code></a> afin que la vue <a class="reference internal" href="../ref/urls.html#django.conf.urls.handler403" title="django.conf.urls.handler403"><code class="xref py py-data docutils literal notranslate"><span class="pre">handler403</span></code></a> soit appelée.</li>
<li><a class="reference internal" href="../ref/request-response.html#django.http.HttpRequest.get_port" title="django.http.HttpRequest.get_port"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HttpRequest.get_port()</span></code></a> a été ajoutée pour récupérer le port d’origine de la requête.</li>
<li>Le paramètre <code class="docutils literal notranslate"><span class="pre">json_dumps_params</span></code> a été ajouté à <a class="reference internal" href="../ref/request-response.html#django.http.JsonResponse" title="django.http.JsonResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">JsonResponse</span></code></a> pour permettre la transmission de paramètres nommés à l’appel <code class="docutils literal notranslate"><span class="pre">json.dumps()</span></code> utilisé pour produire la réponse.</li>
<li>L’intergiciel <a class="reference internal" href="../ref/middleware.html#django.middleware.common.BrokenLinkEmailsMiddleware" title="django.middleware.common.BrokenLinkEmailsMiddleware"><code class="xref py py-class docutils literal notranslate"><span class="pre">BrokenLinkEmailsMiddleware</span></code></a> ignore dorénavant les erreurs 404 lorsque le référant est égal à l’URL demandée. Pour contourner le contrôle du référant vide déjà implémenté, certains robots Web définissent le référant à la même valeur que l’URL demandée.</li>
</ul>
</div>
<div class="section" id="s-templates">
<span id="templates"></span><h4>Gabarits<a class="headerlink" href="#templates" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Les balises de gabarit créés avec l’utilitaire <a class="reference internal" href="../howto/custom-template-tags.html#django.template.Library.simple_tag" title="django.template.Library.simple_tag"><code class="xref py py-meth docutils literal notranslate"><span class="pre">simple_tag()</span></code></a> peuvent maintenant stocker leur résultat dans une variable de gabarit en utilisant le paramètre <code class="docutils literal notranslate"><span class="pre">as</span></code>.</li>
<li>La méthode <a class="reference internal" href="../ref/templates/api.html#django.template.Context.setdefault" title="django.template.Context.setdefault"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Context.setdefault()</span></code></a> a été ajoutée.</li>
<li>Le journaliseur <a class="reference internal" href="../topics/logging.html#django-template-logger"><span class="std std-ref">django.template</span></a> a été ajouté et reçoit les messages suivants&nbsp;:<ul>
<li>Un message de niveau <code class="docutils literal notranslate"><span class="pre">DEBUG</span></code> pour les variables de contexte manquantes.</li>
<li>Un message de niveau <code class="docutils literal notranslate"><span class="pre">WARNING</span></code> pour les exceptions non interceptées générées pendant le rendu d’une balise <code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">include</span> <span class="pre">%}</span></code> lorsque le mode débogage est désactivé (utile car <code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">include</span> <span class="pre">%}</span></code> réduit au silence l’exception et renvoie une chaîne vide).</li>
</ul>
</li>
<li>La balise de gabarit <a class="reference internal" href="../ref/templates/builtins.html#std:templatetag-firstof"><code class="xref std std-ttag docutils literal notranslate"><span class="pre">firstof</span></code></a> permet de stocker son résultat dans une variable avec <code class="docutils literal notranslate"><span class="pre">as</span></code>.</li>
<li><a class="reference internal" href="../ref/templates/api.html#django.template.Context.update" title="django.template.Context.update"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Context.update()</span></code></a> peut maintenant être utilisée comme gestionnaire de contexte.</li>
<li>Les chargeurs de gabarit de Django peuvent maintenant étendre des gabarits de manière récursive.</li>
<li>Le gabarit «&nbsp;postmortem&nbsp;» de la page de débogage inclut dorénavant un résultat pour chaque moteur de gabarit installé.</li>
<li>L”<a class="reference internal" href="../howto/custom-template-backend.html#template-debug-integration"><span class="std std-ref">intégration de la page de débogage</span></a> pour les moteurs de gabarit personnalisés a été ajoutée.</li>
<li>Il est maintenant possible d’inscrire explicitement des bibliothèques et des éléments intégrés pour le moteur <a class="reference internal" href="../topics/templates.html#django.template.backends.django.DjangoTemplates" title="django.template.backends.django.DjangoTemplates"><code class="xref py py-class docutils literal notranslate"><span class="pre">DjangoTemplates</span></code></a> au moyen du réglage de gabarit <a class="reference internal" href="../ref/settings.html#std:setting-TEMPLATES-OPTIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">OPTIONS</span></code></a>.</li>
<li>Les filtres <code class="docutils literal notranslate"><span class="pre">timesince</span></code> et <code class="docutils literal notranslate"><span class="pre">timeuntil</span></code> ont été améliorés pour tenir compte des années bissextiles pour de grands intervalles de temps.</li>
<li>La balise <code class="docutils literal notranslate"><span class="pre">include</span></code> met dorénavant en cache les objets gabarits analysés durant le processus de rendu des gabarits, accélérant la réutilisation dans des endroits comme les boucles <code class="docutils literal notranslate"><span class="pre">for</span></code>.</li>
</ul>
</div>
<div class="section" id="s-tests">
<span id="tests"></span><h4>Tests<a class="headerlink" href="#tests" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>La méthode <a class="reference internal" href="../topics/testing/tools.html#django.test.Response.json" title="django.test.Response.json"><code class="xref py py-meth docutils literal notranslate"><span class="pre">json()</span></code></a> a été ajoutée aux réponses du client de test pour donner accès au corps de la réponse en format JSON.</li>
<li>La méthode <a class="reference internal" href="../topics/testing/tools.html#django.test.Client.force_login" title="django.test.Client.force_login"><code class="xref py py-meth docutils literal notranslate"><span class="pre">force_login()</span></code></a> a été ajoutée au client de test. Utilisez cette méthode pour simuler l’effet d’un utilisateur se connectant au site tout en évitant de passer par les étapes d’authentification et de vérification de <a class="reference internal" href="../topics/testing/tools.html#django.test.Client.login" title="django.test.Client.login"><code class="xref py py-meth docutils literal notranslate"><span class="pre">login()</span></code></a>.</li>
</ul>
</div>
<div class="section" id="s-urls">
<span id="urls"></span><h4>URL<a class="headerlink" href="#urls" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Les assertions de type «&nbsp;lookaround&nbsp;» sont maintenant autorisées dans les expressions régulières des motifs d’URL.</li>
<li>The application namespace can now be set using an <code class="docutils literal notranslate"><span class="pre">app_name</span></code> attribute
on the included module or object. It can also be set by passing a 2-tuple
of (&lt;list of patterns&gt;, &lt;application namespace&gt;) as the first argument to
<code class="docutils literal notranslate"><span class="pre">include()</span></code>.</li>
<li>Des contrôles système ont été ajoutés pour les erreurs courantes dans les motifs d’URL.</li>
</ul>
</div>
<div class="section" id="s-validators">
<span id="validators"></span><h4>Validateurs<a class="headerlink" href="#validators" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="../ref/validators.html#django.core.validators.int_list_validator" title="django.core.validators.int_list_validator"><code class="xref py py-func docutils literal notranslate"><span class="pre">django.core.validators.int_list_validator()</span></code></a> a été ajouté pour générer des validateurs de chaînes contenant des nombres entiers séparés par un caractère personnalisé.</li>
<li><a class="reference internal" href="../ref/validators.html#django.core.validators.EmailValidator" title="django.core.validators.EmailValidator"><code class="xref py py-class docutils literal notranslate"><span class="pre">EmailValidator</span></code></a> limite dorénavant la longueur des parties de noms de domaine à 63 caractères, en accord avec la <span class="target" id="index-6"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc1034.html"><strong>RFC 1034</strong></a>.</li>
<li><a class="reference internal" href="../ref/validators.html#django.core.validators.validate_unicode_slug" title="django.core.validators.validate_unicode_slug"><code class="xref py py-func docutils literal notranslate"><span class="pre">validate_unicode_slug()</span></code></a> a été ajouté pour valider des «&nbsp;slugs&nbsp;» pouvant contenir des caractères Unicode.</li>
</ul>
</div>
</div>
</div>
<div class="section" id="s-backwards-incompatible-changes-in-1-9">
<span id="s-backwards-incompatible-1-9"></span><span id="backwards-incompatible-changes-in-1-9"></span><span id="backwards-incompatible-1-9"></span><h2>Changements incompatibles avec les anciennes versions dans Django 1.9<a class="headerlink" href="#backwards-incompatible-changes-in-1-9" title="Lien permanent vers ce titre">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Avertissement</p>
<p class="last">En plus des modifications détaillées dans cette section, prenez soin de parcourir les <a class="reference internal" href="#removed-features-1-9"><span class="std std-ref">Features removed in 1.9</span></a> énumérant les fonctionnalités ayant terminé leur cycle d’obsolescence et qui ont donc été supprimées. Si vous n’avez pas mis à jour votre code dans le temps imparti par la période d’obsolescence d’une certaine fonctionnalité, sa suppression pourrait apparaître comme un changement incompatible avec les anciennes versions.</p>
</div>
<div class="section" id="s-database-backend-api">
<span id="database-backend-api"></span><h3>API de moteur de base de données<a class="headerlink" href="#database-backend-api" title="Lien permanent vers ce titre">¶</a></h3>
<ul>
<li><p class="first">Quelques nouveaux tests reposent sur la capacité du moteur d’examiner les valeurs par défaut des colonnes (renvoyant le résultat dans <code class="docutils literal notranslate"><span class="pre">Field.default</span></code>). Vous pouvez définir la fonctionnalité de base de données <code class="docutils literal notranslate"><span class="pre">can_introspect_default</span></code> à <code class="docutils literal notranslate"><span class="pre">False</span></code> si votre moteur ne permet pas cette introspection. Vous pouvez passer en revue la mise en œuvre sur les moteurs inclus dans Django pour référence (<a class="reference external" href="https://code.djangoproject.com/ticket/24245">#24245</a>).</p>
</li>
<li><p class="first">Il est déconseillé d’enregistrer un adaptateur ou un convertisseur global au niveau du module DB-API pour gérer les informations de fuseau horaire des valeurs <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(disponible dans Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code></a> passées comme paramètres de requête ou renvoyés comme résultats de requêtes avec des bases de données qui ne prennent pas en charge les fuseaux horaires. Cela peut engendrer des conflits avec d’autres bibliothèques.</p>
<p>La méthode recommandée pour ajouter un fuseau horaire aux valeurs <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(disponible dans Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code></a> obtenues de la base de données est d’inscrire un convertisseur pour les champs <code class="docutils literal notranslate"><span class="pre">DateTimeField</span></code> dans <code class="docutils literal notranslate"><span class="pre">DatabaseOperations.get_db_converters()</span></code>.</p>
<p>La fonctionnalité de base de données <code class="docutils literal notranslate"><span class="pre">needs_datetime_string_cast</span></code> a été supprimée. Les moteurs de base de données qui la définissent doivent inscrire un convertisseur à la place, comme expliqué ci-dessus.</p>
</li>
<li><p class="first">Les méthodes <code class="docutils literal notranslate"><span class="pre">DatabaseOperations.value_to_db_&lt;type&gt;()</span></code> ont été renommées en <code class="docutils literal notranslate"><span class="pre">adapt_&lt;type&gt;field_value()</span></code> par cohérence avec les méthodes <code class="docutils literal notranslate"><span class="pre">convert_&lt;type&gt;field_value()</span></code>.</p>
</li>
<li><p class="first">Pour utiliser la nouvelle interrogation <code class="docutils literal notranslate"><span class="pre">date</span></code>, les moteurs de base de données tiers pourraient devoir implémenter la méthode <code class="docutils literal notranslate"><span class="pre">DatabaseOperations.datetime_cast_date_sql()</span></code>.</p>
</li>
<li><p class="first">La méthode <code class="docutils literal notranslate"><span class="pre">DatabaseOperations.time_extract_sql()</span></code> a été ajoutée. Elle appelle la méthode existante <code class="docutils literal notranslate"><span class="pre">date_extract_sql()</span></code>. Cette méthode est surchargée par le moteur SQLite pour ajouter les interrogations horaires (heure, minute, seconde) aux champs <a class="reference internal" href="../ref/models/fields.html#django.db.models.TimeField" title="django.db.models.TimeField"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeField</span></code></a>. Certains moteurs de base de données tiers pourraient avoir à faire de même.</p>
</li>
<li><p class="first">La méthode <code class="docutils literal notranslate"><span class="pre">DatabaseOperations.datetime_cast_sql()</span></code> (à ne pas confondre avec <code class="docutils literal notranslate"><span class="pre">DatabaseOperations.datetime_cast_date_sql()</span></code> citée ci-dessus) a été supprimée. Cette méthode étaient utilisée pour mettre en forme les dates avec Oracle bien avant la version 1.0, mais n’a pas été surchargée par d’autres moteurs intégrés durant des années, et n’a pas non plus été appelée depuis d’autres endroits du code ou des tests de Django.</p>
</li>
<li><p class="first">Afin de prendre en charge la parallélisation des tests, il faut implémenter la méthode <code class="docutils literal notranslate"><span class="pre">DatabaseCreation._clone_test_db()</span></code> et définir <code class="docutils literal notranslate"><span class="pre">DatabaseFeatures.can_clone_databases</span> <span class="pre">=</span> <span class="pre">True</span></code>. Il peut être nécessaire d’ajuster <code class="docutils literal notranslate"><span class="pre">DatabaseCreation.get_test_db_clone_settings()</span></code>.</p>
</li>
</ul>
</div>
<div class="section" id="s-default-settings-that-were-tuples-are-now-lists">
<span id="default-settings-that-were-tuples-are-now-lists"></span><h3>Les réglages par défaut qui étaient des tuples sont maintenant des listes<a class="headerlink" href="#default-settings-that-were-tuples-are-now-lists" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les réglages par défaut dans <code class="docutils literal notranslate"><span class="pre">django.conf.global_settings</span></code> comportaient aussi bien des listes que des tuples. Tous les réglages qui étaient précédemment des tuples sont maintenant des listes.</p>
</div>
<div class="section" id="s-is-usable-attribute-on-template-loaders-is-removed">
<span id="is-usable-attribute-on-template-loaders-is-removed"></span><h3>L’attribut <code class="docutils literal notranslate"><span class="pre">is_usable</span></code> des chargeurs de gabarit a été supprimé<a class="headerlink" href="#is-usable-attribute-on-template-loaders-is-removed" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les chargeurs de gabarit de Django exigeanient auparavant la présence d’un attribut <code class="docutils literal notranslate"><span class="pre">is_usable</span></code>. Si un chargeur était configuré dans le réglage des gabarits et que cet attribut valait <code class="docutils literal notranslate"><span class="pre">False</span></code>, le chargeur était ignoré en silence. En pratique, ce n’était utilisé que par le chargeur «&nbsp;egg&nbsp;» pour détecter si setuptools était installé. Cet attribut <code class="docutils literal notranslate"><span class="pre">is_usable</span></code> est maintenant supprimé et le chargeur «&nbsp;egg&nbsp;» échoue au moment de l’exécution si setuptools n’est pas installé.</p>
</div>
<div class="section" id="s-related-set-direct-assignment">
<span id="related-set-direct-assignment"></span><h3>Attribution directe d’un ensemble d’objets liés<a class="headerlink" href="#related-set-direct-assignment" title="Lien permanent vers ce titre">¶</a></h3>
<p>Direct assignment of related objects in the ORM used to perform a <code class="docutils literal notranslate"><span class="pre">clear()</span></code>
followed by a call to <code class="docutils literal notranslate"><span class="pre">add()</span></code>. This caused needlessly large data changes and
prevented using the <a class="reference internal" href="../ref/signals.html#django.db.models.signals.m2m_changed" title="django.db.models.signals.m2m_changed"><code class="xref py py-data docutils literal notranslate"><span class="pre">m2m_changed</span></code></a> signal to
track individual changes in many-to-many relations.</p>
<p>Direct assignment now relies on the new
<a class="reference internal" href="../ref/models/relations.html#django.db.models.fields.related.RelatedManager.set" title="django.db.models.fields.related.RelatedManager.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set()</span></code></a> method on related
managers which by default only processes changes between the existing related
set and the one that’s newly assigned. The previous behavior can be restored by
replacing direct assignment by a call to <code class="docutils literal notranslate"><span class="pre">set()</span></code> with the keyword argument
<code class="docutils literal notranslate"><span class="pre">clear=True</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">ModelForm</span></code>, et donc aussi <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code>, se basent en interne sur l’attribution directe pour les relations plusieurs-à-plusieurs et par conséquent utilisent maintenant le nouveau comportement.</p>
</div>
<div class="section" id="s-filesystem-based-template-loaders-catch-more-specific-exceptions">
<span id="filesystem-based-template-loaders-catch-more-specific-exceptions"></span><h3>Les chargeurs de gabarits basés sur le système de fichiers interceptent plus précisément les exceptions<a class="headerlink" href="#filesystem-based-template-loaders-catch-more-specific-exceptions" title="Lien permanent vers ce titre">¶</a></h3>
<p>Lors de l’utilisation des chargeurs de gabarits <a class="reference internal" href="../ref/templates/api.html#django.template.loaders.filesystem.Loader" title="django.template.loaders.filesystem.Loader"><code class="xref py py-class docutils literal notranslate"><span class="pre">filesystem.Loader</span></code></a> ou <a class="reference internal" href="../ref/templates/api.html#django.template.loaders.app_directories.Loader" title="django.template.loaders.app_directories.Loader"><code class="xref py py-class docutils literal notranslate"><span class="pre">app_directories.Loader</span></code></a>, les version précédentes de Django généraient une erreur <a class="reference internal" href="../topics/templates.html#django.template.TemplateDoesNotExist" title="django.template.TemplateDoesNotExist"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TemplateDoesNotExist</span></code></a> si une source de gabarit existait mais qu’elle n’était pas lisible. Cela pouvait se produire dans diverses circonstances, comme par exemple si Django n’avait pas les permissions d’ouvrir le fichier ou que la source du gabarit était un répertoire. Dorénavant, Django ne masque une exception que si la source du gabarit n’existe pas. Dans tous les autres cas, ce sera l’exception <code class="docutils literal notranslate"><span class="pre">IOError</span></code> d’origine qui sera générée.</p>
</div>
<div class="section" id="s-http-redirects-no-longer-forced-to-absolute-uris">
<span id="http-redirects-no-longer-forced-to-absolute-uris"></span><h3>Les redirections HTTP ne doivent plus forcément être des URI absolues<a class="headerlink" href="#http-redirects-no-longer-forced-to-absolute-uris" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les redirections relatives ne sont plus converties en URI absolues. La <span class="target" id="index-7"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2616.html"><strong>RFC 2616</strong></a> exige que l’en-tête <code class="docutils literal notranslate"><span class="pre">Location</span></code> des réponses de redirection soit une URI absolue, mais cette norme a été remplacée par la <span class="target" id="index-8"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc7231.html"><strong>RFC 7231</strong></a> qui autorise les URI relatives dans <code class="docutils literal notranslate"><span class="pre">Location</span></code>, reconnaissant ainsi la pratique réelle des agents utilisateurs, dont presque tous acceptent cette façon de faire.</p>
<p>Consequently, the expected URLs passed to <code class="docutils literal notranslate"><span class="pre">assertRedirects</span></code> should generally
no longer include the scheme and domain part of the URLs. For example,
<code class="docutils literal notranslate"><span class="pre">self.assertRedirects(response,</span> <span class="pre">'http://testserver/some-url/')</span></code> should be
replaced by <code class="docutils literal notranslate"><span class="pre">self.assertRedirects(response,</span> <span class="pre">'/some-url/')</span></code> (unless the
redirection specifically contained an absolute URL).</p>
<p>In the rare case that you need the old behavior (discovered with an ancient
version of Apache with <code class="docutils literal notranslate"><span class="pre">mod_scgi</span></code> that interprets a relative redirect as an
«&nbsp;internal redirect&nbsp;»), you can restore it by writing a custom middleware:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">LocationHeaderFix</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">process_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
        <span class="k">if</span> <span class="s1">&#39;Location&#39;</span> <span class="ow">in</span> <span class="n">response</span><span class="p">:</span>
            <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Location&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">build_absolute_uri</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="s1">&#39;Location&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">response</span>
</pre></div>
</div>
</div>
<div class="section" id="s-dropped-support-for-postgresql-9-0">
<span id="dropped-support-for-postgresql-9-0"></span><h3>Abandon de la prise en charge de PostgreSQL 9.0<a class="headerlink" href="#dropped-support-for-postgresql-9-0" title="Lien permanent vers ce titre">¶</a></h3>
<p>La prise en charge de PostgreSQL 9.0 par le projet amont s’est terminée en septembre 2015. Par conséquent, Django 1.9 a défini la version 1.9 comme la version minimum de PostgreSQL officiellement prise en charge.</p>
</div>
<div class="section" id="s-dropped-support-for-oracle-11-1">
<span id="dropped-support-for-oracle-11-1"></span><h3>Abandon de la prise en charge de Oracle 11.1<a class="headerlink" href="#dropped-support-for-oracle-11-1" title="Lien permanent vers ce titre">¶</a></h3>
<p>La prise en charge de Oracle 11.1 par le projet amont s’est terminée en août 2015. Par conséquent, Django 1.9 a défini la version 11.2 comme la version minimum de Oracle officiellement prise en charge.</p>
</div>
<div class="section" id="s-bulk-behavior-of-add-method-of-related-managers">
<span id="bulk-behavior-of-add-method-of-related-managers"></span><h3>Comportement d’ajout en bloc de la méthode <code class="docutils literal notranslate"><span class="pre">add()</span></code> des gestionnaires de relation<a class="headerlink" href="#bulk-behavior-of-add-method-of-related-managers" title="Lien permanent vers ce titre">¶</a></h3>
<p>Pour améliorer les performances, les méthodes <code class="docutils literal notranslate"><span class="pre">add()</span></code> des gestionnaires de relation créés par les champs <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code> et <code class="docutils literal notranslate"><span class="pre">GenericForeignKey</span></code> ont modifé leur comportement d’une série d’appels à <code class="docutils literal notranslate"><span class="pre">Model.save()</span></code> à un seul appel à <code class="docutils literal notranslate"><span class="pre">QuerySet.update()</span></code>. Cette modification implique que les signaux <code class="docutils literal notranslate"><span class="pre">pre_save</span></code> et <code class="docutils literal notranslate"><span class="pre">post_save</span></code> ne sont plus envoyés dans ces situations. Vous pouvez utiliser le paramètre nommé <code class="docutils literal notranslate"><span class="pre">bulk=False</span></code> pour revenir à l’ancien comportement.</p>
</div>
<div class="section" id="s-template-loaderorigin-and-stringorigin-are-removed">
<span id="template-loaderorigin-and-stringorigin-are-removed"></span><h3>Suppression de <code class="docutils literal notranslate"><span class="pre">LoaderOrigin</span></code> et <code class="docutils literal notranslate"><span class="pre">StringOrigin</span></code> des gabarits<a class="headerlink" href="#template-loaderorigin-and-stringorigin-are-removed" title="Lien permanent vers ce titre">¶</a></h3>
<p>Dans les versions précédentes de Django, quand un moteur de gabarit était initialisé avec <code class="docutils literal notranslate"><span class="pre">debug=True</span></code>, une instance de <code class="docutils literal notranslate"><span class="pre">django.template.loader.LoaderOrigin</span></code> ou de <code class="docutils literal notranslate"><span class="pre">django.template.base.StringOrigin</span></code> était définie comme attribut d’origine sur l’objet gabarit. Ces classes ont été réunies dans <a class="reference internal" href="../ref/templates/api.html#django.template.base.Origin" title="django.template.base.Origin"><code class="xref py py-class docutils literal notranslate"><span class="pre">Origin</span></code></a> et l’attribut est maintenant toujours défini, indépendamment du réglage de débogage du moteur. Pour un niveau minimal de rétrocompatibilité, les anciens noms de classes seront conservés comme alias de la nouvelle classe <code class="docutils literal notranslate"><span class="pre">Origin</span></code> jusqu’à Django 2.0.</p>
</div>
<div class="section" id="s-changes-to-the-default-logging-configuration">
<span id="s-default-logging-changes-19"></span><span id="changes-to-the-default-logging-configuration"></span><span id="default-logging-changes-19"></span><h3>Changements de la configuration de journalisation par défaut<a class="headerlink" href="#changes-to-the-default-logging-configuration" title="Lien permanent vers ce titre">¶</a></h3>
<p>To make it easier to write custom logging configurations, Django’s default
logging configuration no longer defines <code class="docutils literal notranslate"><span class="pre">django.request</span></code> and
<code class="docutils literal notranslate"><span class="pre">django.security</span></code> loggers. Instead, it defines a single <code class="docutils literal notranslate"><span class="pre">django</span></code> logger,
filtered at the <code class="docutils literal notranslate"><span class="pre">INFO</span></code> level, with two handlers:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">console</span></code>: filtered at the <code class="docutils literal notranslate"><span class="pre">INFO</span></code> level and only active if <code class="docutils literal notranslate"><span class="pre">DEBUG=True</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">mail_admins</span></code>: filtered at the <code class="docutils literal notranslate"><span class="pre">ERROR</span></code> level and only active if
<code class="docutils literal notranslate"><span class="pre">DEBUG=False</span></code>.</li>
</ul>
<p>Si vous ne surchargez pas la journalisation par défaut de Django, vous ne devriez constater que des changements minimes dans le comportement, mais vous pourriez voir certains nouveaux messages dans la console <code class="docutils literal notranslate"><span class="pre">runserver</span></code>, par exemple.</p>
<p>Si vous surchargez la journalisation par défaut de Django, vous devriez vérifier la manière dont votre configuration fusionne avec les nouveaux paramètres par défaut.</p>
</div>
<div class="section" id="s-httprequest-details-in-error-reporting">
<span id="httprequest-details-in-error-reporting"></span><h3>Détails <code class="docutils literal notranslate"><span class="pre">HttpRequest</span></code> dans les rapports d’erreur<a class="headerlink" href="#httprequest-details-in-error-reporting" title="Lien permanent vers ce titre">¶</a></h3>
<p>Il était redondant d’afficher les détails complets de la requête <a class="reference internal" href="../ref/request-response.html#django.http.HttpRequest" title="django.http.HttpRequest"><code class="xref py py-class docutils literal notranslate"><span class="pre">HttpRequest</span></code></a> chaque fois qu’elle apparaissait comme variable de la pile d’appels dans la version HTML de la page de débogage et du courriel d’erreur. Ainsi, la requête HTTP est affichée dorénavant avec la même représentation standard que les autres variables (<code class="docutils literal notranslate"><span class="pre">repr(request)</span></code>). En conséquence, la méthode <code class="docutils literal notranslate"><span class="pre">ExceptionReporterFilter.get_request_repr()</span></code> et la fonction non documentée <code class="docutils literal notranslate"><span class="pre">django.http.build_request_repr()</span></code> ont été supprimées.</p>
<p>Les contenus de la version textuelle du courriel ont été modifiés pour fournir une trace d’appels de la même structure que dans le cas de requêtes AJAX. Les détails de la trace d’appels sont produits par la méthode <code class="docutils literal notranslate"><span class="pre">ExceptionReporter.get_traceback_text()</span></code>.</p>
</div>
<div class="section" id="s-removal-of-time-zone-aware-global-adapters-and-converters-for-datetimes">
<span id="removal-of-time-zone-aware-global-adapters-and-converters-for-datetimes"></span><h3>Suppression des adaptateurs et convertisseurs globaux de fuseau horaire pour les objets date/heure<a class="headerlink" href="#removal-of-time-zone-aware-global-adapters-and-converters-for-datetimes" title="Lien permanent vers ce titre">¶</a></h3>
<p>Django n’inscrit plus d’adaptateurs ou de convertisseurs globaux pour la gestion des informations de fuseau horaire pour les valeurs <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(disponible dans Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code></a> envoyées à la base de données en tant que paramètres de requête ou lues à partir de la base de données pour des résultats de requête. Ce changement affecte les projets qui répondent à toutes les conditions suivantes&nbsp;:</p>
<ul class="simple">
<li>Le réglage <a class="reference internal" href="../ref/settings.html#std:setting-USE_TZ"><code class="xref std std-setting docutils literal notranslate"><span class="pre">USE_TZ</span></code></a>  contient <code class="docutils literal notranslate"><span class="pre">True</span></code>.</li>
<li>La base de données est SQLite, MySQL, Oracle ou une autre base de données tierce qui ne prend pas en charge les fuseaux horaires. En cas de doute, vous pouvez vérifier la valeur de <code class="docutils literal notranslate"><span class="pre">connection.features.supports_timezones</span></code>.</li>
<li>Le code interroge la base de données en dehors de l’ORM, typiquement avec <code class="docutils literal notranslate"><span class="pre">cursor.execute(sql,</span> <span class="pre">params)</span></code>.</li>
</ul>
<p>Si vous passez des paramètres <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(disponible dans Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code></a> avec fuseau horaire à de telles requêtes, vous devriez les transformer en dates/heures naïves en UTC&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.utils</span> <span class="k">import</span> <span class="n">timezone</span>
<span class="n">param</span> <span class="o">=</span> <span class="n">timezone</span><span class="o">.</span><span class="n">make_naive</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>
</pre></div>
</div>
<p>Si vous ne le faites pas, la conversion sera effectuée comme dans les versions précédentes (avec un avertissement d’obsolescence) jusqu’à Django 1.11. Django 2.0 n’effectuera plus de conversion, ce qui pourrait aboutir à des corruptions de données.</p>
<p>Si vous lisez des valeurs <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(disponible dans Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code></a> dans les résultats, elles seront naïves au lieu d’être conscientes. Vous pouvez compenser comme ceci&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.utils</span> <span class="k">import</span> <span class="n">timezone</span>
<span class="n">value</span> <span class="o">=</span> <span class="n">timezone</span><span class="o">.</span><span class="n">make_aware</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>
</pre></div>
</div>
<p>Tout ceci n’est pas nécessaire si vous interrogez la base de données au travers de l’ORM, même si vous utilisez des requêtes <a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.raw" title="django.db.models.query.QuerySet.raw"><code class="xref py py-meth docutils literal notranslate"><span class="pre">raw()</span></code></a>. L’ORM se charge de gérer les informations de fuseau horaire.</p>
</div>
<div class="section" id="s-template-tag-modules-are-imported-when-templates-are-configured">
<span id="template-tag-modules-are-imported-when-templates-are-configured"></span><h3>Les modules de balises de gabarit sont importés au moment où les gabarits sont configurés<a class="headerlink" href="#template-tag-modules-are-imported-when-templates-are-configured" title="Lien permanent vers ce titre">¶</a></h3>
<p>Le moteur <a class="reference internal" href="../topics/templates.html#django.template.backends.django.DjangoTemplates" title="django.template.backends.django.DjangoTemplates"><code class="xref py py-class docutils literal notranslate"><span class="pre">DjangoTemplates</span></code></a> procède dorénavant à la découverte de modules de balises de gabarit installés lors de son instanciation. Ce changement permet d’activer explicitement des bibliothèques par la clé <code class="docutils literal notranslate"><span class="pre">'libraries'</span></code> de <a class="reference internal" href="../ref/settings.html#std:setting-TEMPLATES-OPTIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">OPTIONS</span></code></a> dans la définition d’un moteur <a class="reference internal" href="../topics/templates.html#django.template.backends.django.DjangoTemplates" title="django.template.backends.django.DjangoTemplates"><code class="xref py py-class docutils literal notranslate"><span class="pre">DjangoTemplates</span></code></a>. D’éventuelles erreurs d’importation ou de syntaxe dans les modules de balises de gabarit aboutissent à un échec rapide au moment de l’instanciation, plutôt qu’au moment de la première compilation d’un gabarit avec une balise <a class="reference internal" href="../ref/templates/builtins.html#std:templatetag-load"><code class="xref std std-ttag docutils literal notranslate"><span class="pre">{%</span> <span class="pre">load</span> <span class="pre">%}</span></code></a>.</p>
</div>
<div class="section" id="s-django-template-base-add-to-builtins-is-removed">
<span id="django-template-base-add-to-builtins-is-removed"></span><h3>Suppression de <code class="docutils literal notranslate"><span class="pre">django.template.base.add_to_builtins()</span></code><a class="headerlink" href="#django-template-base-add-to-builtins-is-removed" title="Lien permanent vers ce titre">¶</a></h3>
<p>Même s’il s’agissait d’une API privée, les projets utilisaient souvent <code class="docutils literal notranslate"><span class="pre">add_to_builtins()</span></code> pour rendre disponibles les balises et filtres de gabarit sans devoir utiliser la balise <a class="reference internal" href="../ref/templates/builtins.html#std:templatetag-load"><code class="xref std std-ttag docutils literal notranslate"><span class="pre">{%</span> <span class="pre">load</span> <span class="pre">%}</span></code></a>. Cette API a été formalisée. Les projets doivent dorénavant intégrer les bibliothèques au moyen de la clé <code class="docutils literal notranslate"><span class="pre">'builtins'</span></code> de <a class="reference internal" href="../ref/settings.html#std:setting-TEMPLATES-OPTIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">OPTIONS</span></code></a> lors de la définition d’un moteur <a class="reference internal" href="../topics/templates.html#django.template.backends.django.DjangoTemplates" title="django.template.backends.django.DjangoTemplates"><code class="xref py py-class docutils literal notranslate"><span class="pre">DjangoTemplates</span></code></a>.</p>
</div>
<div class="section" id="s-simple-tag-now-wraps-tag-output-in-conditional-escape">
<span id="s-simple-tag-conditional-escape-fix"></span><span id="simple-tag-now-wraps-tag-output-in-conditional-escape"></span><span id="simple-tag-conditional-escape-fix"></span><h3>Le résultat de <code class="docutils literal notranslate"><span class="pre">simple_tag</span></code> passe maintenant toujours par <code class="docutils literal notranslate"><span class="pre">conditional_escape</span></code><a class="headerlink" href="#simple-tag-now-wraps-tag-output-in-conditional-escape" title="Lien permanent vers ce titre">¶</a></h3>
<p>In general, template tags do not autoescape their contents, and this behavior is
<a class="reference internal" href="../howto/custom-template-tags.html#tags-auto-escaping"><span class="std std-ref">documented</span></a>. For tags like
<a class="reference internal" href="../howto/custom-template-tags.html#django.template.Library.inclusion_tag" title="django.template.Library.inclusion_tag"><code class="xref py py-class docutils literal notranslate"><span class="pre">inclusion_tag</span></code></a>, this is not a problem because
the included template will perform autoescaping. For <code class="docutils literal notranslate"><span class="pre">assignment_tag()</span></code>,
the output will be escaped when it is used as a variable in the template.</p>
<p>Cependant, pour les cas d’utilisation prévus pour <a class="reference internal" href="../howto/custom-template-tags.html#django.template.Library.simple_tag" title="django.template.Library.simple_tag"><code class="xref py py-class docutils literal notranslate"><span class="pre">simple_tag</span></code></a>, il est très facile de se retrouver avec du code HTML incorrect et par conséquent avec un risque de faille XSS. Par exemple&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@register</span><span class="o">.</span><span class="n">simple_tag</span><span class="p">(</span><span class="n">takes_context</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">greeting</span><span class="p">(</span><span class="n">context</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot;Hello </span><span class="si">{0}</span><span class="s2">!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">context</span><span class="p">[</span><span class="s1">&#39;request&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">first_name</span><span class="p">)</span>
</pre></div>
</div>
<p>Dans les versions précédentes de Django, ceci est considéré comme une faille XSS car <code class="docutils literal notranslate"><span class="pre">user.first_name</span></code> n’est pas échappé.</p>
<p>Dans Django 1.9, c’est corrigé&nbsp;: si le contexte du gabarit possède <code class="docutils literal notranslate"><span class="pre">autoescape=True</span></code> (par défaut), <code class="docutils literal notranslate"><span class="pre">simple_tag</span></code> fera passer le résultat de la fonction de la balise par <a class="reference internal" href="../ref/utils.html#django.utils.html.conditional_escape" title="django.utils.html.conditional_escape"><code class="xref py py-func docutils literal notranslate"><span class="pre">conditional_escape()</span></code></a>.</p>
<p>Pour corriger vos balises <code class="docutils literal notranslate"><span class="pre">simple_tag</span></code>, voici les bonnes pratiques à appliquer&nbsp;:</p>
<ul class="simple">
<li>Tout code produisant du HTML devrait soit utiliser le système des gabarits, soit <a class="reference internal" href="../ref/utils.html#django.utils.html.format_html" title="django.utils.html.format_html"><code class="xref py py-func docutils literal notranslate"><span class="pre">format_html()</span></code></a>.</li>
<li>Si le résultat d’une balise <code class="docutils literal notranslate"><span class="pre">simple_tag</span></code> a besoin d’être échappé, utilisez <a class="reference internal" href="../ref/utils.html#django.utils.html.escape" title="django.utils.html.escape"><code class="xref py py-func docutils literal notranslate"><span class="pre">escape()</span></code></a> ou <a class="reference internal" href="../ref/utils.html#django.utils.html.conditional_escape" title="django.utils.html.conditional_escape"><code class="xref py py-func docutils literal notranslate"><span class="pre">conditional_escape()</span></code></a>.</li>
<li>Si vous êtes absolument certain que vous produisez du code HTML provenant d’une source fiable (par ex. un champ de CMS qui stocke du HTML saisi par des administrateurs), vous pouvez le signaler comme tel en utilisant <a class="reference internal" href="../ref/utils.html#django.utils.safestring.mark_safe" title="django.utils.safestring.mark_safe"><code class="xref py py-func docutils literal notranslate"><span class="pre">mark_safe()</span></code></a>.</li>
</ul>
<p>Les balises qui suivent ces règles seront correctes et sûres, qu’elles fonctionnent avec Django 1.9+ ou des versions plus anciennes.</p>
</div>
<div class="section" id="s-paginator-page-range">
<span id="paginator-page-range"></span><h3><code class="docutils literal notranslate"><span class="pre">Paginator.page_range</span></code><a class="headerlink" href="#paginator-page-range" title="Lien permanent vers ce titre">¶</a></h3>
<p><a class="reference internal" href="../ref/paginator.html#django.core.paginator.Paginator.page_range" title="django.core.paginator.Paginator.page_range"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Paginator.page_range</span></code></a> est dorénavant un itérateur au lieu d’une liste.</p>
<p>Dans les versions de Django avant 1.8, <code class="docutils literal notranslate"><span class="pre">Paginator.page_range</span></code> renvoyait un objet <code class="docutils literal notranslate"><span class="pre">list</span></code> en Python 2 et un objet <code class="docutils literal notranslate"><span class="pre">range</span></code> en Python 3. Django 1.8 renvoie toujours une liste, mais un itérateur est plus efficace.</p>
<p>Le code existant qui dépend des fonctionnalités spécifiques des objets <code class="docutils literal notranslate"><span class="pre">list</span></code>, comme l’indiçage, peut se charger de transformer l’itérateur en <code class="docutils literal notranslate"><span class="pre">list</span></code> avec la fonction <code class="docutils literal notranslate"><span class="pre">list()</span></code>.</p>
</div>
<div class="section" id="s-implicit-queryset-in-lookup-removed">
<span id="implicit-queryset-in-lookup-removed"></span><h3>Interrogation implicite <code class="docutils literal notranslate"><span class="pre">__in</span></code> des <code class="docutils literal notranslate"><span class="pre">QuerySet</span></code> supprimée<a class="headerlink" href="#implicit-queryset-in-lookup-removed" title="Lien permanent vers ce titre">¶</a></h3>
<p>Dans les versions précédentes, des requêtes telles que&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">related_id</span><span class="o">=</span><span class="n">RelatedModel</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">())</span>
</pre></div>
</div>
<p>étaient implicitement converties en&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">related_id__in</span><span class="o">=</span><span class="n">RelatedModel</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">())</span>
</pre></div>
</div>
<p>ce qui produisait du code SQL du style <code class="docutils literal notranslate"><span class="pre">&quot;related_id</span> <span class="pre">IN</span> <span class="pre">(SELECT</span> <span class="pre">id</span> <span class="pre">FROM</span> <span class="pre">...)&quot;</span></code>.</p>
<p>L’opération <code class="docutils literal notranslate"><span class="pre">__in</span></code> implicite n’est plus effectuée, ce qui fait que le «&nbsp;IN&nbsp;» SQL est maintenant «&nbsp;=&nbsp;», et si la sous-requête renvoie plusieurs résultats, la plupart des bases de données vont générer une erreur.</p>
</div>
<div class="section" id="s-contrib-admin-browser-support">
<span id="s-admin-browser-support-19"></span><span id="contrib-admin-browser-support"></span><span id="admin-browser-support-19"></span><h3>Navigateurs pris en charge par <code class="docutils literal notranslate"><span class="pre">contrib.admin</span></code><a class="headerlink" href="#contrib-admin-browser-support" title="Lien permanent vers ce titre">¶</a></h3>
<p>Le site d’administration ne prend plus en charge les versions d’Internet Explorer 8 et plus anciennes, dans la mesure où ces navigateurs ont atteint leur fin de vie officielle.</p>
<p>Les images et le style CSS qui prenait en charge Internet Explorer 6 et 7 ont été supprimés. Les icônes PNG et GIF ont été remplacées par des icônes SVG qui ne sont pas prises en charge par Internet Explorer 8 ou les versions plus anciennes.</p>
<p>The jQuery library embedded in the admin has been upgraded from version 1.11.2
to 2.1.4. jQuery 2.x has the same API as jQuery 1.x, but does not support
Internet Explorer 6, 7, or 8, allowing for better performance and a smaller
file size. If you need to support IE8 and must also use the latest version of
Django, you can override the admin’s copy of jQuery with your own by creating
a Django application with this structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">app</span><span class="o">/</span><span class="n">static</span><span class="o">/</span><span class="n">admin</span><span class="o">/</span><span class="n">js</span><span class="o">/</span><span class="n">vendor</span><span class="o">/</span>
    <span class="n">jquery</span><span class="o">.</span><span class="n">js</span>
    <span class="n">jquery</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">js</span>
</pre></div>
</div>
</div>
<div class="section" id="s-syntaxerror-when-installing-django-setuptools-5-5-x">
<span id="s-syntax-error-old-setuptools-django-19"></span><span id="syntaxerror-when-installing-django-setuptools-5-5-x"></span><span id="syntax-error-old-setuptools-django-19"></span><h3><code class="docutils literal notranslate"><span class="pre">SyntaxError</span></code> when installing Django setuptools 5.5.x<a class="headerlink" href="#syntaxerror-when-installing-django-setuptools-5-5-x" title="Lien permanent vers ce titre">¶</a></h3>
<p>When installing Django 1.9 or 1.9.1 with setuptools 5.5.x, you’ll see:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Compiling django/conf/app_template/apps.py ...
  File &quot;django/conf/app_template/apps.py&quot;, line 4
    class {{ camel_case_app_name }}Config(AppConfig):
          ^
SyntaxError: invalid syntax

Compiling django/conf/app_template/models.py ...
  File &quot;django/conf/app_template/models.py&quot;, line 1
    {{ unicode_literals }}from django.db import models
                             ^
SyntaxError: invalid syntax
</pre></div>
</div>
<p>It’s safe to ignore these errors (Django will still install just fine), but you
can avoid them by upgrading setuptools to a more recent version. If you’re
using pip, you can upgrade pip using <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-U</span> <span class="pre">pip</span></code> which
will also upgrade setuptools. This is resolved in later versions of Django as
described in the <a class="reference internal" href="1.9.2.html"><span class="doc">Notes de publication de Django 1.9.2</span></a>.</p>
</div>
<div class="section" id="s-miscellaneous">
<span id="miscellaneous"></span><h3>Divers<a class="headerlink" href="#miscellaneous" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li>The jQuery static files in <code class="docutils literal notranslate"><span class="pre">contrib.admin</span></code> have been moved into a
<code class="docutils literal notranslate"><span class="pre">vendor/jquery</span></code> subdirectory.</li>
<li>The text displayed for null columns in the admin changelist <code class="docutils literal notranslate"><span class="pre">list_display</span></code>
cells has changed from <code class="docutils literal notranslate"><span class="pre">(None)</span></code> (or its translated equivalent) to <code class="docutils literal notranslate"><span class="pre">-</span></code> (a
dash).</li>
<li><code class="docutils literal notranslate"><span class="pre">django.http.responses.REASON_PHRASES</span></code> and
<code class="docutils literal notranslate"><span class="pre">django.core.handlers.wsgi.STATUS_CODE_TEXT</span></code> have been removed. Use
Python’s stdlib instead: <a class="reference external" href="https://docs.python.org/3/library/http.client.html#http.client.responses" title="(disponible dans Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">http.client.responses</span></code></a> for Python 3 and
<a class="reference external" href="https://docs.python.org/2/library/httplib.html#httplib.responses">httplib.responses</a> for Python 2.</li>
<li><code class="docutils literal notranslate"><span class="pre">ValuesQuerySet</span></code> and <code class="docutils literal notranslate"><span class="pre">ValuesListQuerySet</span></code> have been removed.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">admin/base.html</span></code> template no longer sets
<code class="docutils literal notranslate"><span class="pre">window.__admin_media_prefix__</span></code> or <code class="docutils literal notranslate"><span class="pre">window.__admin_utc_offset__</span></code>. Image
references in JavaScript that used that value to construct absolute URLs have
been moved to CSS for easier customization. The UTC offset is stored on a
data attribute of the <code class="docutils literal notranslate"><span class="pre">&lt;body&gt;</span></code> tag.</li>
<li><code class="docutils literal notranslate"><span class="pre">CommaSeparatedIntegerField</span></code> validation has been refined to forbid values
like <code class="docutils literal notranslate"><span class="pre">','</span></code>, <code class="docutils literal notranslate"><span class="pre">',1'</span></code>, and <code class="docutils literal notranslate"><span class="pre">'1,,2'</span></code>.</li>
<li>Form initialization was moved from the <a class="reference internal" href="../ref/class-based-views/mixins-editing.html#django.views.generic.edit.ProcessFormView.get" title="django.views.generic.edit.ProcessFormView.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ProcessFormView.get()</span></code></a> method to the new
<a class="reference internal" href="../ref/class-based-views/mixins-editing.html#django.views.generic.edit.FormMixin.get_context_data" title="django.views.generic.edit.FormMixin.get_context_data"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FormMixin.get_context_data()</span></code></a> method. This may be
backwards incompatible if you have overridden the <code class="docutils literal notranslate"><span class="pre">get_context_data()</span></code>
method without calling <code class="docutils literal notranslate"><span class="pre">super()</span></code>.</li>
<li>La prise en charge de PostGIS 1.5 a été abandonnée.</li>
<li>Le champ <code class="docutils literal notranslate"><span class="pre">django.contrib.sites.models.Site.domain</span></code> a été défini comme <a class="reference internal" href="../ref/models/fields.html#django.db.models.Field.unique" title="django.db.models.Field.unique"><code class="xref py py-attr docutils literal notranslate"><span class="pre">unique</span></code></a>.</li>
<li>In order to enforce test isolation, database queries are not allowed
by default in <a class="reference internal" href="../topics/testing/tools.html#django.test.SimpleTestCase" title="django.test.SimpleTestCase"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleTestCase</span></code></a> tests anymore. You
can disable this behavior by setting the <code class="docutils literal notranslate"><span class="pre">allow_database_queries</span></code> class
attribute to <code class="docutils literal notranslate"><span class="pre">True</span></code> on your test class.</li>
<li><code class="docutils literal notranslate"><span class="pre">ResolverMatch.app_name</span></code> was changed to contain the full namespace path in
the case of nested namespaces. For consistency with
<code class="docutils literal notranslate"><span class="pre">ResolverMatch.namespace</span></code>, the empty value is now an empty string instead
of <code class="docutils literal notranslate"><span class="pre">None</span></code>.</li>
<li>For security hardening, session keys must be at least 8 characters.</li>
<li>Private function <code class="docutils literal notranslate"><span class="pre">django.utils.functional.total_ordering()</span></code> has been
removed. It contained a workaround for a <code class="docutils literal notranslate"><span class="pre">functools.total_ordering()</span></code> bug
in Python versions older than 2.7.3.</li>
<li>XML serialization (either through <a class="reference internal" href="../ref/django-admin.html#django-admin-dumpdata"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">dumpdata</span></code></a> or the syndication
framework) used to output any characters it received. Now if the content to
be serialized contains any control characters not allowed in the XML 1.0
standard, the serialization will fail with a <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(disponible dans Python v3.9)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a>.</li>
<li><a class="reference internal" href="../ref/forms/fields.html#django.forms.CharField" title="django.forms.CharField"><code class="xref py py-class docutils literal notranslate"><span class="pre">CharField</span></code></a> now strips input of leading and trailing
whitespace by default. This can be disabled by setting the new
<a class="reference internal" href="../ref/forms/fields.html#django.forms.CharField.strip" title="django.forms.CharField.strip"><code class="xref py py-attr docutils literal notranslate"><span class="pre">strip</span></code></a> argument to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</li>
<li>Template text that is translated and uses two or more consecutive percent
signs, e.g. <code class="docutils literal notranslate"><span class="pre">&quot;%%&quot;</span></code>, may have a new <code class="docutils literal notranslate"><span class="pre">msgid</span></code> after <code class="docutils literal notranslate"><span class="pre">makemessages</span></code> is run
(most likely the translation will be marked fuzzy). The new <code class="docutils literal notranslate"><span class="pre">msgid</span></code> will be
marked <code class="docutils literal notranslate"><span class="pre">&quot;#,</span> <span class="pre">python-format&quot;</span></code>.</li>
<li>If neither <a class="reference internal" href="../ref/request-response.html#django.http.HttpRequest.current_app" title="django.http.HttpRequest.current_app"><code class="xref py py-attr docutils literal notranslate"><span class="pre">request.current_app</span></code></a>
nor <a class="reference internal" href="../ref/templates/api.html#django.template.Context" title="django.template.Context"><code class="xref py py-class docutils literal notranslate"><span class="pre">Context.current_app</span></code></a> are set, the
<a class="reference internal" href="../ref/templates/builtins.html#std:templatetag-url"><code class="xref std std-ttag docutils literal notranslate"><span class="pre">url</span></code></a> template tag will now use the namespace of the current request.
Set <code class="docutils literal notranslate"><span class="pre">request.current_app</span></code> to <code class="docutils literal notranslate"><span class="pre">None</span></code> if you don’t want to use a namespace
hint.</li>
<li>The <a class="reference internal" href="../ref/settings.html#std:setting-SILENCED_SYSTEM_CHECKS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">SILENCED_SYSTEM_CHECKS</span></code></a> setting now silences messages of all
levels. Previously, messages of <code class="docutils literal notranslate"><span class="pre">ERROR</span></code> level or higher were printed to the
console.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">FlatPage.enable_comments</span></code> field is removed from the <code class="docutils literal notranslate"><span class="pre">FlatPageAdmin</span></code>
as it’s unused by the application. If your project or a third-party app makes
use of it, <a class="reference internal" href="../ref/contrib/flatpages.html#flatpages-admin"><span class="std std-ref">create a custom ModelAdmin</span></a> to add it back.</li>
<li>The return value of
<a class="reference internal" href="../topics/testing/advanced.html#django.test.runner.DiscoverRunner.setup_databases" title="django.test.runner.DiscoverRunner.setup_databases"><code class="xref py py-meth docutils literal notranslate"><span class="pre">setup_databases()</span></code></a> and the first
argument of <a class="reference internal" href="../topics/testing/advanced.html#django.test.runner.DiscoverRunner.teardown_databases" title="django.test.runner.DiscoverRunner.teardown_databases"><code class="xref py py-meth docutils literal notranslate"><span class="pre">teardown_databases()</span></code></a>
changed. They used to be <code class="docutils literal notranslate"><span class="pre">(old_names,</span> <span class="pre">mirrors)</span></code> tuples. Now they’re just
the first item, <code class="docutils literal notranslate"><span class="pre">old_names</span></code>.</li>
<li>By default <a class="reference internal" href="../topics/testing/tools.html#django.test.LiveServerTestCase" title="django.test.LiveServerTestCase"><code class="xref py py-class docutils literal notranslate"><span class="pre">LiveServerTestCase</span></code></a> attempts to find an
available port in the 8081-8179 range instead of just trying port 8081.</li>
<li>Les contrôles système pour <a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin" title="django.contrib.admin.ModelAdmin"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelAdmin</span></code></a> vérifient maintenant les instances plutôt que les classes.</li>
<li>The private API to apply mixed migration plans has been dropped for
performance reasons. Mixed plans consist of a list of migrations where some
are being applied and others are being unapplied.</li>
<li>The related model object descriptor classes in
<code class="docutils literal notranslate"><span class="pre">django.db.models.fields.related</span></code> (private API) are moved from the
<code class="docutils literal notranslate"><span class="pre">related</span></code> module to <code class="docutils literal notranslate"><span class="pre">related_descriptors</span></code> and renamed as follows:<ul>
<li><code class="docutils literal notranslate"><span class="pre">ReverseSingleRelatedObjectDescriptor</span></code> is <code class="docutils literal notranslate"><span class="pre">ForwardManyToOneDescriptor</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">SingleRelatedObjectDescriptor</span></code> is <code class="docutils literal notranslate"><span class="pre">ReverseOneToOneDescriptor</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">ForeignRelatedObjectsDescriptor</span></code> is <code class="docutils literal notranslate"><span class="pre">ReverseManyToOneDescriptor</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">ManyRelatedObjectsDescriptor</span></code> is <code class="docutils literal notranslate"><span class="pre">ManyToManyDescriptor</span></code></li>
</ul>
</li>
<li>If you implement a custom <a class="reference internal" href="../ref/urls.html#django.conf.urls.handler404" title="django.conf.urls.handler404"><code class="xref py py-data docutils literal notranslate"><span class="pre">handler404</span></code></a> view, it must
return a response with an HTTP 404 status code. Use
<a class="reference internal" href="../ref/request-response.html#django.http.HttpResponseNotFound" title="django.http.HttpResponseNotFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">HttpResponseNotFound</span></code></a> or pass <code class="docutils literal notranslate"><span class="pre">status=404</span></code> to the
<a class="reference internal" href="../ref/request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">HttpResponse</span></code></a>. Otherwise, <a class="reference internal" href="../ref/settings.html#std:setting-APPEND_SLASH"><code class="xref std std-setting docutils literal notranslate"><span class="pre">APPEND_SLASH</span></code></a> won’t
work correctly with <code class="docutils literal notranslate"><span class="pre">DEBUG=False</span></code>.</li>
</ul>
</div>
</div>
<div class="section" id="s-features-deprecated-in-1-9">
<span id="s-deprecated-features-1-9"></span><span id="features-deprecated-in-1-9"></span><span id="deprecated-features-1-9"></span><h2>Fonctionnalités rendues obsolètes dans Django 1.9<a class="headerlink" href="#features-deprecated-in-1-9" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="s-assignment-tag">
<span id="assignment-tag"></span><h3><code class="docutils literal notranslate"><span class="pre">assignment_tag()</span></code><a class="headerlink" href="#assignment-tag" title="Lien permanent vers ce titre">¶</a></h3>
<p>Django 1.4 added the <code class="docutils literal notranslate"><span class="pre">assignment_tag</span></code> helper to ease the creation of
template tags that store results in a template variable. The
<a class="reference internal" href="../howto/custom-template-tags.html#django.template.Library.simple_tag" title="django.template.Library.simple_tag"><code class="xref py py-meth docutils literal notranslate"><span class="pre">simple_tag()</span></code></a> helper has gained this same
ability, making the <code class="docutils literal notranslate"><span class="pre">assignment_tag</span></code> obsolete. Tags that use
<code class="docutils literal notranslate"><span class="pre">assignment_tag</span></code> should be updated to use <code class="docutils literal notranslate"><span class="pre">simple_tag</span></code>.</p>
</div>
<div class="section" id="s-cycle-syntax-with-comma-separated-arguments">
<span id="cycle-syntax-with-comma-separated-arguments"></span><h3><code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">cycle</span> <span class="pre">%}</span></code> syntax with comma-separated arguments<a class="headerlink" href="#cycle-syntax-with-comma-separated-arguments" title="Lien permanent vers ce titre">¶</a></h3>
<p>The <a class="reference internal" href="../ref/templates/builtins.html#std:templatetag-cycle"><code class="xref std std-ttag docutils literal notranslate"><span class="pre">cycle</span></code></a> tag supports an inferior old syntax from previous Django
versions:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">cycle</span> <span class="nv">row1</span><span class="o">,</span><span class="nv">row2</span><span class="o">,</span><span class="nv">row3</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>Its parsing caused bugs with the current syntax, so support for the old syntax
will be removed in Django 1.10 following an accelerated deprecation.</p>
</div>
<div class="section" id="s-foreignkey-and-onetoonefield-on-delete-argument">
<span id="foreignkey-and-onetoonefield-on-delete-argument"></span><h3><code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code> and <code class="docutils literal notranslate"><span class="pre">OneToOneField</span></code> <code class="docutils literal notranslate"><span class="pre">on_delete</span></code> argument<a class="headerlink" href="#foreignkey-and-onetoonefield-on-delete-argument" title="Lien permanent vers ce titre">¶</a></h3>
<p>In order to increase awareness about cascading model deletion, the
<code class="docutils literal notranslate"><span class="pre">on_delete</span></code> argument of <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code> and <code class="docutils literal notranslate"><span class="pre">OneToOneField</span></code> will be required
in Django 2.0.</p>
<p>Update models and existing migrations to explicitly set the argument. Since the
default is <code class="docutils literal notranslate"><span class="pre">models.CASCADE</span></code>, add <code class="docutils literal notranslate"><span class="pre">on_delete=models.CASCADE</span></code> to all
<code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code> and <code class="docutils literal notranslate"><span class="pre">OneToOneField</span></code>s that don’t use a different option. You
can also pass it as the second positional argument if you don’t care about
compatibility with older versions of Django.</p>
</div>
<div class="section" id="s-field-rel-changes">
<span id="field-rel-changes"></span><h3><code class="docutils literal notranslate"><span class="pre">Field.rel</span></code> changes<a class="headerlink" href="#field-rel-changes" title="Lien permanent vers ce titre">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Field.rel</span></code> and its methods and attributes have changed to match the related
fields API. The <code class="docutils literal notranslate"><span class="pre">Field.rel</span></code> attribute is renamed to <code class="docutils literal notranslate"><span class="pre">remote_field</span></code> and many
of its methods and attributes are either changed or renamed.</p>
<p>The aim of these changes is to provide a documented API for relation fields.</p>
</div>
<div class="section" id="s-geomanager-and-geoqueryset-custom-methods">
<span id="geomanager-and-geoqueryset-custom-methods"></span><h3><code class="docutils literal notranslate"><span class="pre">GeoManager</span></code> and <code class="docutils literal notranslate"><span class="pre">GeoQuerySet</span></code> custom methods<a class="headerlink" href="#geomanager-and-geoqueryset-custom-methods" title="Lien permanent vers ce titre">¶</a></h3>
<p>All custom <code class="docutils literal notranslate"><span class="pre">GeoQuerySet</span></code> methods (<code class="docutils literal notranslate"><span class="pre">area()</span></code>, <code class="docutils literal notranslate"><span class="pre">distance()</span></code>, <code class="docutils literal notranslate"><span class="pre">gml()</span></code>, …)
have been replaced by equivalent geographic expressions in annotations (see in
new features). Hence the need to set a custom <code class="docutils literal notranslate"><span class="pre">GeoManager</span></code> to GIS-enabled
models is now obsolete. As soon as your code doesn’t call any of the deprecated
methods, you can simply remove the <code class="docutils literal notranslate"><span class="pre">objects</span> <span class="pre">=</span> <span class="pre">GeoManager()</span></code> lines from your
models.</p>
</div>
<div class="section" id="s-template-loader-apis-have-changed">
<span id="template-loader-apis-have-changed"></span><h3>Template loader APIs have changed<a class="headerlink" href="#template-loader-apis-have-changed" title="Lien permanent vers ce titre">¶</a></h3>
<p>Django template loaders have been updated to allow recursive template
extending. This change necessitated a new template loader API. The old
<code class="docutils literal notranslate"><span class="pre">load_template()</span></code> and <code class="docutils literal notranslate"><span class="pre">load_template_sources()</span></code> methods are now deprecated.
Details about the new API can be found <a class="reference internal" href="../ref/templates/api.html#custom-template-loaders"><span class="std std-ref">in the template loader
documentation</span></a>.</p>
</div>
<div class="section" id="s-passing-a-3-tuple-or-an-app-name-to-include">
<span id="passing-a-3-tuple-or-an-app-name-to-include"></span><h3>Passing a 3-tuple or an <code class="docutils literal notranslate"><span class="pre">app_name</span></code> to <code class="docutils literal notranslate"><span class="pre">include()</span></code><a class="headerlink" href="#passing-a-3-tuple-or-an-app-name-to-include" title="Lien permanent vers ce titre">¶</a></h3>
<p>The instance namespace part of passing a tuple as an argument to <code class="docutils literal notranslate"><span class="pre">include()</span></code>
has been replaced by passing the <code class="docutils literal notranslate"><span class="pre">namespace</span></code> argument to <code class="docutils literal notranslate"><span class="pre">include()</span></code>. For
example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">polls_patterns</span> <span class="o">=</span> <span class="p">[</span>
     <span class="n">url</span><span class="p">(</span><span class="o">...</span><span class="p">),</span>
<span class="p">]</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^polls/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">((</span><span class="n">polls_patterns</span><span class="p">,</span> <span class="s1">&#39;polls&#39;</span><span class="p">,</span> <span class="s1">&#39;author-polls&#39;</span><span class="p">))),</span>
<span class="p">]</span>
</pre></div>
</div>
<p>devient&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">polls_patterns</span> <span class="o">=</span> <span class="p">([</span>
     <span class="n">url</span><span class="p">(</span><span class="o">...</span><span class="p">),</span>
<span class="p">],</span> <span class="s1">&#39;polls&#39;</span><span class="p">)</span>  <span class="c1"># &#39;polls&#39; is the app_name</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^polls/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">polls_patterns</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;author-polls&#39;</span><span class="p">)),</span>
<span class="p">]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">app_name</span></code> argument to <code class="docutils literal notranslate"><span class="pre">include()</span></code> has been replaced by passing a
2-tuple (as above), or passing an object or module with an <code class="docutils literal notranslate"><span class="pre">app_name</span></code>
attribute (as below). If the <code class="docutils literal notranslate"><span class="pre">app_name</span></code> is set in this new way, the
<code class="docutils literal notranslate"><span class="pre">namespace</span></code> argument is no longer required. It will default to the value of
<code class="docutils literal notranslate"><span class="pre">app_name</span></code>. For example, the URL patterns in the tutorial are changed from:</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">monsite/urls.py</span><a class="headerlink" href="#id2" title="Lien permanent vers ce code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^polls/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s1">&#39;polls.urls&#39;</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="s2">&quot;polls&quot;</span><span class="p">)),</span>
    <span class="o">...</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<p>to:</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">monsite/urls.py</span><a class="headerlink" href="#id3" title="Lien permanent vers ce code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^polls/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s1">&#39;polls.urls&#39;</span><span class="p">)),</span>  <span class="c1"># &#39;namespace=&quot;polls&quot;&#39; removed</span>
    <span class="o">...</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">polls/urls.py</span><a class="headerlink" href="#id4" title="Lien permanent vers ce code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">app_name</span> <span class="o">=</span> <span class="s1">&#39;polls&#39;</span>  <span class="c1"># added</span>
<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span><span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
</div>
<p>This change also means that the old way of including an <code class="docutils literal notranslate"><span class="pre">AdminSite</span></code> instance
is deprecated. Instead, pass <code class="docutils literal notranslate"><span class="pre">admin.site.urls</span></code> directly to
<code class="docutils literal notranslate"><span class="pre">django.conf.urls.url()</span></code>:</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">urls.py</span><a class="headerlink" href="#id5" title="Lien permanent vers ce code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">url</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^admin/&#39;</span><span class="p">,</span> <span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="s-url-application-namespace-required-if-setting-an-instance-namespace">
<span id="url-application-namespace-required-if-setting-an-instance-namespace"></span><h3>URL application namespace required if setting an instance namespace<a class="headerlink" href="#url-application-namespace-required-if-setting-an-instance-namespace" title="Lien permanent vers ce titre">¶</a></h3>
<p>In the past, an instance namespace without an application namespace
would serve the same purpose as the application namespace, but it was
impossible to reverse the patterns if there was an application namespace
with the same name. Includes that specify an instance namespace require that
the included URLconf sets an application namespace.</p>
</div>
<div class="section" id="s-current-app-parameter-to-contrib-auth-views">
<span id="current-app-parameter-to-contrib-auth-views"></span><h3><code class="docutils literal notranslate"><span class="pre">current_app</span></code> parameter to <code class="docutils literal notranslate"><span class="pre">contrib.auth</span></code> views<a class="headerlink" href="#current-app-parameter-to-contrib-auth-views" title="Lien permanent vers ce titre">¶</a></h3>
<p>All views in <code class="docutils literal notranslate"><span class="pre">django.contrib.auth.views</span></code> have the following structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">view</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">current_app</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">...</span><span class="p">):</span>

    <span class="o">...</span>

    <span class="k">if</span> <span class="n">current_app</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">request</span><span class="o">.</span><span class="n">current_app</span> <span class="o">=</span> <span class="n">current_app</span>

    <span class="k">return</span> <span class="n">TemplateResponse</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">template_name</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
</pre></div>
</div>
<p>As of Django 1.8, <code class="docutils literal notranslate"><span class="pre">current_app</span></code> is set on the <code class="docutils literal notranslate"><span class="pre">request</span></code> object. For
consistency, these views will require the caller to set <code class="docutils literal notranslate"><span class="pre">current_app</span></code> on the
<code class="docutils literal notranslate"><span class="pre">request</span></code> instead of passing it in a separate argument.</p>
</div>
<div class="section" id="s-django-contrib-gis-geoip">
<span id="django-contrib-gis-geoip"></span><h3><code class="docutils literal notranslate"><span class="pre">django.contrib.gis.geoip</span></code><a class="headerlink" href="#django-contrib-gis-geoip" title="Lien permanent vers ce titre">¶</a></h3>
<p>The <a class="reference internal" href="../ref/contrib/gis/geoip2.html#module-django.contrib.gis.geoip2" title="django.contrib.gis.geoip2: Python interface for MaxMind's GeoIP2 databases."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.gis.geoip2</span></code></a> module supersedes
<code class="docutils literal notranslate"><span class="pre">django.contrib.gis.geoip</span></code>. The new module provides a similar API except that
it doesn’t provide the legacy GeoIP-Python API compatibility methods.</p>
</div>
<div class="section" id="s-id1">
<span id="id1"></span><h3>Divers<a class="headerlink" href="#id1" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">weak</span></code> argument to <code class="docutils literal notranslate"><span class="pre">django.dispatch.signals.Signal.disconnect()</span></code> has
been deprecated as it has no effect.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">check_aggregate_support()</span></code> method of
<code class="docutils literal notranslate"><span class="pre">django.db.backends.base.BaseDatabaseOperations</span></code> has been deprecated and
will be removed in Django 2.0. The more general <code class="docutils literal notranslate"><span class="pre">check_expression_support()</span></code>
should be used instead.</li>
<li><code class="docutils literal notranslate"><span class="pre">django.forms.extras</span></code> is deprecated. You can find
<a class="reference internal" href="../ref/forms/widgets.html#django.forms.SelectDateWidget" title="django.forms.SelectDateWidget"><code class="xref py py-class docutils literal notranslate"><span class="pre">SelectDateWidget</span></code></a> in <code class="docutils literal notranslate"><span class="pre">django.forms.widgets</span></code>
(or simply <code class="docutils literal notranslate"><span class="pre">django.forms</span></code>) instead.</li>
<li>Private API <code class="docutils literal notranslate"><span class="pre">django.db.models.fields.add_lazy_relation()</span></code> is deprecated.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">django.contrib.auth.tests.utils.skipIfCustomUser()</span></code> decorator is
deprecated. With the test discovery changes in Django 1.6, the tests for
<code class="docutils literal notranslate"><span class="pre">django.contrib</span></code> apps are no longer run as part of the user’s project.
Therefore, the <code class="docutils literal notranslate"><span class="pre">&#64;skipIfCustomUser</span></code> decorator is no longer needed to
decorate tests in <code class="docutils literal notranslate"><span class="pre">django.contrib.auth</span></code>.</li>
<li>If you customized some <a class="reference internal" href="../ref/views.html#error-views"><span class="std std-ref">error handlers</span></a>, the view
signatures with only one request parameter are deprecated. The views should
now also accept a second <code class="docutils literal notranslate"><span class="pre">exception</span></code> positional parameter.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">django.utils.feedgenerator.Atom1Feed.mime_type</span></code> and
<code class="docutils literal notranslate"><span class="pre">django.utils.feedgenerator.RssFeed.mime_type</span></code> attributes are deprecated in
favor of <code class="docutils literal notranslate"><span class="pre">content_type</span></code>.</li>
<li><a class="reference internal" href="../topics/signing.html#django.core.signing.Signer" title="django.core.signing.Signer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Signer</span></code></a> now issues a warning if an invalid
separator is used. This will become an exception in Django 1.10.</li>
<li><code class="docutils literal notranslate"><span class="pre">django.db.models.Field._get_val_from_obj()</span></code> is deprecated in favor of
<code class="docutils literal notranslate"><span class="pre">Field.value_from_object()</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">django.template.loaders.eggs.Loader</span></code> is deprecated as distributing
applications as eggs is not recommended.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">callable_obj</span></code> keyword argument to
<code class="docutils literal notranslate"><span class="pre">SimpleTestCase.assertRaisesMessage()</span></code> is deprecated. Pass the callable as
a positional argument instead.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">allow_tags</span></code> attribute on methods of <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code> has been
deprecated. Use <a class="reference internal" href="../ref/utils.html#django.utils.html.format_html" title="django.utils.html.format_html"><code class="xref py py-func docutils literal notranslate"><span class="pre">format_html()</span></code></a>,
<a class="reference internal" href="../ref/utils.html#django.utils.html.format_html_join" title="django.utils.html.format_html_join"><code class="xref py py-func docutils literal notranslate"><span class="pre">format_html_join()</span></code></a>, or
<a class="reference internal" href="../ref/utils.html#django.utils.safestring.mark_safe" title="django.utils.safestring.mark_safe"><code class="xref py py-func docutils literal notranslate"><span class="pre">mark_safe()</span></code></a> when constructing the method’s
return value instead.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">enclosure</span></code> keyword argument to <code class="docutils literal notranslate"><span class="pre">SyndicationFeed.add_item()</span></code> is
deprecated. Use the new <code class="docutils literal notranslate"><span class="pre">enclosures</span></code> argument which accepts a list of
<code class="docutils literal notranslate"><span class="pre">Enclosure</span></code> objects instead of a single one.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">django.template.loader.LoaderOrigin</span></code> and
<code class="docutils literal notranslate"><span class="pre">django.template.base.StringOrigin</span></code> aliases for
<code class="docutils literal notranslate"><span class="pre">django.template.base.Origin</span></code> are deprecated.</li>
</ul>
</div>
</div>
<div class="section" id="s-features-removed-in-1-9">
<span id="s-removed-features-1-9"></span><span id="features-removed-in-1-9"></span><span id="removed-features-1-9"></span><h2>Features removed in 1.9<a class="headerlink" href="#features-removed-in-1-9" title="Lien permanent vers ce titre">¶</a></h2>
<p>These features have reached the end of their deprecation cycle and are removed
in Django 1.9. See <a class="reference internal" href="1.7.html#deprecated-features-1-7"><span class="std std-ref">Fonctionnalités déconseillées dans 1.7</span></a> for details, including how to
remove usage of these features.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">django.utils.dictconfig</span></code> is removed.</li>
<li><code class="docutils literal notranslate"><span class="pre">django.utils.importlib</span></code> is removed.</li>
<li><code class="docutils literal notranslate"><span class="pre">django.utils.tzinfo</span></code> is removed.</li>
<li><code class="docutils literal notranslate"><span class="pre">django.utils.unittest</span></code> is removed.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">syncdb</span></code> command is removed.</li>
<li><code class="docutils literal notranslate"><span class="pre">django.db.models.signals.pre_syncdb</span></code> and
<code class="docutils literal notranslate"><span class="pre">django.db.models.signals.post_syncdb</span></code> is removed.</li>
<li>Support for <code class="docutils literal notranslate"><span class="pre">allow_syncdb</span></code> on database routers is removed.</li>
<li>Automatic syncing of apps without migrations is removed. Migrations are
compulsory for all apps unless you pass the <a class="reference internal" href="../ref/django-admin.html#cmdoption-migrate-run-syncdb"><code class="xref std std-option docutils literal notranslate"><span class="pre">migrate</span> <span class="pre">--run-syncdb</span></code></a>
option.</li>
<li>The SQL management commands for apps without migrations, <code class="docutils literal notranslate"><span class="pre">sql</span></code>, <code class="docutils literal notranslate"><span class="pre">sqlall</span></code>,
<code class="docutils literal notranslate"><span class="pre">sqlclear</span></code>, <code class="docutils literal notranslate"><span class="pre">sqldropindexes</span></code>, and <code class="docutils literal notranslate"><span class="pre">sqlindexes</span></code>, are removed.</li>
<li>Support for automatic loading of <code class="docutils literal notranslate"><span class="pre">initial_data</span></code> fixtures and initial SQL
data is removed.</li>
<li>All models need to be defined inside an installed application or declare an
explicit <a class="reference internal" href="../ref/models/options.html#django.db.models.Options.app_label" title="django.db.models.Options.app_label"><code class="xref py py-attr docutils literal notranslate"><span class="pre">app_label</span></code></a>. Furthermore, it isn’t
possible to import them before their application is loaded. In particular, it
isn’t possible to import models inside the root package of an application.</li>
<li>The model and form <code class="docutils literal notranslate"><span class="pre">IPAddressField</span></code> is removed. A stub field remains for
compatibility with historical migrations.</li>
<li><code class="docutils literal notranslate"><span class="pre">AppCommand.handle_app()</span></code> is no longer supported.</li>
<li><code class="docutils literal notranslate"><span class="pre">RequestSite</span></code> and <code class="docutils literal notranslate"><span class="pre">get_current_site()</span></code> are no longer importable from
<code class="docutils literal notranslate"><span class="pre">django.contrib.sites.models</span></code>.</li>
<li>FastCGI support via the <code class="docutils literal notranslate"><span class="pre">runfcgi</span></code> management command is removed.</li>
<li><code class="docutils literal notranslate"><span class="pre">django.utils.datastructures.SortedDict</span></code> is removed.</li>
<li><code class="docutils literal notranslate"><span class="pre">ModelAdmin.declared_fieldsets</span></code> is removed.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">util</span></code> modules that provided backwards compatibility are removed:<ul>
<li><code class="docutils literal notranslate"><span class="pre">django.contrib.admin.util</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">django.contrib.gis.db.backends.util</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">django.db.backends.util</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">django.forms.util</span></code></li>
</ul>
</li>
<li><code class="docutils literal notranslate"><span class="pre">ModelAdmin.get_formsets</span></code> is removed.</li>
<li>The backward compatible shims introduced to rename the
<code class="docutils literal notranslate"><span class="pre">BaseMemcachedCache._get_memcache_timeout()</span></code> method to
<code class="docutils literal notranslate"><span class="pre">get_backend_timeout()</span></code> is removed.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">--natural</span></code> and <code class="docutils literal notranslate"><span class="pre">-n</span></code> options for <a class="reference internal" href="../ref/django-admin.html#django-admin-dumpdata"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">dumpdata</span></code></a> are removed.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">use_natural_keys</span></code> argument for <code class="docutils literal notranslate"><span class="pre">serializers.serialize()</span></code> is removed.</li>
<li>Private API <code class="docutils literal notranslate"><span class="pre">django.forms.forms.get_declared_fields()</span></code> is removed.</li>
<li>The ability to use a <code class="docutils literal notranslate"><span class="pre">SplitDateTimeWidget</span></code> with <code class="docutils literal notranslate"><span class="pre">DateTimeField</span></code> is
removed.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">WSGIRequest.REQUEST</span></code> property is removed.</li>
<li>The class <code class="docutils literal notranslate"><span class="pre">django.utils.datastructures.MergeDict</span></code> is removed.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">zh-cn</span></code> and <code class="docutils literal notranslate"><span class="pre">zh-tw</span></code> language codes are removed.</li>
<li>The internal <code class="docutils literal notranslate"><span class="pre">django.utils.functional.memoize()</span></code> is removed.</li>
<li><code class="docutils literal notranslate"><span class="pre">django.core.cache.get_cache</span></code> is removed.</li>
<li><code class="docutils literal notranslate"><span class="pre">django.db.models.loading</span></code> a été supprimé.</li>
<li>Passing callable arguments to querysets is no longer possible.</li>
<li><code class="docutils literal notranslate"><span class="pre">BaseCommand.requires_model_validation</span></code> is removed in favor of
<code class="docutils literal notranslate"><span class="pre">requires_system_checks</span></code>. Admin validators is replaced by admin checks.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">ModelAdmin.validator_class</span></code> and <code class="docutils literal notranslate"><span class="pre">default_validator_class</span></code> attributes
are removed.</li>
<li><code class="docutils literal notranslate"><span class="pre">ModelAdmin.validate()</span></code> is removed.</li>
<li><code class="docutils literal notranslate"><span class="pre">django.db.backends.DatabaseValidation.validate_field</span></code> is removed in
favor of the <code class="docutils literal notranslate"><span class="pre">check_field</span></code> method.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">validate</span></code> management command is removed.</li>
<li><code class="docutils literal notranslate"><span class="pre">django.utils.module_loading.import_by_path</span></code> is removed in favor of
<code class="docutils literal notranslate"><span class="pre">django.utils.module_loading.import_string</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">ssi</span></code> and <code class="docutils literal notranslate"><span class="pre">url</span></code> template tags are removed from the <code class="docutils literal notranslate"><span class="pre">future</span></code> template
tag library.</li>
<li><code class="docutils literal notranslate"><span class="pre">django.utils.text.javascript_quote()</span></code> is removed.</li>
<li>Database test settings as independent entries in the database settings,
prefixed by <code class="docutils literal notranslate"><span class="pre">TEST_</span></code>, are no longer supported.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">cache_choices</span></code> option to <a class="reference internal" href="../ref/forms/fields.html#django.forms.ModelChoiceField" title="django.forms.ModelChoiceField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelChoiceField</span></code></a> and
<a class="reference internal" href="../ref/forms/fields.html#django.forms.ModelMultipleChoiceField" title="django.forms.ModelMultipleChoiceField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelMultipleChoiceField</span></code></a> is removed.</li>
<li>The default value of the
<a class="reference internal" href="../ref/class-based-views/base.html#django.views.generic.base.RedirectView.permanent" title="django.views.generic.base.RedirectView.permanent"><code class="xref py py-attr docutils literal notranslate"><span class="pre">RedirectView.permanent</span></code></a>
attribute has changed from <code class="docutils literal notranslate"><span class="pre">True</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">django.contrib.sitemaps.FlatPageSitemap</span></code> is removed in favor of
<code class="docutils literal notranslate"><span class="pre">django.contrib.flatpages.sitemaps.FlatPageSitemap</span></code>.</li>
<li>L’API privée <code class="docutils literal notranslate"><span class="pre">django.test.utils.TestTemplateLoader</span></code> a été supprimée.</li>
<li>Le module <code class="docutils literal notranslate"><span class="pre">django.contrib.contenttypes.generic</span></code> a été supprimé.</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Notes de publication de Django 1.9</a><ul>
<li><a class="reference internal" href="#python-compatibility">Compatibilité Python</a></li>
<li><a class="reference internal" href="#what-s-new-in-django-1-9">Quoi de neuf dans Django 1.9</a><ul>
<li><a class="reference internal" href="#performing-actions-after-a-transaction-commit">Lancement d’actions après le commit d’une transaction</a></li>
<li><a class="reference internal" href="#password-validation">Validation des mots de passe</a></li>
<li><a class="reference internal" href="#permission-mixins-for-class-based-views">Classes mixins de permissions dans les vues fondées sur les classes</a></li>
<li><a class="reference internal" href="#new-styling-for-contrib-admin">Nouveau style pour <code class="docutils literal notranslate"><span class="pre">contrib.admin</span></code></a></li>
<li><a class="reference internal" href="#running-tests-in-parallel">Lancement des tests en parallèle</a></li>
<li><a class="reference internal" href="#minor-features">Fonctionnalités mineures</a><ul>
<li><a class="reference internal" href="#django-contrib-admin"><code class="docutils literal notranslate"><span class="pre">django.contrib.admin</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-admindocs"><code class="docutils literal notranslate"><span class="pre">django.contrib.admindocs</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-auth"><code class="docutils literal notranslate"><span class="pre">django.contrib.auth</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-contenttypes"><code class="docutils literal notranslate"><span class="pre">django.contrib.contenttypes</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-gis"><code class="docutils literal notranslate"><span class="pre">django.contrib.gis</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-postgres"><code class="docutils literal notranslate"><span class="pre">django.contrib.postgres</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-sessions"><code class="docutils literal notranslate"><span class="pre">django.contrib.sessions</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-sites"><code class="docutils literal notranslate"><span class="pre">django.contrib.sites</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-syndication"><code class="docutils literal notranslate"><span class="pre">django.contrib.syndication</span></code></a></li>
<li><a class="reference internal" href="#cache">Cache</a></li>
<li><a class="reference internal" href="#csrf">CSRF</a></li>
<li><a class="reference internal" href="#database-backends">Moteurs de base de données</a></li>
<li><a class="reference internal" href="#file-storage">Stockage de fichier</a></li>
<li><a class="reference internal" href="#forms">Formulaires</a></li>
<li><a class="reference internal" href="#generic-views">Vues génériques</a></li>
<li><a class="reference internal" href="#internationalization">Internationalisation</a></li>
<li><a class="reference internal" href="#management-commands">Commandes d’administration</a></li>
<li><a class="reference internal" href="#migrations">Migrations</a></li>
<li><a class="reference internal" href="#models">Modèles</a></li>
<li><a class="reference internal" href="#requests-and-responses">Requêtes et réponses</a></li>
<li><a class="reference internal" href="#templates">Gabarits</a></li>
<li><a class="reference internal" href="#tests">Tests</a></li>
<li><a class="reference internal" href="#urls">URL</a></li>
<li><a class="reference internal" href="#validators">Validateurs</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#backwards-incompatible-changes-in-1-9">Changements incompatibles avec les anciennes versions dans Django 1.9</a><ul>
<li><a class="reference internal" href="#database-backend-api">API de moteur de base de données</a></li>
<li><a class="reference internal" href="#default-settings-that-were-tuples-are-now-lists">Les réglages par défaut qui étaient des tuples sont maintenant des listes</a></li>
<li><a class="reference internal" href="#is-usable-attribute-on-template-loaders-is-removed">L’attribut <code class="docutils literal notranslate"><span class="pre">is_usable</span></code> des chargeurs de gabarit a été supprimé</a></li>
<li><a class="reference internal" href="#related-set-direct-assignment">Attribution directe d’un ensemble d’objets liés</a></li>
<li><a class="reference internal" href="#filesystem-based-template-loaders-catch-more-specific-exceptions">Les chargeurs de gabarits basés sur le système de fichiers interceptent plus précisément les exceptions</a></li>
<li><a class="reference internal" href="#http-redirects-no-longer-forced-to-absolute-uris">Les redirections HTTP ne doivent plus forcément être des URI absolues</a></li>
<li><a class="reference internal" href="#dropped-support-for-postgresql-9-0">Abandon de la prise en charge de PostgreSQL 9.0</a></li>
<li><a class="reference internal" href="#dropped-support-for-oracle-11-1">Abandon de la prise en charge de Oracle 11.1</a></li>
<li><a class="reference internal" href="#bulk-behavior-of-add-method-of-related-managers">Comportement d’ajout en bloc de la méthode <code class="docutils literal notranslate"><span class="pre">add()</span></code> des gestionnaires de relation</a></li>
<li><a class="reference internal" href="#template-loaderorigin-and-stringorigin-are-removed">Suppression de <code class="docutils literal notranslate"><span class="pre">LoaderOrigin</span></code> et <code class="docutils literal notranslate"><span class="pre">StringOrigin</span></code> des gabarits</a></li>
<li><a class="reference internal" href="#changes-to-the-default-logging-configuration">Changements de la configuration de journalisation par défaut</a></li>
<li><a class="reference internal" href="#httprequest-details-in-error-reporting">Détails <code class="docutils literal notranslate"><span class="pre">HttpRequest</span></code> dans les rapports d’erreur</a></li>
<li><a class="reference internal" href="#removal-of-time-zone-aware-global-adapters-and-converters-for-datetimes">Suppression des adaptateurs et convertisseurs globaux de fuseau horaire pour les objets date/heure</a></li>
<li><a class="reference internal" href="#template-tag-modules-are-imported-when-templates-are-configured">Les modules de balises de gabarit sont importés au moment où les gabarits sont configurés</a></li>
<li><a class="reference internal" href="#django-template-base-add-to-builtins-is-removed">Suppression de <code class="docutils literal notranslate"><span class="pre">django.template.base.add_to_builtins()</span></code></a></li>
<li><a class="reference internal" href="#simple-tag-now-wraps-tag-output-in-conditional-escape">Le résultat de <code class="docutils literal notranslate"><span class="pre">simple_tag</span></code> passe maintenant toujours par <code class="docutils literal notranslate"><span class="pre">conditional_escape</span></code></a></li>
<li><a class="reference internal" href="#paginator-page-range"><code class="docutils literal notranslate"><span class="pre">Paginator.page_range</span></code></a></li>
<li><a class="reference internal" href="#implicit-queryset-in-lookup-removed">Interrogation implicite <code class="docutils literal notranslate"><span class="pre">__in</span></code> des <code class="docutils literal notranslate"><span class="pre">QuerySet</span></code> supprimée</a></li>
<li><a class="reference internal" href="#contrib-admin-browser-support">Navigateurs pris en charge par <code class="docutils literal notranslate"><span class="pre">contrib.admin</span></code></a></li>
<li><a class="reference internal" href="#syntaxerror-when-installing-django-setuptools-5-5-x"><code class="docutils literal notranslate"><span class="pre">SyntaxError</span></code> when installing Django setuptools 5.5.x</a></li>
<li><a class="reference internal" href="#miscellaneous">Divers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#features-deprecated-in-1-9">Fonctionnalités rendues obsolètes dans Django 1.9</a><ul>
<li><a class="reference internal" href="#assignment-tag"><code class="docutils literal notranslate"><span class="pre">assignment_tag()</span></code></a></li>
<li><a class="reference internal" href="#cycle-syntax-with-comma-separated-arguments"><code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">cycle</span> <span class="pre">%}</span></code> syntax with comma-separated arguments</a></li>
<li><a class="reference internal" href="#foreignkey-and-onetoonefield-on-delete-argument"><code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code> and <code class="docutils literal notranslate"><span class="pre">OneToOneField</span></code> <code class="docutils literal notranslate"><span class="pre">on_delete</span></code> argument</a></li>
<li><a class="reference internal" href="#field-rel-changes"><code class="docutils literal notranslate"><span class="pre">Field.rel</span></code> changes</a></li>
<li><a class="reference internal" href="#geomanager-and-geoqueryset-custom-methods"><code class="docutils literal notranslate"><span class="pre">GeoManager</span></code> and <code class="docutils literal notranslate"><span class="pre">GeoQuerySet</span></code> custom methods</a></li>
<li><a class="reference internal" href="#template-loader-apis-have-changed">Template loader APIs have changed</a></li>
<li><a class="reference internal" href="#passing-a-3-tuple-or-an-app-name-to-include">Passing a 3-tuple or an <code class="docutils literal notranslate"><span class="pre">app_name</span></code> to <code class="docutils literal notranslate"><span class="pre">include()</span></code></a></li>
<li><a class="reference internal" href="#url-application-namespace-required-if-setting-an-instance-namespace">URL application namespace required if setting an instance namespace</a></li>
<li><a class="reference internal" href="#current-app-parameter-to-contrib-auth-views"><code class="docutils literal notranslate"><span class="pre">current_app</span></code> parameter to <code class="docutils literal notranslate"><span class="pre">contrib.auth</span></code> views</a></li>
<li><a class="reference internal" href="#django-contrib-gis-geoip"><code class="docutils literal notranslate"><span class="pre">django.contrib.gis.geoip</span></code></a></li>
<li><a class="reference internal" href="#id1">Divers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#features-removed-in-1-9">Features removed in 1.9</a></li>
</ul>
</li>
</ul>

  <h4>Sujet précédent</h4>
  <p class="topless"><a href="1.9.1.html"
                        title="Chapitre précédent">Notes de publication de Django 1.9.1</a></p>
  <h4>Sujet suivant</h4>
  <p class="topless"><a href="1.8.19.html"
                        title="Chapitre suivant">Notes de publication de Django 1.8.19</a></p>
  <div role="note" aria-label="source link">
    <h3>Cette page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/releases/1.9.txt"
            rel="nofollow">Montrer le code source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Recherche rapide</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
              <h3>Last update:</h3>
              <p class="topless">oct. 29, 2020</p>
          </div>
        
      
    </div>

    <div id="ft">
      <div class="nav">
    &laquo; <a href="1.9.1.html" title="Notes de publication de Django 1.9.1">previous</a>
     |
    <a href="index.html" title="Notes de publication" accesskey="U">up</a>
   |
    <a href="1.8.19.html" title="Notes de publication de Django 1.8.19">next</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>