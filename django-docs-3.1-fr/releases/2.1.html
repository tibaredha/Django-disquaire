
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Notes de publication de Django 2.1 &#8212; Documentation Django 3.1.3.dev</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="next" title="Notes de publication de Django 2.0.13" href="2.0.13.html" />
    <link rel="prev" title="Notes de publication de Django 2.1.1" href="2.1.1.html" />



 
<script src="../templatebuiltins.js"></script>
<script>
(function($) {
    if (!django_template_builtins) {
       // templatebuiltins.js missing, do nothing.
       return;
    }
    $(document).ready(function() {
        // Hyperlink Django template tags and filters
        var base = "../ref/templates/builtins.html";
        if (base == "#") {
            // Special case for builtins.html itself
            base = "";
        }
        // Tags are keywords, class '.k'
        $("div.highlight\\-html\\+django span.k").each(function(i, elem) {
             var tagname = $(elem).text();
             if ($.inArray(tagname, django_template_builtins.ttags) != -1) {
                 var fragment = tagname.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + tagname + "</a>");
             }
        });
        // Filters are functions, class '.nf'
        $("div.highlight\\-html\\+django span.nf").each(function(i, elem) {
             var filtername = $(elem).text();
             if ($.inArray(filtername, django_template_builtins.tfilters) != -1) {
                 var fragment = filtername.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + filtername + "</a>");
             }
        });
    });
})(jQuery);</script>

  </head><body>

    <div class="document">
  <div id="custom-doc" class="yui-t6">
    <div id="hd">
      <h1><a href="../index.html">Documentation Django 3.1.3.dev</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../index.html">Home</a>  |
        <a title="Table of contents" href="../contents.html">Table of contents</a>  |
        <a title="Global index" href="../genindex.html">Index</a>  |
        <a title="Module index" href="../py-modindex.html">Modules</a>
      </div>
      <div class="nav">
    &laquo; <a href="2.1.1.html" title="Notes de publication de Django 2.1.1">previous</a>
     |
    <a href="index.html" title="Notes de publication" accesskey="U">up</a>
   |
    <a href="2.0.13.html" title="Notes de publication de Django 2.0.13">next</a> &raquo;</div>
    </div>

    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="releases-2.1">
            
  <div class="section" id="s-django-2-1-release-notes">
<span id="django-2-1-release-notes"></span><h1>Notes de publication de Django 2.1<a class="headerlink" href="#django-2-1-release-notes" title="Lien permanent vers ce titre">¶</a></h1>
<p><em>1er août 2018</em></p>
<p>Bienvenue dans Django 2.1 &nbsp;!</p>
<p>Ces notes de publications couvrent les <a class="reference internal" href="#whats-new-2-1"><span class="std std-ref">nouvelles fonctionnalités</span></a>, ainsi que certaines <a class="reference internal" href="#backwards-incompatible-2-1"><span class="std std-ref">modifications non rétro-compatibles</span></a> dont il faut être au courant lors la mise à jour depuis Django 2.0 ou des versions plus anciennes. Nous avons <a class="reference internal" href="#removed-features-2-1"><span class="std std-ref">abandonné certaines fonctionnalités</span></a> qui ont atteint la fin de leur cycle d’obsolescence et nous avons commencé <a class="reference internal" href="#deprecated-features-2-1"><span class="std std-ref">le processus d’obsolescence de certaines fonctionnalités</span></a>.</p>
<p>Voir le guide <a class="reference internal" href="../howto/upgrade-version.html"><span class="doc">Mise à jour de Django à une version plus récente</span></a> si vous mettez à jour un projet existant.</p>
<div class="section" id="s-python-compatibility">
<span id="python-compatibility"></span><h2>Compatibilité Python<a class="headerlink" href="#python-compatibility" title="Lien permanent vers ce titre">¶</a></h2>
<p>Django 2.1 requiert Python 3.5, 3.6 ou 3.7. Django 2.0 est la dernière version à prendre en charge Python 3.4. Nous <strong>recommandons vivement</strong> et nous ne prenons officiellement en charge que la dernière publication de chaque série.</p>
</div>
<div class="section" id="s-what-s-new-in-django-2-1">
<span id="s-whats-new-2-1"></span><span id="what-s-new-in-django-2-1"></span><span id="whats-new-2-1"></span><h2>Quoi de neuf dans Django 2.1<a class="headerlink" href="#what-s-new-in-django-2-1" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="s-model-view-permission">
<span id="model-view-permission"></span><h3>La permission d’affichage (<code class="docutils literal notranslate"><span class="pre">view</span></code>) des modèles<a class="headerlink" href="#model-view-permission" title="Lien permanent vers ce titre">¶</a></h3>
<p>Une permission d’affichage (<code class="docutils literal notranslate"><span class="pre">view</span></code>) a été ajoutée aux permissions <a class="reference internal" href="../ref/models/options.html#django.db.models.Options.default_permissions" title="django.db.models.Options.default_permissions"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Meta.default_permissions</span></code></a> des modèles. Les nouvelles permissions seront automatiquement créées lors du lancement de <a class="reference internal" href="../ref/django-admin.html#django-admin-migrate"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">migrate</span></code></a>.</p>
<p>Cela permet de donner un accès en lecture seule aux modèles dans l’interface d’administration. <a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin.has_view_permission" title="django.contrib.admin.ModelAdmin.has_view_permission"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ModelAdmin.has_view_permission()</span></code></a> est une nouvelle méthode. L’implémentation est rétrocompatible dans la mesure où il n’est pas nécessaire d’attribuer la permission <code class="docutils literal notranslate"><span class="pre">view</span></code> pour permettre aux utilisateurs qui ont la permission de modification de modifier des objets.</p>
<p>Il existe cependant un certain nombre de <a class="reference internal" href="#view-permission-backwards-incompatible"><span class="std std-ref">considérations sur la rétrocompatibilité</span></a>.</p>
</div>
<div class="section" id="s-minor-features">
<span id="minor-features"></span><h3>Fonctionnalités mineures<a class="headerlink" href="#minor-features" title="Lien permanent vers ce titre">¶</a></h3>
<div class="section" id="s-django-contrib-admin">
<span id="django-contrib-admin"></span><h4><a class="reference internal" href="../ref/contrib/admin/index.html#module-django.contrib.admin" title="django.contrib.admin: Django's admin site."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.admin</span></code></a><a class="headerlink" href="#django-contrib-admin" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin.search_fields" title="django.contrib.admin.ModelAdmin.search_fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ModelAdmin.search_fields</span></code></a> accepte dorénavant des expressions de requête du type <code class="docutils literal notranslate"><span class="pre">champ__exact</span></code>.</li>
<li>La version intégrée de jQuery a été mise à jour de 2.2.3 vers 3.3.1.</li>
<li>La nouvelle méthode <a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin.delete_queryset" title="django.contrib.admin.ModelAdmin.delete_queryset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ModelAdmin.delete_queryset()</span></code></a> permet la personnalisation du processus de suppression de l’action « Supprimer les objets sélectionnés ».</li>
<li>Il est dorénavant possible de <a class="reference internal" href="../ref/contrib/admin/index.html#overriding-default-admin-site"><span class="std std-ref">personnaliser le site d’administration par défaut</span></a>.</li>
<li>Le nouvel attribut <a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin.sortable_by" title="django.contrib.admin.ModelAdmin.sortable_by"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ModelAdmin.sortable_by</span></code></a> et la méthode <a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin.get_sortable_by" title="django.contrib.admin.ModelAdmin.get_sortable_by"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ModelAdmin.get_sortable_by()</span></code></a> permettent de restreindre les colonnes qui peuvent servir de tri sur la page de liste pour modification.</li>
<li>L’attribut <code class="docutils literal notranslate"><span class="pre">admin_order_field</span></code> des éléments dans <a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin.list_display" title="django.contrib.admin.ModelAdmin.list_display"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ModelAdmin.list_display</span></code></a> peut être une expression de requête.</li>
<li>La nouvelle méthode <a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin.get_deleted_objects" title="django.contrib.admin.ModelAdmin.get_deleted_objects"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ModelAdmin.get_deleted_objects()</span></code></a> permet de personnaliser le processus de suppression de la vue de suppression et de l’action « supprimer la sélection ».</li>
<li>Les gabarits <code class="docutils literal notranslate"><span class="pre">actions.html</span></code>, <code class="docutils literal notranslate"><span class="pre">change_list_results.html</span></code>, <code class="docutils literal notranslate"><span class="pre">date_hierarchy.html</span></code>, <code class="docutils literal notranslate"><span class="pre">pagination.html</span></code>, <code class="docutils literal notranslate"><span class="pre">prepopulated_fields_js.html</span></code>, <code class="docutils literal notranslate"><span class="pre">search_form.html</span></code> et  <code class="docutils literal notranslate"><span class="pre">submit_line.html</span></code> peuvent dorénavant être <a class="reference internal" href="../ref/contrib/admin/index.html#admin-templates-overridden-per-app-or-model"><span class="std std-ref">surchargés par application ou par modèle</span></a> (en plus de la surcharge globale).</li>
<li>La liste pour modification et les outils de formulaire de modification d’objet du site d’administration peuvent dorénavant être <a class="reference internal" href="../ref/contrib/admin/index.html#admin-templates-overridden-per-app-or-model"><span class="std std-ref">surchargés par application, par modèle ou globalement</span></a> avec les gabarits <code class="docutils literal notranslate"><span class="pre">change_list_object_tools.html</span></code> and <code class="docutils literal notranslate"><span class="pre">change_form_object_tools.html</span></code>.</li>
<li><a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.InlineModelAdmin.has_add_permission" title="django.contrib.admin.InlineModelAdmin.has_add_permission"><code class="xref py py-meth docutils literal notranslate"><span class="pre">InlineModelAdmin.has_add_permission()</span></code></a> reçoit dorénavant l’objet parent comme second paramètre positionnel, <code class="docutils literal notranslate"><span class="pre">obj</span></code>.</li>
<li>Les actions d’administration peuvent dorénavant <a class="reference internal" href="../ref/contrib/admin/actions.html#admin-action-permissions"><span class="std std-ref">indiquer des permissions</span></a> pour limiter leur disponibilité à certains utilisateurs.</li>
</ul>
</div>
<div class="section" id="s-django-contrib-auth">
<span id="django-contrib-auth"></span><h4><a class="reference internal" href="../topics/auth/index.html#module-django.contrib.auth" title="django.contrib.auth: Django's authentication framework."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.auth</span></code></a><a class="headerlink" href="#django-contrib-auth" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="../ref/django-admin.html#django-admin-createsuperuser"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">createsuperuser</span></code></a> offre maintenant la possibilité de passer outre les contrôles de validation de mot de passe <a class="reference internal" href="../ref/settings.html#std:setting-AUTH_PASSWORD_VALIDATORS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">AUTH_PASSWORD_VALIDATORS</span></code></a>.</li>
</ul>
</div>
<div class="section" id="s-django-contrib-gis">
<span id="django-contrib-gis"></span><h4><a class="reference internal" href="../ref/contrib/gis/index.html#module-django.contrib.gis" title="django.contrib.gis: Geographic Information System (GIS) extensions for Django"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.gis</span></code></a><a class="headerlink" href="#django-contrib-gis" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>La nouvelle méthode <a class="reference internal" href="../ref/contrib/gis/geos.html#django.contrib.gis.geos.GEOSGeometry.buffer_with_style" title="django.contrib.gis.geos.GEOSGeometry.buffer_with_style"><code class="xref py py-meth docutils literal notranslate"><span class="pre">GEOSGeometry.buffer_with_style()</span></code></a> est une version de <a class="reference internal" href="../ref/contrib/gis/geos.html#django.contrib.gis.geos.GEOSGeometry.buffer" title="django.contrib.gis.geos.GEOSGeometry.buffer"><code class="xref py py-meth docutils literal notranslate"><span class="pre">buffer()</span></code></a> qui permet de personnaliser le style du tampon.</li>
<li><a class="reference internal" href="../ref/contrib/gis/forms-api.html#django.contrib.gis.forms.widgets.OpenLayersWidget" title="django.contrib.gis.forms.widgets.OpenLayersWidget"><code class="xref py py-class docutils literal notranslate"><span class="pre">OpenLayersWidget</span></code></a> est maintenant basé sur OpenLayers 4.6.5 (précédemment 3.20.1).</li>
</ul>
</div>
<div class="section" id="s-django-contrib-sessions">
<span id="django-contrib-sessions"></span><h4><a class="reference internal" href="../topics/http/sessions.html#module-django.contrib.sessions" title="django.contrib.sessions: Provides session management for Django projects."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.sessions</span></code></a><a class="headerlink" href="#django-contrib-sessions" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Le réglage <a class="reference internal" href="../ref/settings.html#std:setting-SESSION_COOKIE_SAMESITE"><code class="xref std std-setting docutils literal notranslate"><span class="pre">SESSION_COOKIE_SAMESITE</span></code></a> a été ajouté pour définir l’option de cookie <code class="docutils literal notranslate"><span class="pre">SameSite</span></code> pour les cookies de session.</li>
</ul>
</div>
<div class="section" id="s-cache">
<span id="cache"></span><h4>Cache<a class="headerlink" href="#cache" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Le <a class="reference internal" href="../topics/cache.html#local-memory-caching"><span class="std std-ref">moteur de cache en mémoire locale</span></a> utilise dorénavant un algorithme de purge LRU (en fonction de la date d’utilisation) plutôt qu’un algorithme pseudo-aléatoire.</li>
<li>The new <a class="reference internal" href="../topics/cache.html#django.core.caches.cache.touch" title="django.core.caches.cache.touch"><code class="xref py py-meth docutils literal notranslate"><span class="pre">touch()</span></code></a> method of the <a class="reference internal" href="../topics/cache.html#low-level-cache-api"><span class="std std-ref">low-level
cache API</span></a> updates the timeout of cache keys.</li>
</ul>
</div>
<div class="section" id="s-csrf">
<span id="csrf"></span><h4>CSRF<a class="headerlink" href="#csrf" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Le réglage <a class="reference internal" href="../ref/settings.html#std:setting-CSRF_COOKIE_SAMESITE"><code class="xref std std-setting docutils literal notranslate"><span class="pre">CSRF_COOKIE_SAMESITE</span></code></a> a été ajouté pour définir l’option de cookie <code class="docutils literal notranslate"><span class="pre">SameSite</span></code> pour les cookies CSRF.</li>
</ul>
</div>
<div class="section" id="s-forms">
<span id="forms"></span><h4>Formulaires<a class="headerlink" href="#forms" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Le composant de <code class="docutils literal notranslate"><span class="pre">ImageField</span></code> est dorénavant produit avec l’attribut HTML <code class="docutils literal notranslate"><span class="pre">accept=&quot;image/*&quot;</span></code>.</li>
</ul>
</div>
<div class="section" id="s-internationalization">
<span id="internationalization"></span><h4>Internationalisation<a class="headerlink" href="#internationalization" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>La fonction <a class="reference internal" href="../ref/utils.html#django.utils.translation.get_supported_language_variant" title="django.utils.translation.get_supported_language_variant"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_supported_language_variant()</span></code></a> a été ajoutée.</li>
<li>Les chaînes non traduites des variantes territoriales de langues utilisent dorénavant les traductions de la langue générique. Par exemple, les chaînes <code class="docutils literal notranslate"><span class="pre">pt_BR</span></code> non traduites utilisent les traductions <code class="docutils literal notranslate"><span class="pre">pt</span></code>.</li>
</ul>
</div>
<div class="section" id="s-management-commands">
<span id="management-commands"></span><h4>Commandes d’administration<a class="headerlink" href="#management-commands" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>La nouvelle option <a class="reference internal" href="../ref/django-admin.html#cmdoption-inspectdb-include-views"><code class="xref std std-option docutils literal notranslate"><span class="pre">inspectdb</span> <span class="pre">--include-views</span></code></a> permet de générer des modèles à partir de vues de bases de données.</li>
<li>La classe <a class="reference internal" href="../howto/custom-management-commands.html#django.core.management.BaseCommand" title="django.core.management.BaseCommand"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCommand</span></code></a> utilise dorénavant une mise en forme d’aide personnalisée afin que les options standard telles que <code class="docutils literal notranslate"><span class="pre">--verbosity</span></code> ou <code class="docutils literal notranslate"><span class="pre">--settings</span></code> apparaissent en dernier dans le texte d’aide, ce qui octroie une position plus importante aux options spécifiques de la commande.</li>
</ul>
</div>
<div class="section" id="s-migrations">
<span id="migrations"></span><h4>Migrations<a class="headerlink" href="#migrations" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>La prise en charge de la sérialisation des objets <code class="docutils literal notranslate"><span class="pre">functools.partialmethod</span></code> a été ajoutée.</li>
<li>Pour prendre en charge les environnements figés, les migrations peuvent être chargées à partir de fichiers <code class="docutils literal notranslate"><span class="pre">.pyc</span></code>.</li>
</ul>
</div>
<div class="section" id="s-models">
<span id="models"></span><h4>Modèles<a class="headerlink" href="#models" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Les modèles peuvent dorénavant utiliser <code class="docutils literal notranslate"><span class="pre">__init_subclass__()</span></code> de <span class="target" id="index-6"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0487"><strong>PEP 487</strong></a>.</li>
<li>Il est dorénavant possible de définir <code class="docutils literal notranslate"><span class="pre">editable=True</span></code> pour un champ <code class="docutils literal notranslate"><span class="pre">BinaryField</span></code> si vous souhaitez l’inclure dans des formulaires de modèles.</li>
<li>Un certain nombre de nouvelles fonctions texte de base de données ont été ajoutées : <a class="reference internal" href="../ref/models/database-functions.html#django.db.models.functions.Chr" title="django.db.models.functions.Chr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Chr</span></code></a>, <a class="reference internal" href="../ref/models/database-functions.html#django.db.models.functions.Left" title="django.db.models.functions.Left"><code class="xref py py-class docutils literal notranslate"><span class="pre">Left</span></code></a>, <a class="reference internal" href="../ref/models/database-functions.html#django.db.models.functions.LPad" title="django.db.models.functions.LPad"><code class="xref py py-class docutils literal notranslate"><span class="pre">LPad</span></code></a>, <a class="reference internal" href="../ref/models/database-functions.html#django.db.models.functions.LTrim" title="django.db.models.functions.LTrim"><code class="xref py py-class docutils literal notranslate"><span class="pre">LTrim</span></code></a>, <a class="reference internal" href="../ref/models/database-functions.html#django.db.models.functions.Ord" title="django.db.models.functions.Ord"><code class="xref py py-class docutils literal notranslate"><span class="pre">Ord</span></code></a>, <a class="reference internal" href="../ref/models/database-functions.html#django.db.models.functions.Repeat" title="django.db.models.functions.Repeat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Repeat</span></code></a>, <a class="reference internal" href="../ref/models/database-functions.html#django.db.models.functions.Replace" title="django.db.models.functions.Replace"><code class="xref py py-class docutils literal notranslate"><span class="pre">Replace</span></code></a>, <a class="reference internal" href="../ref/models/database-functions.html#django.db.models.functions.Right" title="django.db.models.functions.Right"><code class="xref py py-class docutils literal notranslate"><span class="pre">Right</span></code></a>, <a class="reference internal" href="../ref/models/database-functions.html#django.db.models.functions.RPad" title="django.db.models.functions.RPad"><code class="xref py py-class docutils literal notranslate"><span class="pre">RPad</span></code></a>, <a class="reference internal" href="../ref/models/database-functions.html#django.db.models.functions.RTrim" title="django.db.models.functions.RTrim"><code class="xref py py-class docutils literal notranslate"><span class="pre">RTrim</span></code></a> et <a class="reference internal" href="../ref/models/database-functions.html#django.db.models.functions.Trim" title="django.db.models.functions.Trim"><code class="xref py py-class docutils literal notranslate"><span class="pre">Trim</span></code></a>.</li>
<li>La nouvelle fonction <a class="reference internal" href="../ref/models/database-functions.html#django.db.models.functions.TruncWeek" title="django.db.models.functions.TruncWeek"><code class="xref py py-class docutils literal notranslate"><span class="pre">TruncWeek</span></code></a> tronque les objets <a class="reference internal" href="../ref/models/fields.html#django.db.models.DateField" title="django.db.models.DateField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateField</span></code></a> et <a class="reference internal" href="../ref/models/fields.html#django.db.models.DateTimeField" title="django.db.models.DateTimeField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateTimeField</span></code></a> au lundi d’une semaine.</li>
<li>Il est dorénavant possible d’indiquer la négation d’expressions de requête avec le signe moins.</li>
<li><a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.order_by" title="django.db.models.query.QuerySet.order_by"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.order_by()</span></code></a> et <a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.distinct" title="django.db.models.query.QuerySet.distinct"><code class="xref py py-meth docutils literal notranslate"><span class="pre">distinct(*fields)</span></code></a> autorisent dorénavant les transformations de champs.</li>
<li><a class="reference internal" href="../ref/models/fields.html#django.db.models.BooleanField" title="django.db.models.BooleanField"><code class="xref py py-class docutils literal notranslate"><span class="pre">BooleanField</span></code></a> peut dorénavant contenir <code class="docutils literal notranslate"><span class="pre">null=True</span></code>. C’est la méthode conseillée pour remplacer <a class="reference internal" href="../ref/models/fields.html#django.db.models.NullBooleanField" title="django.db.models.NullBooleanField"><code class="xref py py-class docutils literal notranslate"><span class="pre">NullBooleanField</span></code></a>, qui sera probablement rendu obsolète dans une prochaine version.</li>
<li>La nouvelle méthode <a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.explain" title="django.db.models.query.QuerySet.explain"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.explain()</span></code></a> affiche le plan d’exécution de la base de données pour une requête de base de données <code class="docutils literal notranslate"><span class="pre">QuerySet</span></code>.</li>
<li><a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.raw" title="django.db.models.query.QuerySet.raw"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.raw()</span></code></a> prend dorénavant en charge <a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.prefetch_related" title="django.db.models.query.QuerySet.prefetch_related"><code class="xref py py-meth docutils literal notranslate"><span class="pre">prefetch_related()</span></code></a>.</li>
</ul>
</div>
<div class="section" id="s-requests-and-responses">
<span id="requests-and-responses"></span><h4>Requêtes et réponses<a class="headerlink" href="#requests-and-responses" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="../ref/request-response.html#django.http.HttpRequest.get_full_path_info" title="django.http.HttpRequest.get_full_path_info"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HttpRequest.get_full_path_info()</span></code></a> a été ajoutée.</li>
<li>Le paramètre <code class="docutils literal notranslate"><span class="pre">samesite</span></code> a été ajouté à <a class="reference internal" href="../ref/request-response.html#django.http.HttpResponse.set_cookie" title="django.http.HttpResponse.set_cookie"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HttpResponse.set_cookie()</span></code></a> pour permettre de définir l’option de cookie <code class="docutils literal notranslate"><span class="pre">SameSite</span></code>.</li>
<li>Le nouveau paramètre <code class="docutils literal notranslate"><span class="pre">as_attachment</span></code> de <a class="reference internal" href="../ref/request-response.html#django.http.FileResponse" title="django.http.FileResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileResponse</span></code></a> définit l’en-tête <code class="docutils literal notranslate"><span class="pre">Content-Disposition</span></code> qui pousse les navigateurs à demander à l’utilisateur s’il veut télécharger le fichier. <code class="docutils literal notranslate"><span class="pre">FileResponse</span></code> essaie également de définir les en-têtes <code class="docutils literal notranslate"><span class="pre">Content-Type</span></code> et <code class="docutils literal notranslate"><span class="pre">Content-Length</span></code> lorsque c’est opportun.</li>
</ul>
</div>
<div class="section" id="s-templates">
<span id="templates"></span><h4>Gabarits<a class="headerlink" href="#templates" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Le nouveau filtre <a class="reference internal" href="../ref/templates/builtins.html#std:templatefilter-json_script"><code class="xref std std-tfilter docutils literal notranslate"><span class="pre">json_script</span></code></a> transforme un objet Python en JSON de manière sûre, enveloppé dans une balise <code class="docutils literal notranslate"><span class="pre">&lt;script&gt;</span></code>, pour utilisation à partir de JavaScript.</li>
</ul>
</div>
<div class="section" id="s-tests">
<span id="tests"></span><h4>Tests<a class="headerlink" href="#tests" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>La prise en charge des redirections 307 et 308 pour le <a class="reference internal" href="../topics/testing/tools.html#django.test.Client" title="django.test.Client"><code class="xref py py-class docutils literal notranslate"><span class="pre">Client</span></code></a> de test a été ajoutée.</li>
<li>Le class:~django.test.Client de test sérialise dorénavant le dictionnaire de données de requête en JSON si <code class="docutils literal notranslate"><span class="pre">content_type='application/json'</span></code>. Il est possible de personnaliser le codeur JSON à l’aide du paramètre <code class="docutils literal notranslate"><span class="pre">json_encoder</span></code> du client de test.</li>
<li>La nouvelle méthode <a class="reference internal" href="../topics/testing/tools.html#django.test.SimpleTestCase.assertWarnsMessage" title="django.test.SimpleTestCase.assertWarnsMessage"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SimpleTestCase.assertWarnsMessage()</span></code></a> est une version simplifiée de <a class="reference external" href="https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertWarnsRegex" title="(disponible dans Python v3.9)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertWarnsRegex()</span></code></a>.</li>
</ul>
</div>
</div>
</div>
<div class="section" id="s-backwards-incompatible-changes-in-2-1">
<span id="s-backwards-incompatible-2-1"></span><span id="backwards-incompatible-changes-in-2-1"></span><span id="backwards-incompatible-2-1"></span><h2>Changements incompatibles avec les anciennes versions dans Django 2.1<a class="headerlink" href="#backwards-incompatible-changes-in-2-1" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="s-database-backend-api">
<span id="database-backend-api"></span><h3>API de moteur de base de données<a class="headerlink" href="#database-backend-api" title="Lien permanent vers ce titre">¶</a></h3>
<p>Cette section décrit des modifications qui pourraient être nécessaires dans des moteurs de base de données tiers.</p>
<ul class="simple">
<li>Pour se conformer à la <span class="target" id="index-7"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0249"><strong>PEP 249</strong></a>, les exceptions qui concernent l’absence de prise en charge d’une fonctionnalité de base de données sont modifiées de <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#NotImplementedError" title="(disponible dans Python v3.9)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">NotImplementedError</span></code></a> à <a class="reference internal" href="../ref/exceptions.html#django.db.NotSupportedError" title="django.db.NotSupportedError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">django.db.NotSupportedError</span></code></a>.</li>
<li>Le drapeau de fonctionnalité de base de données <code class="docutils literal notranslate"><span class="pre">allow_sliced_subqueries</span></code> a été renommé en <code class="docutils literal notranslate"><span class="pre">allow_sliced_subqueries_with_in</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">DatabaseOperations.distinct_sql()</span></code> now requires an additional <code class="docutils literal notranslate"><span class="pre">params</span></code>
argument and returns a tuple of SQL and parameters instead of an SQL string.</li>
<li><code class="docutils literal notranslate"><span class="pre">DatabaseFeatures.introspected_boolean_field_type</span></code> a été modifiée, la méthode est devenue propriété.</li>
</ul>
</div>
<div class="section" id="s-id1">
<span id="id1"></span><h3><a class="reference internal" href="../ref/contrib/gis/index.html#module-django.contrib.gis" title="django.contrib.gis: Geographic Information System (GIS) extensions for Django"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.gis</span></code></a><a class="headerlink" href="#id1" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li>La prise en charge de SpatiaLite 4.0 a été supprimée.</li>
</ul>
</div>
<div class="section" id="s-dropped-support-for-mysql-5-5">
<span id="dropped-support-for-mysql-5-5"></span><h3>Abandon de la prise en charge de MySQL 5.5<a class="headerlink" href="#dropped-support-for-mysql-5-5" title="Lien permanent vers ce titre">¶</a></h3>
<p>La fin de la prise en charge amont de MySQL 5.5 est en décembre 2018. Django 2.1 prend en charge MySQL 5.6 et plus récent.</p>
</div>
<div class="section" id="s-dropped-support-for-postgresql-9-3">
<span id="dropped-support-for-postgresql-9-3"></span><h3>Abandon de la prise en charge de PostgreSQL 9.3<a class="headerlink" href="#dropped-support-for-postgresql-9-3" title="Lien permanent vers ce titre">¶</a></h3>
<p>La fin de la prise en charge amont de PostgreSQL 9.3 est en septembre 2018. Django 2.1 prend en charge PostgreSQL 9.4 et plus récent.</p>
</div>
<div class="section" id="s-removed-bcryptpasswordhasher-from-the-default-password-hashers-setting">
<span id="removed-bcryptpasswordhasher-from-the-default-password-hashers-setting"></span><h3><code class="docutils literal notranslate"><span class="pre">BCryptPasswordHasher</span></code> a été retiré du réglage <code class="docutils literal notranslate"><span class="pre">PASSWORD_HASHERS</span></code> par défaut<a class="headerlink" href="#removed-bcryptpasswordhasher-from-the-default-password-hashers-setting" title="Lien permanent vers ce titre">¶</a></h3>
<p>SI vous avez utilisé bcrypt avec Django 1.4 ou 1.5 (avant que <code class="docutils literal notranslate"><span class="pre">BCryptSHA256PasswordHasher</span></code> ait été ajouté dans Django 1.6), il est possible que vous ayez certains mots de passe utilisant l’algorithme <code class="docutils literal notranslate"><span class="pre">BCryptPasswordHasher</span></code>.</p>
<p>Vous pouvez vérifier si c’est le cas comme ceci</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib.auth</span> <span class="k">import</span> <span class="n">get_user_model</span>
<span class="n">User</span> <span class="o">=</span> <span class="n">get_user_model</span><span class="p">()</span>
<span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">password__startswith</span><span class="o">=</span><span class="s1">&#39;bcrypt$$&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Si vous souhaitez continuer à autoriser l’emploi de ces mots de passe, vous devrez redéfinir le réglage <a class="reference internal" href="../ref/settings.html#std:setting-PASSWORD_HASHERS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">PASSWORD_HASHERS</span></code></a> (si ce n’est pas déjà le cas) et inclure <code class="docutils literal notranslate"><span class="pre">'django.contrib.auth.hashers.BCryptPasswordHasher'</span></code>.</p>
</div>
<div class="section" id="s-moved-wrap-label-widget-template-context-variable">
<span id="moved-wrap-label-widget-template-context-variable"></span><h3>Déplacement de la variable de contexte de gabarit de composant <code class="docutils literal notranslate"><span class="pre">wrap_label</span></code><a class="headerlink" href="#moved-wrap-label-widget-template-context-variable" title="Lien permanent vers ce titre">¶</a></h3>
<p>Pour corriger l’absence de <code class="docutils literal notranslate"><span class="pre">&lt;label&gt;</span></code> lors de l’utilisation de <code class="docutils literal notranslate"><span class="pre">RadioSelect</span></code> et <code class="docutils literal notranslate"><span class="pre">CheckboxSelectMultiple</span></code> avec <code class="docutils literal notranslate"><span class="pre">MultiWidget</span></code>, la variable de contexte <code class="docutils literal notranslate"><span class="pre">wrap_label</span></code> apparaît dorénavant comme attribut de toutes les options. Par exemple, dans un gabarit personnalisé <code class="docutils literal notranslate"><span class="pre">input_option.html</span></code>, modifiez <code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">if</span> <span class="pre">wrap_label</span> <span class="pre">%}</span></code> en <code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">if</span> <span class="pre">widget.wrap_label</span> <span class="pre">%}</span></code>.</p>
</div>
<div class="section" id="s-samesite-cookies">
<span id="samesite-cookies"></span><h3>Cookies <code class="docutils literal notranslate"><span class="pre">SameSite</span></code><a class="headerlink" href="#samesite-cookies" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les cookies utilisés pour <code class="docutils literal notranslate"><span class="pre">django.contrib.sessions</span></code>, <code class="docutils literal notranslate"><span class="pre">django.contrib.messages</span></code> et la protection CSRF de Django définissent désormais par défaut l’option <code class="docutils literal notranslate"><span class="pre">SameSite</span></code> à <code class="docutils literal notranslate"><span class="pre">Lax</span></code>. Les navigateurs qui respectent cette option n’enverront pas ces cookies dans les requêtes vers une origine différente. Si vous comptez sur le comportement précédent, définissez les réglages <a class="reference internal" href="../ref/settings.html#std:setting-SESSION_COOKIE_SAMESITE"><code class="xref std std-setting docutils literal notranslate"><span class="pre">SESSION_COOKIE_SAMESITE</span></code></a> et/ou <a class="reference internal" href="../ref/settings.html#std:setting-CSRF_COOKIE_SAMESITE"><code class="xref std std-setting docutils literal notranslate"><span class="pre">CSRF_COOKIE_SAMESITE</span></code></a> à <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</div>
<div class="section" id="s-considerations-for-the-new-model-view-permission">
<span id="s-view-permission-backwards-incompatible"></span><span id="considerations-for-the-new-model-view-permission"></span><span id="view-permission-backwards-incompatible"></span><h3>Considérations sur la nouvelle permission d’affichage des modèles (<code class="docutils literal notranslate"><span class="pre">view</span></code>)<a class="headerlink" href="#considerations-for-the-new-model-view-permission" title="Lien permanent vers ce titre">¶</a></h3>
<div class="section" id="s-custom-admin-forms-need-to-take-the-view-only-case-into-account">
<span id="custom-admin-forms-need-to-take-the-view-only-case-into-account"></span><h4>Les formulaires d’administration personnalisés doivent prendre en compte le cas lecture seule<a class="headerlink" href="#custom-admin-forms-need-to-take-the-view-only-case-into-account" title="Lien permanent vers ce titre">¶</a></h4>
<p>Avec la nouvelle permission d’affichage (<code class="docutils literal notranslate"><span class="pre">view</span></code>), les formulaires d’administration personnalisés existants peuvent produire des erreurs lorsqu’un utilisateur ne possède pas la permission de modification car le formulaire pourrait accéder à des champs inexistants. Corrigez cela en surchargeant <a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin.get_form" title="django.contrib.admin.ModelAdmin.get_form"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ModelAdmin.get_form()</span></code></a> et en vérifiant que l’utilisateur possède la permission de modification (<code class="docutils literal notranslate"><span class="pre">change</span></code>) et en renvoyant le formulaire par défaut si ce n’est pas le cas</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_form</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_change_permission</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_form</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">CustomForm</span>
</pre></div>
</div>
</div>
<div class="section" id="s-new-default-view-permission-could-allow-unwanted-access-to-admin-views">
<span id="new-default-view-permission-could-allow-unwanted-access-to-admin-views"></span><h4>La nouvelle permission d’affichage par défaut pourrait permettre des accès non désirés aux vues d’administration<a class="headerlink" href="#new-default-view-permission-could-allow-unwanted-access-to-admin-views" title="Lien permanent vers ce titre">¶</a></h4>
<p>If you have a custom permission with a codename of the form
<code class="docutils literal notranslate"><span class="pre">view_&lt;modelname&gt;</span></code>, the new view permission handling in the admin will allow
view access to the changelist and detail pages for those models. If this is
unwanted, you must change your custom permission codename.</p>
</div>
</div>
<div class="section" id="s-miscellaneous">
<span id="miscellaneous"></span><h3>Divers<a class="headerlink" href="#miscellaneous" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li>La version minimum de <code class="docutils literal notranslate"><span class="pre">mysqlclient</span></code> prise en charge est passée de 1.3.3 à 1.3.7.</li>
<li>La prise en charge de SQLite &lt; 3.7.15 a été supprimée.</li>
<li>Le format de date de la directive <code class="docutils literal notranslate"><span class="pre">Expires</span></code> de <code class="docutils literal notranslate"><span class="pre">Set-Cookie</span></code> a été modifiée pour obéir à la <span class="target" id="index-8"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc7231.html#section-7.1.1.1"><strong>RFC 7231#section-7.1.1.1</strong></a> au lieu du standard de cookie Netscape. Les tirets présents dans les dates comme <code class="docutils literal notranslate"><span class="pre">Tue,</span> <span class="pre">25-Dec-2018</span> <span class="pre">22:26:13</span> <span class="pre">GMT</span></code> sont supprimés. Cette modification est essentiellement cosmétique sauf peut-être pour de très anciens navigateurs qui n’analysent pas le nouveau format.</li>
<li><code class="docutils literal notranslate"><span class="pre">allowed_hosts</span></code> est dorénavant un paramètre obligatoire de l’API privée <code class="docutils literal notranslate"><span class="pre">django.utils.http.is_safe_url()</span></code>.</li>
<li>L’attribut <code class="docutils literal notranslate"><span class="pre">multiple</span></code> produit par le composant <a class="reference internal" href="../ref/forms/widgets.html#django.forms.SelectMultiple" title="django.forms.SelectMultiple"><code class="xref py py-class docutils literal notranslate"><span class="pre">SelectMultiple</span></code></a> utilise dorénavant la syntaxe booléenne HTML5 plutôt que la forme XHTML <code class="docutils literal notranslate"><span class="pre">multiple=&quot;multiple&quot;</span></code>.</li>
<li>Le code HTML produit par les composants de formulaires n’incluent plus la barre oblique de fermeture pour les éléments vides, par ex. <code class="docutils literal notranslate"><span class="pre">&lt;br&gt;</span></code>. Ceci est incompatible avec XHTML, même si certains composants utilisaient déjà certains aspects de HTML5 comme les attributs booléens.</li>
<li>La valeur des options vides de <a class="reference internal" href="../ref/forms/widgets.html#django.forms.SelectDateWidget" title="django.forms.SelectDateWidget"><code class="xref py py-class docutils literal notranslate"><span class="pre">SelectDateWidget</span></code></a> es passée de 0 à la chaîne vide, ce qui pourrait essentiellement demander quelques ajustements dans les tests qui comparent du HTML.</li>
<li>meth:.User.has_usable_password et la fonction <a class="reference internal" href="../topics/auth/passwords.html#django.contrib.auth.hashers.is_password_usable" title="django.contrib.auth.hashers.is_password_usable"><code class="xref py py-func docutils literal notranslate"><span class="pre">is_password_usable()</span></code></a> ne renvoient plus <code class="docutils literal notranslate"><span class="pre">False</span></code> si le mot de passe vaut <code class="docutils literal notranslate"><span class="pre">None</span></code> ou une chaîne vide, ou si le mot de passe utilise un algorithme absent du réglage <a class="reference internal" href="../ref/settings.html#std:setting-PASSWORD_HASHERS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">PASSWORD_HASHERS</span></code></a>. Ce comportement non documenté était une régression dans Django 1.6 et empêchait les utilisateurs ayant de tels mots de passe de demander une réinitialisation de leur mot de passe. Examinez votre code pour confirmer que votre utilisation de cette API ne compte pas sur l’ancien comportement.</li>
<li>Comme les migrations sont dorénavant aussi chargées à partir de fichiers <code class="docutils literal notranslate"><span class="pre">.pyc</span></code>, il pourrait être nécessaire de les supprimer si vous travaillez dans un environnement mixte Python 2 et Python 3.</li>
<li>L’emploi de <code class="docutils literal notranslate"><span class="pre">None</span></code> comme valeur de recherche pour <a class="reference internal" href="../ref/contrib/postgres/fields.html#django.contrib.postgres.fields.JSONField" title="django.contrib.postgres.fields.JSONField"><code class="xref py py-class docutils literal notranslate"><span class="pre">JSONField</span></code></a> trouve dorénavant les objets qui ont la clé indiquée avec la valeur nulle plutôt que les objets qui n’ont pas cette clé.</li>
<li>La classe CSS d’administration <code class="docutils literal notranslate"><span class="pre">field-box</span></code> a été renommée en <code class="docutils literal notranslate"><span class="pre">fieldBox</span></code> pour éviter des conflits avec la classe attribuée aux champs de modèle nommés <code class="docutils literal notranslate"><span class="pre">box</span></code>.</li>
<li>Since the admin’s <code class="docutils literal notranslate"><span class="pre">actions.html</span></code>, <code class="docutils literal notranslate"><span class="pre">change_list_results.html</span></code>,
<code class="docutils literal notranslate"><span class="pre">date_hierarchy.html</span></code>, <code class="docutils literal notranslate"><span class="pre">pagination.html</span></code>, <code class="docutils literal notranslate"><span class="pre">prepopulated_fields_js.html</span></code>,
<code class="docutils literal notranslate"><span class="pre">search_form.html</span></code>, and <code class="docutils literal notranslate"><span class="pre">submit_line.html</span></code> templates can now be
overridden per app or per model, you may need to rename existing templates
with those names that were written for a different purpose.</li>
<li><code class="docutils literal notranslate"><span class="pre">QuerySet.raw()</span></code> place désormais en mémoire cache ses résultats tout comme les jeux de requête normaux. Utilisez <code class="docutils literal notranslate"><span class="pre">iterator()</span></code> si vous voulez éviter le cache.</li>
<li>La méthode de routeur de base de données <a class="reference internal" href="../topics/db/multi-db.html#allow_relation" title="allow_relation"><code class="xref py py-meth docutils literal notranslate"><span class="pre">allow_relation()</span></code></a> est appelée dans plus de situations. Les routeurs mal écrits pourraient avoir besoin d’être mis à jour en conséquence.</li>
<li>Les traductions ne sont plus désactivées avant de lancer les commandes d’administration. Si votre commande personnalisée a besoin de fonctionner sans les traductions (par exemple pour insérer du contenu non traduit dans la base de données), utilisez le nouveau <a class="reference internal" href="../howto/custom-management-commands.html#management-commands-and-locales"><span class="std std-ref">décorateur &#64;no_translations</span></a>.</li>
<li>Les commandes d’administration n’autorisent plus les formes abrégées des paramètres <code class="docutils literal notranslate"><span class="pre">--settings</span></code> et <code class="docutils literal notranslate"><span class="pre">--pythonpath</span></code>.</li>
<li>La constante privée <code class="docutils literal notranslate"><span class="pre">django.db.models.sql.constants.QUERY_TERMS</span></code> a été supprimée. Les méthodes <a class="reference internal" href="../ref/models/lookups.html#django.db.models.lookups.RegisterLookupMixin.get_lookup" title="django.db.models.lookups.RegisterLookupMixin.get_lookup"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_lookup()</span></code></a> et <a class="reference internal" href="../ref/models/lookups.html#django.db.models.lookups.RegisterLookupMixin.get_lookups" title="django.db.models.lookups.RegisterLookupMixin.get_lookups"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_lookups()</span></code></a> de l”<a class="reference internal" href="../ref/models/lookups.html#lookup-registration-api"><span class="std std-ref">API d’inscription des recherches</span></a> peuvent constituer de bonnes alternatives. Comparées à la constante <code class="docutils literal notranslate"><span class="pre">QUERY_TERMS</span></code>, elles permettent à votre code de tenir aussi compte des recherches personnalisées qui ont été inscrites.</li>
<li>La compatibilité avec <code class="docutils literal notranslate"><span class="pre">py-bcrypt</span></code> a été supprimée car ce paquet n’est plus maintenu. Utilisez <a class="reference external" href="https://pypi.org/project/bcrypt/">bcrypt</a> à la place.</li>
</ul>
</div>
</div>
<div class="section" id="s-features-deprecated-in-2-1">
<span id="s-deprecated-features-2-1"></span><span id="features-deprecated-in-2-1"></span><span id="deprecated-features-2-1"></span><h2>Fonctionnalités rendues obsolètes dans Django 2.1<a class="headerlink" href="#features-deprecated-in-2-1" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="s-id2">
<span id="id2"></span><h3>Divers<a class="headerlink" href="#id2" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li>La fonction GIS <code class="docutils literal notranslate"><span class="pre">ForceRHR</span></code> a été rendue obsolète en faveur de la nouvelle fonction <a class="reference internal" href="../ref/contrib/gis/functions.html#django.contrib.gis.db.models.functions.ForcePolygonCW" title="django.contrib.gis.db.models.functions.ForcePolygonCW"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForcePolygonCW</span></code></a>.</li>
<li><code class="docutils literal notranslate"><span class="pre">django.utils.http.cookie_date()</span></code> a été rendue obsolète en faveur de <a class="reference internal" href="../ref/utils.html#django.utils.http.http_date" title="django.utils.http.http_date"><code class="xref py py-func docutils literal notranslate"><span class="pre">http_date()</span></code></a>, qui respecte le format de la RFC la plus récente.</li>
<li><code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">load</span> <span class="pre">staticfiles</span> <span class="pre">%}</span></code> et <code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">load</span> <span class="pre">admin_static</span> <span class="pre">%}</span></code> sont obsolètes en faveur de <code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">load</span> <span class="pre">static</span> <span class="pre">%}</span></code>, qui remplit le même rôle.</li>
<li><code class="docutils literal notranslate"><span class="pre">django.contrib.staticfiles.templatetags.static()</span></code> est obsolète en faveur de <code class="docutils literal notranslate"><span class="pre">django.templatetags.static.static()</span></code>.</li>
<li>La prise en charge des méthodes <a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.InlineModelAdmin.has_add_permission" title="django.contrib.admin.InlineModelAdmin.has_add_permission"><code class="xref py py-meth docutils literal notranslate"><span class="pre">InlineModelAdmin.has_add_permission()</span></code></a> qui n’acceptent pas <code class="docutils literal notranslate"><span class="pre">obj</span></code> comme second paramètre positionnel sera supprimée dans Django 3.0.</li>
</ul>
</div>
</div>
<div class="section" id="s-features-removed-in-2-1">
<span id="s-removed-features-2-1"></span><span id="features-removed-in-2-1"></span><span id="removed-features-2-1"></span><h2>Fonctionnalités supprimées dans Django 2.1<a class="headerlink" href="#features-removed-in-2-1" title="Lien permanent vers ce titre">¶</a></h2>
<p>Ces fonctionnalités ont atteint la fin de leur cycle d’obsolescence et sont supprimées dans Django 2.1. Voir <a class="reference internal" href="1.11.html#deprecated-features-1-11"><span class="std std-ref">Fonctionnalités rendues obsolètes dans Django 1.11</span></a> pour les détails, ainsi que pour savoir comment supprimer l’utilisation de ces fonctionnalités.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">contrib.auth.views.login()</span></code>, <code class="docutils literal notranslate"><span class="pre">logout()</span></code>, <code class="docutils literal notranslate"><span class="pre">password_change()</span></code>, <code class="docutils literal notranslate"><span class="pre">password_change_done()</span></code>, <code class="docutils literal notranslate"><span class="pre">password_reset()</span></code>, <code class="docutils literal notranslate"><span class="pre">password_reset_done()</span></code>, <code class="docutils literal notranslate"><span class="pre">password_reset_confirm()</span></code> et <code class="docutils literal notranslate"><span class="pre">password_reset_complete()</span></code> ont été supprimés.</li>
<li>Le paramètre <code class="docutils literal notranslate"><span class="pre">extra_context</span></code> de <code class="docutils literal notranslate"><span class="pre">contrib.auth.views.logout_then_login()</span></code> a été supprimé.</li>
<li><code class="docutils literal notranslate"><span class="pre">django.test.runner.setup_databases()</span></code> a été supprimée.</li>
<li><code class="docutils literal notranslate"><span class="pre">django.utils.translation.string_concat()</span></code> a été supprimée.</li>
<li><code class="docutils literal notranslate"><span class="pre">django.core.cache.backends.memcached.PyLibMCCache</span></code> ne prend plus en charge la transmission des réglages de comportement <code class="docutils literal notranslate"><span class="pre">pylibmc</span></code> comme attributs de premier niveau des <code class="docutils literal notranslate"><span class="pre">OPTIONS</span></code>.</li>
<li>Le paramètre <code class="docutils literal notranslate"><span class="pre">host</span></code> de <code class="docutils literal notranslate"><span class="pre">django.utils.http.is_safe_url()</span></code> a été supprimé.</li>
<li>Le masquage des exceptions produites lors du rendu de la balise de gabarit <code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">include</span> <span class="pre">%}</span></code> a été supprimé.</li>
<li><code class="docutils literal notranslate"><span class="pre">DatabaseIntrospection.get_indexes()</span></code> a été supprimée.</li>
<li>La méthode <code class="docutils literal notranslate"><span class="pre">authenticate()</span></code> des moteurs d’authentification exige <code class="docutils literal notranslate"><span class="pre">request</span></code> comme premier paramètre positionnel.</li>
<li>Le décorateur <code class="docutils literal notranslate"><span class="pre">django.db.models.permalink()</span></code> a été supprimé.</li>
<li>Le réglage <code class="docutils literal notranslate"><span class="pre">USE_ETAGS</span></code> a été supprimé.  <code class="docutils literal notranslate"><span class="pre">CommonMiddleware</span></code> et <code class="docutils literal notranslate"><span class="pre">django.utils.cache.patch_response_headers()</span></code> ne créent plus d’ETags.</li>
<li>L’attribut <code class="docutils literal notranslate"><span class="pre">Model._meta.has_auto_field</span></code> a été supprimé.</li>
<li>La prise en charge de <code class="docutils literal notranslate"><span class="pre">url()</span></code> des drapeaux en ligne dans les groupes d’expressions régulières (<code class="docutils literal notranslate"><span class="pre">(?i)</span></code>, <code class="docutils literal notranslate"><span class="pre">(?L)</span></code>, <code class="docutils literal notranslate"><span class="pre">(?m)</span></code>, <code class="docutils literal notranslate"><span class="pre">(?s)</span></code>, and <code class="docutils literal notranslate"><span class="pre">(?u)</span></code>) a été supprimée.</li>
<li>La prise en charge des méthodes <code class="docutils literal notranslate"><span class="pre">Widget.render()</span></code> sans le paramètre <code class="docutils literal notranslate"><span class="pre">renderer</span></code> a été supprimée.</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Notes de publication de Django 2.1</a><ul>
<li><a class="reference internal" href="#python-compatibility">Compatibilité Python</a></li>
<li><a class="reference internal" href="#what-s-new-in-django-2-1">Quoi de neuf dans Django 2.1</a><ul>
<li><a class="reference internal" href="#model-view-permission">La permission d’affichage (<code class="docutils literal notranslate"><span class="pre">view</span></code>) des modèles</a></li>
<li><a class="reference internal" href="#minor-features">Fonctionnalités mineures</a><ul>
<li><a class="reference internal" href="#django-contrib-admin"><code class="docutils literal notranslate"><span class="pre">django.contrib.admin</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-auth"><code class="docutils literal notranslate"><span class="pre">django.contrib.auth</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-gis"><code class="docutils literal notranslate"><span class="pre">django.contrib.gis</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-sessions"><code class="docutils literal notranslate"><span class="pre">django.contrib.sessions</span></code></a></li>
<li><a class="reference internal" href="#cache">Cache</a></li>
<li><a class="reference internal" href="#csrf">CSRF</a></li>
<li><a class="reference internal" href="#forms">Formulaires</a></li>
<li><a class="reference internal" href="#internationalization">Internationalisation</a></li>
<li><a class="reference internal" href="#management-commands">Commandes d’administration</a></li>
<li><a class="reference internal" href="#migrations">Migrations</a></li>
<li><a class="reference internal" href="#models">Modèles</a></li>
<li><a class="reference internal" href="#requests-and-responses">Requêtes et réponses</a></li>
<li><a class="reference internal" href="#templates">Gabarits</a></li>
<li><a class="reference internal" href="#tests">Tests</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#backwards-incompatible-changes-in-2-1">Changements incompatibles avec les anciennes versions dans Django 2.1</a><ul>
<li><a class="reference internal" href="#database-backend-api">API de moteur de base de données</a></li>
<li><a class="reference internal" href="#id1"><code class="docutils literal notranslate"><span class="pre">django.contrib.gis</span></code></a></li>
<li><a class="reference internal" href="#dropped-support-for-mysql-5-5">Abandon de la prise en charge de MySQL 5.5</a></li>
<li><a class="reference internal" href="#dropped-support-for-postgresql-9-3">Abandon de la prise en charge de PostgreSQL 9.3</a></li>
<li><a class="reference internal" href="#removed-bcryptpasswordhasher-from-the-default-password-hashers-setting"><code class="docutils literal notranslate"><span class="pre">BCryptPasswordHasher</span></code> a été retiré du réglage <code class="docutils literal notranslate"><span class="pre">PASSWORD_HASHERS</span></code> par défaut</a></li>
<li><a class="reference internal" href="#moved-wrap-label-widget-template-context-variable">Déplacement de la variable de contexte de gabarit de composant <code class="docutils literal notranslate"><span class="pre">wrap_label</span></code></a></li>
<li><a class="reference internal" href="#samesite-cookies">Cookies <code class="docutils literal notranslate"><span class="pre">SameSite</span></code></a></li>
<li><a class="reference internal" href="#considerations-for-the-new-model-view-permission">Considérations sur la nouvelle permission d’affichage des modèles (<code class="docutils literal notranslate"><span class="pre">view</span></code>)</a><ul>
<li><a class="reference internal" href="#custom-admin-forms-need-to-take-the-view-only-case-into-account">Les formulaires d’administration personnalisés doivent prendre en compte le cas lecture seule</a></li>
<li><a class="reference internal" href="#new-default-view-permission-could-allow-unwanted-access-to-admin-views">La nouvelle permission d’affichage par défaut pourrait permettre des accès non désirés aux vues d’administration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#miscellaneous">Divers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#features-deprecated-in-2-1">Fonctionnalités rendues obsolètes dans Django 2.1</a><ul>
<li><a class="reference internal" href="#id2">Divers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#features-removed-in-2-1">Fonctionnalités supprimées dans Django 2.1</a></li>
</ul>
</li>
</ul>

  <h4>Sujet précédent</h4>
  <p class="topless"><a href="2.1.1.html"
                        title="Chapitre précédent">Notes de publication de Django 2.1.1</a></p>
  <h4>Sujet suivant</h4>
  <p class="topless"><a href="2.0.13.html"
                        title="Chapitre suivant">Notes de publication de Django 2.0.13</a></p>
  <div role="note" aria-label="source link">
    <h3>Cette page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/releases/2.1.txt"
            rel="nofollow">Montrer le code source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Recherche rapide</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
              <h3>Last update:</h3>
              <p class="topless">oct. 29, 2020</p>
          </div>
        
      
    </div>

    <div id="ft">
      <div class="nav">
    &laquo; <a href="2.1.1.html" title="Notes de publication de Django 2.1.1">previous</a>
     |
    <a href="index.html" title="Notes de publication" accesskey="U">up</a>
   |
    <a href="2.0.13.html" title="Notes de publication de Django 2.0.13">next</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>