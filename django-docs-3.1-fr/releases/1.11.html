
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Notes de publication de Django 1.11 &#8212; Documentation Django 3.1.3.dev</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="next" title="Notes de publication de Django 1.10.8" href="1.10.8.html" />
    <link rel="prev" title="Notes de publication de Django 1.11.1" href="1.11.1.html" />



 
<script src="../templatebuiltins.js"></script>
<script>
(function($) {
    if (!django_template_builtins) {
       // templatebuiltins.js missing, do nothing.
       return;
    }
    $(document).ready(function() {
        // Hyperlink Django template tags and filters
        var base = "../ref/templates/builtins.html";
        if (base == "#") {
            // Special case for builtins.html itself
            base = "";
        }
        // Tags are keywords, class '.k'
        $("div.highlight\\-html\\+django span.k").each(function(i, elem) {
             var tagname = $(elem).text();
             if ($.inArray(tagname, django_template_builtins.ttags) != -1) {
                 var fragment = tagname.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + tagname + "</a>");
             }
        });
        // Filters are functions, class '.nf'
        $("div.highlight\\-html\\+django span.nf").each(function(i, elem) {
             var filtername = $(elem).text();
             if ($.inArray(filtername, django_template_builtins.tfilters) != -1) {
                 var fragment = filtername.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + filtername + "</a>");
             }
        });
    });
})(jQuery);</script>

  </head><body>

    <div class="document">
  <div id="custom-doc" class="yui-t6">
    <div id="hd">
      <h1><a href="../index.html">Documentation Django 3.1.3.dev</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../index.html">Home</a>  |
        <a title="Table of contents" href="../contents.html">Table of contents</a>  |
        <a title="Global index" href="../genindex.html">Index</a>  |
        <a title="Module index" href="../py-modindex.html">Modules</a>
      </div>
      <div class="nav">
    &laquo; <a href="1.11.1.html" title="Notes de publication de Django 1.11.1">previous</a>
     |
    <a href="index.html" title="Notes de publication" accesskey="U">up</a>
   |
    <a href="1.10.8.html" title="Notes de publication de Django 1.10.8">next</a> &raquo;</div>
    </div>

    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="releases-1.11">
            
  <div class="section" id="s-django-1-11-release-notes">
<span id="django-1-11-release-notes"></span><h1>Notes de publication de Django 1.11<a class="headerlink" href="#django-1-11-release-notes" title="Lien permanent vers ce titre">¶</a></h1>
<p><em>4 avril 2017</em></p>
<p>Bienvenue dans Django 1.11&nbsp;!</p>
<p>Ces notes de publications couvrent les <a class="reference internal" href="#whats-new-1-11"><span class="std std-ref">nouvelles fonctionnalités</span></a>, ainsi que certaines <a class="reference internal" href="#backwards-incompatible-1-11"><span class="std std-ref">modifications non rétro-compatibles</span></a> dont il faut être au courant lors la mise à jour depuis Django 1.10 ou des versions plus anciennes. Nous avons commencé <a class="reference internal" href="#deprecated-features-1-11"><span class="std std-ref">le processus d’obsolescence de certaines fonctionnalités</span></a>.</p>
<p>Voir le guide <a class="reference internal" href="../howto/upgrade-version.html"><span class="doc">Mise à jour de Django à une version plus récente</span></a> si vous mettez à jour un projet existant.</p>
<p>Django 1.11 is designated as a <a class="reference internal" href="../internals/release-process.html#term-long-term-support-release"><span class="xref std std-term">long-term support release</span></a>. It will receive security updates for at least
three years after its release. Support for the previous LTS, Django 1.8, will
end in April 2018.</p>
<div class="section" id="s-python-compatibility">
<span id="python-compatibility"></span><h2>Compatibilité Python<a class="headerlink" href="#python-compatibility" title="Lien permanent vers ce titre">¶</a></h2>
<p>Django 1.11 requires Python 2.7, 3.4, 3.5, 3.6, or 3.7 (as of 1.11.17). We
<strong>highly recommend</strong> and only officially support the latest release of each
series.</p>
<p>The Django 1.11.x series is the last to support Python 2. The next major
release, Django 2.0, will only support Python 3.4+.</p>
</div>
<div class="section" id="s-deprecating-warnings-are-no-longer-loud-by-default">
<span id="deprecating-warnings-are-no-longer-loud-by-default"></span><h2>Les avertissements d’obsolescence ne sont plus visibles par défaut<a class="headerlink" href="#deprecating-warnings-are-no-longer-loud-by-default" title="Lien permanent vers ce titre">¶</a></h2>
<p>Au contraire des versions précédentes de Django, les avertissements d’obsolescence émis par Django ne sont plus affichés par défaut. C’est cohérent avec le comportement par défaut de Python.</p>
<p>Ce changement permet aux applications tierces de prendre en charge à la fois les versions Django 1.11 LTS et Django 1.8 LTS sans devoir ajouter du code pour éviter les avertissements d’obsolescence.</p>
<p>Après la publication de Django 2.0, nous suggérons aux applications tierces de ne plus prendre en charge les versions de Django plus anciennes que 1.11. À ce moment, vous devriez pouvoir exécuter les tests de votre projet en utilisant python -Wd afin de faire apparaître les avertissements d’obsolescence. Après avoir corrigé ceux-ci, votre application devrait être compatible avec Django 2.0.</p>
</div>
<div class="section" id="s-what-s-new-in-django-1-11">
<span id="s-whats-new-1-11"></span><span id="what-s-new-in-django-1-11"></span><span id="whats-new-1-11"></span><h2>Quoi de neuf dans Django 1.11<a class="headerlink" href="#what-s-new-in-django-1-11" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="s-class-based-model-indexes">
<span id="class-based-model-indexes"></span><h3>Index de modèles basés sur les classes<a class="headerlink" href="#class-based-model-indexes" title="Lien permanent vers ce titre">¶</a></h3>
<p>Le nouveau module <a class="reference internal" href="../ref/models/indexes.html#module-django.db.models.indexes" title="django.db.models.indexes"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.db.models.indexes</span></code></a> contient des classes qui facilitent la création d’index de base de données. Ces index peuvent être ajoutés aux modèles en utilisant l’option <a class="reference internal" href="../ref/models/options.html#django.db.models.Options.indexes" title="django.db.models.Options.indexes"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Meta.indexes</span></code></a>.</p>
<p>La classe <a class="reference internal" href="../ref/models/indexes.html#django.db.models.Index" title="django.db.models.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> crée un index b-tree comme si vous indiquiez le paramètre <a class="reference internal" href="../ref/models/fields.html#django.db.models.Field.db_index" title="django.db.models.Field.db_index"><code class="xref py py-attr docutils literal notranslate"><span class="pre">db_index</span></code></a> sur le champ de modèle ou <a class="reference internal" href="../ref/models/options.html#django.db.models.Options.index_together" title="django.db.models.Options.index_together"><code class="xref py py-attr docutils literal notranslate"><span class="pre">index_together</span></code></a> dans la classe <code class="docutils literal notranslate"><span class="pre">Meta</span></code> du modèle. Elle peut être héritée pour prendre en charge différents types d’index, tels que <a class="reference internal" href="../ref/contrib/postgres/indexes.html#django.contrib.postgres.indexes.GinIndex" title="django.contrib.postgres.indexes.GinIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">GinIndex</span></code></a>. Elle permet aussi de définir le tri (ASC/DESC) pour les colonnes de l’index.</p>
</div>
<div class="section" id="s-template-based-widget-rendering">
<span id="template-based-widget-rendering"></span><h3>Rendu des composants HTML basé sur des gabarits<a class="headerlink" href="#template-based-widget-rendering" title="Lien permanent vers ce titre">¶</a></h3>
<p>Pour faciliter la personnalisation des composants de formulaire HTML, leur rendu est dorénavant effectué au travers du système de gabarits plutôt que dans le code Python. Voir <a class="reference internal" href="../ref/forms/renderers.html"><span class="doc">L’API du rendu des formulaires</span></a>.</p>
<p>Il est possible que vous ayez à adapter des composants personnalisés que vous avez écrits en raison de quelques <a class="reference internal" href="#template-widget-incompatibilities-1-11"><span class="std std-ref">changements non rétrocompatibles</span></a>.</p>
</div>
<div class="section" id="s-subquery-expressions">
<span id="subquery-expressions"></span><h3>Expressions <code class="docutils literal notranslate"><span class="pre">Subquery</span></code><a class="headerlink" href="#subquery-expressions" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les nouvelles expressions de base de données <a class="reference internal" href="../ref/models/expressions.html#django.db.models.Subquery" title="django.db.models.Subquery"><code class="xref py py-class docutils literal notranslate"><span class="pre">Subquery</span></code></a> et <a class="reference internal" href="../ref/models/expressions.html#django.db.models.Exists" title="django.db.models.Exists"><code class="xref py py-class docutils literal notranslate"><span class="pre">Exists</span></code></a> permettent la création de sous-requêtes explicites. Les sous-requêtes peuvent se référer à des champs de la requête parente avec la classe <a class="reference internal" href="../ref/models/expressions.html#django.db.models.OuterRef" title="django.db.models.OuterRef"><code class="xref py py-class docutils literal notranslate"><span class="pre">OuterRef</span></code></a>.</p>
</div>
<div class="section" id="s-minor-features">
<span id="minor-features"></span><h3>Fonctionnalités mineures<a class="headerlink" href="#minor-features" title="Lien permanent vers ce titre">¶</a></h3>
<div class="section" id="s-django-contrib-admin">
<span id="django-contrib-admin"></span><h4><a class="reference internal" href="../ref/contrib/admin/index.html#module-django.contrib.admin" title="django.contrib.admin: Django's admin site."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.admin</span></code></a><a class="headerlink" href="#django-contrib-admin" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin.date_hierarchy" title="django.contrib.admin.ModelAdmin.date_hierarchy"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ModelAdmin.date_hierarchy</span></code></a> peut dorénavant référencer des champs par-delà des relations.</li>
<li>Le nouveau point d’entrée <a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin.get_exclude" title="django.contrib.admin.ModelAdmin.get_exclude"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ModelAdmin.get_exclude()</span></code></a> permet d’indiquer des champs à exclure en fonction de la requête ou de l’instance de modèle.</li>
<li>Le gabarit <code class="docutils literal notranslate"><span class="pre">popup_response.html</span></code> peut dorénavant être surchargé par application, par modèle ou en définissant l’attribut <a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin.popup_response_template" title="django.contrib.admin.ModelAdmin.popup_response_template"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ModelAdmin.popup_response_template</span></code></a>.</li>
</ul>
</div>
<div class="section" id="s-django-contrib-auth">
<span id="django-contrib-auth"></span><h4><a class="reference internal" href="../topics/auth/index.html#module-django.contrib.auth" title="django.contrib.auth: Django's authentication framework."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.auth</span></code></a><a class="headerlink" href="#django-contrib-auth" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Le nombre d’itération par défaut du hacheur de mot de passe PBKDF2 a été augmenté de 20%.</li>
<li>Les vues classes <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.views.LoginView" title="django.contrib.auth.views.LoginView"><code class="xref py py-class docutils literal notranslate"><span class="pre">LoginView</span></code></a> et <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.views.LogoutView" title="django.contrib.auth.views.LogoutView"><code class="xref py py-class docutils literal notranslate"><span class="pre">LogoutView</span></code></a> remplacent les vues fonctions obsolètes <code class="docutils literal notranslate"><span class="pre">login()</span></code> et <code class="docutils literal notranslate"><span class="pre">logout()</span></code>.</li>
<li>Les vues classes <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.views.PasswordChangeView" title="django.contrib.auth.views.PasswordChangeView"><code class="xref py py-class docutils literal notranslate"><span class="pre">PasswordChangeView</span></code></a>, <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.views.PasswordChangeDoneView" title="django.contrib.auth.views.PasswordChangeDoneView"><code class="xref py py-class docutils literal notranslate"><span class="pre">PasswordChangeDoneView</span></code></a>, <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.views.PasswordResetView" title="django.contrib.auth.views.PasswordResetView"><code class="xref py py-class docutils literal notranslate"><span class="pre">PasswordResetView</span></code></a>, <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.views.PasswordResetDoneView" title="django.contrib.auth.views.PasswordResetDoneView"><code class="xref py py-class docutils literal notranslate"><span class="pre">PasswordResetDoneView</span></code></a>, <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.views.PasswordResetConfirmView" title="django.contrib.auth.views.PasswordResetConfirmView"><code class="xref py py-class docutils literal notranslate"><span class="pre">PasswordResetConfirmView</span></code></a> et <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.views.PasswordResetCompleteView" title="django.contrib.auth.views.PasswordResetCompleteView"><code class="xref py py-class docutils literal notranslate"><span class="pre">PasswordResetCompleteView</span></code></a> remplacent les vues fonctions obsolètes <code class="docutils literal notranslate"><span class="pre">password_change()</span></code>, <code class="docutils literal notranslate"><span class="pre">password_change_done()</span></code>, <code class="docutils literal notranslate"><span class="pre">password_reset()</span></code>, <code class="docutils literal notranslate"><span class="pre">password_reset_done()</span></code>, <code class="docutils literal notranslate"><span class="pre">password_reset_confirm()</span></code> et <code class="docutils literal notranslate"><span class="pre">password_reset_complete()</span></code>.</li>
<li>Le nouvel attribut <code class="docutils literal notranslate"><span class="pre">post_reset_login</span></code> de <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.views.PasswordResetConfirmView" title="django.contrib.auth.views.PasswordResetConfirmView"><code class="xref py py-class docutils literal notranslate"><span class="pre">PasswordResetConfirmView</span></code></a> permet de connecter automatiquement un utilisateur à la suite d’une réinitialisation de mot de passe fructueuse. Si plusieurs moteurs <code class="docutils literal notranslate"><span class="pre">AUTHENTICATION_BACKENDS</span></code> sont configurés, indiquez lequel sera utilisé en définissant l’attribut <code class="docutils literal notranslate"><span class="pre">post_reset_login_backend</span></code>.</li>
<li>Pour éviter l’éventualité d’une divulgation du jeton de réinitialisation du mot de passe par l’en-tête HTTP Referer (par exemple si la page de réinitialisation inclut des références à des fichiers CSS ou JavaScript hébergés sur d’autres domaines), la vue <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.views.PasswordResetConfirmView" title="django.contrib.auth.views.PasswordResetConfirmView"><code class="xref py py-class docutils literal notranslate"><span class="pre">PasswordResetConfirmView</span></code></a> (mais pas la vue fonction obsolète <code class="docutils literal notranslate"><span class="pre">password_reset_confirm()</span></code>) stocke le jeton dans une session et redirige sur elle-même pour présenter le formulaire de changement de mot de passe à l’utilisateur sans devoir inclure le jeton dans l’URL.</li>
<li><a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.update_session_auth_hash" title="django.contrib.auth.update_session_auth_hash"><code class="xref py py-func docutils literal notranslate"><span class="pre">update_session_auth_hash()</span></code></a> effectue dorénavant une rotation de clé de session pour permettre à un changement de mot de passe d’invalider des cookies de session volés.</li>
<li>Le nouvel attribut <code class="docutils literal notranslate"><span class="pre">success_url_allowed_hosts</span></code> de <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.views.LoginView" title="django.contrib.auth.views.LoginView"><code class="xref py py-class docutils literal notranslate"><span class="pre">LoginView</span></code></a> et <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.views.LogoutView" title="django.contrib.auth.views.LogoutView"><code class="xref py py-class docutils literal notranslate"><span class="pre">LogoutView</span></code></a> permet d’indiquer un ensemble d’hôtes qui sont fiables pour la redirection après connexion ou déconnexion.</li>
<li>Du contenu d’aide <code class="docutils literal notranslate"><span class="pre">help_text</span></code> a été ajouté pour les validateurs de mot de passe de <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.forms.UserCreationForm" title="django.contrib.auth.forms.UserCreationForm"><code class="xref py py-class docutils literal notranslate"><span class="pre">UserCreationForm</span></code></a>.</li>
<li>La requête <code class="docutils literal notranslate"><span class="pre">HttpRequest</span></code> est dorénavant transmise à <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.authenticate" title="django.contrib.auth.authenticate"><code class="xref py py-func docutils literal notranslate"><span class="pre">authenticate()</span></code></a> qui à son tour la transmet au moteur d’authentification si celui-ci accepte un paramètre <code class="docutils literal notranslate"><span class="pre">request</span></code>.</li>
<li>Le signal <a class="reference internal" href="../ref/contrib/auth.html#django.contrib.auth.signals.user_login_failed" title="django.contrib.auth.signals.user_login_failed"><code class="xref py py-func docutils literal notranslate"><span class="pre">user_login_failed()</span></code></a> reçoit dorénavant un paramètre <code class="docutils literal notranslate"><span class="pre">request</span></code>.</li>
<li><a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.forms.PasswordResetForm" title="django.contrib.auth.forms.PasswordResetForm"><code class="xref py py-class docutils literal notranslate"><span class="pre">PasswordResetForm</span></code></a> prend en charge des modèles d’utilisateur personnalisés qui utilisent un champ d’adresse de courriel nommé autrement que <code class="docutils literal notranslate"><span class="pre">'email'</span></code>. Définissez <a class="reference internal" href="../topics/auth/customizing.html#django.contrib.auth.models.CustomUser.EMAIL_FIELD" title="django.contrib.auth.models.CustomUser.EMAIL_FIELD"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CustomUser.EMAIL_FIELD</span></code></a> à la valeur du nom de champ concerné.</li>
<li><a class="reference internal" href="../topics/auth/customizing.html#django.contrib.auth.get_user_model" title="django.contrib.auth.get_user_model"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_user_model()</span></code></a> peut maintenant être appelé au moment de l’importation, même dans les modules qui définissent des modèles.</li>
</ul>
</div>
<div class="section" id="s-django-contrib-contenttypes">
<span id="django-contrib-contenttypes"></span><h4><a class="reference internal" href="../ref/contrib/contenttypes.html#module-django.contrib.contenttypes" title="django.contrib.contenttypes: Provides generic interface to installed models."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.contenttypes</span></code></a><a class="headerlink" href="#django-contrib-contenttypes" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Lorsque des types de contenu périmés sont détectés dans la commande <a class="reference internal" href="../ref/django-admin.html#django-admin-remove_stale_contenttypes"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">remove_stale_contenttypes</span></code></a>, vous verrez maintenant apparaître une liste des objets liés qui seront aussi supprimés, tels que <code class="docutils literal notranslate"><span class="pre">auth.Permission</span></code>. Précédemment, seuls les types de contenu étaient énumérés (et cette invite apparaissait après <code class="docutils literal notranslate"><span class="pre">migrate</span></code> plutôt que dans une commande séparée).</li>
</ul>
</div>
<div class="section" id="s-django-contrib-gis">
<span id="django-contrib-gis"></span><h4><a class="reference internal" href="../ref/contrib/gis/index.html#module-django.contrib.gis" title="django.contrib.gis: Geographic Information System (GIS) extensions for Django"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.gis</span></code></a><a class="headerlink" href="#django-contrib-gis" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Les nouvelles méthodes <a class="reference internal" href="../ref/contrib/gis/geos.html#django.contrib.gis.geos.GEOSGeometry.from_gml" title="django.contrib.gis.geos.GEOSGeometry.from_gml"><code class="xref py py-meth docutils literal notranslate"><span class="pre">GEOSGeometry.from_gml()</span></code></a> et <a class="reference internal" href="../ref/contrib/gis/gdal.html#django.contrib.gis.gdal.OGRGeometry.from_gml" title="django.contrib.gis.gdal.OGRGeometry.from_gml"><code class="xref py py-meth docutils literal notranslate"><span class="pre">OGRGeometry.from_gml()</span></code></a> permettent de créer des objets géométriques à partir du format GML.</li>
<li>La prise en charge de l’expression de recherche <a class="reference internal" href="../ref/contrib/gis/geoquerysets.html#std:fieldlookup-dwithin"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">dwithin</span></code></a> a été ajoutée pour SpatiaLite.</li>
<li>Les fonctions <a class="reference internal" href="../ref/contrib/gis/functions.html#django.contrib.gis.db.models.functions.Area" title="django.contrib.gis.db.models.functions.Area"><code class="xref py py-class docutils literal notranslate"><span class="pre">Area</span></code></a> et <a class="reference internal" href="../ref/contrib/gis/functions.html#django.contrib.gis.db.models.functions.Distance" title="django.contrib.gis.db.models.functions.Distance"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distance</span></code></a> ainsi que les requêtes de distance fonctionnent dorénavant aussi sur SpatiaLite avec des coordonnées géodésiques.</li>
<li>The OpenLayers-based form widgets now use <code class="docutils literal notranslate"><span class="pre">OpenLayers.js</span></code> from
<code class="docutils literal notranslate"><span class="pre">https://cdnjs.cloudflare.com</span></code> which is more suitable for production use
than the old <code class="docutils literal notranslate"><span class="pre">https://openlayers.org/</span></code> source. They are also updated to use
OpenLayers 3.</li>
<li>Les migrations PostGIS peuvent dorénavant modifier les dimensions de champs.</li>
<li>Added the ability to pass the <code class="docutils literal notranslate"><span class="pre">size</span></code>, <code class="docutils literal notranslate"><span class="pre">shape</span></code>, and <code class="docutils literal notranslate"><span class="pre">offset</span></code> parameters
when creating <a class="reference internal" href="../ref/contrib/gis/gdal.html#django.contrib.gis.gdal.GDALRaster" title="django.contrib.gis.gdal.GDALRaster"><code class="xref py py-class docutils literal notranslate"><span class="pre">GDALRaster</span></code></a> objects.</li>
<li>La prise en charge SpatiaLite des fonctions <a class="reference internal" href="../ref/contrib/gis/functions.html#django.contrib.gis.db.models.functions.IsValid" title="django.contrib.gis.db.models.functions.IsValid"><code class="xref py py-class docutils literal notranslate"><span class="pre">IsValid</span></code></a> et <a class="reference internal" href="../ref/contrib/gis/functions.html#django.contrib.gis.db.models.functions.MakeValid" title="django.contrib.gis.db.models.functions.MakeValid"><code class="xref py py-class docutils literal notranslate"><span class="pre">MakeValid</span></code></a> ainsi que de l’expression de recherche <a class="reference internal" href="../ref/contrib/gis/geoquerysets.html#std:fieldlookup-isvalid"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">isvalid</span></code></a> a été ajoutée.</li>
<li>La prise en charge Oracle des fonctions <a class="reference internal" href="../ref/contrib/gis/functions.html#django.contrib.gis.db.models.functions.AsGML" title="django.contrib.gis.db.models.functions.AsGML"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsGML</span></code></a>, <a class="reference internal" href="../ref/contrib/gis/functions.html#django.contrib.gis.db.models.functions.BoundingCircle" title="django.contrib.gis.db.models.functions.BoundingCircle"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoundingCircle</span></code></a> et <a class="reference internal" href="../ref/contrib/gis/functions.html#django.contrib.gis.db.models.functions.IsValid" title="django.contrib.gis.db.models.functions.IsValid"><code class="xref py py-class docutils literal notranslate"><span class="pre">IsValid</span></code></a>  ainsi que de l’expression de recherche <a class="reference internal" href="../ref/contrib/gis/geoquerysets.html#std:fieldlookup-isvalid"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">isvalid</span></code></a> a été ajoutée.</li>
</ul>
</div>
<div class="section" id="s-django-contrib-postgres">
<span id="django-contrib-postgres"></span><h4><a class="reference internal" href="../ref/contrib/postgres/index.html#module-django.contrib.postgres" title="django.contrib.postgres: PostgreSQL-specific fields and features"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.postgres</span></code></a><a class="headerlink" href="#django-contrib-postgres" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Le nouveau paramètre <code class="docutils literal notranslate"><span class="pre">distinct</span></code> de <a class="reference internal" href="../ref/contrib/postgres/aggregates.html#django.contrib.postgres.aggregates.StringAgg" title="django.contrib.postgres.aggregates.StringAgg"><code class="xref py py-class docutils literal notranslate"><span class="pre">StringAgg</span></code></a> détermine si les valeurs concaténées seront distinctes.</li>
<li>Les nouvelles classes <a class="reference internal" href="../ref/contrib/postgres/indexes.html#django.contrib.postgres.indexes.GinIndex" title="django.contrib.postgres.indexes.GinIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">GinIndex</span></code></a> et <a class="reference internal" href="../ref/contrib/postgres/indexes.html#django.contrib.postgres.indexes.BrinIndex" title="django.contrib.postgres.indexes.BrinIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">BrinIndex</span></code></a> permettent de créer des index de type <code class="docutils literal notranslate"><span class="pre">GIN</span></code> et <code class="docutils literal notranslate"><span class="pre">BRIN</span></code> dans la base de données.</li>
<li><a class="reference internal" href="../ref/contrib/postgres/fields.html#django.contrib.postgres.fields.JSONField" title="django.contrib.postgres.fields.JSONField"><code class="xref py py-class docutils literal notranslate"><span class="pre">JSONField</span></code></a> accepte un nouveau paramètre <code class="docutils literal notranslate"><span class="pre">encoder</span></code> pour définir une classe personnalisée se chargeant du codage des types de données non pris en charge par le codeur standard.</li>
<li>La classe mixin <a class="reference internal" href="../ref/contrib/postgres/fields.html#django.contrib.postgres.fields.CIText" title="django.contrib.postgres.fields.CIText"><code class="xref py py-class docutils literal notranslate"><span class="pre">CIText</span></code></a> et l’opération de migration <a class="reference internal" href="../ref/contrib/postgres/operations.html#django.contrib.postgres.operations.CITextExtension" title="django.contrib.postgres.operations.CITextExtension"><code class="xref py py-class docutils literal notranslate"><span class="pre">CITextExtension</span></code></a> sont nouvelles et permettent d’exploiter l’extension <code class="docutils literal notranslate"><span class="pre">citext</span></code> de PostgreSQL dans l’optique de requêtes insensibles à la casse. Trois champs sont fournis&nbsp;: <a class="reference internal" href="../ref/contrib/postgres/fields.html#django.contrib.postgres.fields.CICharField" title="django.contrib.postgres.fields.CICharField"><code class="xref py py-class docutils literal notranslate"><span class="pre">CICharField</span></code></a>, <a class="reference internal" href="../ref/contrib/postgres/fields.html#django.contrib.postgres.fields.CIEmailField" title="django.contrib.postgres.fields.CIEmailField"><code class="xref py py-class docutils literal notranslate"><span class="pre">CIEmailField</span></code></a> et <a class="reference internal" href="../ref/contrib/postgres/fields.html#django.contrib.postgres.fields.CITextField" title="django.contrib.postgres.fields.CITextField"><code class="xref py py-class docutils literal notranslate"><span class="pre">CITextField</span></code></a>.</li>
<li>La nouvelle fonction <a class="reference internal" href="../ref/contrib/postgres/aggregates.html#django.contrib.postgres.aggregates.JSONBAgg" title="django.contrib.postgres.aggregates.JSONBAgg"><code class="xref py py-class docutils literal notranslate"><span class="pre">JSONBAgg</span></code></a> permer d’agréger des valeurs sous forme de tableau JSON.</li>
<li>Le champ de modèle <a class="reference internal" href="../ref/contrib/postgres/fields.html#django.contrib.postgres.fields.HStoreField" title="django.contrib.postgres.fields.HStoreField"><code class="xref py py-class docutils literal notranslate"><span class="pre">HStoreField</span></code></a> et le champ de formulaire <a class="reference internal" href="../ref/contrib/postgres/forms.html#django.contrib.postgres.forms.HStoreField" title="django.contrib.postgres.forms.HStoreField"><code class="xref py py-class docutils literal notranslate"><span class="pre">HStoreField</span></code></a> permettent de stocker des valeurs nulles.</li>
</ul>
</div>
<div class="section" id="s-cache">
<span id="cache"></span><h4>Cache<a class="headerlink" href="#cache" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Les moteurs Memcached transmettent dorénavant les contenus de <a class="reference internal" href="../ref/settings.html#std:setting-CACHES-OPTIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">OPTIONS</span></code></a> comme paramètres nommés aux constructeurs clients, permettant un contrôle plus fin du comportement du client. Voir la documentation des <a class="reference internal" href="../topics/cache.html#cache-arguments"><span class="std std-ref">paramètres de cache</span></a> pour des exemples.</li>
<li>Les moteurs memcached autorisent dorénavant la définition de plusieurs serveurs sous forme de chaîne séparée par des virgules dans <a class="reference internal" href="../ref/settings.html#std:setting-CACHES-LOCATION"><code class="xref std std-setting docutils literal notranslate"><span class="pre">LOCATION</span></code></a>, par commodité avec des service tiers qui utilisent de telles chaînes dans des variables d’environnement.</li>
</ul>
</div>
<div class="section" id="s-csrf">
<span id="csrf"></span><h4>CSRF<a class="headerlink" href="#csrf" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Le réglage <a class="reference internal" href="../ref/settings.html#std:setting-CSRF_USE_SESSIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">CSRF_USE_SESSIONS</span></code></a> a été ajouté pour permettre de stocker le jeton CSRF dans la session des utilisateurs plutôt que dans un cookie.</li>
</ul>
</div>
<div class="section" id="s-database-backends">
<span id="database-backends"></span><h4>Moteurs de base de données<a class="headerlink" href="#database-backends" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Le paramètre <code class="docutils literal notranslate"><span class="pre">skip_locked</span></code> a été ajouté à <a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.select_for_update" title="django.db.models.query.QuerySet.select_for_update"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.select_for_update()</span></code></a> avec PostgreSQL 9.5+ et Oracle pour exécuter des requêtes avec <code class="docutils literal notranslate"><span class="pre">FOR</span> <span class="pre">UPDATE</span> <span class="pre">SKIP</span> <span class="pre">LOCKED</span></code>.</li>
<li>Le réglage <a class="reference internal" href="../ref/settings.html#std:setting-TEST_TEMPLATE"><code class="xref std std-setting docutils literal notranslate"><span class="pre">TEST['TEMPLATE']</span></code></a> a été ajouté pour permettre aux utilisateurs PostgreSQL d’indiquer un modèle à partir duquel la base de données de test est créée.</li>
<li><a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.iterator" title="django.db.models.query.QuerySet.iterator"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.iterator()</span></code></a> utilise dorénavant des <a class="reference external" href="https://www.psycopg.org/docs/usage.html#server-side-cursors" title="(disponible dans Psycopg v2.8)"><span class="xref std std-ref">curseurs côté serveur</span></a> avec PostgreSQL. Cette fonctionnalité transfère une partie de la charge mémoire (utilisée pour contenir les résultats de requête) vers la base de données et peut augmenter l’utilisation mémoire de la base de données.</li>
<li>L’option <code class="docutils literal notranslate"><span class="pre">'isolation_level'</span></code> est maintenant prise en charge pour MySQL dans <a class="reference internal" href="../ref/settings.html#std:setting-OPTIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">OPTIONS</span></code></a> afin de pourvoir définir le <a class="reference internal" href="../ref/databases.html#mysql-isolation-level"><span class="std std-ref">niveau d’isolation des transactions</span></a>. Pour éviter de possibles pertes de données, il est recommandé de dévier du niveau par défaut de MySQL, «&nbsp;repeatable read&nbsp;» et de passer à «&nbsp;read committed&nbsp;».</li>
<li>La prise en charge de <code class="docutils literal notranslate"><span class="pre">cx_Oracle</span></code> 5.3 a été ajoutée.</li>
</ul>
</div>
<div class="section" id="s-email">
<span id="email"></span><h4>Email<a class="headerlink" href="#email" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Le réglage <a class="reference internal" href="../ref/settings.html#std:setting-EMAIL_USE_LOCALTIME"><code class="xref std std-setting docutils literal notranslate"><span class="pre">EMAIL_USE_LOCALTIME</span></code></a> a été ajouté pour permettre d’envoyer les en-têtes SMTP de date dans le fuseau horaire local plutôt qu’en temps UTC.</li>
<li><code class="docutils literal notranslate"><span class="pre">EmailMessage.attach()</span></code> and <code class="docutils literal notranslate"><span class="pre">attach_file()</span></code> now fall back to MIME type
<em class="mimetype">application/octet-stream</em> when binary content that can’t be
decoded as UTF-8 is specified for a <em class="mimetype">text/*</em> attachment.</li>
</ul>
</div>
<div class="section" id="s-file-storage">
<span id="file-storage"></span><h4>Stockage de fichier<a class="headerlink" href="#file-storage" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Pour le rendre encapsulable dans <a class="reference external" href="https://docs.python.org/3/library/io.html#io.TextIOWrapper" title="(disponible dans Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">io.TextIOWrapper</span></code></a>, <a class="reference internal" href="../ref/files/file.html#django.core.files.File" title="django.core.files.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code></a> possède dorénavant les méthodes <code class="docutils literal notranslate"><span class="pre">readable()</span></code>, <code class="docutils literal notranslate"><span class="pre">writable()</span></code> et <code class="docutils literal notranslate"><span class="pre">seekable()</span></code>.</li>
</ul>
</div>
<div class="section" id="s-forms">
<span id="forms"></span><h4>Formulaires<a class="headerlink" href="#forms" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>The new <code class="docutils literal notranslate"><span class="pre">empty_value</span></code> attribute on <a class="reference internal" href="../ref/forms/fields.html#django.forms.CharField" title="django.forms.CharField"><code class="xref py py-class docutils literal notranslate"><span class="pre">CharField</span></code></a>,
<a class="reference internal" href="../ref/forms/fields.html#django.forms.EmailField" title="django.forms.EmailField"><code class="xref py py-class docutils literal notranslate"><span class="pre">EmailField</span></code></a>, <a class="reference internal" href="../ref/forms/fields.html#django.forms.RegexField" title="django.forms.RegexField"><code class="xref py py-class docutils literal notranslate"><span class="pre">RegexField</span></code></a>,
<a class="reference internal" href="../ref/forms/fields.html#django.forms.SlugField" title="django.forms.SlugField"><code class="xref py py-class docutils literal notranslate"><span class="pre">SlugField</span></code></a>, and <a class="reference internal" href="../ref/forms/fields.html#django.forms.URLField" title="django.forms.URLField"><code class="xref py py-class docutils literal notranslate"><span class="pre">URLField</span></code></a> allows
specifying the Python value to use to represent «&nbsp;empty&nbsp;».</li>
<li>La nouvelle méthode <a class="reference internal" href="../ref/forms/api.html#django.forms.Form.get_initial_for_field" title="django.forms.Form.get_initial_for_field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Form.get_initial_for_field()</span></code></a> renvoie la donnée initiale d’un champ de formulaire.</li>
</ul>
</div>
<div class="section" id="s-internationalization">
<span id="internationalization"></span><h4>Internationalisation<a class="headerlink" href="#internationalization" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>La mise en forme des nombres et le réglage <a class="reference internal" href="../ref/settings.html#std:setting-NUMBER_GROUPING"><code class="xref std std-setting docutils literal notranslate"><span class="pre">NUMBER_GROUPING</span></code></a> prennent en charge le groupement des chiffres non uniformes.</li>
</ul>
</div>
<div class="section" id="s-management-commands">
<span id="management-commands"></span><h4>Commandes d’administration<a class="headerlink" href="#management-commands" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>La nouvelle option <a class="reference internal" href="../ref/django-admin.html#cmdoption-loaddata-exclude"><code class="xref std std-option docutils literal notranslate"><span class="pre">loaddata</span> <span class="pre">--exclude</span></code></a> permet d’exclure des modèles et des applications lors du chargement de données par des instantanés.</li>
<li>La nouvelle option <a class="reference internal" href="../ref/django-admin.html#cmdoption-diffsettings-default"><code class="xref std std-option docutils literal notranslate"><span class="pre">diffsettings</span> <span class="pre">--default</span></code></a> permet de définir un module de réglage autre que celui de Django par défaut pour la comparaison.</li>
<li>Les paramètres <code class="docutils literal notranslate"><span class="pre">app_label</span></code> limitent dorénavant la sortie de <a class="reference internal" href="../ref/django-admin.html#cmdoption-showmigrations-plan"><code class="xref std std-option docutils literal notranslate"><span class="pre">showmigrations</span> <span class="pre">--plan</span></code></a>.</li>
</ul>
</div>
<div class="section" id="s-migrations">
<span id="migrations"></span><h4>Migrations<a class="headerlink" href="#migrations" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>La prise en charge de la sérialisation d’objets <code class="docutils literal notranslate"><span class="pre">uuid.UUID</span></code> a été ajoutée.</li>
</ul>
</div>
<div class="section" id="s-models">
<span id="models"></span><h4>Modèles<a class="headerlink" href="#models" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>La prise en charge de valeurs exécutables a été ajoutée dans le paramètre <code class="docutils literal notranslate"><span class="pre">defaults</span></code> de <a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.update_or_create" title="django.db.models.query.QuerySet.update_or_create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.update_or_create()</span></code></a> et <a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.get_or_create" title="django.db.models.query.QuerySet.get_or_create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_or_create()</span></code></a>.</li>
<li><a class="reference internal" href="../ref/models/fields.html#django.db.models.ImageField" title="django.db.models.ImageField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ImageField</span></code></a> now has a default
<a class="reference internal" href="../ref/validators.html#django.core.validators.validate_image_file_extension" title="django.core.validators.validate_image_file_extension"><code class="xref py py-data docutils literal notranslate"><span class="pre">validate_image_file_extension</span></code></a> validator.
(This validator moved to the form field in <a class="reference internal" href="1.11.2.html"><span class="doc">Django 1.11.2</span></a>.)</li>
<li>Added support for time truncation to
<a class="reference internal" href="../ref/models/database-functions.html#django.db.models.functions.Trunc" title="django.db.models.functions.Trunc"><code class="xref py py-class docutils literal notranslate"><span class="pre">Trunc</span></code></a> functions.</li>
<li>Added the <a class="reference internal" href="../ref/models/database-functions.html#django.db.models.functions.ExtractWeek" title="django.db.models.functions.ExtractWeek"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExtractWeek</span></code></a> function to
extract the week from <a class="reference internal" href="../ref/models/fields.html#django.db.models.DateField" title="django.db.models.DateField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateField</span></code></a> and
<a class="reference internal" href="../ref/models/fields.html#django.db.models.DateTimeField" title="django.db.models.DateTimeField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateTimeField</span></code></a> and exposed it through the
<a class="reference internal" href="../ref/models/querysets.html#std:fieldlookup-week"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">week</span></code></a> lookup.</li>
<li>Added the <a class="reference internal" href="../ref/models/database-functions.html#django.db.models.functions.TruncTime" title="django.db.models.functions.TruncTime"><code class="xref py py-class docutils literal notranslate"><span class="pre">TruncTime</span></code></a> function to truncate
<a class="reference internal" href="../ref/models/fields.html#django.db.models.DateTimeField" title="django.db.models.DateTimeField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateTimeField</span></code></a> to its time component and exposed it
through the <a class="reference internal" href="../ref/models/querysets.html#std:fieldlookup-time"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">time</span></code></a> lookup.</li>
<li>Les expressions sont maintenant possibles dans <a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.values" title="django.db.models.query.QuerySet.values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.values()</span></code></a> et <a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.values_list" title="django.db.models.query.QuerySet.values_list"><code class="xref py py-meth docutils literal notranslate"><span class="pre">values_list()</span></code></a>.</li>
<li>La prise en charge d’expressions de requête dans les recherches qui acceptent plusieurs paramètres, telle que <code class="docutils literal notranslate"><span class="pre">range</span></code>, a été ajoutée.</li>
<li>Il est dorénavant possible d’utiliser l’option <code class="docutils literal notranslate"><span class="pre">unique=True</span></code> avec <a class="reference internal" href="../ref/models/fields.html#django.db.models.FileField" title="django.db.models.FileField"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileField</span></code></a>.</li>
<li>Les paramètres <code class="docutils literal notranslate"><span class="pre">nulls_first</span></code> et <code class="docutils literal notranslate"><span class="pre">nulls_last</span></code> ont été ajoutés à <a class="reference internal" href="../ref/models/expressions.html#django.db.models.Expression.asc" title="django.db.models.Expression.asc"><code class="xref py py-class docutils literal notranslate"><span class="pre">Expression.asc()</span></code></a> et <a class="reference internal" href="../ref/models/expressions.html#django.db.models.Expression.desc" title="django.db.models.Expression.desc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">desc()</span></code></a> pour contrôler le tri des valeurs nulles.</li>
<li>Les nouvelles méthodes <code class="docutils literal notranslate"><span class="pre">bitleftshift()</span></code> and <code class="docutils literal notranslate"><span class="pre">bitrightshift()</span></code> de l’expression <code class="docutils literal notranslate"><span class="pre">F</span></code> permettent des <a class="reference internal" href="../topics/db/queries.html#using-f-expressions-in-filters"><span class="std std-ref">opérations de décalage de bit</span></a>.</li>
<li>Les méthodes <a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.union" title="django.db.models.query.QuerySet.union"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.union()</span></code></a>, <a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.intersection" title="django.db.models.query.QuerySet.intersection"><code class="xref py py-meth docutils literal notranslate"><span class="pre">intersection()</span></code></a> et <a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.difference" title="django.db.models.query.QuerySet.difference"><code class="xref py py-meth docutils literal notranslate"><span class="pre">difference()</span></code></a> ont été ajoutées.</li>
</ul>
</div>
<div class="section" id="s-requests-and-responses">
<span id="requests-and-responses"></span><h4>Requêtes et réponses<a class="headerlink" href="#requests-and-responses" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="../ref/request-response.html#django.http.QueryDict.fromkeys" title="django.http.QueryDict.fromkeys"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QueryDict.fromkeys()</span></code></a> a été ajoutée.</li>
<li><a class="reference internal" href="../ref/middleware.html#django.middleware.common.CommonMiddleware" title="django.middleware.common.CommonMiddleware"><code class="xref py py-class docutils literal notranslate"><span class="pre">CommonMiddleware</span></code></a> définit dorénavant l’en-tête <code class="docutils literal notranslate"><span class="pre">Content-Length</span></code> pour les réponses qui ne sont pas de type flux.</li>
<li>Le réglage <a class="reference internal" href="../ref/settings.html#std:setting-SECURE_HSTS_PRELOAD"><code class="xref std std-setting docutils literal notranslate"><span class="pre">SECURE_HSTS_PRELOAD</span></code></a> a été ajouté pour permettre d’ajouter la directive <code class="docutils literal notranslate"><span class="pre">preload</span></code> à l’en-tête <code class="docutils literal notranslate"><span class="pre">Strict-Transport-Security</span></code>.</li>
<li><a class="reference internal" href="../ref/middleware.html#django.middleware.http.ConditionalGetMiddleware" title="django.middleware.http.ConditionalGetMiddleware"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConditionalGetMiddleware</span></code></a> ajoute dorénavant l’en-tête <code class="docutils literal notranslate"><span class="pre">ETag</span></code> aux réponses.</li>
</ul>
</div>
<div class="section" id="s-serialization">
<span id="serialization"></span><h4>Sérialisation<a class="headerlink" href="#serialization" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Le nouvel attribut <code class="docutils literal notranslate"><span class="pre">django.core.serializers.base.Serializer.stream_class</span></code> permet aux sous-classes de personnaliser le flux par défaut.</li>
<li>Le codeur utilisé par le <a class="reference internal" href="../topics/serialization.html#serialization-formats-json"><span class="std std-ref">sérialiseur JSON</span></a> peut dorénavant être personnalisé en passant un paramètre nommé <code class="docutils literal notranslate"><span class="pre">cls</span></code> à la fonction <code class="docutils literal notranslate"><span class="pre">serializers.serialize()</span></code>.</li>
<li><a class="reference internal" href="../topics/serialization.html#django.core.serializers.json.DjangoJSONEncoder" title="django.core.serializers.json.DjangoJSONEncoder"><code class="xref py py-class docutils literal notranslate"><span class="pre">DjangoJSONEncoder</span></code></a> peut dorénavant sérialiser les objets <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(disponible dans Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">timedelta</span></code></a> (utilisé par <a class="reference internal" href="../ref/models/fields.html#django.db.models.DurationField" title="django.db.models.DurationField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DurationField</span></code></a>).</li>
</ul>
</div>
<div class="section" id="s-templates">
<span id="templates"></span><h4>Gabarits<a class="headerlink" href="#templates" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="../ref/utils.html#django.utils.safestring.mark_safe" title="django.utils.safestring.mark_safe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">mark_safe()</span></code></a> peut dorénavant être utilisé comme décorateur.</li>
<li>Le moteur de gabarit <a class="reference internal" href="../topics/templates.html#django.template.backends.jinja2.Jinja2" title="django.template.backends.jinja2.Jinja2"><code class="xref py py-class docutils literal notranslate"><span class="pre">Jinja2</span></code></a> accepte dorénavant des processeurs de contexte en définissant l’option <code class="docutils literal notranslate"><span class="pre">'context_processors'</span></code> dans <a class="reference internal" href="../ref/settings.html#std:setting-TEMPLATES-OPTIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">OPTIONS</span></code></a>.</li>
<li>La balise <a class="reference internal" href="../ref/templates/builtins.html#std:templatetag-regroup"><code class="xref std std-ttag docutils literal notranslate"><span class="pre">regroup</span></code></a> renvoie dorénavant des <code class="docutils literal notranslate"><span class="pre">namedtuple</span></code> au lieu de dictionnaires, ce qui permet de développer directement l’objet groupe dans une boucle, par ex. <code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">for</span> <span class="pre">grouper,</span> <span class="pre">list</span> <span class="pre">in</span> <span class="pre">regrouped</span> <span class="pre">%}</span></code>.</li>
<li>Une balise de gabarit <a class="reference internal" href="../ref/templates/builtins.html#std:templatetag-resetcycle"><code class="xref std std-ttag docutils literal notranslate"><span class="pre">resetcycle</span></code></a> a été ajoutée pour permettre de réinitialiser la séquence de la balise de gabarit <a class="reference internal" href="../ref/templates/builtins.html#std:templatetag-cycle"><code class="xref std std-ttag docutils literal notranslate"><span class="pre">cycle</span></code></a>.</li>
<li>Il est maintenant possible de définir des répertoires spécifiques à un <a class="reference internal" href="../ref/templates/api.html#django.template.loaders.filesystem.Loader" title="django.template.loaders.filesystem.Loader"><code class="xref py py-class docutils literal notranslate"><span class="pre">filesystem.Loader</span></code></a> particulier.</li>
</ul>
</div>
<div class="section" id="s-tests">
<span id="tests"></span><h4>Tests<a class="headerlink" href="#tests" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="../topics/testing/advanced.html#django.test.runner.DiscoverRunner.get_test_runner_kwargs" title="django.test.runner.DiscoverRunner.get_test_runner_kwargs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DiscoverRunner.get_test_runner_kwargs()</span></code></a> a été ajoutée pour permettre de personnaliser les paramètres nommés passés au lanceur de tests.</li>
<li>L’option <a class="reference internal" href="../ref/django-admin.html#cmdoption-test-debug-mode"><code class="xref std std-option docutils literal notranslate"><span class="pre">test</span> <span class="pre">--debug-mode</span></code></a> a été ajoutée pour aider à dépanner les échecs de tests en définissant le réglage <a class="reference internal" href="../ref/settings.html#std:setting-DEBUG"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DEBUG</span></code></a> à <code class="docutils literal notranslate"><span class="pre">True</span></code>.</li>
<li>Les nouvelles fonctions <a class="reference internal" href="../topics/testing/advanced.html#django.test.utils.setup_databases" title="django.test.utils.setup_databases"><code class="xref py py-func docutils literal notranslate"><span class="pre">django.test.utils.setup_databases()</span></code></a> (déplacée de <code class="docutils literal notranslate"><span class="pre">django.test.runner</span></code>) et <a class="reference internal" href="../topics/testing/advanced.html#django.test.utils.teardown_databases" title="django.test.utils.teardown_databases"><code class="xref py py-func docutils literal notranslate"><span class="pre">teardown_databases()</span></code></a> facilitent la construction de ses propres lanceurs de tests.</li>
<li>La prise en charge des sous-tests <a class="reference external" href="https://docs.python.org/3/library/unittest.html#unittest.TestCase.subTest" title="(disponible dans Python v3.9)"><code class="docutils literal notranslate"><span class="pre">unittest.TestCase.subTest()</span></code></a> a été ajoutée lorsque l’option <a class="reference internal" href="../ref/django-admin.html#cmdoption-test-parallel"><code class="xref std std-option docutils literal notranslate"><span class="pre">test</span> <span class="pre">--parallel</span></code></a> est utilisée.</li>
<li><code class="docutils literal notranslate"><span class="pre">DiscoverRunner</span></code> lance maintenant les contrôles système au début du lancement de tests. Surchargez la méthode <a class="reference internal" href="../topics/testing/advanced.html#django.test.runner.DiscoverRunner.run_checks" title="django.test.runner.DiscoverRunner.run_checks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DiscoverRunner.run_checks()</span></code></a> si vous souhaitez désactiver ce comportement.</li>
</ul>
</div>
<div class="section" id="s-validators">
<span id="validators"></span><h4>Validateurs<a class="headerlink" href="#validators" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li>Les nouveaux validateurs <a class="reference internal" href="../ref/validators.html#django.core.validators.FileExtensionValidator" title="django.core.validators.FileExtensionValidator"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileExtensionValidator</span></code></a> et <a class="reference internal" href="../ref/validators.html#django.core.validators.validate_image_file_extension" title="django.core.validators.validate_image_file_extension"><code class="xref py py-data docutils literal notranslate"><span class="pre">validate_image_file_extension</span></code></a> permettent respectivement de valider des extensions de fichier et des fichiers images.</li>
</ul>
</div>
</div>
</div>
<div class="section" id="s-backwards-incompatible-changes-in-1-11">
<span id="s-backwards-incompatible-1-11"></span><span id="backwards-incompatible-changes-in-1-11"></span><span id="backwards-incompatible-1-11"></span><h2>Changements incompatibles avec les anciennes versions dans Django 1.11<a class="headerlink" href="#backwards-incompatible-changes-in-1-11" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="s-id1">
<span id="id1"></span><h3><a class="reference internal" href="../ref/contrib/gis/index.html#module-django.contrib.gis" title="django.contrib.gis: Geographic Information System (GIS) extensions for Django"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.gis</span></code></a><a class="headerlink" href="#id1" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li>Pour simplifier la base de code et parce qu’il est maintenant plus facile de l’installer qu’au moment où <code class="docutils literal notranslate"><span class="pre">contrib.gis</span></code> a été introduit, <a class="reference internal" href="../ref/contrib/gis/install/geolibs.html#gdalbuild"><span class="std std-ref">GDAL</span></a> est dorénavant une dépendance obligatoire de GeoDjango. Dans les versions précédentes, elle n’était requise qu’avec SQLite.</li>
<li><code class="docutils literal notranslate"><span class="pre">contrib.gis.maps</span></code> is removed as it interfaces with a retired version of
the Google Maps API and seems to be unmaintained. If you’re using it,
<a class="reference external" href="https://code.djangoproject.com/ticket/14284">let us know</a>.</li>
<li>L’opérateur d’égalité <code class="docutils literal notranslate"><span class="pre">GEOSGeometry</span></code> compare dorénavant aussi avec le SRID.</li>
<li>Les composants de formulaires basés sur OpenLayers utilisent dorénavant OpenLayers 3. Les gabarits <code class="docutils literal notranslate"><span class="pre">gis/openlayers.html</span></code> et <code class="docutils literal notranslate"><span class="pre">gis/openlayers-osm.html</span></code> ont été mis à jour. Vérifiez votre code si vous héritez de ces composants ou que vous étendez leur gabarit. De plus, les nouveaux composants fonctionnent un peu différemment des anciens. Au lieu de présenter une barre d’outils dans l’affichage, il faut cliquer pour commencer de dessiner, cliquer-glisser pour déplacer la carte et cliquer-glisser un point/arête/angle pour le déplacer.</li>
<li>La prise en charge de SpatiaLite &lt; 4.0 a été abandonnée.</li>
<li>La prise en charge de GDAL 1.7 et 1.8 a été abandonnée.</li>
<li>Les composants de formulaires dans <code class="docutils literal notranslate"><span class="pre">contrib.gis.forms.widgets</span></code> et <code class="docutils literal notranslate"><span class="pre">OpenLayersWidget</span></code> de l’administration utilisent l”<a class="reference internal" href="../ref/forms/renderers.html"><span class="doc">API de rendu de formulaires</span></a> à la place de <code class="docutils literal notranslate"><span class="pre">loader.render_to_string()</span></code>. Si vous utilisez un gabarit de composant personnalisé, vous devez être certain que le moteur de rendu de formulaires puisse le localiser. Par exemple, il est possible d’utiliser le moteur <a class="reference internal" href="../ref/forms/renderers.html#django.forms.renderers.TemplatesSetting" title="django.forms.renderers.TemplatesSetting"><code class="xref py py-class docutils literal notranslate"><span class="pre">TemplatesSetting</span></code></a>.</li>
</ul>
</div>
<div class="section" id="s-django-contrib-staticfiles">
<span id="django-contrib-staticfiles"></span><h3><a class="reference internal" href="../ref/contrib/staticfiles.html#module-django.contrib.staticfiles" title="django.contrib.staticfiles: An app for handling static files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.staticfiles</span></code></a><a class="headerlink" href="#django-contrib-staticfiles" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">collectstatic</span></code> peut maintenant échouer durant le post-traitement avec un stockage de fichiers statiques hachés si une référence croisée existe (par ex. <code class="docutils literal notranslate"><span class="pre">'foo.css'</span></code> référence <code class="docutils literal notranslate"><span class="pre">'bar.css'</span></code> qui lui-même référence <code class="docutils literal notranslate"><span class="pre">'foo.css'</span></code>) ou si la chaîne de fichiers référençant d’autres fichiers est trop profonde pour être résolue en quelques passes. Dans ce dernier cas, augmentez le nombre de passes en définissant <a class="reference internal" href="../ref/contrib/staticfiles.html#django.contrib.staticfiles.storage.ManifestStaticFilesStorage.max_post_process_passes" title="django.contrib.staticfiles.storage.ManifestStaticFilesStorage.max_post_process_passes"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ManifestStaticFilesStorage.max_post_process_passes</span></code></a>.</li>
<li>En utilisant <code class="docutils literal notranslate"><span class="pre">ManifestStaticFilesStorage</span></code>, les fichiers statiques non trouvés dans le manifeste au moment de l’exécution produisent dorénavant une exception <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> au lieu de renvoyer un chemin inchangé. Vous pouvez revenir à l’ancien comportement en définissant <a class="reference internal" href="../ref/contrib/staticfiles.html#django.contrib.staticfiles.storage.ManifestStaticFilesStorage.manifest_strict" title="django.contrib.staticfiles.storage.ManifestStaticFilesStorage.manifest_strict"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ManifestStaticFilesStorage.manifest_strict</span></code></a> à <code class="docutils literal notranslate"><span class="pre">False</span></code>.</li>
</ul>
</div>
<div class="section" id="s-database-backend-api">
<span id="database-backend-api"></span><h3>API de moteur de base de données<a class="headerlink" href="#database-backend-api" title="Lien permanent vers ce titre">¶</a></h3>
<p>Cette section décrit des modifications qui pourraient être nécessaires dans des moteurs de base de données tiers.</p>
<ul class="simple">
<li>La méthode <code class="docutils literal notranslate"><span class="pre">DatabaseOperations.time_trunc_sql()</span></code> a été ajoutée pour gérer la troncature de <code class="docutils literal notranslate"><span class="pre">TimeField</span></code>. Elle accepte des paramètres <code class="docutils literal notranslate"><span class="pre">lookup_type</span></code> et <code class="docutils literal notranslate"><span class="pre">field_name</span></code> et renvoie le code SQL approprié pour tronquer le champ heure <code class="docutils literal notranslate"><span class="pre">field_name</span></code> à un objet heure restreint à la particule demandée. Le paramètre <code class="docutils literal notranslate"><span class="pre">lookup_type</span></code> peut valoir <code class="docutils literal notranslate"><span class="pre">'hour'</span></code>, <code class="docutils literal notranslate"><span class="pre">'minute'</span></code> ou <code class="docutils literal notranslate"><span class="pre">'second'</span></code>.</li>
<li>La méthode <code class="docutils literal notranslate"><span class="pre">DatabaseOperations.datetime_cast_time_sql()</span></code> a été ajoutée pour gérer l’expression de recherche <a class="reference internal" href="../ref/models/querysets.html#std:fieldlookup-time"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">time</span></code></a>. Elle accepte des paramètres <code class="docutils literal notranslate"><span class="pre">field_name</span></code> et <code class="docutils literal notranslate"><span class="pre">tzname</span></code> et renvoie le code SQL approprié pour forcer une valeur date/heure en une valeur heure.</li>
<li>Pour activer la prise en charge de <code class="docutils literal notranslate"><span class="pre">FOR</span> <span class="pre">UPDATE</span> <span class="pre">SKIP</span> <span class="pre">LOCKED</span></code>, définissez <code class="docutils literal notranslate"><span class="pre">DatabaseFeatures.has_select_for_update_skip_locked</span> <span class="pre">=</span> <span class="pre">True</span></code>.</li>
<li>The new <code class="docutils literal notranslate"><span class="pre">DatabaseFeatures.supports_index_column_ordering</span></code> attribute
specifies if a database allows defining ordering for columns in indexes. The
default value is <code class="docutils literal notranslate"><span class="pre">True</span></code> and the <code class="docutils literal notranslate"><span class="pre">DatabaseIntrospection.get_constraints()</span></code>
method should include an <code class="docutils literal notranslate"><span class="pre">'orders'</span></code> key in each of the returned
dictionaries with a list of <code class="docutils literal notranslate"><span class="pre">'ASC'</span></code> and/or <code class="docutils literal notranslate"><span class="pre">'DESC'</span></code> values corresponding
to the ordering of each column in the index.</li>
<li><a class="reference internal" href="../ref/django-admin.html#django-admin-inspectdb"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">inspectdb</span></code></a> n’appelle plus <code class="docutils literal notranslate"><span class="pre">DatabaseIntrospection.get_indexes()</span></code> qui est obsolète. Les moteurs de base de données personnalisés doivent s’assurer que tous les types d’index sont renvoyés par <code class="docutils literal notranslate"><span class="pre">DatabaseIntrospection.get_constraints()</span></code>.</li>
<li>La fonctionnalité <code class="docutils literal notranslate"><span class="pre">ignores_quoted_identifier_case</span></code> a été renommée en <code class="docutils literal notranslate"><span class="pre">ignores_table_name_case</span></code> pour refléter de manière plus précise son usage.</li>
<li>Le paramètre nommé <code class="docutils literal notranslate"><span class="pre">name</span></code> a été ajouté à la méthode <code class="docutils literal notranslate"><span class="pre">DatabaseWrapper.create_cursor(self,</span> <span class="pre">name=None)</span></code> pour permettre l’emploi de curseurs côté serveur pour les moteurs qui les implémentent.</li>
</ul>
</div>
<div class="section" id="s-dropped-support-for-postgresql-9-2-and-postgis-2-0">
<span id="dropped-support-for-postgresql-9-2-and-postgis-2-0"></span><h3>Abandon de la prise en charge de PostgreSQL 9.2 et PostGIS 2.0<a class="headerlink" href="#dropped-support-for-postgresql-9-2-and-postgis-2-0" title="Lien permanent vers ce titre">¶</a></h3>
<p>La prise en charge de PostgreSQL 9.2 par le projet amont se termine en septembre 2017. Par conséquent, Django 1.11 a défini la version 9.3 comme la version minimum de PostgreSQL officiellement prise en charge.</p>
<p>La prise en charge de PostGIS 2.0 a également été abandonnée car PostgreSQL 9.2 est la dernière version la prenant en charge.</p>
<p>De plus, la version minimum de psycopg2 prise en charge est passée de 2.4.5 à 2.5.4.</p>
</div>
<div class="section" id="s-liveservertestcase-binds-to-port-zero">
<span id="s-liveservertestcase-port-zero-change"></span><span id="liveservertestcase-binds-to-port-zero"></span><span id="liveservertestcase-port-zero-change"></span><h3><code class="docutils literal notranslate"><span class="pre">LiveServerTestCase</span></code> se lie au port zéro<a class="headerlink" href="#liveservertestcase-binds-to-port-zero" title="Lien permanent vers ce titre">¶</a></h3>
<p>Plutôt que de considérer un intervalle de ports et de les passer en boucle jusqu’à ce qu’un soit libre, <code class="docutils literal notranslate"><span class="pre">LiveServerTestCase</span></code> se lie au port zéro et se fie au système d’exploitation pour attribuer un port libre. La variable d’environnement <code class="docutils literal notranslate"><span class="pre">DJANGO_LIVE_TEST_SERVER_ADDRESS</span></code> n’est plus utilisée et par conséquent, l’option <code class="docutils literal notranslate"><span class="pre">manage.py</span> <span class="pre">test</span> <span class="pre">--liveserver</span></code> a été supprimée.</p>
<p>If you need to bind <code class="docutils literal notranslate"><span class="pre">LiveServerTestCase</span></code> to a specific port, use the <code class="docutils literal notranslate"><span class="pre">port</span></code>
attribute added in Django 1.11.2.</p>
</div>
<div class="section" id="s-protection-against-insecure-redirects-in-django-contrib-auth-and-i18n-views">
<span id="protection-against-insecure-redirects-in-django-contrib-auth-and-i18n-views"></span><h3>Protection contre les redirections non sûres dans les vues <a class="reference internal" href="../topics/auth/index.html#module-django.contrib.auth" title="django.contrib.auth: Django's authentication framework."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.auth</span></code></a> et <code class="docutils literal notranslate"><span class="pre">i18n</span></code><a class="headerlink" href="#protection-against-insecure-redirects-in-django-contrib-auth-and-i18n-views" title="Lien permanent vers ce titre">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">LoginView</span></code>, <code class="docutils literal notranslate"><span class="pre">LogoutView</span></code> (ainsi que leurs équivalents obsolètes basés sur des fonctions) et <a class="reference internal" href="../topics/i18n/translation.html#django.views.i18n.set_language" title="django.views.i18n.set_language"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_language()</span></code></a> protègent les utilisateurs de redirections vers des URL «&nbsp;suivantes&nbsp;» non HTTPS lorsque l’application tourne sous HTTPS.</p>
</div>
<div class="section" id="s-queryset-get-or-create-and-update-or-create-validate-arguments">
<span id="queryset-get-or-create-and-update-or-create-validate-arguments"></span><h3><code class="docutils literal notranslate"><span class="pre">QuerySet.get_or_create()</span></code> et <code class="docutils literal notranslate"><span class="pre">update_or_create()</span></code> valident leurs paramètres<a class="headerlink" href="#queryset-get-or-create-and-update-or-create-validate-arguments" title="Lien permanent vers ce titre">¶</a></h3>
<p>Pour éviter que des coquilles soient silencieusement ignorées, <a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.get_or_create" title="django.db.models.query.QuerySet.get_or_create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_or_create()</span></code></a> et <a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.update_or_create" title="django.db.models.query.QuerySet.update_or_create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">update_or_create()</span></code></a> vérifient que leurs paramètres soient des champs de modèle. Cela devrait être rétrocompatible pour autant que cela ne révèle pas une anomalie dans votre projet.</p>
</div>
<div class="section" id="s-pytz-is-a-required-dependency-and-support-for-settings-time-zone-none-is-removed">
<span id="pytz-is-a-required-dependency-and-support-for-settings-time-zone-none-is-removed"></span><h3><code class="docutils literal notranslate"><span class="pre">pytz</span></code> est une dépendance obligatoire et la prise en charge de <code class="docutils literal notranslate"><span class="pre">settings.TIME_ZONE</span> <span class="pre">=</span> <span class="pre">None</span></code> est supprimée<a class="headerlink" href="#pytz-is-a-required-dependency-and-support-for-settings-time-zone-none-is-removed" title="Lien permanent vers ce titre">¶</a></h3>
<p>Pour simplifier la gestion des fuseaux horaires par Django, <code class="docutils literal notranslate"><span class="pre">pytz</span></code> est dorénavant une dépendance obligatoire. Cette bibliothèque est automatiquement installée en même temps que Django.</p>
<p>Support for <code class="docutils literal notranslate"><span class="pre">settings.TIME_ZONE</span> <span class="pre">=</span> <span class="pre">None</span></code> is removed as the behavior isn’t
commonly used and is questionably useful. If you want to automatically detect
the timezone based on the system timezone, you can use <a class="reference external" href="https://pypi.org/project/tzlocal/">tzlocal</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tzlocal</span> <span class="k">import</span> <span class="n">get_localzone</span>

<span class="n">TIME_ZONE</span> <span class="o">=</span> <span class="n">get_localzone</span><span class="p">()</span><span class="o">.</span><span class="n">zone</span>
</pre></div>
</div>
<p>Cela fonctionne comme pour <code class="docutils literal notranslate"><span class="pre">settings.TIME_ZONE</span> <span class="pre">=</span> <span class="pre">None</span></code> sauf que ça définit aussi <code class="docutils literal notranslate"><span class="pre">os.environ['TZ']</span></code>. <a class="reference external" href="https://groups.google.com/d/topic/django-developers/OAV3FChfuPM/discussion">Faites nous savoir</a> s’il existe d’après vous une situation où il n’est pas possible d’adapter votre code pour définir un fuseau <code class="docutils literal notranslate"><span class="pre">TIME_ZONE</span></code>.</p>
</div>
<div class="section" id="s-html-changes-in-admin-templates">
<span id="html-changes-in-admin-templates"></span><h3>Changements HTML dans les gabarits d’administration<a class="headerlink" href="#html-changes-in-admin-templates" title="Lien permanent vers ce titre">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">&lt;p</span> <span class="pre">class=&quot;help&quot;&gt;</span></code> est remplacé par une balise <code class="docutils literal notranslate"><span class="pre">&lt;div&gt;</span></code> pour permettre d’inclure des listes dans le texte d’aide.</p>
<p>Les champs en lecture seule sont enveloppés par <code class="docutils literal notranslate"><span class="pre">&lt;div</span> <span class="pre">class=&quot;readonly&quot;&gt;...&lt;/div&gt;</span></code> au lieu de <code class="docutils literal notranslate"><span class="pre">&lt;p&gt;...&lt;/p&gt;</span></code> pour permettre d’inclure tout code HTML dans le contenu du champ.</p>
</div>
<div class="section" id="s-changes-due-to-the-introduction-of-template-based-widget-rendering">
<span id="s-template-widget-incompatibilities-1-11"></span><span id="changes-due-to-the-introduction-of-template-based-widget-rendering"></span><span id="template-widget-incompatibilities-1-11"></span><h3>Changements dus à l’introduction du rendu des composants HTML sur la base de gabarits<a class="headerlink" href="#changes-due-to-the-introduction-of-template-based-widget-rendering" title="Lien permanent vers ce titre">¶</a></h3>
<p>Certaines classes non documentées dans <code class="docutils literal notranslate"><span class="pre">django.forms.widgets</span></code> sont supprimées&nbsp;:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">SubWidget</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">RendererMixin</span></code>, <code class="docutils literal notranslate"><span class="pre">ChoiceFieldRenderer</span></code>, <code class="docutils literal notranslate"><span class="pre">RadioFieldRenderer</span></code>,
<code class="docutils literal notranslate"><span class="pre">CheckboxFieldRenderer</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">ChoiceInput</span></code>, <code class="docutils literal notranslate"><span class="pre">RadioChoiceInput</span></code>, <code class="docutils literal notranslate"><span class="pre">CheckboxChoiceInput</span></code></li>
</ul>
<p>The undocumented <code class="docutils literal notranslate"><span class="pre">Select.render_option()</span></code> method is removed.</p>
<p>La méthode <code class="docutils literal notranslate"><span class="pre">Widget.format_output()</span></code> est supprimée. Utilisez à la place un gabarit de composant personnalisé.</p>
<p>Certaines valeurs de composants, telles que les options <code class="docutils literal notranslate"><span class="pre">&lt;select&gt;</span></code> sont dorénavant régionalisées quand <code class="docutils literal notranslate"><span class="pre">settings.USE_L10N=True</span></code>. Vous pouvez revenir à l’ancien comportement avec des gabarits de composants personnalisés utilisant la balise de gabarit <a class="reference internal" href="../topics/i18n/formatting.html#std:templatetag-localize"><code class="xref std std-ttag docutils literal notranslate"><span class="pre">localize</span></code></a> afin de désactiver la régionalisation.</p>
</div>
<div class="section" id="s-django-template-backends-django-template-render-prohibits-non-dict-context">
<span id="django-template-backends-django-template-render-prohibits-non-dict-context"></span><h3><code class="docutils literal notranslate"><span class="pre">django.template.backends.django.Template.render()</span></code> interdit les contextes non dictionnaires<a class="headerlink" href="#django-template-backends-django-template-render-prohibits-non-dict-context" title="Lien permanent vers ce titre">¶</a></h3>
<p>Par compatibilité avec les configurations ayant plusieurs moteurs de gabarits, <code class="docutils literal notranslate"><span class="pre">django.template.backends.django.Template.render()</span></code> (renvoyé par les API de chargement de gabarit de haut niveau comme par <code class="docutils literal notranslate"><span class="pre">loader.get_template()</span></code>) doit recevoir un dictionnaire comme contexte plutôt que des classes  <code class="docutils literal notranslate"><span class="pre">Context</span></code> ou <code class="docutils literal notranslate"><span class="pre">RequestContext</span></code>. Si vous transmettiez l’une de ces classes, transmettez plutôt un dictionnaire, ce qui reste compatible avec les anciennes versions de Django.</p>
</div>
<div class="section" id="s-model-state-changes-in-migration-operations">
<span id="model-state-changes-in-migration-operations"></span><h3>Modifications des états de modèles dans les opérations de migration<a class="headerlink" href="#model-state-changes-in-migration-operations" title="Lien permanent vers ce titre">¶</a></h3>
<p>Pour améliorer la rapidité d’application des migrations, le rendu des modèles liés est différé jusqu’à l’opération qui doit les utiliser (par ex. <code class="docutils literal notranslate"><span class="pre">RunPython</span></code>). Si vous avez une opération personnalisée qui fonctionne avec des classes ou instances de modèles à partir du paramètre <code class="docutils literal notranslate"><span class="pre">from_state</span></code> dans <code class="docutils literal notranslate"><span class="pre">database_forwards()</span></code> ou <code class="docutils literal notranslate"><span class="pre">database_backwards()</span></code>, il faut produire les états de modèles en utilisant la méthode <code class="docutils literal notranslate"><span class="pre">clear_delayed_apps_cache()</span></code> comme expliqué dans <a class="reference internal" href="../ref/migration-operations.html#writing-your-own-migration-operation"><span class="std std-ref">écrire ses propres opérations de migration</span></a>.</p>
</div>
<div class="section" id="s-server-side-cursors-on-postgresql">
<span id="server-side-cursors-on-postgresql"></span><h3>Server-side cursors on PostgreSQL<a class="headerlink" href="#server-side-cursors-on-postgresql" title="Lien permanent vers ce titre">¶</a></h3>
<p>The change to make <a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.iterator" title="django.db.models.query.QuerySet.iterator"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.iterator()</span></code></a> use server-side cursors on
PostgreSQL prevents running Django with PgBouncer in transaction pooling mode.
To reallow that, use the <a class="reference internal" href="../ref/settings.html#std:setting-DATABASE-DISABLE_SERVER_SIDE_CURSORS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DISABLE_SERVER_SIDE_CURSORS</span></code></a> setting (added in Django 1.11.1) in
<a class="reference internal" href="../ref/settings.html#std:setting-DATABASES"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DATABASES</span></code></a>.</p>
<p>See <a class="reference internal" href="../ref/databases.html#transaction-pooling-server-side-cursors"><span class="std std-ref">Transactions groupées et curseurs côté serveur</span></a> for more discussion.</p>
</div>
<div class="section" id="s-miscellaneous">
<span id="miscellaneous"></span><h3>Divers<a class="headerlink" href="#miscellaneous" title="Lien permanent vers ce titre">¶</a></h3>
<ul>
<li><p class="first">Si aucun élément d’un flux ne possède d’attribut <code class="docutils literal notranslate"><span class="pre">pubdate</span></code> ou <code class="docutils literal notranslate"><span class="pre">updateddate</span></code>, <a class="reference internal" href="../ref/utils.html#django.utils.feedgenerator.SyndicationFeed.latest_post_date" title="django.utils.feedgenerator.SyndicationFeed.latest_post_date"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SyndicationFeed.latest_post_date()</span></code></a> renvoie dorénavant la date/heure actuelle en UTC au lieu d’une date/heure naïve sans fuseau horaire.</p>
</li>
<li><p class="first">Les échecs CSRF sont journalisés dans le journaliseur <code class="docutils literal notranslate"><span class="pre">django.security.csrf</span></code> au lieu de <code class="docutils literal notranslate"><span class="pre">django.request</span></code>.</p>
</li>
<li><p class="first">La validation <a class="reference internal" href="../ref/settings.html#std:setting-ALLOWED_HOSTS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">ALLOWED_HOSTS</span></code></a> n’est plus désactivée lors du lancement des tests. Si votre application inclut des tests avec des noms d’hôte personnalisés, vous devez inclure ces noms dans <a class="reference internal" href="../ref/settings.html#std:setting-ALLOWED_HOSTS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">ALLOWED_HOSTS</span></code></a>. Voir <a class="reference internal" href="../topics/testing/advanced.html#topics-testing-advanced-multiple-hosts"><span class="std std-ref">Tests avec plusieurs noms d’hôtes</span></a>.</p>
</li>
<li><p class="first">L’utilisation d’un identifiant de clé étrangère (par ex. <code class="docutils literal notranslate"><span class="pre">'field_id'</span></code>) dans <code class="docutils literal notranslate"><span class="pre">ModelAdmin.list_display</span></code> affiche l’ID de l’objet lié. Enlevez le suffixe <code class="docutils literal notranslate"><span class="pre">_id</span></code> si vous souhaitez l’ancien comportement de la représentation textuelle de l’objet.</p>
</li>
<li><p class="first">Dans les formulaires de modèles, <a class="reference internal" href="../ref/models/fields.html#django.db.models.CharField" title="django.db.models.CharField"><code class="xref py py-class docutils literal notranslate"><span class="pre">CharField</span></code></a> avec <code class="docutils literal notranslate"><span class="pre">null=True</span></code> enregistre dorénavant des valeurs <code class="docutils literal notranslate"><span class="pre">NULL</span></code> lors de saisies vierges au lieu de chaînes vides.</p>
</li>
<li><p class="first">Avec Oracle, <a class="reference internal" href="../ref/models/instances.html#django.db.models.Model.validate_unique" title="django.db.models.Model.validate_unique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Model.validate_unique()</span></code></a> ne vérifie plus l’unicité des chaînes vides dans la mesure où la base de données interprète la valeur comme <code class="docutils literal notranslate"><span class="pre">NULL</span></code>.</p>
</li>
<li><p class="first">Si vous héritez de <a class="reference internal" href="../topics/auth/customizing.html#django.contrib.auth.models.AbstractUser" title="django.contrib.auth.models.AbstractUser"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractUser</span></code></a> et que vous surchargez <code class="docutils literal notranslate"><span class="pre">clean()</span></code>, assurez-vous d’appeler <code class="docutils literal notranslate"><span class="pre">super()</span></code>. <a class="reference internal" href="../topics/auth/customizing.html#django.contrib.auth.models.BaseUserManager.normalize_email" title="django.contrib.auth.models.BaseUserManager.normalize_email"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseUserManager.normalize_email()</span></code></a> est appelée dans une nouvelle méthode <a class="reference internal" href="../topics/auth/customizing.html#django.contrib.auth.models.AbstractUser.clean" title="django.contrib.auth.models.AbstractUser.clean"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AbstractUser.clean()</span></code></a> afin que la normalisation soit appliquée dans des situations comme la validation des modèles de formulaires.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">EmailField</span></code> et <code class="docutils literal notranslate"><span class="pre">URLField</span></code> n’acceptent plus le paramètre nommé <code class="docutils literal notranslate"><span class="pre">strip</span></code>. Il a été enlevé car il n’a aucun effet dans les anciennes versions de Django dans la mesure où ces champs enlèvent systématiquement les espaces de début et de fin.</p>
</li>
<li><p class="first">Les attributs <code class="docutils literal notranslate"><span class="pre">checked</span></code> et <code class="docutils literal notranslate"><span class="pre">selected</span></code> produits par les composants de formulaires utilisent dorénavant la syntaxe booléenne de HTML 5 au lieu de la syntaxe <code class="docutils literal notranslate"><span class="pre">checked=&quot;checked&quot;</span></code> et <code class="docutils literal notranslate"><span class="pre">selected='selected'</span></code> de XHTML.</p>
</li>
<li><p class="first"><a class="reference internal" href="../ref/models/relations.html#django.db.models.fields.related.RelatedManager.add" title="django.db.models.fields.related.RelatedManager.add"><code class="xref py py-meth docutils literal notranslate"><span class="pre">RelatedManager.add()</span></code></a>, <a class="reference internal" href="../ref/models/relations.html#django.db.models.fields.related.RelatedManager.remove" title="django.db.models.fields.related.RelatedManager.remove"><code class="xref py py-meth docutils literal notranslate"><span class="pre">remove()</span></code></a>, <a class="reference internal" href="../ref/models/relations.html#django.db.models.fields.related.RelatedManager.clear" title="django.db.models.fields.related.RelatedManager.clear"><code class="xref py py-meth docutils literal notranslate"><span class="pre">clear()</span></code></a> et <a class="reference internal" href="../ref/models/relations.html#django.db.models.fields.related.RelatedManager.set" title="django.db.models.fields.related.RelatedManager.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set()</span></code></a> effacent dorénavant le cache <code class="docutils literal notranslate"><span class="pre">prefetch_related()</span></code>.</p>
</li>
<li><p class="first">Pour éviter la perte possible de réglages enregistrés, <a class="reference internal" href="../topics/testing/advanced.html#django.test.utils.setup_test_environment" title="django.test.utils.setup_test_environment"><code class="xref py py-func docutils literal notranslate"><span class="pre">setup_test_environment()</span></code></a> génère dorénavant une exception si elle est appelée une seconde fois avant d’appeler <a class="reference internal" href="../topics/testing/advanced.html#django.test.utils.teardown_test_environment" title="django.test.utils.teardown_test_environment"><code class="xref py py-func docutils literal notranslate"><span class="pre">teardown_test_environment()</span></code></a>.</p>
</li>
<li><p class="first">L’alias non documenté <code class="docutils literal notranslate"><span class="pre">DateTimeAwareJSONEncoder</span></code> de <a class="reference internal" href="../topics/serialization.html#django.core.serializers.json.DjangoJSONEncoder" title="django.core.serializers.json.DjangoJSONEncoder"><code class="xref py py-class docutils literal notranslate"><span class="pre">DjangoJSONEncoder</span></code></a> (renommé dans Django 1.0) a été supprimé.</p>
</li>
<li><p class="first">The <a class="reference internal" href="../ref/templates/api.html#django.template.loaders.cached.Loader" title="django.template.loaders.cached.Loader"><code class="xref py py-class docutils literal notranslate"><span class="pre">cached</span> <span class="pre">template</span> <span class="pre">loader</span></code></a>
is now enabled if <a class="reference internal" href="../ref/settings.html#std:setting-TEMPLATES-OPTIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">OPTIONS['loaders']</span></code></a> isn’t
specified and <a class="reference internal" href="../ref/settings.html#std:setting-TEMPLATES-OPTIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">OPTIONS['debug']</span></code></a> is <code class="docutils literal notranslate"><span class="pre">False</span></code>
(the latter option defaults to the value of <a class="reference internal" href="../ref/settings.html#std:setting-DEBUG"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DEBUG</span></code></a>). This could
be backwards-incompatible if you have some <a class="reference internal" href="../howto/custom-template-tags.html#template-tag-thread-safety"><span class="std std-ref">template tags that aren’t
thread safe</span></a>.</p>
</li>
<li><p class="first">L’invitation à supprimer les types de contenus périmés n’intervient plus après le lancement de la commande <code class="docutils literal notranslate"><span class="pre">migrate</span></code>. Utilisez plutôt la nouvelle commande <a class="reference internal" href="../ref/django-admin.html#django-admin-remove_stale_contenttypes"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">remove_stale_contenttypes</span></code></a>.</p>
</li>
<li><p class="first">Le composant de formulaire d’administration pour <code class="docutils literal notranslate"><span class="pre">IntegerField</span></code> utilise <code class="docutils literal notranslate"><span class="pre">type=&quot;number&quot;</span></code> au lieu de <code class="docutils literal notranslate"><span class="pre">type=&quot;text&quot;</span></code>.</p>
</li>
<li><p class="first">Les en-têtes HTTP conditionnels sont dorénavant analysés et comparés en accord avec la spécification des requêtes conditionnelles <span class="target" id="index-6"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc7232.html"><strong>RFC 7232</strong></a> plutôt que l’ancienne <span class="target" id="index-7"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2616.html"><strong>RFC 2616</strong></a>.</p>
</li>
<li><p class="first"><a class="reference internal" href="../ref/utils.html#django.utils.cache.patch_response_headers" title="django.utils.cache.patch_response_headers"><code class="xref py py-func docutils literal notranslate"><span class="pre">patch_response_headers()</span></code></a> n’ajoute plus d’en-tête <code class="docutils literal notranslate"><span class="pre">Last-Modified</span></code>. En accord avec la <span class="target" id="index-8"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc7234.html#section-4.2.2"><strong>RFC 7234#section-4.2.2</strong></a>, cet en-tête est inutile lorsque d’autres en-têtes de cache fournissant une date d’expiration explicite sont présents, comme <code class="docutils literal notranslate"><span class="pre">Expires</span></code> ou <code class="docutils literal notranslate"><span class="pre">Cache-Control</span></code>. <a class="reference internal" href="../ref/middleware.html#django.middleware.cache.UpdateCacheMiddleware" title="django.middleware.cache.UpdateCacheMiddleware"><code class="xref py py-class docutils literal notranslate"><span class="pre">UpdateCacheMiddleware</span></code></a> et <a class="reference internal" href="../ref/utils.html#django.utils.cache.add_never_cache_headers" title="django.utils.cache.add_never_cache_headers"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_never_cache_headers()</span></code></a> appellent <code class="docutils literal notranslate"><span class="pre">patch_response_headers()</span></code> et sont donc également touchés par ce changement.</p>
</li>
<li><p class="first">Dans les gabarits d’administration, <code class="docutils literal notranslate"><span class="pre">&lt;p</span> <span class="pre">class=&quot;help&quot;&gt;</span></code> est remplacé par une balise <code class="docutils literal notranslate"><span class="pre">&lt;div&gt;</span></code> pour permettre d’inclure des listes dans le texte d’aide.</p>
</li>
<li><p class="first"><a class="reference internal" href="../ref/middleware.html#django.middleware.http.ConditionalGetMiddleware" title="django.middleware.http.ConditionalGetMiddleware"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConditionalGetMiddleware</span></code></a> ne définit plus l’en-tête <code class="docutils literal notranslate"><span class="pre">Date</span></code> car ce sont les serveurs Web qui le définissent. L’en-tête <code class="docutils literal notranslate"><span class="pre">Content-Length</span></code> n’est lui aussi plus défini par cet intergiciel car cette tâche est dévolue à <a class="reference internal" href="../ref/middleware.html#django.middleware.common.CommonMiddleware" title="django.middleware.common.CommonMiddleware"><code class="xref py py-class docutils literal notranslate"><span class="pre">CommonMiddleware</span></code></a>.</p>
<p>If you have a middleware that modifies a response’s content and appears
before <code class="docutils literal notranslate"><span class="pre">CommonMiddleware</span></code> in the <code class="docutils literal notranslate"><span class="pre">MIDDLEWARE</span></code> or <code class="docutils literal notranslate"><span class="pre">MIDDLEWARE_CLASSES</span></code>
settings, you must reorder your middleware so that responses aren’t modified
after <code class="docutils literal notranslate"><span class="pre">Content-Length</span></code> is set, or have the response modifying middleware
reset the <code class="docutils literal notranslate"><span class="pre">Content-Length</span></code> header.</p>
</li>
<li><p class="first"><a class="reference internal" href="../ref/applications.html#django.apps.AppConfig.get_model" title="django.apps.AppConfig.get_model"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_model()</span></code></a> et <a class="reference internal" href="../ref/applications.html#django.apps.AppConfig.get_models" title="django.apps.AppConfig.get_models"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_models()</span></code></a> produisent l’erreur <a class="reference internal" href="../ref/exceptions.html#django.core.exceptions.AppRegistryNotReady" title="django.core.exceptions.AppRegistryNotReady"><code class="xref py py-exc docutils literal notranslate"><span class="pre">AppRegistryNotReady</span></code></a> s’ils sont appelés avant que les modèles de toutes les applications aient été chargés. Précédemment, ils n’exigeaient que le chargement des modèles de l’application cible, ce qui pouvait renvoyer des modèles dont certaines relations n’étaient pas encore définies. Si vous avez absolument besoin de l’ancien comportement de <code class="docutils literal notranslate"><span class="pre">get_model()</span></code>, définissez le paramètre <code class="docutils literal notranslate"><span class="pre">require_ready</span></code> à <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</li>
<li><p class="first">L’attribut non utilisé <code class="docutils literal notranslate"><span class="pre">BaseCommand.can_import_settings</span></code> a été supprimé.</p>
</li>
<li><p class="first">Le décorateur non documenté <code class="docutils literal notranslate"><span class="pre">django.utils.functional.lazy_property</span></code> a été supprimé.</p>
</li>
<li><p class="first">Par cohérence avec les requêtes sans parties multiples, <code class="docutils literal notranslate"><span class="pre">MultiPartParser.parse()</span></code> définit dorénavant <code class="docutils literal notranslate"><span class="pre">request.POST</span></code> comme non modifiable. Si vous devez modifier cette structure <code class="docutils literal notranslate"><span class="pre">QueryDict</span></code>, vous devez la copier préalablement, par exemple avec <code class="docutils literal notranslate"><span class="pre">request.POST.copy()</span></code>.</p>
</li>
<li><p class="first">La prise en charge de <code class="docutils literal notranslate"><span class="pre">cx_Oracle</span></code> &lt; 5.2 a été abandonnée.</p>
</li>
<li><p class="first">La prise en charge de IPython &lt; 1.0 a été abandonnée dans la commande <code class="docutils literal notranslate"><span class="pre">shell</span></code>.</p>
</li>
<li><p class="first">The signature of private API <code class="docutils literal notranslate"><span class="pre">Widget.build_attrs()</span></code> changed from
<code class="docutils literal notranslate"><span class="pre">extra_attrs=None,</span> <span class="pre">**kwargs</span></code> to <code class="docutils literal notranslate"><span class="pre">base_attrs,</span> <span class="pre">extra_attrs=None</span></code>.</p>
</li>
<li><p class="first">File-like objects (e.g., <a class="reference external" href="https://docs.python.org/3/library/io.html#io.StringIO" title="(disponible dans Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">StringIO</span></code></a> and <a class="reference external" href="https://docs.python.org/3/library/io.html#io.BytesIO" title="(disponible dans Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">BytesIO</span></code></a>)
uploaded to an <a class="reference internal" href="../ref/models/fields.html#django.db.models.ImageField" title="django.db.models.ImageField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ImageField</span></code></a> using the test client
now require a <code class="docutils literal notranslate"><span class="pre">name</span></code> attribute with a value that passes the
<a class="reference internal" href="../ref/validators.html#django.core.validators.validate_image_file_extension" title="django.core.validators.validate_image_file_extension"><code class="xref py py-data docutils literal notranslate"><span class="pre">validate_image_file_extension</span></code></a> validator.
See the note in <a class="reference internal" href="../topics/testing/tools.html#django.test.Client.post" title="django.test.Client.post"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Client.post()</span></code></a>.</p>
</li>
<li><p class="first"><a class="reference internal" href="../ref/models/fields.html#django.db.models.FileField" title="django.db.models.FileField"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileField</span></code></a> now moves rather than copies the file
it receives. With the default file upload settings, files larger than
<a class="reference internal" href="../ref/settings.html#std:setting-FILE_UPLOAD_MAX_MEMORY_SIZE"><code class="xref std std-setting docutils literal notranslate"><span class="pre">FILE_UPLOAD_MAX_MEMORY_SIZE</span></code></a> now have the same permissions as
temporary files (often <code class="docutils literal notranslate"><span class="pre">0o600</span></code>) rather than the system’s standard umask
(often <code class="docutils literal notranslate"><span class="pre">0o6644</span></code>). Set the <a class="reference internal" href="../ref/settings.html#std:setting-FILE_UPLOAD_PERMISSIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">FILE_UPLOAD_PERMISSIONS</span></code></a> if you need
the same permission regardless of file size.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="s-features-deprecated-in-1-11">
<span id="s-deprecated-features-1-11"></span><span id="features-deprecated-in-1-11"></span><span id="deprecated-features-1-11"></span><h2>Fonctionnalités rendues obsolètes dans Django 1.11<a class="headerlink" href="#features-deprecated-in-1-11" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="s-models-permalink-decorator">
<span id="models-permalink-decorator"></span><h3>Le décorateur <code class="docutils literal notranslate"><span class="pre">models.permalink()</span></code><a class="headerlink" href="#models-permalink-decorator" title="Lien permanent vers ce titre">¶</a></h3>
<p>Utilisez <a class="reference internal" href="../ref/urlresolvers.html#django.urls.reverse" title="django.urls.reverse"><code class="xref py py-func docutils literal notranslate"><span class="pre">django.urls.reverse()</span></code></a> à la place. Par exemple&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="k">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="o">...</span>

    <span class="nd">@models</span><span class="o">.</span><span class="n">permalink</span>
    <span class="k">def</span> <span class="nf">url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="s1">&#39;guitarist_detail&#39;</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">slug</span><span class="p">])</span>
</pre></div>
</div>
<p>devient&nbsp;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="k">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">django.urls</span> <span class="k">import</span> <span class="n">reverse</span>

<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="o">...</span>

    <span class="k">def</span> <span class="nf">url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;guitarist_detail&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">slug</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="section" id="s-id2">
<span id="id2"></span><h3>Divers<a class="headerlink" href="#id2" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li>Les vues fonctions <code class="docutils literal notranslate"><span class="pre">login()</span></code> et <code class="docutils literal notranslate"><span class="pre">logout()</span></code> de <code class="docutils literal notranslate"><span class="pre">contrib.auth</span></code> ont été rendues obsolètes en faveur des nouvelles fonctions classes <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.views.LoginView" title="django.contrib.auth.views.LoginView"><code class="xref py py-class docutils literal notranslate"><span class="pre">LoginView</span></code></a> et <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.views.LogoutView" title="django.contrib.auth.views.LogoutView"><code class="xref py py-class docutils literal notranslate"><span class="pre">LogoutView</span></code></a>.</li>
<li>Le paramètre inutilisé <code class="docutils literal notranslate"><span class="pre">extra_context</span></code> de <code class="docutils literal notranslate"><span class="pre">contrib.auth.views.logout_then_login()</span></code> est obsolète.</li>
<li>Les vues fonctions <code class="docutils literal notranslate"><span class="pre">password_change()</span></code>, <code class="docutils literal notranslate"><span class="pre">password_change_done()</span></code>, <code class="docutils literal notranslate"><span class="pre">password_reset()</span></code>, <code class="docutils literal notranslate"><span class="pre">password_reset_done()</span></code>, <code class="docutils literal notranslate"><span class="pre">password_reset_confirm()</span></code> et <code class="docutils literal notranslate"><span class="pre">password_reset_complete()</span></code> de <code class="docutils literal notranslate"><span class="pre">contrib.auth</span></code> ont été rendues obsolètes en faveur des nouvelles vues classes <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.views.PasswordChangeView" title="django.contrib.auth.views.PasswordChangeView"><code class="xref py py-class docutils literal notranslate"><span class="pre">PasswordChangeView</span></code></a>, <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.views.PasswordChangeDoneView" title="django.contrib.auth.views.PasswordChangeDoneView"><code class="xref py py-class docutils literal notranslate"><span class="pre">PasswordChangeDoneView</span></code></a>, <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.views.PasswordResetView" title="django.contrib.auth.views.PasswordResetView"><code class="xref py py-class docutils literal notranslate"><span class="pre">PasswordResetView</span></code></a>, <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.views.PasswordResetDoneView" title="django.contrib.auth.views.PasswordResetDoneView"><code class="xref py py-class docutils literal notranslate"><span class="pre">PasswordResetDoneView</span></code></a>, <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.views.PasswordResetConfirmView" title="django.contrib.auth.views.PasswordResetConfirmView"><code class="xref py py-class docutils literal notranslate"><span class="pre">PasswordResetConfirmView</span></code></a> et <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.views.PasswordResetCompleteView" title="django.contrib.auth.views.PasswordResetCompleteView"><code class="xref py py-class docutils literal notranslate"><span class="pre">PasswordResetCompleteView</span></code></a>.</li>
<li><code class="docutils literal notranslate"><span class="pre">django.test.runner.setup_databases()</span></code> a été déplacé dans <a class="reference internal" href="../topics/testing/advanced.html#django.test.utils.setup_databases" title="django.test.utils.setup_databases"><code class="xref py py-func docutils literal notranslate"><span class="pre">django.test.utils.setup_databases()</span></code></a>. L’ancien emplacement est obsolète.</li>
<li><code class="docutils literal notranslate"><span class="pre">django.utils.translation.string_concat()</span></code> a été rendue obsolète en faveur de <a class="reference internal" href="../ref/utils.html#django.utils.text.format_lazy" title="django.utils.text.format_lazy"><code class="xref py py-func docutils literal notranslate"><span class="pre">django.utils.text.format_lazy()</span></code></a>. <code class="docutils literal notranslate"><span class="pre">string_concat(*strings)</span></code> peut être remplacé par <code class="docutils literal notranslate"><span class="pre">format_lazy('{}'</span> <span class="pre">*</span> <span class="pre">len(strings),</span> <span class="pre">*strings)</span></code>.</li>
<li>Pour le moteur de cache <code class="docutils literal notranslate"><span class="pre">PyLibMCCache</span></code>, la transmission de réglages de comportement <code class="docutils literal notranslate"><span class="pre">pylibmc</span></code> comme attribut de premier niveau dans <code class="docutils literal notranslate"><span class="pre">OPTIONS</span></code> est obsolète. Définissez plutôt ces réglages sous une clé <code class="docutils literal notranslate"><span class="pre">behaviors</span></code> dans <code class="docutils literal notranslate"><span class="pre">OPTIONS</span></code>.</li>
<li>Le paramètre <code class="docutils literal notranslate"><span class="pre">host</span></code> de <code class="docutils literal notranslate"><span class="pre">django.utils.http.is_safe_url()</span></code> a été rendu obsolète en faveur du nouveau paramètre <code class="docutils literal notranslate"><span class="pre">allowed_hosts</span></code>.</li>
<li>Le masquage des exceptions produites lors du rendu de la balise de gabarit <a class="reference internal" href="../ref/templates/builtins.html#std:templatetag-include"><code class="xref std std-ttag docutils literal notranslate"><span class="pre">{%</span> <span class="pre">include</span> <span class="pre">%}</span></code></a> est obsolète car ce comportement prêtait parfois à confusion. Avec Django 2.1, les exceptions seront propagées.</li>
<li><code class="docutils literal notranslate"><span class="pre">DatabaseIntrospection.get_indexes()</span></code> a été rendue obsolète en faveur de <code class="docutils literal notranslate"><span class="pre">DatabaseIntrospection.get_constraints()</span></code>.</li>
<li><a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.authenticate" title="django.contrib.auth.authenticate"><code class="xref py py-func docutils literal notranslate"><span class="pre">authenticate()</span></code></a> transmet dorénavant un paramètre <code class="docutils literal notranslate"><span class="pre">request</span></code> à la méthode <code class="docutils literal notranslate"><span class="pre">authenticate()</span></code> des moteurs d’authentification. La prise en charge des méthodes qui n’acceptent pas <code class="docutils literal notranslate"><span class="pre">request</span></code> comme premier paramètre de position sera supprimée dans Django 2.1.</li>
<li>Le réglage <code class="docutils literal notranslate"><span class="pre">USE_ETAGS</span></code> a été rendu obsolète en faveur de <a class="reference internal" href="../ref/middleware.html#django.middleware.http.ConditionalGetMiddleware" title="django.middleware.http.ConditionalGetMiddleware"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConditionalGetMiddleware</span></code></a> qui ajoute désormais l’en-tête <code class="docutils literal notranslate"><span class="pre">ETag</span></code> aux réponses sans tenir compte du réglage. <code class="docutils literal notranslate"><span class="pre">CommonMiddleware</span></code> et <code class="docutils literal notranslate"><span class="pre">django.utils.cache.patch_response_headers()</span></code> ne définiront plus d’en-tête <code class="docutils literal notranslate"><span class="pre">ETag</span></code> à la fin de la période d’obsolescence.</li>
<li><code class="docutils literal notranslate"><span class="pre">Model._meta.has_auto_field</span></code> a été rendu obsolète en faveur du contrôle <code class="docutils literal notranslate"><span class="pre">Model._meta.auto_field</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">None</span></code>.</li>
<li>L’emploi de groupes d’expression régulière avec <code class="docutils literal notranslate"><span class="pre">iLmsu#</span></code> dans  <code class="docutils literal notranslate"><span class="pre">url()</span></code> est obsolète. Le seul groupe utile est <code class="docutils literal notranslate"><span class="pre">(?i)</span></code> pour les URL non sensibles à la casse&nbsp;; toutefois, ces URL ne sont pas à encourager car ils créent des entrées multiples pour les moteurs de recherche, par exemple. Une solution alternative pourrait être de créer une fonction <a class="reference internal" href="../ref/urls.html#django.conf.urls.handler404" title="django.conf.urls.handler404"><code class="xref py py-data docutils literal notranslate"><span class="pre">handler404</span></code></a> à la recherche de caractères majuscules dans l’URL et redirigeant vers l’équivalent en minuscules.</li>
<li>Le paramètre <code class="docutils literal notranslate"><span class="pre">renderer</span></code> a été ajouté à la méthode <a class="reference internal" href="../ref/forms/widgets.html#django.forms.Widget.render" title="django.forms.Widget.render"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Widget.render()</span></code></a>. Les méthodes qui n’acceptent pas ce paramètre fonctionneront encore le temps de la période d’obsolescence.</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Notes de publication de Django 1.11</a><ul>
<li><a class="reference internal" href="#python-compatibility">Compatibilité Python</a></li>
<li><a class="reference internal" href="#deprecating-warnings-are-no-longer-loud-by-default">Les avertissements d’obsolescence ne sont plus visibles par défaut</a></li>
<li><a class="reference internal" href="#what-s-new-in-django-1-11">Quoi de neuf dans Django 1.11</a><ul>
<li><a class="reference internal" href="#class-based-model-indexes">Index de modèles basés sur les classes</a></li>
<li><a class="reference internal" href="#template-based-widget-rendering">Rendu des composants HTML basé sur des gabarits</a></li>
<li><a class="reference internal" href="#subquery-expressions">Expressions <code class="docutils literal notranslate"><span class="pre">Subquery</span></code></a></li>
<li><a class="reference internal" href="#minor-features">Fonctionnalités mineures</a><ul>
<li><a class="reference internal" href="#django-contrib-admin"><code class="docutils literal notranslate"><span class="pre">django.contrib.admin</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-auth"><code class="docutils literal notranslate"><span class="pre">django.contrib.auth</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-contenttypes"><code class="docutils literal notranslate"><span class="pre">django.contrib.contenttypes</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-gis"><code class="docutils literal notranslate"><span class="pre">django.contrib.gis</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-postgres"><code class="docutils literal notranslate"><span class="pre">django.contrib.postgres</span></code></a></li>
<li><a class="reference internal" href="#cache">Cache</a></li>
<li><a class="reference internal" href="#csrf">CSRF</a></li>
<li><a class="reference internal" href="#database-backends">Moteurs de base de données</a></li>
<li><a class="reference internal" href="#email">Email</a></li>
<li><a class="reference internal" href="#file-storage">Stockage de fichier</a></li>
<li><a class="reference internal" href="#forms">Formulaires</a></li>
<li><a class="reference internal" href="#internationalization">Internationalisation</a></li>
<li><a class="reference internal" href="#management-commands">Commandes d’administration</a></li>
<li><a class="reference internal" href="#migrations">Migrations</a></li>
<li><a class="reference internal" href="#models">Modèles</a></li>
<li><a class="reference internal" href="#requests-and-responses">Requêtes et réponses</a></li>
<li><a class="reference internal" href="#serialization">Sérialisation</a></li>
<li><a class="reference internal" href="#templates">Gabarits</a></li>
<li><a class="reference internal" href="#tests">Tests</a></li>
<li><a class="reference internal" href="#validators">Validateurs</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#backwards-incompatible-changes-in-1-11">Changements incompatibles avec les anciennes versions dans Django 1.11</a><ul>
<li><a class="reference internal" href="#id1"><code class="docutils literal notranslate"><span class="pre">django.contrib.gis</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-staticfiles"><code class="docutils literal notranslate"><span class="pre">django.contrib.staticfiles</span></code></a></li>
<li><a class="reference internal" href="#database-backend-api">API de moteur de base de données</a></li>
<li><a class="reference internal" href="#dropped-support-for-postgresql-9-2-and-postgis-2-0">Abandon de la prise en charge de PostgreSQL 9.2 et PostGIS 2.0</a></li>
<li><a class="reference internal" href="#liveservertestcase-binds-to-port-zero"><code class="docutils literal notranslate"><span class="pre">LiveServerTestCase</span></code> se lie au port zéro</a></li>
<li><a class="reference internal" href="#protection-against-insecure-redirects-in-django-contrib-auth-and-i18n-views">Protection contre les redirections non sûres dans les vues <code class="docutils literal notranslate"><span class="pre">django.contrib.auth</span></code> et <code class="docutils literal notranslate"><span class="pre">i18n</span></code></a></li>
<li><a class="reference internal" href="#queryset-get-or-create-and-update-or-create-validate-arguments"><code class="docutils literal notranslate"><span class="pre">QuerySet.get_or_create()</span></code> et <code class="docutils literal notranslate"><span class="pre">update_or_create()</span></code> valident leurs paramètres</a></li>
<li><a class="reference internal" href="#pytz-is-a-required-dependency-and-support-for-settings-time-zone-none-is-removed"><code class="docutils literal notranslate"><span class="pre">pytz</span></code> est une dépendance obligatoire et la prise en charge de <code class="docutils literal notranslate"><span class="pre">settings.TIME_ZONE</span> <span class="pre">=</span> <span class="pre">None</span></code> est supprimée</a></li>
<li><a class="reference internal" href="#html-changes-in-admin-templates">Changements HTML dans les gabarits d’administration</a></li>
<li><a class="reference internal" href="#changes-due-to-the-introduction-of-template-based-widget-rendering">Changements dus à l’introduction du rendu des composants HTML sur la base de gabarits</a></li>
<li><a class="reference internal" href="#django-template-backends-django-template-render-prohibits-non-dict-context"><code class="docutils literal notranslate"><span class="pre">django.template.backends.django.Template.render()</span></code> interdit les contextes non dictionnaires</a></li>
<li><a class="reference internal" href="#model-state-changes-in-migration-operations">Modifications des états de modèles dans les opérations de migration</a></li>
<li><a class="reference internal" href="#server-side-cursors-on-postgresql">Server-side cursors on PostgreSQL</a></li>
<li><a class="reference internal" href="#miscellaneous">Divers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#features-deprecated-in-1-11">Fonctionnalités rendues obsolètes dans Django 1.11</a><ul>
<li><a class="reference internal" href="#models-permalink-decorator">Le décorateur <code class="docutils literal notranslate"><span class="pre">models.permalink()</span></code></a></li>
<li><a class="reference internal" href="#id2">Divers</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Sujet précédent</h4>
  <p class="topless"><a href="1.11.1.html"
                        title="Chapitre précédent">Notes de publication de Django 1.11.1</a></p>
  <h4>Sujet suivant</h4>
  <p class="topless"><a href="1.10.8.html"
                        title="Chapitre suivant">Notes de publication de Django 1.10.8</a></p>
  <div role="note" aria-label="source link">
    <h3>Cette page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/releases/1.11.txt"
            rel="nofollow">Montrer le code source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Recherche rapide</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
              <h3>Last update:</h3>
              <p class="topless">oct. 29, 2020</p>
          </div>
        
      
    </div>

    <div id="ft">
      <div class="nav">
    &laquo; <a href="1.11.1.html" title="Notes de publication de Django 1.11.1">previous</a>
     |
    <a href="index.html" title="Notes de publication" accesskey="U">up</a>
   |
    <a href="1.10.8.html" title="Notes de publication de Django 1.10.8">next</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>